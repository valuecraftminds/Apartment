function Ky(n,c){for(var d=0;d<c.length;d++){const h=c[d];if(typeof h!="string"&&!Array.isArray(h)){for(const g in h)if(g!=="default"&&!(g in n)){const m=Object.getOwnPropertyDescriptor(h,g);m&&Object.defineProperty(n,g,m.get?m:{enumerable:!0,get:()=>h[g]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))h(g);new MutationObserver(g=>{for(const m of g)if(m.type==="childList")for(const w of m.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&h(w)}).observe(document,{childList:!0,subtree:!0});function d(g){const m={};return g.integrity&&(m.integrity=g.integrity),g.referrerPolicy&&(m.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?m.credentials="include":g.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function h(g){if(g.ep)return;g.ep=!0;const m=d(g);fetch(g.href,m)}})();var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var O0={exports:{}},To={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function Jy(){if($g)return To;$g=1;var n=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function d(h,g,m){var w=null;if(m!==void 0&&(w=""+m),g.key!==void 0&&(w=""+g.key),"key"in g){m={};for(var j in g)j!=="key"&&(m[j]=g[j])}else m=g;return g=m.ref,{$$typeof:n,type:h,key:w,ref:g!==void 0?g:null,props:m}}return To.Fragment=c,To.jsx=d,To.jsxs=d,To}var Zg;function eb(){return Zg||(Zg=1,O0.exports=Jy()),O0.exports}var e=eb(),B0={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function tb(){if(Qg)return Ct;Qg=1;var n=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),w=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.iterator;function _(K){return K===null||typeof K!="object"?null:(K=E&&K[E]||K["@@iterator"],typeof K=="function"?K:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,D={};function G(K,xe,Le){this.props=K,this.context=xe,this.refs=D,this.updater=Le||M}G.prototype.isReactComponent={},G.prototype.setState=function(K,xe){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,xe,"setState")},G.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function R(){}R.prototype=G.prototype;function L(K,xe,Le){this.props=K,this.context=xe,this.refs=D,this.updater=Le||M}var O=L.prototype=new R;O.constructor=L,I(O,G.prototype),O.isPureReactComponent=!0;var P=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function q(K,xe,Le,ye,ie,Re){return Le=Re.ref,{$$typeof:n,type:K,key:xe,ref:Le!==void 0?Le:null,props:Re}}function Y(K,xe){return q(K.type,xe,void 0,void 0,void 0,K.props)}function $(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function ce(K){var xe={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Le){return xe[Le]})}var he=/\/+/g;function de(K,xe){return typeof K=="object"&&K!==null&&K.key!=null?ce(""+K.key):xe.toString(36)}function ne(){}function J(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(ne,ne):(K.status="pending",K.then(function(xe){K.status==="pending"&&(K.status="fulfilled",K.value=xe)},function(xe){K.status==="pending"&&(K.status="rejected",K.reason=xe)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function z(K,xe,Le,ye,ie){var Re=typeof K;(Re==="undefined"||Re==="boolean")&&(K=null);var oe=!1;if(K===null)oe=!0;else switch(Re){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(K.$$typeof){case n:case c:oe=!0;break;case S:return oe=K._init,z(oe(K._payload),xe,Le,ye,ie)}}if(oe)return ie=ie(K),oe=ye===""?"."+de(K,0):ye,P(ie)?(Le="",oe!=null&&(Le=oe.replace(he,"$&/")+"/"),z(ie,xe,Le,"",function(Ie){return Ie})):ie!=null&&($(ie)&&(ie=Y(ie,Le+(ie.key==null||K&&K.key===ie.key?"":(""+ie.key).replace(he,"$&/")+"/")+oe)),xe.push(ie)),1;oe=0;var Ve=ye===""?".":ye+":";if(P(K))for(var te=0;te<K.length;te++)ye=K[te],Re=Ve+de(ye,te),oe+=z(ye,xe,Le,Re,ie);else if(te=_(K),typeof te=="function")for(K=te.call(K),te=0;!(ye=K.next()).done;)ye=ye.value,Re=Ve+de(ye,te++),oe+=z(ye,xe,Le,Re,ie);else if(Re==="object"){if(typeof K.then=="function")return z(J(K),xe,Le,ye,ie);throw xe=String(K),Error("Objects are not valid as a React child (found: "+(xe==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":xe)+"). If you meant to render a collection of children, use an array instead.")}return oe}function V(K,xe,Le){if(K==null)return K;var ye=[],ie=0;return z(K,ye,"","",function(Re){return xe.call(Le,Re,ie++)}),ye}function W(K){if(K._status===-1){var xe=K._result;xe=xe(),xe.then(function(Le){(K._status===0||K._status===-1)&&(K._status=1,K._result=Le)},function(Le){(K._status===0||K._status===-1)&&(K._status=2,K._result=Le)}),K._status===-1&&(K._status=0,K._result=xe)}if(K._status===1)return K._result.default;throw K._result}var se=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function le(){}return Ct.Children={map:V,forEach:function(K,xe,Le){V(K,function(){xe.apply(this,arguments)},Le)},count:function(K){var xe=0;return V(K,function(){xe++}),xe},toArray:function(K){return V(K,function(xe){return xe})||[]},only:function(K){if(!$(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Ct.Component=G,Ct.Fragment=d,Ct.Profiler=g,Ct.PureComponent=L,Ct.StrictMode=h,Ct.Suspense=C,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(K){return Q.H.useMemoCache(K)}},Ct.cache=function(K){return function(){return K.apply(null,arguments)}},Ct.cloneElement=function(K,xe,Le){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var ye=I({},K.props),ie=K.key,Re=void 0;if(xe!=null)for(oe in xe.ref!==void 0&&(Re=void 0),xe.key!==void 0&&(ie=""+xe.key),xe)!F.call(xe,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&xe.ref===void 0||(ye[oe]=xe[oe]);var oe=arguments.length-2;if(oe===1)ye.children=Le;else if(1<oe){for(var Ve=Array(oe),te=0;te<oe;te++)Ve[te]=arguments[te+2];ye.children=Ve}return q(K.type,ie,void 0,void 0,Re,ye)},Ct.createContext=function(K){return K={$$typeof:w,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:m,_context:K},K},Ct.createElement=function(K,xe,Le){var ye,ie={},Re=null;if(xe!=null)for(ye in xe.key!==void 0&&(Re=""+xe.key),xe)F.call(xe,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(ie[ye]=xe[ye]);var oe=arguments.length-2;if(oe===1)ie.children=Le;else if(1<oe){for(var Ve=Array(oe),te=0;te<oe;te++)Ve[te]=arguments[te+2];ie.children=Ve}if(K&&K.defaultProps)for(ye in oe=K.defaultProps,oe)ie[ye]===void 0&&(ie[ye]=oe[ye]);return q(K,Re,void 0,void 0,null,ie)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(K){return{$$typeof:j,render:K}},Ct.isValidElement=$,Ct.lazy=function(K){return{$$typeof:S,_payload:{_status:-1,_result:K},_init:W}},Ct.memo=function(K,xe){return{$$typeof:b,type:K,compare:xe===void 0?null:xe}},Ct.startTransition=function(K){var xe=Q.T,Le={};Q.T=Le;try{var ye=K(),ie=Q.S;ie!==null&&ie(Le,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(le,se)}catch(Re){se(Re)}finally{Q.T=xe}},Ct.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Ct.use=function(K){return Q.H.use(K)},Ct.useActionState=function(K,xe,Le){return Q.H.useActionState(K,xe,Le)},Ct.useCallback=function(K,xe){return Q.H.useCallback(K,xe)},Ct.useContext=function(K){return Q.H.useContext(K)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(K,xe){return Q.H.useDeferredValue(K,xe)},Ct.useEffect=function(K,xe,Le){var ye=Q.H;if(typeof Le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ye.useEffect(K,xe)},Ct.useId=function(){return Q.H.useId()},Ct.useImperativeHandle=function(K,xe,Le){return Q.H.useImperativeHandle(K,xe,Le)},Ct.useInsertionEffect=function(K,xe){return Q.H.useInsertionEffect(K,xe)},Ct.useLayoutEffect=function(K,xe){return Q.H.useLayoutEffect(K,xe)},Ct.useMemo=function(K,xe){return Q.H.useMemo(K,xe)},Ct.useOptimistic=function(K,xe){return Q.H.useOptimistic(K,xe)},Ct.useReducer=function(K,xe,Le){return Q.H.useReducer(K,xe,Le)},Ct.useRef=function(K){return Q.H.useRef(K)},Ct.useState=function(K){return Q.H.useState(K)},Ct.useSyncExternalStore=function(K,xe,Le){return Q.H.useSyncExternalStore(K,xe,Le)},Ct.useTransition=function(){return Q.H.useTransition()},Ct.version="19.1.1",Ct}var Wg;function Lh(){return Wg||(Wg=1,B0.exports=tb()),B0.exports}var N=Lh();const na=Cd(N);var L0={exports:{}},Mo={},P0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function ab(){return Kg||(Kg=1,function(n){function c(V,W){var se=V.length;V.push(W);e:for(;0<se;){var le=se-1>>>1,K=V[le];if(0<g(K,W))V[le]=W,V[se]=K,se=le;else break e}}function d(V){return V.length===0?null:V[0]}function h(V){if(V.length===0)return null;var W=V[0],se=V.pop();if(se!==W){V[0]=se;e:for(var le=0,K=V.length,xe=K>>>1;le<xe;){var Le=2*(le+1)-1,ye=V[Le],ie=Le+1,Re=V[ie];if(0>g(ye,se))ie<K&&0>g(Re,ye)?(V[le]=Re,V[ie]=se,le=ie):(V[le]=ye,V[Le]=se,le=Le);else if(ie<K&&0>g(Re,se))V[le]=Re,V[ie]=se,le=ie;else break e}}return W}function g(V,W){var se=V.sortIndex-W.sortIndex;return se!==0?se:V.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;n.unstable_now=function(){return m.now()}}else{var w=Date,j=w.now();n.unstable_now=function(){return w.now()-j}}var C=[],b=[],S=1,E=null,_=3,M=!1,I=!1,D=!1,G=!1,R=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function P(V){for(var W=d(b);W!==null;){if(W.callback===null)h(b);else if(W.startTime<=V)h(b),W.sortIndex=W.expirationTime,c(C,W);else break;W=d(b)}}function Q(V){if(D=!1,P(V),!I)if(d(C)!==null)I=!0,F||(F=!0,de());else{var W=d(b);W!==null&&z(Q,W.startTime-V)}}var F=!1,q=-1,Y=5,$=-1;function ce(){return G?!0:!(n.unstable_now()-$<Y)}function he(){if(G=!1,F){var V=n.unstable_now();$=V;var W=!0;try{e:{I=!1,D&&(D=!1,L(q),q=-1),M=!0;var se=_;try{t:{for(P(V),E=d(C);E!==null&&!(E.expirationTime>V&&ce());){var le=E.callback;if(typeof le=="function"){E.callback=null,_=E.priorityLevel;var K=le(E.expirationTime<=V);if(V=n.unstable_now(),typeof K=="function"){E.callback=K,P(V),W=!0;break t}E===d(C)&&h(C),P(V)}else h(C);E=d(C)}if(E!==null)W=!0;else{var xe=d(b);xe!==null&&z(Q,xe.startTime-V),W=!1}}break e}finally{E=null,_=se,M=!1}W=void 0}}finally{W?de():F=!1}}}var de;if(typeof O=="function")de=function(){O(he)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,J=ne.port2;ne.port1.onmessage=he,de=function(){J.postMessage(null)}}else de=function(){R(he,0)};function z(V,W){q=R(function(){V(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(V){switch(_){case 1:case 2:case 3:var W=3;break;default:W=_}var se=_;_=W;try{return V()}finally{_=se}},n.unstable_requestPaint=function(){G=!0},n.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var se=_;_=V;try{return W()}finally{_=se}},n.unstable_scheduleCallback=function(V,W,se){var le=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?le+se:le):se=le,V){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=se+K,V={id:S++,callback:W,priorityLevel:V,startTime:se,expirationTime:K,sortIndex:-1},se>le?(V.sortIndex=se,c(b,V),d(C)===null&&V===d(b)&&(D?(L(q),q=-1):D=!0,z(Q,se-le))):(V.sortIndex=K,c(C,V),I||M||(I=!0,F||(F=!0,de()))),V},n.unstable_shouldYield=ce,n.unstable_wrapCallback=function(V){var W=_;return function(){var se=_;_=W;try{return V.apply(this,arguments)}finally{_=se}}}}(z0)),z0}var Jg;function rb(){return Jg||(Jg=1,P0.exports=ab()),P0.exports}var F0={exports:{}},mr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function sb(){if(em)return mr;em=1;var n=Lh();function c(C){var b="https://react.dev/errors/"+C;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)b+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+C+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var h={d:{f:d,r:function(){throw Error(c(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},g=Symbol.for("react.portal");function m(C,b,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:g,key:E==null?null:""+E,children:C,containerInfo:b,implementation:S}}var w=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function j(C,b){if(C==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return mr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=h,mr.createPortal=function(C,b){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(c(299));return m(C,b,null,S)},mr.flushSync=function(C){var b=w.T,S=h.p;try{if(w.T=null,h.p=2,C)return C()}finally{w.T=b,h.p=S,h.d.f()}},mr.preconnect=function(C,b){typeof C=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,h.d.C(C,b))},mr.prefetchDNS=function(C){typeof C=="string"&&h.d.D(C)},mr.preinit=function(C,b){if(typeof C=="string"&&b&&typeof b.as=="string"){var S=b.as,E=j(S,b.crossOrigin),_=typeof b.integrity=="string"?b.integrity:void 0,M=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;S==="style"?h.d.S(C,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:E,integrity:_,fetchPriority:M}):S==="script"&&h.d.X(C,{crossOrigin:E,integrity:_,fetchPriority:M,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},mr.preinitModule=function(C,b){if(typeof C=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var S=j(b.as,b.crossOrigin);h.d.M(C,{crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&h.d.M(C)},mr.preload=function(C,b){if(typeof C=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var S=b.as,E=j(S,b.crossOrigin);h.d.L(C,S,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},mr.preloadModule=function(C,b){if(typeof C=="string")if(b){var S=j(b.as,b.crossOrigin);h.d.m(C,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else h.d.m(C)},mr.requestFormReset=function(C){h.d.r(C)},mr.unstable_batchedUpdates=function(C,b){return C(b)},mr.useFormState=function(C,b,S){return w.H.useFormState(C,b,S)},mr.useFormStatus=function(){return w.H.useHostTransitionStatus()},mr.version="19.1.1",mr}var tm;function nb(){if(tm)return F0.exports;tm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(c){console.error(c)}}return n(),F0.exports=sb(),F0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am;function lb(){if(am)return Mo;am=1;var n=rb(),c=Lh(),d=nb();function h(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function w(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function j(t){if(m(t)!==t)throw Error(h(188))}function C(t){var r=t.alternate;if(!r){if(r=m(t),r===null)throw Error(h(188));return r!==t?null:t}for(var i=t,f=r;;){var y=i.return;if(y===null)break;var k=y.alternate;if(k===null){if(f=y.return,f!==null){i=f;continue}break}if(y.child===k.child){for(k=y.child;k;){if(k===i)return j(y),t;if(k===f)return j(y),r;k=k.sibling}throw Error(h(188))}if(i.return!==f.return)i=y,f=k;else{for(var B=!1,Z=y.child;Z;){if(Z===i){B=!0,i=y,f=k;break}if(Z===f){B=!0,f=y,i=k;break}Z=Z.sibling}if(!B){for(Z=k.child;Z;){if(Z===i){B=!0,i=k,f=y;break}if(Z===f){B=!0,f=k,i=y;break}Z=Z.sibling}if(!B)throw Error(h(189))}}if(i.alternate!==f)throw Error(h(190))}if(i.tag!==3)throw Error(h(188));return i.stateNode.current===i?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var S=Object.assign,E=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),O=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function de(t){return t===null||typeof t!="object"?null:(t=he&&t[he]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Symbol.for("react.client.reference");function J(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ne?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case I:return"Fragment";case G:return"Profiler";case D:return"StrictMode";case Q:return"Suspense";case F:return"SuspenseList";case $:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case M:return"Portal";case O:return(t.displayName||"Context")+".Provider";case L:return(t._context.displayName||"Context")+".Consumer";case P:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q:return r=t.displayName||null,r!==null?r:J(t.type)||"Memo";case Y:r=t._payload,t=t._init;try{return J(t(r))}catch{}}return null}var z=Array.isArray,V=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},le=[],K=-1;function xe(t){return{current:t}}function Le(t){0>K||(t.current=le[K],le[K]=null,K--)}function ye(t,r){K++,le[K]=t.current,t.current=r}var ie=xe(null),Re=xe(null),oe=xe(null),Ve=xe(null);function te(t,r){switch(ye(oe,r),ye(Re,t),ye(ie,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Ng(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Ng(r),t=jg(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Le(ie),ye(ie,t)}function Ie(){Le(ie),Le(Re),Le(oe)}function $e(t){t.memoizedState!==null&&ye(Ve,t);var r=ie.current,i=jg(r,t.type);r!==i&&(ye(Re,t),ye(ie,i))}function rt(t){Re.current===t&&(Le(ie),Le(Re)),Ve.current===t&&(Le(Ve),Co._currentValue=se)}var Ke=Object.prototype.hasOwnProperty,et=n.unstable_scheduleCallback,Ne=n.unstable_cancelCallback,We=n.unstable_shouldYield,Ye=n.unstable_requestPaint,Me=n.unstable_now,Je=n.unstable_getCurrentPriorityLevel,Ee=n.unstable_ImmediatePriority,be=n.unstable_UserBlockingPriority,Pe=n.unstable_NormalPriority,Bt=n.unstable_LowPriority,mt=n.unstable_IdlePriority,Be=n.log,ot=n.unstable_setDisableYieldValue,we=null,Ze=null;function Et(t){if(typeof Be=="function"&&ot(t),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(we,t)}catch{}}var xt=Math.clz32?Math.clz32:lt,Zt=Math.log,Mt=Math.LN2;function lt(t){return t>>>=0,t===0?32:31-(Zt(t)/Mt|0)|0}var at=256,Qe=4194304;function Kt(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ht(t,r,i){var f=t.pendingLanes;if(f===0)return 0;var y=0,k=t.suspendedLanes,B=t.pingedLanes;t=t.warmLanes;var Z=f&134217727;return Z!==0?(f=Z&~k,f!==0?y=Kt(f):(B&=Z,B!==0?y=Kt(B):i||(i=Z&~t,i!==0&&(y=Kt(i))))):(Z=f&~k,Z!==0?y=Kt(Z):B!==0?y=Kt(B):i||(i=f&~t,i!==0&&(y=Kt(i)))),y===0?0:r!==0&&r!==y&&(r&k)===0&&(k=y&-y,i=r&-r,k>=i||k===32&&(i&4194048)!==0)?r:y}function Pt(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ws(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pl(){var t=at;return at<<=1,(at&4194048)===0&&(at=256),t}function Oi(){var t=Qe;return Qe<<=1,(Qe&62914560)===0&&(Qe=4194304),t}function zt(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function Br(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ko(t,r,i,f,y,k){var B=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var Z=t.entanglements,ue=t.expirationTimes,Se=t.hiddenUpdates;for(i=B&~i;0<i;){var ze=31-xt(i),Ue=1<<ze;Z[ze]=0,ue[ze]=-1;var Ae=Se[ze];if(Ae!==null)for(Se[ze]=null,ze=0;ze<Ae.length;ze++){var Te=Ae[ze];Te!==null&&(Te.lane&=-536870913)}i&=~Ue}f!==0&&Bi(t,f,0),k!==0&&y===0&&t.tag!==0&&(t.suspendedLanes|=k&~(B&~r))}function Bi(t,r,i){t.pendingLanes|=r,t.suspendedLanes&=~r;var f=31-xt(r);t.entangledLanes|=r,t.entanglements[f]=t.entanglements[f]|1073741824|i&4194090}function Sr(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var f=31-xt(i),y=1<<f;y&r|t[f]&r&&(t[f]|=r),i&=~y}}function al(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function za(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Xs(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:Hg(t.type))}function zl(t,r){var i=W.p;try{return W.p=t,r()}finally{W.p=i}}var Ga=Math.random().toString(36).slice(2),Ja="__reactFiber$"+Ga,Ca="__reactProps$"+Ga,vs="__reactContainer$"+Ga,er="__reactEvents$"+Ga,$s="__reactListeners$"+Ga,Ar="__reactHandles$"+Ga,st="__reactResources$"+Ga,Qr="__reactMarker$"+Ga;function rl(t){delete t[Ja],delete t[Ca],delete t[er],delete t[$s],delete t[Ar]}function Da(t){var r=t[Ja];if(r)return r;for(var i=t.parentNode;i;){if(r=i[vs]||i[Ja]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=Ag(t);t!==null;){if(i=t[Ja])return i;t=Ag(t)}return r}t=i,i=t.parentNode}return null}function Lr(t){if(t=t[Ja]||t[vs]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Ns(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(h(33))}function ls(t){var r=t[st];return r||(r=t[st]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Jt(t){t[Qr]=!0}var Jo=new Set,ec={};function tr(t,r){Sa(t,r),Sa(t+"Capture",r)}function Sa(t,r){for(ec[t]=r,t=0;t<r.length;t++)Jo.add(r[t])}var ha=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Li={},is={};function Pi(t){return Ke.call(is,t)?!0:Ke.call(Li,t)?!1:ha.test(t)?is[t]=!0:(Li[t]=!0,!1)}function He(t,r,i){if(Pi(r))if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+i)}}function Fl(t,r,i){if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+i)}}function Ht(t,r,i,f){if(f===null)t.removeAttribute(i);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(r,i,""+f)}}var js,tc;function Rt(t){if(js===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);js=r&&r[1]||"",tc=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+js+t+tc}var Ft=!1;function _t(t,r){if(!t||Ft)return"";Ft=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var Ue=function(){throw Error()};if(Object.defineProperty(Ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ue,[])}catch(Te){var Ae=Te}Reflect.construct(t,[],Ue)}else{try{Ue.call()}catch(Te){Ae=Te}t.call(Ue.prototype)}}else{try{throw Error()}catch(Te){Ae=Te}(Ue=t())&&typeof Ue.catch=="function"&&Ue.catch(function(){})}}catch(Te){if(Te&&Ae&&typeof Te.stack=="string")return[Te.stack,Ae.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=f.DetermineComponentFrameRoot(),B=k[0],Z=k[1];if(B&&Z){var ue=B.split(`
`),Se=Z.split(`
`);for(y=f=0;f<ue.length&&!ue[f].includes("DetermineComponentFrameRoot");)f++;for(;y<Se.length&&!Se[y].includes("DetermineComponentFrameRoot");)y++;if(f===ue.length||y===Se.length)for(f=ue.length-1,y=Se.length-1;1<=f&&0<=y&&ue[f]!==Se[y];)y--;for(;1<=f&&0<=y;f--,y--)if(ue[f]!==Se[y]){if(f!==1||y!==1)do if(f--,y--,0>y||ue[f]!==Se[y]){var ze=`
`+ue[f].replace(" at new "," at ");return t.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",t.displayName)),ze}while(1<=f&&0<=y);break}}}finally{Ft=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?Rt(i):""}function zi(t){switch(t.tag){case 26:case 27:case 5:return Rt(t.type);case 16:return Rt("Lazy");case 13:return Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return _t(t.type,!1);case 11:return _t(t.type.render,!1);case 1:return _t(t.type,!0);case 31:return Rt("Activity");default:return""}}function Ul(t){try{var r="";do r+=zi(t),t=t.return;while(t);return r}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function dr(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Aa(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ks(t){var r=Aa(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),f=""+t[r];if(!t.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var y=i.get,k=i.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return y.call(this)},set:function(B){f=""+B,k.call(this,B)}}),Object.defineProperty(t,r,{enumerable:i.enumerable}),{getValue:function(){return f},setValue:function(B){f=""+B},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Hl(t){t._valueTracker||(t._valueTracker=ks(t))}function pa(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),f="";return t&&(f=Aa(t)?t.checked?"true":"false":t.value),t=f,t!==i?(r.setValue(t),!0):!1}function Pr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ud=/[\n"\\]/g;function Ya(t){return t.replace(Ud,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Qt(t,r,i,f,y,k,B,Z){t.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?t.type=B:t.removeAttribute("type"),r!=null?B==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+dr(r)):t.value!==""+dr(r)&&(t.value=""+dr(r)):B!=="submit"&&B!=="reset"||t.removeAttribute("value"),r!=null?ke(t,B,dr(r)):i!=null?ke(t,B,dr(i)):f!=null&&t.removeAttribute("value"),y==null&&k!=null&&(t.defaultChecked=!!k),y!=null&&(t.checked=y&&typeof y!="function"&&typeof y!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?t.name=""+dr(Z):t.removeAttribute("name")}function Xa(t,r,i,f,y,k,B,Z){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(t.type=k),r!=null||i!=null){if(!(k!=="submit"&&k!=="reset"||r!=null))return;i=i!=null?""+dr(i):"",r=r!=null?""+dr(r):i,Z||r===t.value||(t.value=r),t.defaultValue=r}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,t.checked=Z?t.checked:!!f,t.defaultChecked=!!f,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(t.name=B)}function ke(t,r,i){r==="number"&&Pr(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function ee(t,r,i,f){if(t=t.options,r){r={};for(var y=0;y<i.length;y++)r["$"+i[y]]=!0;for(i=0;i<t.length;i++)y=r.hasOwnProperty("$"+t[i].value),t[i].selected!==y&&(t[i].selected=y),y&&f&&(t[i].defaultSelected=!0)}else{for(i=""+dr(i),r=null,y=0;y<t.length;y++){if(t[y].value===i){t[y].selected=!0,f&&(t[y].defaultSelected=!0);return}r!==null||t[y].disabled||(r=t[y])}r!==null&&(r.selected=!0)}}function ct(t,r,i){if(r!=null&&(r=""+dr(r),r!==t.value&&(t.value=r),i==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=i!=null?""+dr(i):""}function Ra(t,r,i,f){if(r==null){if(f!=null){if(i!=null)throw Error(h(92));if(z(f)){if(1<f.length)throw Error(h(93));f=f[0]}i=f}i==null&&(i=""),r=i}i=dr(r),t.defaultValue=i,f=t.textContent,f===i&&f!==""&&f!==null&&(t.value=f)}function $a(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var Hd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vl(t,r,i){var f=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?f?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":f?t.setProperty(r,i):typeof i!="number"||i===0||Hd.has(r)?r==="float"?t.cssFloat=i:t[r]=(""+i).trim():t[r]=i+"px"}function yr(t,r,i){if(r!=null&&typeof r!="object")throw Error(h(62));if(t=t.style,i!=null){for(var f in i)!i.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?t.setProperty(f,""):f==="float"?t.cssFloat="":t[f]="");for(var y in r)f=r[y],r.hasOwnProperty(y)&&i[y]!==f&&Vl(t,y,f)}else for(var k in r)r.hasOwnProperty(k)&&Vl(t,k,r[k])}function dt(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ga=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ac=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ql(t){return ac.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var sl=null;function bn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cs=null,wn=null;function Ia(t){var r=Lr(t);if(r&&(t=r.stateNode)){var i=t[Ca]||null;e:switch(t=r.stateNode,r.type){case"input":if(Qt(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ya(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var f=i[r];if(f!==t&&f.form===t.form){var y=f[Ca]||null;if(!y)throw Error(h(90));Qt(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<i.length;r++)f=i[r],f.form===t.form&&pa(f)}break e;case"textarea":ct(t,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&ee(t,!!i.multiple,r,!1)}}}var Zs=!1;function os(t,r,i){if(Zs)return t(r,i);Zs=!0;try{var f=t(r);return f}finally{if(Zs=!1,(Cs!==null||wn!==null)&&(Uc(),Cs&&(r=Cs,t=wn,wn=Cs=null,Ia(r),t)))for(r=0;r<t.length;r++)Ia(t[r])}}function ft(t,r){var i=t.stateNode;if(i===null)return null;var f=i[Ca]||null;if(f===null)return null;i=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(t=t.type,f=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!f;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(h(231,r,typeof i));return i}var cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vt=!1;if(cs)try{var wa={};Object.defineProperty(wa,"passive",{get:function(){vt=!0}}),window.addEventListener("test",wa,wa),window.removeEventListener("test",wa,wa)}catch{vt=!1}var Ss=null,nl=null,ll=null;function As(){if(ll)return ll;var t,r=nl,i=r.length,f,y="value"in Ss?Ss.value:Ss.textContent,k=y.length;for(t=0;t<i&&r[t]===y[t];t++);var B=i-t;for(f=1;f<=B&&r[i-f]===y[k-f];f++);return ll=y.slice(t,1<f?1-f:void 0)}function Gl(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Es(){return!0}function vn(){return!1}function Fa(t){function r(i,f,y,k,B){this._reactName=i,this._targetInst=y,this.type=f,this.nativeEvent=k,this.target=B,this.currentTarget=null;for(var Z in t)t.hasOwnProperty(Z)&&(i=t[Z],this[Z]=i?i(k):k[Z]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Es:vn,this.isPropagationStopped=vn,this}return S(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),r}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ts=Fa(_s),ds=S({},_s,{view:0,detail:0}),ur=Fa(ds),Yl,Xl,Nn,$l=S({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ol,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nn&&(Nn&&t.type==="mousemove"?(Yl=t.screenX-Nn.screenX,Xl=t.screenY-Nn.screenY):Xl=Yl=0,Nn=t),Yl)},movementY:function(t){return"movementY"in t?t.movementY:Xl}}),rc=Fa($l),Vd=S({},$l,{dataTransfer:0}),Wt=Fa(Vd),sc=S({},ds,{relatedTarget:0}),jn=Fa(sc),Ms=S({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),qd=Fa(Ms),De=S({},_s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kt=Fa(De),Za=S({},_s,{data:0}),il=Fa(Za),nc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xd(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Yd[t])?!!r[t]:!1}function ol(){return Xd}var Oa=S({},ds,{key:function(t){if(t.key){var r=nc[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gd[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ol,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fi=Fa(Oa),ya=S({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=Fa(ya),Qs=S({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ol}),ea=Fa(Qs),gt=S({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),$d=Fa(gt),ca=S({},$l,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ws=Fa(ca),kn=S({},_s,{newState:0,oldState:0}),Zd=Fa(kn),Wr=[9,13,27,32],dl=cs&&"CompositionEvent"in window,Cn=null;cs&&"documentMode"in document&&(Cn=document.documentMode);var Ui=cs&&"TextEvent"in window&&!Cn,Hi=cs&&(!dl||Cn&&8<Cn&&11>=Cn),Vi=" ",lc=!1;function Ks(t,r){switch(t){case"keyup":return Wr.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zl(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sn=!1;function ul(t,r){switch(t){case"compositionend":return Zl(r);case"keypress":return r.which!==32?null:(lc=!0,Vi);case"textInput":return t=r.data,t===Vi&&lc?null:t;default:return null}}function Qd(t,r){if(Sn)return t==="compositionend"||!dl&&Ks(t,r)?(t=As(),ll=nl=Ss=null,Sn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Hi&&r.locale!=="ko"?null:r.data;default:return null}}var Ds={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ds[t.type]:r==="textarea"}function br(t,r,i,f){Cs?wn?wn.push(f):wn=[f]:Cs=f,r=Xc(r,"onChange"),0<r.length&&(i=new Ts("onChange","change",null,i,f),t.push({event:i,listeners:r}))}var An=null,hr=null;function Wd(t){pg(t,0)}function En(t){var r=Ns(t);if(pa(r))return t}function ic(t,r){if(t==="change")return r}var qi=!1;if(cs){var Er;if(cs){var Gi="oninput"in document;if(!Gi){var Ql=document.createElement("div");Ql.setAttribute("oninput","return;"),Gi=typeof Ql.oninput=="function"}Er=Gi}else Er=!1;qi=Er&&(!document.documentMode||9<document.documentMode)}function _n(){An&&(An.detachEvent("onpropertychange",Lt),hr=An=null)}function Lt(t){if(t.propertyName==="value"&&En(hr)){var r=[];br(r,hr,t,bn(t)),os(Wd,r)}}function Wl(t,r,i){t==="focusin"?(_n(),An=r,hr=i,An.attachEvent("onpropertychange",Lt)):t==="focusout"&&_n()}function U(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return En(hr)}function a(t,r){if(t==="click")return En(r)}function s(t,r){if(t==="input"||t==="change")return En(r)}function l(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var o=typeof Object.is=="function"?Object.is:l;function u(t,r){if(o(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),f=Object.keys(r);if(i.length!==f.length)return!1;for(f=0;f<i.length;f++){var y=i[f];if(!Ke.call(r,y)||!o(t[y],r[y]))return!1}return!0}function x(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p(t,r){var i=x(t);t=0;for(var f;i;){if(i.nodeType===3){if(f=t+i.textContent.length,t<=r&&f>=r)return{node:i,offset:r-t};t=f}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=x(i)}}function v(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?v(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function A(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Pr(t.document);r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=Pr(t.document)}return r}function T(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var H=cs&&"documentMode"in document&&11>=document.documentMode,X=null,ae=null,fe=null,ge=!1;function je(t,r,i){var f=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ge||X==null||X!==Pr(f)||(f=X,"selectionStart"in f&&T(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),fe&&u(fe,f)||(fe=f,f=Xc(ae,"onSelect"),0<f.length&&(r=new Ts("onSelect","select",null,r,i),t.push({event:r,listeners:f}),r.target=X)))}function _e(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var Ge={animationend:_e("Animation","AnimationEnd"),animationiteration:_e("Animation","AnimationIteration"),animationstart:_e("Animation","AnimationStart"),transitionrun:_e("Transition","TransitionRun"),transitionstart:_e("Transition","TransitionStart"),transitioncancel:_e("Transition","TransitionCancel"),transitionend:_e("Transition","TransitionEnd")},Xe={},qe={};cs&&(qe=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Nt(t){if(Xe[t])return Xe[t];if(!Ge[t])return t;var r=Ge[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in qe)return Xe[t]=r[i];return t}var wt=Nt("animationend"),lr=Nt("animationiteration"),_r=Nt("animationstart"),fr=Nt("transitionrun"),ta=Nt("transitionstart"),Qa=Nt("transitioncancel"),xr=Nt("transitionend"),Js=new Map,Rs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rs.push("scrollEnd");function zr(t,r){Js.set(t,r),tr(r,[t])}var oc=new WeakMap;function Kr(t,r){if(typeof t=="object"&&t!==null){var i=oc.get(t);return i!==void 0?i:(r={value:t,source:r,stack:Ul(r)},oc.set(t,r),r)}return{value:t,source:r,stack:Ul(r)}}var Jr=[],Kl=0,Kd=0;function cc(){for(var t=Kl,r=Kd=Kl=0;r<t;){var i=Jr[r];Jr[r++]=null;var f=Jr[r];Jr[r++]=null;var y=Jr[r];Jr[r++]=null;var k=Jr[r];if(Jr[r++]=null,f!==null&&y!==null){var B=f.pending;B===null?y.next=y:(y.next=B.next,B.next=y),f.pending=y}k!==0&&ef(i,y,k)}}function dc(t,r,i,f){Jr[Kl++]=t,Jr[Kl++]=r,Jr[Kl++]=i,Jr[Kl++]=f,Kd|=f,t.lanes|=f,t=t.alternate,t!==null&&(t.lanes|=f)}function Jd(t,r,i,f){return dc(t,r,i,f),uc(t)}function Jl(t,r){return dc(t,null,null,r),uc(t)}function ef(t,r,i){t.lanes|=i;var f=t.alternate;f!==null&&(f.lanes|=i);for(var y=!1,k=t.return;k!==null;)k.childLanes|=i,f=k.alternate,f!==null&&(f.childLanes|=i),k.tag===22&&(t=k.stateNode,t===null||t._visibility&1||(y=!0)),t=k,k=k.return;return t.tag===3?(k=t.stateNode,y&&r!==null&&(y=31-xt(i),t=k.hiddenUpdates,f=t[y],f===null?t[y]=[r]:f.push(r),r.lane=i|536870912),k):null}function uc(t){if(50<po)throw po=0,n0=null,Error(h(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ei={};function L1(t,r,i,f){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(t,r,i,f){return new L1(t,r,i,f)}function eu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function en(t,r){var i=t.alternate;return i===null?(i=Fr(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function tf(t,r){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,r=i.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function hc(t,r,i,f,y,k){var B=0;if(f=t,typeof t=="function")eu(t)&&(B=1);else if(typeof t=="string")B=zy(t,i,ie.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case $:return t=Fr(31,i,r,y),t.elementType=$,t.lanes=k,t;case I:return fl(i.children,y,k,r);case D:B=8,y|=24;break;case G:return t=Fr(12,i,r,y|2),t.elementType=G,t.lanes=k,t;case Q:return t=Fr(13,i,r,y),t.elementType=Q,t.lanes=k,t;case F:return t=Fr(19,i,r,y),t.elementType=F,t.lanes=k,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:case O:B=10;break e;case L:B=9;break e;case P:B=11;break e;case q:B=14;break e;case Y:B=16,f=null;break e}B=29,i=Error(h(130,t===null?"null":typeof t,"")),f=null}return r=Fr(B,i,r,y),r.elementType=t,r.type=f,r.lanes=k,r}function fl(t,r,i,f){return t=Fr(7,t,f,r),t.lanes=i,t}function tu(t,r,i){return t=Fr(6,t,null,r),t.lanes=i,t}function au(t,r,i){return r=Fr(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var ti=[],ai=0,fc=null,xc=0,es=[],ts=0,xl=null,tn=1,an="";function gl(t,r){ti[ai++]=xc,ti[ai++]=fc,fc=t,xc=r}function af(t,r,i){es[ts++]=tn,es[ts++]=an,es[ts++]=xl,xl=t;var f=tn;t=an;var y=32-xt(f)-1;f&=~(1<<y),i+=1;var k=32-xt(r)+y;if(30<k){var B=y-y%5;k=(f&(1<<B)-1).toString(32),f>>=B,y-=B,tn=1<<32-xt(r)+y|i<<y|f,an=k+t}else tn=1<<k|i<<y|f,an=t}function ru(t){t.return!==null&&(gl(t,1),af(t,1,0))}function su(t){for(;t===fc;)fc=ti[--ai],ti[ai]=null,xc=ti[--ai],ti[ai]=null;for(;t===xl;)xl=es[--ts],es[ts]=null,an=es[--ts],es[ts]=null,tn=es[--ts],es[ts]=null}var wr=null,Ea=null,Xt=!1,ml=null,Is=!1,nu=Error(h(519));function pl(t){var r=Error(h(418,""));throw $i(Kr(r,t)),nu}function rf(t){var r=t.stateNode,i=t.type,f=t.memoizedProps;switch(r[Ja]=t,r[Ca]=f,i){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(i=0;i<bo.length;i++)Ot(bo[i],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":Ot("invalid",r),Xa(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Hl(r);break;case"select":Ot("invalid",r);break;case"textarea":Ot("invalid",r),Ra(r,f.value,f.defaultValue,f.children),Hl(r)}i=f.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||f.suppressHydrationWarning===!0||vg(r.textContent,i)?(f.popover!=null&&(Ot("beforetoggle",r),Ot("toggle",r)),f.onScroll!=null&&Ot("scroll",r),f.onScrollEnd!=null&&Ot("scrollend",r),f.onClick!=null&&(r.onclick=$c),r=!0):r=!1,r||pl(t)}function sf(t){for(wr=t.return;wr;)switch(wr.tag){case 5:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:wr=wr.return}}function Yi(t){if(t!==wr)return!1;if(!Xt)return sf(t),Xt=!0,!1;var r=t.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||v0(t.type,t.memoizedProps)),i=!i),i&&Ea&&pl(t),sf(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(h(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(i=t.data,i==="/$"){if(r===0){Ea=hs(t.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++;t=t.nextSibling}Ea=null}}else r===27?(r=Ea,Gn(t.type)?(t=C0,C0=null,Ea=t):Ea=r):Ea=wr?hs(t.stateNode.nextSibling):null;return!0}function Xi(){Ea=wr=null,Xt=!1}function nf(){var t=ml;return t!==null&&(Dr===null?Dr=t:Dr.push.apply(Dr,t),ml=null),t}function $i(t){ml===null?ml=[t]:ml.push(t)}var lu=xe(null),yl=null,rn=null;function Tn(t,r,i){ye(lu,r._currentValue),r._currentValue=i}function sn(t){t._currentValue=lu.current,Le(lu)}function iu(t,r,i){for(;t!==null;){var f=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),t===i)break;t=t.return}}function ou(t,r,i,f){var y=t.child;for(y!==null&&(y.return=t);y!==null;){var k=y.dependencies;if(k!==null){var B=y.child;k=k.firstContext;e:for(;k!==null;){var Z=k;k=y;for(var ue=0;ue<r.length;ue++)if(Z.context===r[ue]){k.lanes|=i,Z=k.alternate,Z!==null&&(Z.lanes|=i),iu(k.return,i,t),f||(B=null);break e}k=Z.next}}else if(y.tag===18){if(B=y.return,B===null)throw Error(h(341));B.lanes|=i,k=B.alternate,k!==null&&(k.lanes|=i),iu(B,i,t),B=null}else B=y.child;if(B!==null)B.return=y;else for(B=y;B!==null;){if(B===t){B=null;break}if(y=B.sibling,y!==null){y.return=B.return,B=y;break}B=B.return}y=B}}function Zi(t,r,i,f){t=null;for(var y=r,k=!1;y!==null;){if(!k){if((y.flags&524288)!==0)k=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var B=y.alternate;if(B===null)throw Error(h(387));if(B=B.memoizedProps,B!==null){var Z=y.type;o(y.pendingProps.value,B.value)||(t!==null?t.push(Z):t=[Z])}}else if(y===Ve.current){if(B=y.alternate,B===null)throw Error(h(387));B.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(t!==null?t.push(Co):t=[Co])}y=y.return}t!==null&&ou(r,t,i,f),r.flags|=262144}function gc(t){for(t=t.firstContext;t!==null;){if(!o(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function bl(t){yl=t,rn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function gr(t){return lf(yl,t)}function mc(t,r){return yl===null&&bl(t),lf(t,r)}function lf(t,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},rn===null){if(t===null)throw Error(h(308));rn=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else rn=rn.next=r;return i}var P1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(i,f){t.push(f)}};this.abort=function(){r.aborted=!0,t.forEach(function(i){return i()})}},z1=n.unstable_scheduleCallback,F1=n.unstable_NormalPriority,Wa={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cu(){return{controller:new P1,data:new Map,refCount:0}}function Qi(t){t.refCount--,t.refCount===0&&z1(F1,function(){t.controller.abort()})}var Wi=null,du=0,ri=0,si=null;function U1(t,r){if(Wi===null){var i=Wi=[];du=0,ri=h0(),si={status:"pending",value:void 0,then:function(f){i.push(f)}}}return du++,r.then(of,of),r}function of(){if(--du===0&&Wi!==null){si!==null&&(si.status="fulfilled");var t=Wi;Wi=null,ri=0,si=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function H1(t,r){var i=[],f={status:"pending",value:null,reason:null,then:function(y){i.push(y)}};return t.then(function(){f.status="fulfilled",f.value=r;for(var y=0;y<i.length;y++)(0,i[y])(r)},function(y){for(f.status="rejected",f.reason=y,y=0;y<i.length;y++)(0,i[y])(void 0)}),f}var cf=V.S;V.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&U1(t,r),cf!==null&&cf(t,r)};var wl=xe(null);function uu(){var t=wl.current;return t!==null?t:fa.pooledCache}function pc(t,r){r===null?ye(wl,wl.current):ye(wl,r.pool)}function df(){var t=uu();return t===null?null:{parent:Wa._currentValue,pool:t}}var Ki=Error(h(460)),uf=Error(h(474)),yc=Error(h(542)),hu={then:function(){}};function hf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bc(){}function ff(t,r,i){switch(i=t[i],i===void 0?t.push(r):i!==r&&(r.then(bc,bc),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,gf(t),t;default:if(typeof r.status=="string")r.then(bc,bc);else{if(t=fa,t!==null&&100<t.shellSuspendCounter)throw Error(h(482));t=r,t.status="pending",t.then(function(f){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=f}},function(f){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,gf(t),t}throw Ji=r,Ki}}var Ji=null;function xf(){if(Ji===null)throw Error(h(459));var t=Ji;return Ji=null,t}function gf(t){if(t===Ki||t===yc)throw Error(h(483))}var Mn=!1;function fu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xu(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Dn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Rn(t,r,i){var f=t.updateQueue;if(f===null)return null;if(f=f.shared,(aa&2)!==0){var y=f.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),f.pending=r,r=uc(t),ef(t,null,i),r}return dc(t,f,r,i),uc(t)}function eo(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var f=r.lanes;f&=t.pendingLanes,i|=f,r.lanes=i,Sr(t,i)}}function gu(t,r){var i=t.updateQueue,f=t.alternate;if(f!==null&&(f=f.updateQueue,i===f)){var y=null,k=null;if(i=i.firstBaseUpdate,i!==null){do{var B={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};k===null?y=k=B:k=k.next=B,i=i.next}while(i!==null);k===null?y=k=r:k=k.next=r}else y=k=r;i={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:k,shared:f.shared,callbacks:f.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}var mu=!1;function to(){if(mu){var t=si;if(t!==null)throw t}}function ao(t,r,i,f){mu=!1;var y=t.updateQueue;Mn=!1;var k=y.firstBaseUpdate,B=y.lastBaseUpdate,Z=y.shared.pending;if(Z!==null){y.shared.pending=null;var ue=Z,Se=ue.next;ue.next=null,B===null?k=Se:B.next=Se,B=ue;var ze=t.alternate;ze!==null&&(ze=ze.updateQueue,Z=ze.lastBaseUpdate,Z!==B&&(Z===null?ze.firstBaseUpdate=Se:Z.next=Se,ze.lastBaseUpdate=ue))}if(k!==null){var Ue=y.baseState;B=0,ze=Se=ue=null,Z=k;do{var Ae=Z.lane&-536870913,Te=Ae!==Z.lane;if(Te?(Ut&Ae)===Ae:(f&Ae)===Ae){Ae!==0&&Ae===ri&&(mu=!0),ze!==null&&(ze=ze.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var bt=t,pt=Z;Ae=r;var oa=i;switch(pt.tag){case 1:if(bt=pt.payload,typeof bt=="function"){Ue=bt.call(oa,Ue,Ae);break e}Ue=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=pt.payload,Ae=typeof bt=="function"?bt.call(oa,Ue,Ae):bt,Ae==null)break e;Ue=S({},Ue,Ae);break e;case 2:Mn=!0}}Ae=Z.callback,Ae!==null&&(t.flags|=64,Te&&(t.flags|=8192),Te=y.callbacks,Te===null?y.callbacks=[Ae]:Te.push(Ae))}else Te={lane:Ae,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},ze===null?(Se=ze=Te,ue=Ue):ze=ze.next=Te,B|=Ae;if(Z=Z.next,Z===null){if(Z=y.shared.pending,Z===null)break;Te=Z,Z=Te.next,Te.next=null,y.lastBaseUpdate=Te,y.shared.pending=null}}while(!0);ze===null&&(ue=Ue),y.baseState=ue,y.firstBaseUpdate=Se,y.lastBaseUpdate=ze,k===null&&(y.shared.lanes=0),Un|=B,t.lanes=B,t.memoizedState=Ue}}function mf(t,r){if(typeof t!="function")throw Error(h(191,t));t.call(r)}function pf(t,r){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)mf(i[t],r)}var ni=xe(null),wc=xe(0);function yf(t,r){t=hn,ye(wc,t),ye(ni,r),hn=t|r.baseLanes}function pu(){ye(wc,hn),ye(ni,ni.current)}function yu(){hn=wc.current,Le(ni),Le(wc)}var In=0,Tt=null,la=null,Ua=null,vc=!1,li=!1,vl=!1,Nc=0,ro=0,ii=null,V1=0;function Ba(){throw Error(h(321))}function bu(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!o(t[i],r[i]))return!1;return!0}function wu(t,r,i,f,y,k){return In=k,Tt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,V.H=t===null||t.memoizedState===null?tx:ax,vl=!1,k=i(f,y),vl=!1,li&&(k=wf(r,i,f,y)),bf(t),k}function bf(t){V.H=Ec;var r=la!==null&&la.next!==null;if(In=0,Ua=la=Tt=null,vc=!1,ro=0,ii=null,r)throw Error(h(300));t===null||ar||(t=t.dependencies,t!==null&&gc(t)&&(ar=!0))}function wf(t,r,i,f){Tt=t;var y=0;do{if(li&&(ii=null),ro=0,li=!1,25<=y)throw Error(h(301));if(y+=1,Ua=la=null,t.updateQueue!=null){var k=t.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}V.H=Q1,k=r(i,f)}while(li);return k}function q1(){var t=V.H,r=t.useState()[0];return r=typeof r.then=="function"?so(r):r,t=t.useState()[0],(la!==null?la.memoizedState:null)!==t&&(Tt.flags|=1024),r}function vu(){var t=Nc!==0;return Nc=0,t}function Nu(t,r,i){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~i}function ju(t){if(vc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}vc=!1}In=0,Ua=la=Tt=null,li=!1,ro=Nc=0,ii=null}function Tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ua===null?Tt.memoizedState=Ua=t:Ua=Ua.next=t,Ua}function Ha(){if(la===null){var t=Tt.alternate;t=t!==null?t.memoizedState:null}else t=la.next;var r=Ua===null?Tt.memoizedState:Ua.next;if(r!==null)Ua=r,la=t;else{if(t===null)throw Tt.alternate===null?Error(h(467)):Error(h(310));la=t,t={memoizedState:la.memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},Ua===null?Tt.memoizedState=Ua=t:Ua=Ua.next=t}return Ua}function ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function so(t){var r=ro;return ro+=1,ii===null&&(ii=[]),t=ff(ii,t,r),r=Tt,(Ua===null?r.memoizedState:Ua.next)===null&&(r=r.alternate,V.H=r===null||r.memoizedState===null?tx:ax),t}function jc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return so(t);if(t.$$typeof===O)return gr(t)}throw Error(h(438,String(t)))}function Cu(t){var r=null,i=Tt.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var f=Tt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=ku(),Tt.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(t),f=0;f<t;f++)i[f]=ce;return r.index++,i}function nn(t,r){return typeof r=="function"?r(t):r}function kc(t){var r=Ha();return Su(r,la,t)}function Su(t,r,i){var f=t.queue;if(f===null)throw Error(h(311));f.lastRenderedReducer=i;var y=t.baseQueue,k=f.pending;if(k!==null){if(y!==null){var B=y.next;y.next=k.next,k.next=B}r.baseQueue=y=k,f.pending=null}if(k=t.baseState,y===null)t.memoizedState=k;else{r=y.next;var Z=B=null,ue=null,Se=r,ze=!1;do{var Ue=Se.lane&-536870913;if(Ue!==Se.lane?(Ut&Ue)===Ue:(In&Ue)===Ue){var Ae=Se.revertLane;if(Ae===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),Ue===ri&&(ze=!0);else if((In&Ae)===Ae){Se=Se.next,Ae===ri&&(ze=!0);continue}else Ue={lane:0,revertLane:Se.revertLane,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},ue===null?(Z=ue=Ue,B=k):ue=ue.next=Ue,Tt.lanes|=Ae,Un|=Ae;Ue=Se.action,vl&&i(k,Ue),k=Se.hasEagerState?Se.eagerState:i(k,Ue)}else Ae={lane:Ue,revertLane:Se.revertLane,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},ue===null?(Z=ue=Ae,B=k):ue=ue.next=Ae,Tt.lanes|=Ue,Un|=Ue;Se=Se.next}while(Se!==null&&Se!==r);if(ue===null?B=k:ue.next=Z,!o(k,t.memoizedState)&&(ar=!0,ze&&(i=si,i!==null)))throw i;t.memoizedState=k,t.baseState=B,t.baseQueue=ue,f.lastRenderedState=k}return y===null&&(f.lanes=0),[t.memoizedState,f.dispatch]}function Au(t){var r=Ha(),i=r.queue;if(i===null)throw Error(h(311));i.lastRenderedReducer=t;var f=i.dispatch,y=i.pending,k=r.memoizedState;if(y!==null){i.pending=null;var B=y=y.next;do k=t(k,B.action),B=B.next;while(B!==y);o(k,r.memoizedState)||(ar=!0),r.memoizedState=k,r.baseQueue===null&&(r.baseState=k),i.lastRenderedState=k}return[k,f]}function vf(t,r,i){var f=Tt,y=Ha(),k=Xt;if(k){if(i===void 0)throw Error(h(407));i=i()}else i=r();var B=!o((la||y).memoizedState,i);B&&(y.memoizedState=i,ar=!0),y=y.queue;var Z=kf.bind(null,f,y,t);if(no(2048,8,Z,[t]),y.getSnapshot!==r||B||Ua!==null&&Ua.memoizedState.tag&1){if(f.flags|=2048,oi(9,Cc(),jf.bind(null,f,y,i,r),null),fa===null)throw Error(h(349));k||(In&124)!==0||Nf(f,r,i)}return i}function Nf(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=Tt.updateQueue,r===null?(r=ku(),Tt.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function jf(t,r,i,f){r.value=i,r.getSnapshot=f,Cf(r)&&Sf(t)}function kf(t,r,i){return i(function(){Cf(r)&&Sf(t)})}function Cf(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!o(t,i)}catch{return!0}}function Sf(t){var r=Jl(t,2);r!==null&&Gr(r,t,2)}function Eu(t){var r=Tr();if(typeof t=="function"){var i=t;if(t=i(),vl){Et(!0);try{i()}finally{Et(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nn,lastRenderedState:t},r}function Af(t,r,i,f){return t.baseState=i,Su(t,la,typeof f=="function"?f:nn)}function G1(t,r,i,f,y){if(Ac(t))throw Error(h(485));if(t=r.action,t!==null){var k={payload:y,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){k.listeners.push(B)}};V.T!==null?i(!0):k.isTransition=!1,f(k),i=r.pending,i===null?(k.next=r.pending=k,Ef(r,k)):(k.next=i.next,r.pending=i.next=k)}}function Ef(t,r){var i=r.action,f=r.payload,y=t.state;if(r.isTransition){var k=V.T,B={};V.T=B;try{var Z=i(y,f),ue=V.S;ue!==null&&ue(B,Z),_f(t,r,Z)}catch(Se){_u(t,r,Se)}finally{V.T=k}}else try{k=i(y,f),_f(t,r,k)}catch(Se){_u(t,r,Se)}}function _f(t,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(f){Tf(t,r,f)},function(f){return _u(t,r,f)}):Tf(t,r,i)}function Tf(t,r,i){r.status="fulfilled",r.value=i,Mf(r),t.state=i,r=t.pending,r!==null&&(i=r.next,i===r?t.pending=null:(i=i.next,r.next=i,Ef(t,i)))}function _u(t,r,i){var f=t.pending;if(t.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=i,Mf(r),r=r.next;while(r!==f)}t.action=null}function Mf(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Df(t,r){return r}function Rf(t,r){if(Xt){var i=fa.formState;if(i!==null){e:{var f=Tt;if(Xt){if(Ea){t:{for(var y=Ea,k=Is;y.nodeType!==8;){if(!k){y=null;break t}if(y=hs(y.nextSibling),y===null){y=null;break t}}k=y.data,y=k==="F!"||k==="F"?y:null}if(y){Ea=hs(y.nextSibling),f=y.data==="F!";break e}}pl(f)}f=!1}f&&(r=i[0])}}return i=Tr(),i.memoizedState=i.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Df,lastRenderedState:r},i.queue=f,i=Kf.bind(null,Tt,f),f.dispatch=i,f=Eu(!1),k=Iu.bind(null,Tt,!1,f.queue),f=Tr(),y={state:r,dispatch:null,action:t,pending:null},f.queue=y,i=G1.bind(null,Tt,y,k,i),y.dispatch=i,f.memoizedState=t,[r,i,!1]}function If(t){var r=Ha();return Of(r,la,t)}function Of(t,r,i){if(r=Su(t,r,Df)[0],t=kc(nn)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=so(r)}catch(B){throw B===Ki?yc:B}else f=r;r=Ha();var y=r.queue,k=y.dispatch;return i!==r.memoizedState&&(Tt.flags|=2048,oi(9,Cc(),Y1.bind(null,y,i),null)),[f,k,t]}function Y1(t,r){t.action=r}function Bf(t){var r=Ha(),i=la;if(i!==null)return Of(r,i,t);Ha(),r=r.memoizedState,i=Ha();var f=i.queue.dispatch;return i.memoizedState=t,[r,f,!1]}function oi(t,r,i,f){return t={tag:t,create:i,deps:f,inst:r,next:null},r=Tt.updateQueue,r===null&&(r=ku(),Tt.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=t.next=t:(f=i.next,i.next=t,t.next=f,r.lastEffect=t),t}function Cc(){return{destroy:void 0,resource:void 0}}function Lf(){return Ha().memoizedState}function Sc(t,r,i,f){var y=Tr();f=f===void 0?null:f,Tt.flags|=t,y.memoizedState=oi(1|r,Cc(),i,f)}function no(t,r,i,f){var y=Ha();f=f===void 0?null:f;var k=y.memoizedState.inst;la!==null&&f!==null&&bu(f,la.memoizedState.deps)?y.memoizedState=oi(r,k,i,f):(Tt.flags|=t,y.memoizedState=oi(1|r,k,i,f))}function Pf(t,r){Sc(8390656,8,t,r)}function zf(t,r){no(2048,8,t,r)}function Ff(t,r){return no(4,2,t,r)}function Uf(t,r){return no(4,4,t,r)}function Hf(t,r){if(typeof r=="function"){t=t();var i=r(t);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Vf(t,r,i){i=i!=null?i.concat([t]):null,no(4,4,Hf.bind(null,r,t),i)}function Tu(){}function qf(t,r){var i=Ha();r=r===void 0?null:r;var f=i.memoizedState;return r!==null&&bu(r,f[1])?f[0]:(i.memoizedState=[t,r],t)}function Gf(t,r){var i=Ha();r=r===void 0?null:r;var f=i.memoizedState;if(r!==null&&bu(r,f[1]))return f[0];if(f=t(),vl){Et(!0);try{t()}finally{Et(!1)}}return i.memoizedState=[f,r],f}function Mu(t,r,i){return i===void 0||(In&1073741824)!==0?t.memoizedState=r:(t.memoizedState=i,t=$x(),Tt.lanes|=t,Un|=t,i)}function Yf(t,r,i,f){return o(i,r)?i:ni.current!==null?(t=Mu(t,i,f),o(t,r)||(ar=!0),t):(In&42)===0?(ar=!0,t.memoizedState=i):(t=$x(),Tt.lanes|=t,Un|=t,r)}function Xf(t,r,i,f,y){var k=W.p;W.p=k!==0&&8>k?k:8;var B=V.T,Z={};V.T=Z,Iu(t,!1,r,i);try{var ue=y(),Se=V.S;if(Se!==null&&Se(Z,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var ze=H1(ue,f);lo(t,r,ze,qr(t))}else lo(t,r,f,qr(t))}catch(Ue){lo(t,r,{then:function(){},status:"rejected",reason:Ue},qr())}finally{W.p=k,V.T=B}}function X1(){}function Du(t,r,i,f){if(t.tag!==5)throw Error(h(476));var y=$f(t).queue;Xf(t,y,r,se,i===null?X1:function(){return Zf(t),i(f)})}function $f(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nn,lastRenderedState:se},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nn,lastRenderedState:i},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Zf(t){var r=$f(t).next.queue;lo(t,r,{},qr())}function Ru(){return gr(Co)}function Qf(){return Ha().memoizedState}function Wf(){return Ha().memoizedState}function $1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var i=qr();t=Dn(i);var f=Rn(r,t,i);f!==null&&(Gr(f,r,i),eo(f,r,i)),r={cache:cu()},t.payload=r;return}r=r.return}}function Z1(t,r,i){var f=qr();i={lane:f,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Ac(t)?Jf(r,i):(i=Jd(t,r,i,f),i!==null&&(Gr(i,t,f),ex(i,r,f)))}function Kf(t,r,i){var f=qr();lo(t,r,i,f)}function lo(t,r,i,f){var y={lane:f,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ac(t))Jf(r,y);else{var k=t.alternate;if(t.lanes===0&&(k===null||k.lanes===0)&&(k=r.lastRenderedReducer,k!==null))try{var B=r.lastRenderedState,Z=k(B,i);if(y.hasEagerState=!0,y.eagerState=Z,o(Z,B))return dc(t,r,y,0),fa===null&&cc(),!1}catch{}finally{}if(i=Jd(t,r,y,f),i!==null)return Gr(i,t,f),ex(i,r,f),!0}return!1}function Iu(t,r,i,f){if(f={lane:2,revertLane:h0(),action:f,hasEagerState:!1,eagerState:null,next:null},Ac(t)){if(r)throw Error(h(479))}else r=Jd(t,i,f,2),r!==null&&Gr(r,t,2)}function Ac(t){var r=t.alternate;return t===Tt||r!==null&&r===Tt}function Jf(t,r){li=vc=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function ex(t,r,i){if((i&4194048)!==0){var f=r.lanes;f&=t.pendingLanes,i|=f,r.lanes=i,Sr(t,i)}}var Ec={readContext:gr,use:jc,useCallback:Ba,useContext:Ba,useEffect:Ba,useImperativeHandle:Ba,useLayoutEffect:Ba,useInsertionEffect:Ba,useMemo:Ba,useReducer:Ba,useRef:Ba,useState:Ba,useDebugValue:Ba,useDeferredValue:Ba,useTransition:Ba,useSyncExternalStore:Ba,useId:Ba,useHostTransitionStatus:Ba,useFormState:Ba,useActionState:Ba,useOptimistic:Ba,useMemoCache:Ba,useCacheRefresh:Ba},tx={readContext:gr,use:jc,useCallback:function(t,r){return Tr().memoizedState=[t,r===void 0?null:r],t},useContext:gr,useEffect:Pf,useImperativeHandle:function(t,r,i){i=i!=null?i.concat([t]):null,Sc(4194308,4,Hf.bind(null,r,t),i)},useLayoutEffect:function(t,r){return Sc(4194308,4,t,r)},useInsertionEffect:function(t,r){Sc(4,2,t,r)},useMemo:function(t,r){var i=Tr();r=r===void 0?null:r;var f=t();if(vl){Et(!0);try{t()}finally{Et(!1)}}return i.memoizedState=[f,r],f},useReducer:function(t,r,i){var f=Tr();if(i!==void 0){var y=i(r);if(vl){Et(!0);try{i(r)}finally{Et(!1)}}}else y=r;return f.memoizedState=f.baseState=y,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:y},f.queue=t,t=t.dispatch=Z1.bind(null,Tt,t),[f.memoizedState,t]},useRef:function(t){var r=Tr();return t={current:t},r.memoizedState=t},useState:function(t){t=Eu(t);var r=t.queue,i=Kf.bind(null,Tt,r);return r.dispatch=i,[t.memoizedState,i]},useDebugValue:Tu,useDeferredValue:function(t,r){var i=Tr();return Mu(i,t,r)},useTransition:function(){var t=Eu(!1);return t=Xf.bind(null,Tt,t.queue,!0,!1),Tr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,i){var f=Tt,y=Tr();if(Xt){if(i===void 0)throw Error(h(407));i=i()}else{if(i=r(),fa===null)throw Error(h(349));(Ut&124)!==0||Nf(f,r,i)}y.memoizedState=i;var k={value:i,getSnapshot:r};return y.queue=k,Pf(kf.bind(null,f,k,t),[t]),f.flags|=2048,oi(9,Cc(),jf.bind(null,f,k,i,r),null),i},useId:function(){var t=Tr(),r=fa.identifierPrefix;if(Xt){var i=an,f=tn;i=(f&~(1<<32-xt(f)-1)).toString(32)+i,r=""+r+"R"+i,i=Nc++,0<i&&(r+="H"+i.toString(32)),r+=""}else i=V1++,r=""+r+"r"+i.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:Ru,useFormState:Rf,useActionState:Rf,useOptimistic:function(t){var r=Tr();r.memoizedState=r.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=Iu.bind(null,Tt,!0,i),i.dispatch=r,[t,r]},useMemoCache:Cu,useCacheRefresh:function(){return Tr().memoizedState=$1.bind(null,Tt)}},ax={readContext:gr,use:jc,useCallback:qf,useContext:gr,useEffect:zf,useImperativeHandle:Vf,useInsertionEffect:Ff,useLayoutEffect:Uf,useMemo:Gf,useReducer:kc,useRef:Lf,useState:function(){return kc(nn)},useDebugValue:Tu,useDeferredValue:function(t,r){var i=Ha();return Yf(i,la.memoizedState,t,r)},useTransition:function(){var t=kc(nn)[0],r=Ha().memoizedState;return[typeof t=="boolean"?t:so(t),r]},useSyncExternalStore:vf,useId:Qf,useHostTransitionStatus:Ru,useFormState:If,useActionState:If,useOptimistic:function(t,r){var i=Ha();return Af(i,la,t,r)},useMemoCache:Cu,useCacheRefresh:Wf},Q1={readContext:gr,use:jc,useCallback:qf,useContext:gr,useEffect:zf,useImperativeHandle:Vf,useInsertionEffect:Ff,useLayoutEffect:Uf,useMemo:Gf,useReducer:Au,useRef:Lf,useState:function(){return Au(nn)},useDebugValue:Tu,useDeferredValue:function(t,r){var i=Ha();return la===null?Mu(i,t,r):Yf(i,la.memoizedState,t,r)},useTransition:function(){var t=Au(nn)[0],r=Ha().memoizedState;return[typeof t=="boolean"?t:so(t),r]},useSyncExternalStore:vf,useId:Qf,useHostTransitionStatus:Ru,useFormState:Bf,useActionState:Bf,useOptimistic:function(t,r){var i=Ha();return la!==null?Af(i,la,t,r):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:Cu,useCacheRefresh:Wf},ci=null,io=0;function _c(t){var r=io;return io+=1,ci===null&&(ci=[]),ff(ci,t,r)}function oo(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Tc(t,r){throw r.$$typeof===E?Error(h(525)):(t=Object.prototype.toString.call(r),Error(h(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function rx(t){var r=t._init;return r(t._payload)}function sx(t){function r(ve,pe){if(t){var Ce=ve.deletions;Ce===null?(ve.deletions=[pe],ve.flags|=16):Ce.push(pe)}}function i(ve,pe){if(!t)return null;for(;pe!==null;)r(ve,pe),pe=pe.sibling;return null}function f(ve){for(var pe=new Map;ve!==null;)ve.key!==null?pe.set(ve.key,ve):pe.set(ve.index,ve),ve=ve.sibling;return pe}function y(ve,pe){return ve=en(ve,pe),ve.index=0,ve.sibling=null,ve}function k(ve,pe,Ce){return ve.index=Ce,t?(Ce=ve.alternate,Ce!==null?(Ce=Ce.index,Ce<pe?(ve.flags|=67108866,pe):Ce):(ve.flags|=67108866,pe)):(ve.flags|=1048576,pe)}function B(ve){return t&&ve.alternate===null&&(ve.flags|=67108866),ve}function Z(ve,pe,Ce,Fe){return pe===null||pe.tag!==6?(pe=tu(Ce,ve.mode,Fe),pe.return=ve,pe):(pe=y(pe,Ce),pe.return=ve,pe)}function ue(ve,pe,Ce,Fe){var it=Ce.type;return it===I?ze(ve,pe,Ce.props.children,Fe,Ce.key):pe!==null&&(pe.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===Y&&rx(it)===pe.type)?(pe=y(pe,Ce.props),oo(pe,Ce),pe.return=ve,pe):(pe=hc(Ce.type,Ce.key,Ce.props,null,ve.mode,Fe),oo(pe,Ce),pe.return=ve,pe)}function Se(ve,pe,Ce,Fe){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Ce.containerInfo||pe.stateNode.implementation!==Ce.implementation?(pe=au(Ce,ve.mode,Fe),pe.return=ve,pe):(pe=y(pe,Ce.children||[]),pe.return=ve,pe)}function ze(ve,pe,Ce,Fe,it){return pe===null||pe.tag!==7?(pe=fl(Ce,ve.mode,Fe,it),pe.return=ve,pe):(pe=y(pe,Ce),pe.return=ve,pe)}function Ue(ve,pe,Ce){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=tu(""+pe,ve.mode,Ce),pe.return=ve,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case _:return Ce=hc(pe.type,pe.key,pe.props,null,ve.mode,Ce),oo(Ce,pe),Ce.return=ve,Ce;case M:return pe=au(pe,ve.mode,Ce),pe.return=ve,pe;case Y:var Fe=pe._init;return pe=Fe(pe._payload),Ue(ve,pe,Ce)}if(z(pe)||de(pe))return pe=fl(pe,ve.mode,Ce,null),pe.return=ve,pe;if(typeof pe.then=="function")return Ue(ve,_c(pe),Ce);if(pe.$$typeof===O)return Ue(ve,mc(ve,pe),Ce);Tc(ve,pe)}return null}function Ae(ve,pe,Ce,Fe){var it=pe!==null?pe.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return it!==null?null:Z(ve,pe,""+Ce,Fe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case _:return Ce.key===it?ue(ve,pe,Ce,Fe):null;case M:return Ce.key===it?Se(ve,pe,Ce,Fe):null;case Y:return it=Ce._init,Ce=it(Ce._payload),Ae(ve,pe,Ce,Fe)}if(z(Ce)||de(Ce))return it!==null?null:ze(ve,pe,Ce,Fe,null);if(typeof Ce.then=="function")return Ae(ve,pe,_c(Ce),Fe);if(Ce.$$typeof===O)return Ae(ve,pe,mc(ve,Ce),Fe);Tc(ve,Ce)}return null}function Te(ve,pe,Ce,Fe,it){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return ve=ve.get(Ce)||null,Z(pe,ve,""+Fe,it);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case _:return ve=ve.get(Fe.key===null?Ce:Fe.key)||null,ue(pe,ve,Fe,it);case M:return ve=ve.get(Fe.key===null?Ce:Fe.key)||null,Se(pe,ve,Fe,it);case Y:var Dt=Fe._init;return Fe=Dt(Fe._payload),Te(ve,pe,Ce,Fe,it)}if(z(Fe)||de(Fe))return ve=ve.get(Ce)||null,ze(pe,ve,Fe,it,null);if(typeof Fe.then=="function")return Te(ve,pe,Ce,_c(Fe),it);if(Fe.$$typeof===O)return Te(ve,pe,Ce,mc(pe,Fe),it);Tc(pe,Fe)}return null}function bt(ve,pe,Ce,Fe){for(var it=null,Dt=null,ut=pe,yt=pe=0,sr=null;ut!==null&&yt<Ce.length;yt++){ut.index>yt?(sr=ut,ut=null):sr=ut.sibling;var Vt=Ae(ve,ut,Ce[yt],Fe);if(Vt===null){ut===null&&(ut=sr);break}t&&ut&&Vt.alternate===null&&r(ve,ut),pe=k(Vt,pe,yt),Dt===null?it=Vt:Dt.sibling=Vt,Dt=Vt,ut=sr}if(yt===Ce.length)return i(ve,ut),Xt&&gl(ve,yt),it;if(ut===null){for(;yt<Ce.length;yt++)ut=Ue(ve,Ce[yt],Fe),ut!==null&&(pe=k(ut,pe,yt),Dt===null?it=ut:Dt.sibling=ut,Dt=ut);return Xt&&gl(ve,yt),it}for(ut=f(ut);yt<Ce.length;yt++)sr=Te(ut,ve,yt,Ce[yt],Fe),sr!==null&&(t&&sr.alternate!==null&&ut.delete(sr.key===null?yt:sr.key),pe=k(sr,pe,yt),Dt===null?it=sr:Dt.sibling=sr,Dt=sr);return t&&ut.forEach(function(Qn){return r(ve,Qn)}),Xt&&gl(ve,yt),it}function pt(ve,pe,Ce,Fe){if(Ce==null)throw Error(h(151));for(var it=null,Dt=null,ut=pe,yt=pe=0,sr=null,Vt=Ce.next();ut!==null&&!Vt.done;yt++,Vt=Ce.next()){ut.index>yt?(sr=ut,ut=null):sr=ut.sibling;var Qn=Ae(ve,ut,Vt.value,Fe);if(Qn===null){ut===null&&(ut=sr);break}t&&ut&&Qn.alternate===null&&r(ve,ut),pe=k(Qn,pe,yt),Dt===null?it=Qn:Dt.sibling=Qn,Dt=Qn,ut=sr}if(Vt.done)return i(ve,ut),Xt&&gl(ve,yt),it;if(ut===null){for(;!Vt.done;yt++,Vt=Ce.next())Vt=Ue(ve,Vt.value,Fe),Vt!==null&&(pe=k(Vt,pe,yt),Dt===null?it=Vt:Dt.sibling=Vt,Dt=Vt);return Xt&&gl(ve,yt),it}for(ut=f(ut);!Vt.done;yt++,Vt=Ce.next())Vt=Te(ut,ve,yt,Vt.value,Fe),Vt!==null&&(t&&Vt.alternate!==null&&ut.delete(Vt.key===null?yt:Vt.key),pe=k(Vt,pe,yt),Dt===null?it=Vt:Dt.sibling=Vt,Dt=Vt);return t&&ut.forEach(function(Wy){return r(ve,Wy)}),Xt&&gl(ve,yt),it}function oa(ve,pe,Ce,Fe){if(typeof Ce=="object"&&Ce!==null&&Ce.type===I&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case _:e:{for(var it=Ce.key;pe!==null;){if(pe.key===it){if(it=Ce.type,it===I){if(pe.tag===7){i(ve,pe.sibling),Fe=y(pe,Ce.props.children),Fe.return=ve,ve=Fe;break e}}else if(pe.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===Y&&rx(it)===pe.type){i(ve,pe.sibling),Fe=y(pe,Ce.props),oo(Fe,Ce),Fe.return=ve,ve=Fe;break e}i(ve,pe);break}else r(ve,pe);pe=pe.sibling}Ce.type===I?(Fe=fl(Ce.props.children,ve.mode,Fe,Ce.key),Fe.return=ve,ve=Fe):(Fe=hc(Ce.type,Ce.key,Ce.props,null,ve.mode,Fe),oo(Fe,Ce),Fe.return=ve,ve=Fe)}return B(ve);case M:e:{for(it=Ce.key;pe!==null;){if(pe.key===it)if(pe.tag===4&&pe.stateNode.containerInfo===Ce.containerInfo&&pe.stateNode.implementation===Ce.implementation){i(ve,pe.sibling),Fe=y(pe,Ce.children||[]),Fe.return=ve,ve=Fe;break e}else{i(ve,pe);break}else r(ve,pe);pe=pe.sibling}Fe=au(Ce,ve.mode,Fe),Fe.return=ve,ve=Fe}return B(ve);case Y:return it=Ce._init,Ce=it(Ce._payload),oa(ve,pe,Ce,Fe)}if(z(Ce))return bt(ve,pe,Ce,Fe);if(de(Ce)){if(it=de(Ce),typeof it!="function")throw Error(h(150));return Ce=it.call(Ce),pt(ve,pe,Ce,Fe)}if(typeof Ce.then=="function")return oa(ve,pe,_c(Ce),Fe);if(Ce.$$typeof===O)return oa(ve,pe,mc(ve,Ce),Fe);Tc(ve,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,pe!==null&&pe.tag===6?(i(ve,pe.sibling),Fe=y(pe,Ce),Fe.return=ve,ve=Fe):(i(ve,pe),Fe=tu(Ce,ve.mode,Fe),Fe.return=ve,ve=Fe),B(ve)):i(ve,pe)}return function(ve,pe,Ce,Fe){try{io=0;var it=oa(ve,pe,Ce,Fe);return ci=null,it}catch(ut){if(ut===Ki||ut===yc)throw ut;var Dt=Fr(29,ut,null,ve.mode);return Dt.lanes=Fe,Dt.return=ve,Dt}finally{}}}var di=sx(!0),nx=sx(!1),as=xe(null),Os=null;function On(t){var r=t.alternate;ye(Ka,Ka.current&1),ye(as,t),Os===null&&(r===null||ni.current!==null||r.memoizedState!==null)&&(Os=t)}function lx(t){if(t.tag===22){if(ye(Ka,Ka.current),ye(as,t),Os===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Os=t)}}else Bn()}function Bn(){ye(Ka,Ka.current),ye(as,as.current)}function ln(t){Le(as),Os===t&&(Os=null),Le(Ka)}var Ka=xe(0);function Mc(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||k0(i)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Ou(t,r,i,f){r=t.memoizedState,i=i(f,r),i=i==null?r:S({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Bu={enqueueSetState:function(t,r,i){t=t._reactInternals;var f=qr(),y=Dn(f);y.payload=r,i!=null&&(y.callback=i),r=Rn(t,y,f),r!==null&&(Gr(r,t,f),eo(r,t,f))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var f=qr(),y=Dn(f);y.tag=1,y.payload=r,i!=null&&(y.callback=i),r=Rn(t,y,f),r!==null&&(Gr(r,t,f),eo(r,t,f))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=qr(),f=Dn(i);f.tag=2,r!=null&&(f.callback=r),r=Rn(t,f,i),r!==null&&(Gr(r,t,i),eo(r,t,i))}};function ix(t,r,i,f,y,k,B){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(f,k,B):r.prototype&&r.prototype.isPureReactComponent?!u(i,f)||!u(y,k):!0}function ox(t,r,i,f){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,f),r.state!==t&&Bu.enqueueReplaceState(r,r.state,null)}function Nl(t,r){var i=r;if("ref"in r){i={};for(var f in r)f!=="ref"&&(i[f]=r[f])}if(t=t.defaultProps){i===r&&(i=S({},i));for(var y in t)i[y]===void 0&&(i[y]=t[y])}return i}var Dc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function cx(t){Dc(t)}function dx(t){console.error(t)}function ux(t){Dc(t)}function Rc(t,r){try{var i=t.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function hx(t,r,i){try{var f=t.onCaughtError;f(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Lu(t,r,i){return i=Dn(i),i.tag=3,i.payload={element:null},i.callback=function(){Rc(t,r)},i}function fx(t){return t=Dn(t),t.tag=3,t}function xx(t,r,i,f){var y=i.type.getDerivedStateFromError;if(typeof y=="function"){var k=f.value;t.payload=function(){return y(k)},t.callback=function(){hx(r,i,f)}}var B=i.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(t.callback=function(){hx(r,i,f),typeof y!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var Z=f.stack;this.componentDidCatch(f.value,{componentStack:Z!==null?Z:""})})}function W1(t,r,i,f,y){if(i.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=i.alternate,r!==null&&Zi(r,i,y,!0),i=as.current,i!==null){switch(i.tag){case 13:return Os===null?i0():i.alternate===null&&_a===0&&(_a=3),i.flags&=-257,i.flags|=65536,i.lanes=y,f===hu?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([f]):r.add(f),c0(t,f,y)),!1;case 22:return i.flags|=65536,f===hu?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([f]):i.add(f)),c0(t,f,y)),!1}throw Error(h(435,i.tag))}return c0(t,f,y),i0(),!1}if(Xt)return r=as.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,f!==nu&&(t=Error(h(422),{cause:f}),$i(Kr(t,i)))):(f!==nu&&(r=Error(h(423),{cause:f}),$i(Kr(r,i))),t=t.current.alternate,t.flags|=65536,y&=-y,t.lanes|=y,f=Kr(f,i),y=Lu(t.stateNode,f,y),gu(t,y),_a!==4&&(_a=2)),!1;var k=Error(h(520),{cause:f});if(k=Kr(k,i),mo===null?mo=[k]:mo.push(k),_a!==4&&(_a=2),r===null)return!0;f=Kr(f,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,t=y&-y,i.lanes|=t,t=Lu(i.stateNode,f,t),gu(i,t),!1;case 1:if(r=i.type,k=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Hn===null||!Hn.has(k))))return i.flags|=65536,y&=-y,i.lanes|=y,y=fx(y),xx(y,t,i,f),gu(i,y),!1}i=i.return}while(i!==null);return!1}var gx=Error(h(461)),ar=!1;function ir(t,r,i,f){r.child=t===null?nx(r,null,i,f):di(r,t.child,i,f)}function mx(t,r,i,f,y){i=i.render;var k=r.ref;if("ref"in f){var B={};for(var Z in f)Z!=="ref"&&(B[Z]=f[Z])}else B=f;return bl(r),f=wu(t,r,i,B,k,y),Z=vu(),t!==null&&!ar?(Nu(t,r,y),on(t,r,y)):(Xt&&Z&&ru(r),r.flags|=1,ir(t,r,f,y),r.child)}function px(t,r,i,f,y){if(t===null){var k=i.type;return typeof k=="function"&&!eu(k)&&k.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=k,yx(t,r,k,f,y)):(t=hc(i.type,null,f,r,r.mode,y),t.ref=r.ref,t.return=r,r.child=t)}if(k=t.child,!Gu(t,y)){var B=k.memoizedProps;if(i=i.compare,i=i!==null?i:u,i(B,f)&&t.ref===r.ref)return on(t,r,y)}return r.flags|=1,t=en(k,f),t.ref=r.ref,t.return=r,r.child=t}function yx(t,r,i,f,y){if(t!==null){var k=t.memoizedProps;if(u(k,f)&&t.ref===r.ref)if(ar=!1,r.pendingProps=f=k,Gu(t,y))(t.flags&131072)!==0&&(ar=!0);else return r.lanes=t.lanes,on(t,r,y)}return Pu(t,r,i,f,y)}function bx(t,r,i){var f=r.pendingProps,y=f.children,k=t!==null?t.memoizedState:null;if(f.mode==="hidden"){if((r.flags&128)!==0){if(f=k!==null?k.baseLanes|i:i,t!==null){for(y=r.child=t.child,k=0;y!==null;)k=k|y.lanes|y.childLanes,y=y.sibling;r.childLanes=k&~f}else r.childLanes=0,r.child=null;return wx(t,r,f,i)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&pc(r,k!==null?k.cachePool:null),k!==null?yf(r,k):pu(),lx(r);else return r.lanes=r.childLanes=536870912,wx(t,r,k!==null?k.baseLanes|i:i,i)}else k!==null?(pc(r,k.cachePool),yf(r,k),Bn(),r.memoizedState=null):(t!==null&&pc(r,null),pu(),Bn());return ir(t,r,y,i),r.child}function wx(t,r,i,f){var y=uu();return y=y===null?null:{parent:Wa._currentValue,pool:y},r.memoizedState={baseLanes:i,cachePool:y},t!==null&&pc(r,null),pu(),lx(r),t!==null&&Zi(t,r,f,!0),null}function Ic(t,r){var i=r.ref;if(i===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(h(284));(t===null||t.ref!==i)&&(r.flags|=4194816)}}function Pu(t,r,i,f,y){return bl(r),i=wu(t,r,i,f,void 0,y),f=vu(),t!==null&&!ar?(Nu(t,r,y),on(t,r,y)):(Xt&&f&&ru(r),r.flags|=1,ir(t,r,i,y),r.child)}function vx(t,r,i,f,y,k){return bl(r),r.updateQueue=null,i=wf(r,f,i,y),bf(t),f=vu(),t!==null&&!ar?(Nu(t,r,k),on(t,r,k)):(Xt&&f&&ru(r),r.flags|=1,ir(t,r,i,k),r.child)}function Nx(t,r,i,f,y){if(bl(r),r.stateNode===null){var k=ei,B=i.contextType;typeof B=="object"&&B!==null&&(k=gr(B)),k=new i(f,k),r.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=Bu,r.stateNode=k,k._reactInternals=r,k=r.stateNode,k.props=f,k.state=r.memoizedState,k.refs={},fu(r),B=i.contextType,k.context=typeof B=="object"&&B!==null?gr(B):ei,k.state=r.memoizedState,B=i.getDerivedStateFromProps,typeof B=="function"&&(Ou(r,i,B,f),k.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(B=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),B!==k.state&&Bu.enqueueReplaceState(k,k.state,null),ao(r,f,k,y),to(),k.state=r.memoizedState),typeof k.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(t===null){k=r.stateNode;var Z=r.memoizedProps,ue=Nl(i,Z);k.props=ue;var Se=k.context,ze=i.contextType;B=ei,typeof ze=="object"&&ze!==null&&(B=gr(ze));var Ue=i.getDerivedStateFromProps;ze=typeof Ue=="function"||typeof k.getSnapshotBeforeUpdate=="function",Z=r.pendingProps!==Z,ze||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Z||Se!==B)&&ox(r,k,f,B),Mn=!1;var Ae=r.memoizedState;k.state=Ae,ao(r,f,k,y),to(),Se=r.memoizedState,Z||Ae!==Se||Mn?(typeof Ue=="function"&&(Ou(r,i,Ue,f),Se=r.memoizedState),(ue=Mn||ix(r,i,ue,f,Ae,Se,B))?(ze||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(r.flags|=4194308)):(typeof k.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=Se),k.props=f,k.state=Se,k.context=B,f=ue):(typeof k.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{k=r.stateNode,xu(t,r),B=r.memoizedProps,ze=Nl(i,B),k.props=ze,Ue=r.pendingProps,Ae=k.context,Se=i.contextType,ue=ei,typeof Se=="object"&&Se!==null&&(ue=gr(Se)),Z=i.getDerivedStateFromProps,(Se=typeof Z=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(B!==Ue||Ae!==ue)&&ox(r,k,f,ue),Mn=!1,Ae=r.memoizedState,k.state=Ae,ao(r,f,k,y),to();var Te=r.memoizedState;B!==Ue||Ae!==Te||Mn||t!==null&&t.dependencies!==null&&gc(t.dependencies)?(typeof Z=="function"&&(Ou(r,i,Z,f),Te=r.memoizedState),(ze=Mn||ix(r,i,ze,f,Ae,Te,ue)||t!==null&&t.dependencies!==null&&gc(t.dependencies))?(Se||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,Te,ue),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,Te,ue)),typeof k.componentDidUpdate=="function"&&(r.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof k.componentDidUpdate!="function"||B===t.memoizedProps&&Ae===t.memoizedState||(r.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||B===t.memoizedProps&&Ae===t.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=Te),k.props=f,k.state=Te,k.context=ue,f=ze):(typeof k.componentDidUpdate!="function"||B===t.memoizedProps&&Ae===t.memoizedState||(r.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||B===t.memoizedProps&&Ae===t.memoizedState||(r.flags|=1024),f=!1)}return k=f,Ic(t,r),f=(r.flags&128)!==0,k||f?(k=r.stateNode,i=f&&typeof i.getDerivedStateFromError!="function"?null:k.render(),r.flags|=1,t!==null&&f?(r.child=di(r,t.child,null,y),r.child=di(r,null,i,y)):ir(t,r,i,y),r.memoizedState=k.state,t=r.child):t=on(t,r,y),t}function jx(t,r,i,f){return Xi(),r.flags|=256,ir(t,r,i,f),r.child}var zu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fu(t){return{baseLanes:t,cachePool:df()}}function Uu(t,r,i){return t=t!==null?t.childLanes&~i:0,r&&(t|=rs),t}function kx(t,r,i){var f=r.pendingProps,y=!1,k=(r.flags&128)!==0,B;if((B=k)||(B=t!==null&&t.memoizedState===null?!1:(Ka.current&2)!==0),B&&(y=!0,r.flags&=-129),B=(r.flags&32)!==0,r.flags&=-33,t===null){if(Xt){if(y?On(r):Bn(),Xt){var Z=Ea,ue;if(ue=Z){e:{for(ue=Z,Z=Is;ue.nodeType!==8;){if(!Z){Z=null;break e}if(ue=hs(ue.nextSibling),ue===null){Z=null;break e}}Z=ue}Z!==null?(r.memoizedState={dehydrated:Z,treeContext:xl!==null?{id:tn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},ue=Fr(18,null,null,0),ue.stateNode=Z,ue.return=r,r.child=ue,wr=r,Ea=null,ue=!0):ue=!1}ue||pl(r)}if(Z=r.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return k0(Z)?r.lanes=32:r.lanes=536870912,null;ln(r)}return Z=f.children,f=f.fallback,y?(Bn(),y=r.mode,Z=Oc({mode:"hidden",children:Z},y),f=fl(f,y,i,null),Z.return=r,f.return=r,Z.sibling=f,r.child=Z,y=r.child,y.memoizedState=Fu(i),y.childLanes=Uu(t,B,i),r.memoizedState=zu,f):(On(r),Hu(r,Z))}if(ue=t.memoizedState,ue!==null&&(Z=ue.dehydrated,Z!==null)){if(k)r.flags&256?(On(r),r.flags&=-257,r=Vu(t,r,i)):r.memoizedState!==null?(Bn(),r.child=t.child,r.flags|=128,r=null):(Bn(),y=f.fallback,Z=r.mode,f=Oc({mode:"visible",children:f.children},Z),y=fl(y,Z,i,null),y.flags|=2,f.return=r,y.return=r,f.sibling=y,r.child=f,di(r,t.child,null,i),f=r.child,f.memoizedState=Fu(i),f.childLanes=Uu(t,B,i),r.memoizedState=zu,r=y);else if(On(r),k0(Z)){if(B=Z.nextSibling&&Z.nextSibling.dataset,B)var Se=B.dgst;B=Se,f=Error(h(419)),f.stack="",f.digest=B,$i({value:f,source:null,stack:null}),r=Vu(t,r,i)}else if(ar||Zi(t,r,i,!1),B=(i&t.childLanes)!==0,ar||B){if(B=fa,B!==null&&(f=i&-i,f=(f&42)!==0?1:al(f),f=(f&(B.suspendedLanes|i))!==0?0:f,f!==0&&f!==ue.retryLane))throw ue.retryLane=f,Jl(t,f),Gr(B,t,f),gx;Z.data==="$?"||i0(),r=Vu(t,r,i)}else Z.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=ue.treeContext,Ea=hs(Z.nextSibling),wr=r,Xt=!0,ml=null,Is=!1,t!==null&&(es[ts++]=tn,es[ts++]=an,es[ts++]=xl,tn=t.id,an=t.overflow,xl=r),r=Hu(r,f.children),r.flags|=4096);return r}return y?(Bn(),y=f.fallback,Z=r.mode,ue=t.child,Se=ue.sibling,f=en(ue,{mode:"hidden",children:f.children}),f.subtreeFlags=ue.subtreeFlags&65011712,Se!==null?y=en(Se,y):(y=fl(y,Z,i,null),y.flags|=2),y.return=r,f.return=r,f.sibling=y,r.child=f,f=y,y=r.child,Z=t.child.memoizedState,Z===null?Z=Fu(i):(ue=Z.cachePool,ue!==null?(Se=Wa._currentValue,ue=ue.parent!==Se?{parent:Se,pool:Se}:ue):ue=df(),Z={baseLanes:Z.baseLanes|i,cachePool:ue}),y.memoizedState=Z,y.childLanes=Uu(t,B,i),r.memoizedState=zu,f):(On(r),i=t.child,t=i.sibling,i=en(i,{mode:"visible",children:f.children}),i.return=r,i.sibling=null,t!==null&&(B=r.deletions,B===null?(r.deletions=[t],r.flags|=16):B.push(t)),r.child=i,r.memoizedState=null,i)}function Hu(t,r){return r=Oc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Oc(t,r){return t=Fr(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Vu(t,r,i){return di(r,t.child,null,i),t=Hu(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Cx(t,r,i){t.lanes|=r;var f=t.alternate;f!==null&&(f.lanes|=r),iu(t.return,r,i)}function qu(t,r,i,f,y){var k=t.memoizedState;k===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:i,tailMode:y}:(k.isBackwards=r,k.rendering=null,k.renderingStartTime=0,k.last=f,k.tail=i,k.tailMode=y)}function Sx(t,r,i){var f=r.pendingProps,y=f.revealOrder,k=f.tail;if(ir(t,r,f.children,i),f=Ka.current,(f&2)!==0)f=f&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cx(t,i,r);else if(t.tag===19)Cx(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}f&=1}switch(ye(Ka,f),y){case"forwards":for(i=r.child,y=null;i!==null;)t=i.alternate,t!==null&&Mc(t)===null&&(y=i),i=i.sibling;i=y,i===null?(y=r.child,r.child=null):(y=i.sibling,i.sibling=null),qu(r,!1,y,i,k);break;case"backwards":for(i=null,y=r.child,r.child=null;y!==null;){if(t=y.alternate,t!==null&&Mc(t)===null){r.child=y;break}t=y.sibling,y.sibling=i,i=y,y=t}qu(r,!0,i,null,k);break;case"together":qu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function on(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),Un|=r.lanes,(i&r.childLanes)===0)if(t!==null){if(Zi(t,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(h(153));if(r.child!==null){for(t=r.child,i=en(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=en(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function Gu(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&gc(t)))}function K1(t,r,i){switch(r.tag){case 3:te(r,r.stateNode.containerInfo),Tn(r,Wa,t.memoizedState.cache),Xi();break;case 27:case 5:$e(r);break;case 4:te(r,r.stateNode.containerInfo);break;case 10:Tn(r,r.type,r.memoizedProps.value);break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(On(r),r.flags|=128,null):(i&r.child.childLanes)!==0?kx(t,r,i):(On(r),t=on(t,r,i),t!==null?t.sibling:null);On(r);break;case 19:var y=(t.flags&128)!==0;if(f=(i&r.childLanes)!==0,f||(Zi(t,r,i,!1),f=(i&r.childLanes)!==0),y){if(f)return Sx(t,r,i);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ye(Ka,Ka.current),f)break;return null;case 22:case 23:return r.lanes=0,bx(t,r,i);case 24:Tn(r,Wa,t.memoizedState.cache)}return on(t,r,i)}function Ax(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps)ar=!0;else{if(!Gu(t,i)&&(r.flags&128)===0)return ar=!1,K1(t,r,i);ar=(t.flags&131072)!==0}else ar=!1,Xt&&(r.flags&1048576)!==0&&af(r,xc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var f=r.elementType,y=f._init;if(f=y(f._payload),r.type=f,typeof f=="function")eu(f)?(t=Nl(f,t),r.tag=1,r=Nx(null,r,f,t,i)):(r.tag=0,r=Pu(null,r,f,t,i));else{if(f!=null){if(y=f.$$typeof,y===P){r.tag=11,r=mx(null,r,f,t,i);break e}else if(y===q){r.tag=14,r=px(null,r,f,t,i);break e}}throw r=J(f)||f,Error(h(306,r,""))}}return r;case 0:return Pu(t,r,r.type,r.pendingProps,i);case 1:return f=r.type,y=Nl(f,r.pendingProps),Nx(t,r,f,y,i);case 3:e:{if(te(r,r.stateNode.containerInfo),t===null)throw Error(h(387));f=r.pendingProps;var k=r.memoizedState;y=k.element,xu(t,r),ao(r,f,null,i);var B=r.memoizedState;if(f=B.cache,Tn(r,Wa,f),f!==k.cache&&ou(r,[Wa],i,!0),to(),f=B.element,k.isDehydrated)if(k={element:f,isDehydrated:!1,cache:B.cache},r.updateQueue.baseState=k,r.memoizedState=k,r.flags&256){r=jx(t,r,f,i);break e}else if(f!==y){y=Kr(Error(h(424)),r),$i(y),r=jx(t,r,f,i);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ea=hs(t.firstChild),wr=r,Xt=!0,ml=null,Is=!0,i=nx(r,null,f,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Xi(),f===y){r=on(t,r,i);break e}ir(t,r,f,i)}r=r.child}return r;case 26:return Ic(t,r),t===null?(i=Mg(r.type,null,r.pendingProps,null))?r.memoizedState=i:Xt||(i=r.type,t=r.pendingProps,f=Zc(oe.current).createElement(i),f[Ja]=r,f[Ca]=t,cr(f,i,t),Jt(f),r.stateNode=f):r.memoizedState=Mg(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return $e(r),t===null&&Xt&&(f=r.stateNode=Eg(r.type,r.pendingProps,oe.current),wr=r,Is=!0,y=Ea,Gn(r.type)?(C0=y,Ea=hs(f.firstChild)):Ea=y),ir(t,r,r.pendingProps.children,i),Ic(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Xt&&((y=f=Ea)&&(f=Sy(f,r.type,r.pendingProps,Is),f!==null?(r.stateNode=f,wr=r,Ea=hs(f.firstChild),Is=!1,y=!0):y=!1),y||pl(r)),$e(r),y=r.type,k=r.pendingProps,B=t!==null?t.memoizedProps:null,f=k.children,v0(y,k)?f=null:B!==null&&v0(y,B)&&(r.flags|=32),r.memoizedState!==null&&(y=wu(t,r,q1,null,null,i),Co._currentValue=y),Ic(t,r),ir(t,r,f,i),r.child;case 6:return t===null&&Xt&&((t=i=Ea)&&(i=Ay(i,r.pendingProps,Is),i!==null?(r.stateNode=i,wr=r,Ea=null,t=!0):t=!1),t||pl(r)),null;case 13:return kx(t,r,i);case 4:return te(r,r.stateNode.containerInfo),f=r.pendingProps,t===null?r.child=di(r,null,f,i):ir(t,r,f,i),r.child;case 11:return mx(t,r,r.type,r.pendingProps,i);case 7:return ir(t,r,r.pendingProps,i),r.child;case 8:return ir(t,r,r.pendingProps.children,i),r.child;case 12:return ir(t,r,r.pendingProps.children,i),r.child;case 10:return f=r.pendingProps,Tn(r,r.type,f.value),ir(t,r,f.children,i),r.child;case 9:return y=r.type._context,f=r.pendingProps.children,bl(r),y=gr(y),f=f(y),r.flags|=1,ir(t,r,f,i),r.child;case 14:return px(t,r,r.type,r.pendingProps,i);case 15:return yx(t,r,r.type,r.pendingProps,i);case 19:return Sx(t,r,i);case 31:return f=r.pendingProps,i=r.mode,f={mode:f.mode,children:f.children},t===null?(i=Oc(f,i),i.ref=r.ref,r.child=i,i.return=r,r=i):(i=en(t.child,f),i.ref=r.ref,r.child=i,i.return=r,r=i),r;case 22:return bx(t,r,i);case 24:return bl(r),f=gr(Wa),t===null?(y=uu(),y===null&&(y=fa,k=cu(),y.pooledCache=k,k.refCount++,k!==null&&(y.pooledCacheLanes|=i),y=k),r.memoizedState={parent:f,cache:y},fu(r),Tn(r,Wa,y)):((t.lanes&i)!==0&&(xu(t,r),ao(r,null,null,i),to()),y=t.memoizedState,k=r.memoizedState,y.parent!==f?(y={parent:f,cache:f},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Tn(r,Wa,f)):(f=k.cache,Tn(r,Wa,f),f!==y.cache&&ou(r,[Wa],i,!0))),ir(t,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(h(156,r.tag))}function cn(t){t.flags|=4}function Ex(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Bg(r)){if(r=as.current,r!==null&&((Ut&4194048)===Ut?Os!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||r!==Os))throw Ji=hu,uf;t.flags|=8192}}function Bc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Oi():536870912,t.lanes|=r,xi|=r)}function co(t,r){if(!Xt)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var f=null;i!==null;)i.alternate!==null&&(f=i),i=i.sibling;f===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:f.sibling=null}}function va(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,f=0;if(r)for(var y=t.child;y!==null;)i|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=t,y=y.sibling;else for(y=t.child;y!==null;)i|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=t,y=y.sibling;return t.subtreeFlags|=f,t.childLanes=i,r}function J1(t,r,i){var f=r.pendingProps;switch(su(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return va(r),null;case 1:return va(r),null;case 3:return i=r.stateNode,f=null,t!==null&&(f=t.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),sn(Wa),Ie(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Yi(r)?cn(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,nf())),va(r),null;case 26:return i=r.memoizedState,t===null?(cn(r),i!==null?(va(r),Ex(r,i)):(va(r),r.flags&=-16777217)):i?i!==t.memoizedState?(cn(r),va(r),Ex(r,i)):(va(r),r.flags&=-16777217):(t.memoizedProps!==f&&cn(r),va(r),r.flags&=-16777217),null;case 27:rt(r),i=oe.current;var y=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==f&&cn(r);else{if(!f){if(r.stateNode===null)throw Error(h(166));return va(r),null}t=ie.current,Yi(r)?rf(r):(t=Eg(y,f,i),r.stateNode=t,cn(r))}return va(r),null;case 5:if(rt(r),i=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==f&&cn(r);else{if(!f){if(r.stateNode===null)throw Error(h(166));return va(r),null}if(t=ie.current,Yi(r))rf(r);else{switch(y=Zc(oe.current),t){case 1:t=y.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:t=y.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":t=y.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":t=y.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof f.is=="string"?y.createElement("select",{is:f.is}):y.createElement("select"),f.multiple?t.multiple=!0:f.size&&(t.size=f.size);break;default:t=typeof f.is=="string"?y.createElement(i,{is:f.is}):y.createElement(i)}}t[Ja]=r,t[Ca]=f;e:for(y=r.child;y!==null;){if(y.tag===5||y.tag===6)t.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===r)break e;for(;y.sibling===null;){if(y.return===null||y.return===r)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}r.stateNode=t;e:switch(cr(t,i,f),i){case"button":case"input":case"select":case"textarea":t=!!f.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&cn(r)}}return va(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==f&&cn(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(h(166));if(t=oe.current,Yi(r)){if(t=r.stateNode,i=r.memoizedProps,f=null,y=wr,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}t[Ja]=r,t=!!(t.nodeValue===i||f!==null&&f.suppressHydrationWarning===!0||vg(t.nodeValue,i)),t||pl(r)}else t=Zc(t).createTextNode(f),t[Ja]=r,r.stateNode=t}return va(r),null;case 13:if(f=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(y=Yi(r),f!==null&&f.dehydrated!==null){if(t===null){if(!y)throw Error(h(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(h(317));y[Ja]=r}else Xi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;va(r),y=!1}else y=nf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(ln(r),r):(ln(r),null)}if(ln(r),(r.flags&128)!==0)return r.lanes=i,r;if(i=f!==null,t=t!==null&&t.memoizedState!==null,i){f=r.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool);var k=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(k=f.memoizedState.cachePool.pool),k!==y&&(f.flags|=2048)}return i!==t&&i&&(r.child.flags|=8192),Bc(r,r.updateQueue),va(r),null;case 4:return Ie(),t===null&&m0(r.stateNode.containerInfo),va(r),null;case 10:return sn(r.type),va(r),null;case 19:if(Le(Ka),y=r.memoizedState,y===null)return va(r),null;if(f=(r.flags&128)!==0,k=y.rendering,k===null)if(f)co(y,!1);else{if(_a!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(k=Mc(t),k!==null){for(r.flags|=128,co(y,!1),t=k.updateQueue,r.updateQueue=t,Bc(r,t),r.subtreeFlags=0,t=i,i=r.child;i!==null;)tf(i,t),i=i.sibling;return ye(Ka,Ka.current&1|2),r.child}t=t.sibling}y.tail!==null&&Me()>zc&&(r.flags|=128,f=!0,co(y,!1),r.lanes=4194304)}else{if(!f)if(t=Mc(k),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,Bc(r,t),co(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!Xt)return va(r),null}else 2*Me()-y.renderingStartTime>zc&&i!==536870912&&(r.flags|=128,f=!0,co(y,!1),r.lanes=4194304);y.isBackwards?(k.sibling=r.child,r.child=k):(t=y.last,t!==null?t.sibling=k:r.child=k,y.last=k)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=Me(),r.sibling=null,t=Ka.current,ye(Ka,f?t&1|2:t&1),r):(va(r),null);case 22:case 23:return ln(r),yu(),f=r.memoizedState!==null,t!==null?t.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(i&536870912)!==0&&(r.flags&128)===0&&(va(r),r.subtreeFlags&6&&(r.flags|=8192)):va(r),i=r.updateQueue,i!==null&&Bc(r,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==i&&(r.flags|=2048),t!==null&&Le(wl),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),sn(Wa),va(r),null;case 25:return null;case 30:return null}throw Error(h(156,r.tag))}function ey(t,r){switch(su(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return sn(Wa),Ie(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return rt(r),null;case 13:if(ln(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(h(340));Xi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Le(Ka),null;case 4:return Ie(),null;case 10:return sn(r.type),null;case 22:case 23:return ln(r),yu(),t!==null&&Le(wl),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return sn(Wa),null;case 25:return null;default:return null}}function _x(t,r){switch(su(r),r.tag){case 3:sn(Wa),Ie();break;case 26:case 27:case 5:rt(r);break;case 4:Ie();break;case 13:ln(r);break;case 19:Le(Ka);break;case 10:sn(r.type);break;case 22:case 23:ln(r),yu(),t!==null&&Le(wl);break;case 24:sn(Wa)}}function uo(t,r){try{var i=r.updateQueue,f=i!==null?i.lastEffect:null;if(f!==null){var y=f.next;i=y;do{if((i.tag&t)===t){f=void 0;var k=i.create,B=i.inst;f=k(),B.destroy=f}i=i.next}while(i!==y)}}catch(Z){da(r,r.return,Z)}}function Ln(t,r,i){try{var f=r.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var k=y.next;f=k;do{if((f.tag&t)===t){var B=f.inst,Z=B.destroy;if(Z!==void 0){B.destroy=void 0,y=r;var ue=i,Se=Z;try{Se()}catch(ze){da(y,ue,ze)}}}f=f.next}while(f!==k)}}catch(ze){da(r,r.return,ze)}}function Tx(t){var r=t.updateQueue;if(r!==null){var i=t.stateNode;try{pf(r,i)}catch(f){da(t,t.return,f)}}}function Mx(t,r,i){i.props=Nl(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(f){da(t,r,f)}}function ho(t,r){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var f=t.stateNode;break;case 30:f=t.stateNode;break;default:f=t.stateNode}typeof i=="function"?t.refCleanup=i(f):i.current=f}}catch(y){da(t,r,y)}}function Bs(t,r){var i=t.ref,f=t.refCleanup;if(i!==null)if(typeof f=="function")try{f()}catch(y){da(t,r,y)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(y){da(t,r,y)}else i.current=null}function Dx(t){var r=t.type,i=t.memoizedProps,f=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&f.focus();break e;case"img":i.src?f.src=i.src:i.srcSet&&(f.srcset=i.srcSet)}}catch(y){da(t,t.return,y)}}function Yu(t,r,i){try{var f=t.stateNode;vy(f,t.type,i,r),f[Ca]=r}catch(y){da(t,t.return,y)}}function Rx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Gn(t.type)||t.tag===4}function Xu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Gn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $u(t,r,i){var f=t.tag;if(f===5||f===6)t=t.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(t),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=$c));else if(f!==4&&(f===27&&Gn(t.type)&&(i=t.stateNode,r=null),t=t.child,t!==null))for($u(t,r,i),t=t.sibling;t!==null;)$u(t,r,i),t=t.sibling}function Lc(t,r,i){var f=t.tag;if(f===5||f===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(f!==4&&(f===27&&Gn(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Lc(t,r,i),t=t.sibling;t!==null;)Lc(t,r,i),t=t.sibling}function Ix(t){var r=t.stateNode,i=t.memoizedProps;try{for(var f=t.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);cr(r,f,i),r[Ja]=t,r[Ca]=i}catch(k){da(t,t.return,k)}}var dn=!1,La=!1,Zu=!1,Ox=typeof WeakSet=="function"?WeakSet:Set,rr=null;function ty(t,r){if(t=t.containerInfo,b0=td,t=A(t),T(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var f=i.getSelection&&i.getSelection();if(f&&f.rangeCount!==0){i=f.anchorNode;var y=f.anchorOffset,k=f.focusNode;f=f.focusOffset;try{i.nodeType,k.nodeType}catch{i=null;break e}var B=0,Z=-1,ue=-1,Se=0,ze=0,Ue=t,Ae=null;t:for(;;){for(var Te;Ue!==i||y!==0&&Ue.nodeType!==3||(Z=B+y),Ue!==k||f!==0&&Ue.nodeType!==3||(ue=B+f),Ue.nodeType===3&&(B+=Ue.nodeValue.length),(Te=Ue.firstChild)!==null;)Ae=Ue,Ue=Te;for(;;){if(Ue===t)break t;if(Ae===i&&++Se===y&&(Z=B),Ae===k&&++ze===f&&(ue=B),(Te=Ue.nextSibling)!==null)break;Ue=Ae,Ae=Ue.parentNode}Ue=Te}i=Z===-1||ue===-1?null:{start:Z,end:ue}}else i=null}i=i||{start:0,end:0}}else i=null;for(w0={focusedElem:t,selectionRange:i},td=!1,rr=r;rr!==null;)if(r=rr,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,rr=t;else for(;rr!==null;){switch(r=rr,k=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&k!==null){t=void 0,i=r,y=k.memoizedProps,k=k.memoizedState,f=i.stateNode;try{var bt=Nl(i.type,y,i.elementType===i.type);t=f.getSnapshotBeforeUpdate(bt,k),f.__reactInternalSnapshotBeforeUpdate=t}catch(pt){da(i,i.return,pt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,i=t.nodeType,i===9)j0(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":j0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(h(163))}if(t=r.sibling,t!==null){t.return=r.return,rr=t;break}rr=r.return}}function Bx(t,r,i){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Pn(t,i),f&4&&uo(5,i);break;case 1:if(Pn(t,i),f&4)if(t=i.stateNode,r===null)try{t.componentDidMount()}catch(B){da(i,i.return,B)}else{var y=Nl(i.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(y,r,t.__reactInternalSnapshotBeforeUpdate)}catch(B){da(i,i.return,B)}}f&64&&Tx(i),f&512&&ho(i,i.return);break;case 3:if(Pn(t,i),f&64&&(t=i.updateQueue,t!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{pf(t,r)}catch(B){da(i,i.return,B)}}break;case 27:r===null&&f&4&&Ix(i);case 26:case 5:Pn(t,i),r===null&&f&4&&Dx(i),f&512&&ho(i,i.return);break;case 12:Pn(t,i);break;case 13:Pn(t,i),f&4&&zx(t,i),f&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=dy.bind(null,i),Ey(t,i))));break;case 22:if(f=i.memoizedState!==null||dn,!f){r=r!==null&&r.memoizedState!==null||La,y=dn;var k=La;dn=f,(La=r)&&!k?zn(t,i,(i.subtreeFlags&8772)!==0):Pn(t,i),dn=y,La=k}break;case 30:break;default:Pn(t,i)}}function Lx(t){var r=t.alternate;r!==null&&(t.alternate=null,Lx(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&rl(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ba=null,Mr=!1;function un(t,r,i){for(i=i.child;i!==null;)Px(t,r,i),i=i.sibling}function Px(t,r,i){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(we,i)}catch{}switch(i.tag){case 26:La||Bs(i,r),un(t,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:La||Bs(i,r);var f=ba,y=Mr;Gn(i.type)&&(ba=i.stateNode,Mr=!1),un(t,r,i),vo(i.stateNode),ba=f,Mr=y;break;case 5:La||Bs(i,r);case 6:if(f=ba,y=Mr,ba=null,un(t,r,i),ba=f,Mr=y,ba!==null)if(Mr)try{(ba.nodeType===9?ba.body:ba.nodeName==="HTML"?ba.ownerDocument.body:ba).removeChild(i.stateNode)}catch(k){da(i,r,k)}else try{ba.removeChild(i.stateNode)}catch(k){da(i,r,k)}break;case 18:ba!==null&&(Mr?(t=ba,Sg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),_o(t)):Sg(ba,i.stateNode));break;case 4:f=ba,y=Mr,ba=i.stateNode.containerInfo,Mr=!0,un(t,r,i),ba=f,Mr=y;break;case 0:case 11:case 14:case 15:La||Ln(2,i,r),La||Ln(4,i,r),un(t,r,i);break;case 1:La||(Bs(i,r),f=i.stateNode,typeof f.componentWillUnmount=="function"&&Mx(i,r,f)),un(t,r,i);break;case 21:un(t,r,i);break;case 22:La=(f=La)||i.memoizedState!==null,un(t,r,i),La=f;break;default:un(t,r,i)}}function zx(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{_o(t)}catch(i){da(r,r.return,i)}}function ay(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Ox),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Ox),r;default:throw Error(h(435,t.tag))}}function Qu(t,r){var i=ay(t);r.forEach(function(f){var y=uy.bind(null,t,f);i.has(f)||(i.add(f),f.then(y,y))})}function Ur(t,r){var i=r.deletions;if(i!==null)for(var f=0;f<i.length;f++){var y=i[f],k=t,B=r,Z=B;e:for(;Z!==null;){switch(Z.tag){case 27:if(Gn(Z.type)){ba=Z.stateNode,Mr=!1;break e}break;case 5:ba=Z.stateNode,Mr=!1;break e;case 3:case 4:ba=Z.stateNode.containerInfo,Mr=!0;break e}Z=Z.return}if(ba===null)throw Error(h(160));Px(k,B,y),ba=null,Mr=!1,k=y.alternate,k!==null&&(k.return=null),y.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Fx(r,t),r=r.sibling}var us=null;function Fx(t,r){var i=t.alternate,f=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ur(r,t),Hr(t),f&4&&(Ln(3,t,t.return),uo(3,t),Ln(5,t,t.return));break;case 1:Ur(r,t),Hr(t),f&512&&(La||i===null||Bs(i,i.return)),f&64&&dn&&(t=t.updateQueue,t!==null&&(f=t.callbacks,f!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?f:i.concat(f))));break;case 26:var y=us;if(Ur(r,t),Hr(t),f&512&&(La||i===null||Bs(i,i.return)),f&4){var k=i!==null?i.memoizedState:null;if(f=t.memoizedState,i===null)if(f===null)if(t.stateNode===null){e:{f=t.type,i=t.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":k=y.getElementsByTagName("title")[0],(!k||k[Qr]||k[Ja]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=y.createElement(f),y.head.insertBefore(k,y.querySelector("head > title"))),cr(k,f,i),k[Ja]=t,Jt(k),f=k;break e;case"link":var B=Ig("link","href",y).get(f+(i.href||""));if(B){for(var Z=0;Z<B.length;Z++)if(k=B[Z],k.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&k.getAttribute("rel")===(i.rel==null?null:i.rel)&&k.getAttribute("title")===(i.title==null?null:i.title)&&k.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){B.splice(Z,1);break t}}k=y.createElement(f),cr(k,f,i),y.head.appendChild(k);break;case"meta":if(B=Ig("meta","content",y).get(f+(i.content||""))){for(Z=0;Z<B.length;Z++)if(k=B[Z],k.getAttribute("content")===(i.content==null?null:""+i.content)&&k.getAttribute("name")===(i.name==null?null:i.name)&&k.getAttribute("property")===(i.property==null?null:i.property)&&k.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&k.getAttribute("charset")===(i.charSet==null?null:i.charSet)){B.splice(Z,1);break t}}k=y.createElement(f),cr(k,f,i),y.head.appendChild(k);break;default:throw Error(h(468,f))}k[Ja]=t,Jt(k),f=k}t.stateNode=f}else Og(y,t.type,t.stateNode);else t.stateNode=Rg(y,f,t.memoizedProps);else k!==f?(k===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):k.count--,f===null?Og(y,t.type,t.stateNode):Rg(y,f,t.memoizedProps)):f===null&&t.stateNode!==null&&Yu(t,t.memoizedProps,i.memoizedProps)}break;case 27:Ur(r,t),Hr(t),f&512&&(La||i===null||Bs(i,i.return)),i!==null&&f&4&&Yu(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Ur(r,t),Hr(t),f&512&&(La||i===null||Bs(i,i.return)),t.flags&32){y=t.stateNode;try{$a(y,"")}catch(Te){da(t,t.return,Te)}}f&4&&t.stateNode!=null&&(y=t.memoizedProps,Yu(t,y,i!==null?i.memoizedProps:y)),f&1024&&(Zu=!0);break;case 6:if(Ur(r,t),Hr(t),f&4){if(t.stateNode===null)throw Error(h(162));f=t.memoizedProps,i=t.stateNode;try{i.nodeValue=f}catch(Te){da(t,t.return,Te)}}break;case 3:if(Kc=null,y=us,us=Qc(r.containerInfo),Ur(r,t),us=y,Hr(t),f&4&&i!==null&&i.memoizedState.isDehydrated)try{_o(r.containerInfo)}catch(Te){da(t,t.return,Te)}Zu&&(Zu=!1,Ux(t));break;case 4:f=us,us=Qc(t.stateNode.containerInfo),Ur(r,t),Hr(t),us=f;break;case 12:Ur(r,t),Hr(t);break;case 13:Ur(r,t),Hr(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(a0=Me()),f&4&&(f=t.updateQueue,f!==null&&(t.updateQueue=null,Qu(t,f)));break;case 22:y=t.memoizedState!==null;var ue=i!==null&&i.memoizedState!==null,Se=dn,ze=La;if(dn=Se||y,La=ze||ue,Ur(r,t),La=ze,dn=Se,Hr(t),f&8192)e:for(r=t.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(i===null||ue||dn||La||jl(t)),i=null,r=t;;){if(r.tag===5||r.tag===26){if(i===null){ue=i=r;try{if(k=ue.stateNode,y)B=k.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{Z=ue.stateNode;var Ue=ue.memoizedProps.style,Ae=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null;Z.style.display=Ae==null||typeof Ae=="boolean"?"":(""+Ae).trim()}}catch(Te){da(ue,ue.return,Te)}}}else if(r.tag===6){if(i===null){ue=r;try{ue.stateNode.nodeValue=y?"":ue.memoizedProps}catch(Te){da(ue,ue.return,Te)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=t.updateQueue,f!==null&&(i=f.retryQueue,i!==null&&(f.retryQueue=null,Qu(t,i))));break;case 19:Ur(r,t),Hr(t),f&4&&(f=t.updateQueue,f!==null&&(t.updateQueue=null,Qu(t,f)));break;case 30:break;case 21:break;default:Ur(r,t),Hr(t)}}function Hr(t){var r=t.flags;if(r&2){try{for(var i,f=t.return;f!==null;){if(Rx(f)){i=f;break}f=f.return}if(i==null)throw Error(h(160));switch(i.tag){case 27:var y=i.stateNode,k=Xu(t);Lc(t,k,y);break;case 5:var B=i.stateNode;i.flags&32&&($a(B,""),i.flags&=-33);var Z=Xu(t);Lc(t,Z,B);break;case 3:case 4:var ue=i.stateNode.containerInfo,Se=Xu(t);$u(t,Se,ue);break;default:throw Error(h(161))}}catch(ze){da(t,t.return,ze)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Ux(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Ux(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Pn(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Bx(t,r.alternate,r),r=r.sibling}function jl(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ln(4,r,r.return),jl(r);break;case 1:Bs(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&Mx(r,r.return,i),jl(r);break;case 27:vo(r.stateNode);case 26:case 5:Bs(r,r.return),jl(r);break;case 22:r.memoizedState===null&&jl(r);break;case 30:jl(r);break;default:jl(r)}t=t.sibling}}function zn(t,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,y=t,k=r,B=k.flags;switch(k.tag){case 0:case 11:case 15:zn(y,k,i),uo(4,k);break;case 1:if(zn(y,k,i),f=k,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Se){da(f,f.return,Se)}if(f=k,y=f.updateQueue,y!==null){var Z=f.stateNode;try{var ue=y.shared.hiddenCallbacks;if(ue!==null)for(y.shared.hiddenCallbacks=null,y=0;y<ue.length;y++)mf(ue[y],Z)}catch(Se){da(f,f.return,Se)}}i&&B&64&&Tx(k),ho(k,k.return);break;case 27:Ix(k);case 26:case 5:zn(y,k,i),i&&f===null&&B&4&&Dx(k),ho(k,k.return);break;case 12:zn(y,k,i);break;case 13:zn(y,k,i),i&&B&4&&zx(y,k);break;case 22:k.memoizedState===null&&zn(y,k,i),ho(k,k.return);break;case 30:break;default:zn(y,k,i)}r=r.sibling}}function Wu(t,r){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&Qi(i))}function Ku(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Qi(t))}function Ls(t,r,i,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Hx(t,r,i,f),r=r.sibling}function Hx(t,r,i,f){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Ls(t,r,i,f),y&2048&&uo(9,r);break;case 1:Ls(t,r,i,f);break;case 3:Ls(t,r,i,f),y&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Qi(t)));break;case 12:if(y&2048){Ls(t,r,i,f),t=r.stateNode;try{var k=r.memoizedProps,B=k.id,Z=k.onPostCommit;typeof Z=="function"&&Z(B,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(ue){da(r,r.return,ue)}}else Ls(t,r,i,f);break;case 13:Ls(t,r,i,f);break;case 23:break;case 22:k=r.stateNode,B=r.alternate,r.memoizedState!==null?k._visibility&2?Ls(t,r,i,f):fo(t,r):k._visibility&2?Ls(t,r,i,f):(k._visibility|=2,ui(t,r,i,f,(r.subtreeFlags&10256)!==0)),y&2048&&Wu(B,r);break;case 24:Ls(t,r,i,f),y&2048&&Ku(r.alternate,r);break;default:Ls(t,r,i,f)}}function ui(t,r,i,f,y){for(y=y&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var k=t,B=r,Z=i,ue=f,Se=B.flags;switch(B.tag){case 0:case 11:case 15:ui(k,B,Z,ue,y),uo(8,B);break;case 23:break;case 22:var ze=B.stateNode;B.memoizedState!==null?ze._visibility&2?ui(k,B,Z,ue,y):fo(k,B):(ze._visibility|=2,ui(k,B,Z,ue,y)),y&&Se&2048&&Wu(B.alternate,B);break;case 24:ui(k,B,Z,ue,y),y&&Se&2048&&Ku(B.alternate,B);break;default:ui(k,B,Z,ue,y)}r=r.sibling}}function fo(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=t,f=r,y=f.flags;switch(f.tag){case 22:fo(i,f),y&2048&&Wu(f.alternate,f);break;case 24:fo(i,f),y&2048&&Ku(f.alternate,f);break;default:fo(i,f)}r=r.sibling}}var xo=8192;function hi(t){if(t.subtreeFlags&xo)for(t=t.child;t!==null;)Vx(t),t=t.sibling}function Vx(t){switch(t.tag){case 26:hi(t),t.flags&xo&&t.memoizedState!==null&&Uy(us,t.memoizedState,t.memoizedProps);break;case 5:hi(t);break;case 3:case 4:var r=us;us=Qc(t.stateNode.containerInfo),hi(t),us=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=xo,xo=16777216,hi(t),xo=r):hi(t));break;default:hi(t)}}function qx(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function go(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var f=r[i];rr=f,Yx(f,t)}qx(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Gx(t),t=t.sibling}function Gx(t){switch(t.tag){case 0:case 11:case 15:go(t),t.flags&2048&&Ln(9,t,t.return);break;case 3:go(t);break;case 12:go(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Pc(t)):go(t);break;default:go(t)}}function Pc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var f=r[i];rr=f,Yx(f,t)}qx(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ln(8,r,r.return),Pc(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,Pc(r));break;default:Pc(r)}t=t.sibling}}function Yx(t,r){for(;rr!==null;){var i=rr;switch(i.tag){case 0:case 11:case 15:Ln(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var f=i.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Qi(i.memoizedState.cache)}if(f=i.child,f!==null)f.return=i,rr=f;else e:for(i=t;rr!==null;){f=rr;var y=f.sibling,k=f.return;if(Lx(f),f===i){rr=null;break e}if(y!==null){y.return=k,rr=y;break e}rr=k}}}var ry={getCacheForType:function(t){var r=gr(Wa),i=r.data.get(t);return i===void 0&&(i=t(),r.data.set(t,i)),i}},sy=typeof WeakMap=="function"?WeakMap:Map,aa=0,fa=null,It=null,Ut=0,ra=0,Vr=null,Fn=!1,fi=!1,Ju=!1,hn=0,_a=0,Un=0,kl=0,e0=0,rs=0,xi=0,mo=null,Dr=null,t0=!1,a0=0,zc=1/0,Fc=null,Hn=null,or=0,Vn=null,gi=null,mi=0,r0=0,s0=null,Xx=null,po=0,n0=null;function qr(){if((aa&2)!==0&&Ut!==0)return Ut&-Ut;if(V.T!==null){var t=ri;return t!==0?t:h0()}return Xs()}function $x(){rs===0&&(rs=(Ut&536870912)===0||Xt?Pl():536870912);var t=as.current;return t!==null&&(t.flags|=32),rs}function Gr(t,r,i){(t===fa&&(ra===2||ra===9)||t.cancelPendingCommit!==null)&&(pi(t,0),qn(t,Ut,rs,!1)),Br(t,i),((aa&2)===0||t!==fa)&&(t===fa&&((aa&2)===0&&(kl|=i),_a===4&&qn(t,Ut,rs,!1)),Ps(t))}function Zx(t,r,i){if((aa&6)!==0)throw Error(h(327));var f=!i&&(r&124)===0&&(r&t.expiredLanes)===0||Pt(t,r),y=f?iy(t,r):o0(t,r,!0),k=f;do{if(y===0){fi&&!f&&qn(t,r,0,!1);break}else{if(i=t.current.alternate,k&&!ny(i)){y=o0(t,r,!1),k=!1;continue}if(y===2){if(k=r,t.errorRecoveryDisabledLanes&k)var B=0;else B=t.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){r=B;e:{var Z=t;y=mo;var ue=Z.current.memoizedState.isDehydrated;if(ue&&(pi(Z,B).flags|=256),B=o0(Z,B,!1),B!==2){if(Ju&&!ue){Z.errorRecoveryDisabledLanes|=k,kl|=k,y=4;break e}k=Dr,Dr=y,k!==null&&(Dr===null?Dr=k:Dr.push.apply(Dr,k))}y=B}if(k=!1,y!==2)continue}}if(y===1){pi(t,0),qn(t,r,0,!0);break}e:{switch(f=t,k=y,k){case 0:case 1:throw Error(h(345));case 4:if((r&4194048)!==r)break;case 6:qn(f,r,rs,!Fn);break e;case 2:Dr=null;break;case 3:case 5:break;default:throw Error(h(329))}if((r&62914560)===r&&(y=a0+300-Me(),10<y)){if(qn(f,r,rs,!Fn),ht(f,0,!0)!==0)break e;f.timeoutHandle=kg(Qx.bind(null,f,i,Dr,Fc,t0,r,rs,kl,xi,Fn,k,2,-0,0),y);break e}Qx(f,i,Dr,Fc,t0,r,rs,kl,xi,Fn,k,0,-0,0)}}break}while(!0);Ps(t)}function Qx(t,r,i,f,y,k,B,Z,ue,Se,ze,Ue,Ae,Te){if(t.timeoutHandle=-1,Ue=r.subtreeFlags,(Ue&8192||(Ue&16785408)===16785408)&&(ko={stylesheets:null,count:0,unsuspend:Fy},Vx(r),Ue=Hy(),Ue!==null)){t.cancelPendingCommit=Ue(rg.bind(null,t,r,k,i,f,y,B,Z,ue,ze,1,Ae,Te)),qn(t,k,B,!Se);return}rg(t,r,k,i,f,y,B,Z,ue)}function ny(t){for(var r=t;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var f=0;f<i.length;f++){var y=i[f],k=y.getSnapshot;y=y.value;try{if(!o(k(),y))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qn(t,r,i,f){r&=~e0,r&=~kl,t.suspendedLanes|=r,t.pingedLanes&=~r,f&&(t.warmLanes|=r),f=t.expirationTimes;for(var y=r;0<y;){var k=31-xt(y),B=1<<k;f[k]=-1,y&=~B}i!==0&&Bi(t,i,r)}function Uc(){return(aa&6)===0?(yo(0),!1):!0}function l0(){if(It!==null){if(ra===0)var t=It.return;else t=It,rn=yl=null,ju(t),ci=null,io=0,t=It;for(;t!==null;)_x(t.alternate,t),t=t.return;It=null}}function pi(t,r){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,jy(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),l0(),fa=t,It=i=en(t.current,null),Ut=r,ra=0,Vr=null,Fn=!1,fi=Pt(t,r),Ju=!1,xi=rs=e0=kl=Un=_a=0,Dr=mo=null,t0=!1,(r&8)!==0&&(r|=r&32);var f=t.entangledLanes;if(f!==0)for(t=t.entanglements,f&=r;0<f;){var y=31-xt(f),k=1<<y;r|=t[y],f&=~k}return hn=r,cc(),i}function Wx(t,r){Tt=null,V.H=Ec,r===Ki||r===yc?(r=xf(),ra=3):r===uf?(r=xf(),ra=4):ra=r===gx?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Vr=r,It===null&&(_a=1,Rc(t,Kr(r,t.current)))}function Kx(){var t=V.H;return V.H=Ec,t===null?Ec:t}function Jx(){var t=V.A;return V.A=ry,t}function i0(){_a=4,Fn||(Ut&4194048)!==Ut&&as.current!==null||(fi=!0),(Un&134217727)===0&&(kl&134217727)===0||fa===null||qn(fa,Ut,rs,!1)}function o0(t,r,i){var f=aa;aa|=2;var y=Kx(),k=Jx();(fa!==t||Ut!==r)&&(Fc=null,pi(t,r)),r=!1;var B=_a;e:do try{if(ra!==0&&It!==null){var Z=It,ue=Vr;switch(ra){case 8:l0(),B=6;break e;case 3:case 2:case 9:case 6:as.current===null&&(r=!0);var Se=ra;if(ra=0,Vr=null,yi(t,Z,ue,Se),i&&fi){B=0;break e}break;default:Se=ra,ra=0,Vr=null,yi(t,Z,ue,Se)}}ly(),B=_a;break}catch(ze){Wx(t,ze)}while(!0);return r&&t.shellSuspendCounter++,rn=yl=null,aa=f,V.H=y,V.A=k,It===null&&(fa=null,Ut=0,cc()),B}function ly(){for(;It!==null;)eg(It)}function iy(t,r){var i=aa;aa|=2;var f=Kx(),y=Jx();fa!==t||Ut!==r?(Fc=null,zc=Me()+500,pi(t,r)):fi=Pt(t,r);e:do try{if(ra!==0&&It!==null){r=It;var k=Vr;t:switch(ra){case 1:ra=0,Vr=null,yi(t,r,k,1);break;case 2:case 9:if(hf(k)){ra=0,Vr=null,tg(r);break}r=function(){ra!==2&&ra!==9||fa!==t||(ra=7),Ps(t)},k.then(r,r);break e;case 3:ra=7;break e;case 4:ra=5;break e;case 7:hf(k)?(ra=0,Vr=null,tg(r)):(ra=0,Vr=null,yi(t,r,k,7));break;case 5:var B=null;switch(It.tag){case 26:B=It.memoizedState;case 5:case 27:var Z=It;if(!B||Bg(B)){ra=0,Vr=null;var ue=Z.sibling;if(ue!==null)It=ue;else{var Se=Z.return;Se!==null?(It=Se,Hc(Se)):It=null}break t}}ra=0,Vr=null,yi(t,r,k,5);break;case 6:ra=0,Vr=null,yi(t,r,k,6);break;case 8:l0(),_a=6;break e;default:throw Error(h(462))}}oy();break}catch(ze){Wx(t,ze)}while(!0);return rn=yl=null,V.H=f,V.A=y,aa=i,It!==null?0:(fa=null,Ut=0,cc(),_a)}function oy(){for(;It!==null&&!We();)eg(It)}function eg(t){var r=Ax(t.alternate,t,hn);t.memoizedProps=t.pendingProps,r===null?Hc(t):It=r}function tg(t){var r=t,i=r.alternate;switch(r.tag){case 15:case 0:r=vx(i,r,r.pendingProps,r.type,void 0,Ut);break;case 11:r=vx(i,r,r.pendingProps,r.type.render,r.ref,Ut);break;case 5:ju(r);default:_x(i,r),r=It=tf(r,hn),r=Ax(i,r,hn)}t.memoizedProps=t.pendingProps,r===null?Hc(t):It=r}function yi(t,r,i,f){rn=yl=null,ju(r),ci=null,io=0;var y=r.return;try{if(W1(t,y,r,i,Ut)){_a=1,Rc(t,Kr(i,t.current)),It=null;return}}catch(k){if(y!==null)throw It=y,k;_a=1,Rc(t,Kr(i,t.current)),It=null;return}r.flags&32768?(Xt||f===1?t=!0:fi||(Ut&536870912)!==0?t=!1:(Fn=t=!0,(f===2||f===9||f===3||f===6)&&(f=as.current,f!==null&&f.tag===13&&(f.flags|=16384))),ag(r,t)):Hc(r)}function Hc(t){var r=t;do{if((r.flags&32768)!==0){ag(r,Fn);return}t=r.return;var i=J1(r.alternate,r,hn);if(i!==null){It=i;return}if(r=r.sibling,r!==null){It=r;return}It=r=t}while(r!==null);_a===0&&(_a=5)}function ag(t,r){do{var i=ey(t.alternate,t);if(i!==null){i.flags&=32767,It=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(t=t.sibling,t!==null)){It=t;return}It=t=i}while(t!==null);_a=6,It=null}function rg(t,r,i,f,y,k,B,Z,ue){t.cancelPendingCommit=null;do Vc();while(or!==0);if((aa&6)!==0)throw Error(h(327));if(r!==null){if(r===t.current)throw Error(h(177));if(k=r.lanes|r.childLanes,k|=Kd,Ko(t,i,k,B,Z,ue),t===fa&&(It=fa=null,Ut=0),gi=r,Vn=t,mi=i,r0=k,s0=y,Xx=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,hy(Pe,function(){return og(),null})):(t.callbackNode=null,t.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=V.T,V.T=null,y=W.p,W.p=2,B=aa,aa|=4;try{ty(t,r,i)}finally{aa=B,W.p=y,V.T=f}}or=1,sg(),ng(),lg()}}function sg(){if(or===1){or=0;var t=Vn,r=gi,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=V.T,V.T=null;var f=W.p;W.p=2;var y=aa;aa|=4;try{Fx(r,t);var k=w0,B=A(t.containerInfo),Z=k.focusedElem,ue=k.selectionRange;if(B!==Z&&Z&&Z.ownerDocument&&v(Z.ownerDocument.documentElement,Z)){if(ue!==null&&T(Z)){var Se=ue.start,ze=ue.end;if(ze===void 0&&(ze=Se),"selectionStart"in Z)Z.selectionStart=Se,Z.selectionEnd=Math.min(ze,Z.value.length);else{var Ue=Z.ownerDocument||document,Ae=Ue&&Ue.defaultView||window;if(Ae.getSelection){var Te=Ae.getSelection(),bt=Z.textContent.length,pt=Math.min(ue.start,bt),oa=ue.end===void 0?pt:Math.min(ue.end,bt);!Te.extend&&pt>oa&&(B=oa,oa=pt,pt=B);var ve=p(Z,pt),pe=p(Z,oa);if(ve&&pe&&(Te.rangeCount!==1||Te.anchorNode!==ve.node||Te.anchorOffset!==ve.offset||Te.focusNode!==pe.node||Te.focusOffset!==pe.offset)){var Ce=Ue.createRange();Ce.setStart(ve.node,ve.offset),Te.removeAllRanges(),pt>oa?(Te.addRange(Ce),Te.extend(pe.node,pe.offset)):(Ce.setEnd(pe.node,pe.offset),Te.addRange(Ce))}}}}for(Ue=[],Te=Z;Te=Te.parentNode;)Te.nodeType===1&&Ue.push({element:Te,left:Te.scrollLeft,top:Te.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Ue.length;Z++){var Fe=Ue[Z];Fe.element.scrollLeft=Fe.left,Fe.element.scrollTop=Fe.top}}td=!!b0,w0=b0=null}finally{aa=y,W.p=f,V.T=i}}t.current=r,or=2}}function ng(){if(or===2){or=0;var t=Vn,r=gi,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=V.T,V.T=null;var f=W.p;W.p=2;var y=aa;aa|=4;try{Bx(t,r.alternate,r)}finally{aa=y,W.p=f,V.T=i}}or=3}}function lg(){if(or===4||or===3){or=0,Ye();var t=Vn,r=gi,i=mi,f=Xx;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?or=5:(or=0,gi=Vn=null,ig(t,t.pendingLanes));var y=t.pendingLanes;if(y===0&&(Hn=null),za(i),r=r.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(we,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=V.T,y=W.p,W.p=2,V.T=null;try{for(var k=t.onRecoverableError,B=0;B<f.length;B++){var Z=f[B];k(Z.value,{componentStack:Z.stack})}}finally{V.T=r,W.p=y}}(mi&3)!==0&&Vc(),Ps(t),y=t.pendingLanes,(i&4194090)!==0&&(y&42)!==0?t===n0?po++:(po=0,n0=t):po=0,yo(0)}}function ig(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Qi(r)))}function Vc(t){return sg(),ng(),lg(),og()}function og(){if(or!==5)return!1;var t=Vn,r=r0;r0=0;var i=za(mi),f=V.T,y=W.p;try{W.p=32>i?32:i,V.T=null,i=s0,s0=null;var k=Vn,B=mi;if(or=0,gi=Vn=null,mi=0,(aa&6)!==0)throw Error(h(331));var Z=aa;if(aa|=4,Gx(k.current),Hx(k,k.current,B,i),aa=Z,yo(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(we,k)}catch{}return!0}finally{W.p=y,V.T=f,ig(t,r)}}function cg(t,r,i){r=Kr(i,r),r=Lu(t.stateNode,r,2),t=Rn(t,r,2),t!==null&&(Br(t,2),Ps(t))}function da(t,r,i){if(t.tag===3)cg(t,t,i);else for(;r!==null;){if(r.tag===3){cg(r,t,i);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Hn===null||!Hn.has(f))){t=Kr(i,t),i=fx(2),f=Rn(r,i,2),f!==null&&(xx(i,f,r,t),Br(f,2),Ps(f));break}}r=r.return}}function c0(t,r,i){var f=t.pingCache;if(f===null){f=t.pingCache=new sy;var y=new Set;f.set(r,y)}else y=f.get(r),y===void 0&&(y=new Set,f.set(r,y));y.has(i)||(Ju=!0,y.add(i),t=cy.bind(null,t,r,i),r.then(t,t))}function cy(t,r,i){var f=t.pingCache;f!==null&&f.delete(r),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,fa===t&&(Ut&i)===i&&(_a===4||_a===3&&(Ut&62914560)===Ut&&300>Me()-a0?(aa&2)===0&&pi(t,0):e0|=i,xi===Ut&&(xi=0)),Ps(t)}function dg(t,r){r===0&&(r=Oi()),t=Jl(t,r),t!==null&&(Br(t,r),Ps(t))}function dy(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),dg(t,i)}function uy(t,r){var i=0;switch(t.tag){case 13:var f=t.stateNode,y=t.memoizedState;y!==null&&(i=y.retryLane);break;case 19:f=t.stateNode;break;case 22:f=t.stateNode._retryCache;break;default:throw Error(h(314))}f!==null&&f.delete(r),dg(t,i)}function hy(t,r){return et(t,r)}var qc=null,bi=null,d0=!1,Gc=!1,u0=!1,Cl=0;function Ps(t){t!==bi&&t.next===null&&(bi===null?qc=bi=t:bi=bi.next=t),Gc=!0,d0||(d0=!0,xy())}function yo(t,r){if(!u0&&Gc){u0=!0;do for(var i=!1,f=qc;f!==null;){if(t!==0){var y=f.pendingLanes;if(y===0)var k=0;else{var B=f.suspendedLanes,Z=f.pingedLanes;k=(1<<31-xt(42|t)+1)-1,k&=y&~(B&~Z),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(i=!0,xg(f,k))}else k=Ut,k=ht(f,f===fa?k:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(k&3)===0||Pt(f,k)||(i=!0,xg(f,k));f=f.next}while(i);u0=!1}}function fy(){ug()}function ug(){Gc=d0=!1;var t=0;Cl!==0&&(Ny()&&(t=Cl),Cl=0);for(var r=Me(),i=null,f=qc;f!==null;){var y=f.next,k=hg(f,r);k===0?(f.next=null,i===null?qc=y:i.next=y,y===null&&(bi=i)):(i=f,(t!==0||(k&3)!==0)&&(Gc=!0)),f=y}yo(t)}function hg(t,r){for(var i=t.suspendedLanes,f=t.pingedLanes,y=t.expirationTimes,k=t.pendingLanes&-62914561;0<k;){var B=31-xt(k),Z=1<<B,ue=y[B];ue===-1?((Z&i)===0||(Z&f)!==0)&&(y[B]=ws(Z,r)):ue<=r&&(t.expiredLanes|=Z),k&=~Z}if(r=fa,i=Ut,i=ht(t,t===r?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),f=t.callbackNode,i===0||t===r&&(ra===2||ra===9)||t.cancelPendingCommit!==null)return f!==null&&f!==null&&Ne(f),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||Pt(t,i)){if(r=i&-i,r===t.callbackPriority)return r;switch(f!==null&&Ne(f),za(i)){case 2:case 8:i=be;break;case 32:i=Pe;break;case 268435456:i=mt;break;default:i=Pe}return f=fg.bind(null,t),i=et(i,f),t.callbackPriority=r,t.callbackNode=i,r}return f!==null&&f!==null&&Ne(f),t.callbackPriority=2,t.callbackNode=null,2}function fg(t,r){if(or!==0&&or!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Vc()&&t.callbackNode!==i)return null;var f=Ut;return f=ht(t,t===fa?f:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),f===0?null:(Zx(t,f,r),hg(t,Me()),t.callbackNode!=null&&t.callbackNode===i?fg.bind(null,t):null)}function xg(t,r){if(Vc())return null;Zx(t,r,!0)}function xy(){ky(function(){(aa&6)!==0?et(Ee,fy):ug()})}function h0(){return Cl===0&&(Cl=Pl()),Cl}function gg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ql(""+t)}function mg(t,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,t.id&&i.setAttribute("form",t.id),r.parentNode.insertBefore(i,r),t=new FormData(t),i.parentNode.removeChild(i),t}function gy(t,r,i,f,y){if(r==="submit"&&i&&i.stateNode===y){var k=gg((y[Ca]||null).action),B=f.submitter;B&&(r=(r=B[Ca]||null)?gg(r.formAction):B.getAttribute("formAction"),r!==null&&(k=r,B=null));var Z=new Ts("action","action",null,f,y);t.push({event:Z,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Cl!==0){var ue=B?mg(y,B):new FormData(y);Du(i,{pending:!0,data:ue,method:y.method,action:k},null,ue)}}else typeof k=="function"&&(Z.preventDefault(),ue=B?mg(y,B):new FormData(y),Du(i,{pending:!0,data:ue,method:y.method,action:k},k,ue))},currentTarget:y}]})}}for(var f0=0;f0<Rs.length;f0++){var x0=Rs[f0],my=x0.toLowerCase(),py=x0[0].toUpperCase()+x0.slice(1);zr(my,"on"+py)}zr(wt,"onAnimationEnd"),zr(lr,"onAnimationIteration"),zr(_r,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(fr,"onTransitionRun"),zr(ta,"onTransitionStart"),zr(Qa,"onTransitionCancel"),zr(xr,"onTransitionEnd"),Sa("onMouseEnter",["mouseout","mouseover"]),Sa("onMouseLeave",["mouseout","mouseover"]),Sa("onPointerEnter",["pointerout","pointerover"]),Sa("onPointerLeave",["pointerout","pointerover"]),tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bo));function pg(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var f=t[i],y=f.event;f=f.listeners;e:{var k=void 0;if(r)for(var B=f.length-1;0<=B;B--){var Z=f[B],ue=Z.instance,Se=Z.currentTarget;if(Z=Z.listener,ue!==k&&y.isPropagationStopped())break e;k=Z,y.currentTarget=Se;try{k(y)}catch(ze){Dc(ze)}y.currentTarget=null,k=ue}else for(B=0;B<f.length;B++){if(Z=f[B],ue=Z.instance,Se=Z.currentTarget,Z=Z.listener,ue!==k&&y.isPropagationStopped())break e;k=Z,y.currentTarget=Se;try{k(y)}catch(ze){Dc(ze)}y.currentTarget=null,k=ue}}}}function Ot(t,r){var i=r[er];i===void 0&&(i=r[er]=new Set);var f=t+"__bubble";i.has(f)||(yg(r,t,2,!1),i.add(f))}function g0(t,r,i){var f=0;r&&(f|=4),yg(i,t,f,r)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function m0(t){if(!t[Yc]){t[Yc]=!0,Jo.forEach(function(i){i!=="selectionchange"&&(yy.has(i)||g0(i,!1,t),g0(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Yc]||(r[Yc]=!0,g0("selectionchange",!1,r))}}function yg(t,r,i,f){switch(Hg(r)){case 2:var y=Gy;break;case 8:y=Yy;break;default:y=T0}i=y.bind(null,r,i,t),y=void 0,!vt||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),f?y!==void 0?t.addEventListener(r,i,{capture:!0,passive:y}):t.addEventListener(r,i,!0):y!==void 0?t.addEventListener(r,i,{passive:y}):t.addEventListener(r,i,!1)}function p0(t,r,i,f,y){var k=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var B=f.tag;if(B===3||B===4){var Z=f.stateNode.containerInfo;if(Z===y)break;if(B===4)for(B=f.return;B!==null;){var ue=B.tag;if((ue===3||ue===4)&&B.stateNode.containerInfo===y)return;B=B.return}for(;Z!==null;){if(B=Da(Z),B===null)return;if(ue=B.tag,ue===5||ue===6||ue===26||ue===27){f=k=B;continue e}Z=Z.parentNode}}f=f.return}os(function(){var Se=k,ze=bn(i),Ue=[];e:{var Ae=Js.get(t);if(Ae!==void 0){var Te=Ts,bt=t;switch(t){case"keypress":if(Gl(i)===0)break e;case"keydown":case"keyup":Te=Fi;break;case"focusin":bt="focus",Te=jn;break;case"focusout":bt="blur",Te=jn;break;case"beforeblur":case"afterblur":Te=jn;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=Wt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=ea;break;case wt:case lr:case _r:Te=qd;break;case xr:Te=$d;break;case"scroll":case"scrollend":Te=ur;break;case"wheel":Te=Ws;break;case"copy":case"cut":case"paste":Te=kt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=cl;break;case"toggle":case"beforetoggle":Te=Zd}var pt=(r&4)!==0,oa=!pt&&(t==="scroll"||t==="scrollend"),ve=pt?Ae!==null?Ae+"Capture":null:Ae;pt=[];for(var pe=Se,Ce;pe!==null;){var Fe=pe;if(Ce=Fe.stateNode,Fe=Fe.tag,Fe!==5&&Fe!==26&&Fe!==27||Ce===null||ve===null||(Fe=ft(pe,ve),Fe!=null&&pt.push(wo(pe,Fe,Ce))),oa)break;pe=pe.return}0<pt.length&&(Ae=new Te(Ae,bt,null,i,ze),Ue.push({event:Ae,listeners:pt}))}}if((r&7)===0){e:{if(Ae=t==="mouseover"||t==="pointerover",Te=t==="mouseout"||t==="pointerout",Ae&&i!==sl&&(bt=i.relatedTarget||i.fromElement)&&(Da(bt)||bt[vs]))break e;if((Te||Ae)&&(Ae=ze.window===ze?ze:(Ae=ze.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Te?(bt=i.relatedTarget||i.toElement,Te=Se,bt=bt?Da(bt):null,bt!==null&&(oa=m(bt),pt=bt.tag,bt!==oa||pt!==5&&pt!==27&&pt!==6)&&(bt=null)):(Te=null,bt=Se),Te!==bt)){if(pt=rc,Fe="onMouseLeave",ve="onMouseEnter",pe="mouse",(t==="pointerout"||t==="pointerover")&&(pt=cl,Fe="onPointerLeave",ve="onPointerEnter",pe="pointer"),oa=Te==null?Ae:Ns(Te),Ce=bt==null?Ae:Ns(bt),Ae=new pt(Fe,pe+"leave",Te,i,ze),Ae.target=oa,Ae.relatedTarget=Ce,Fe=null,Da(ze)===Se&&(pt=new pt(ve,pe+"enter",bt,i,ze),pt.target=Ce,pt.relatedTarget=oa,Fe=pt),oa=Fe,Te&&bt)t:{for(pt=Te,ve=bt,pe=0,Ce=pt;Ce;Ce=wi(Ce))pe++;for(Ce=0,Fe=ve;Fe;Fe=wi(Fe))Ce++;for(;0<pe-Ce;)pt=wi(pt),pe--;for(;0<Ce-pe;)ve=wi(ve),Ce--;for(;pe--;){if(pt===ve||ve!==null&&pt===ve.alternate)break t;pt=wi(pt),ve=wi(ve)}pt=null}else pt=null;Te!==null&&bg(Ue,Ae,Te,pt,!1),bt!==null&&oa!==null&&bg(Ue,oa,bt,pt,!0)}}e:{if(Ae=Se?Ns(Se):window,Te=Ae.nodeName&&Ae.nodeName.toLowerCase(),Te==="select"||Te==="input"&&Ae.type==="file")var it=ic;else if(hl(Ae))if(qi)it=s;else{it=U;var Dt=Wl}else Te=Ae.nodeName,!Te||Te.toLowerCase()!=="input"||Ae.type!=="checkbox"&&Ae.type!=="radio"?Se&&dt(Se.elementType)&&(it=ic):it=a;if(it&&(it=it(t,Se))){br(Ue,it,i,ze);break e}Dt&&Dt(t,Ae,Se),t==="focusout"&&Se&&Ae.type==="number"&&Se.memoizedProps.value!=null&&ke(Ae,"number",Ae.value)}switch(Dt=Se?Ns(Se):window,t){case"focusin":(hl(Dt)||Dt.contentEditable==="true")&&(X=Dt,ae=Se,fe=null);break;case"focusout":fe=ae=X=null;break;case"mousedown":ge=!0;break;case"contextmenu":case"mouseup":case"dragend":ge=!1,je(Ue,i,ze);break;case"selectionchange":if(H)break;case"keydown":case"keyup":je(Ue,i,ze)}var ut;if(dl)e:{switch(t){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else Sn?Ks(t,i)&&(yt="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(yt="onCompositionStart");yt&&(Hi&&i.locale!=="ko"&&(Sn||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Sn&&(ut=As()):(Ss=ze,nl="value"in Ss?Ss.value:Ss.textContent,Sn=!0)),Dt=Xc(Se,yt),0<Dt.length&&(yt=new il(yt,t,null,i,ze),Ue.push({event:yt,listeners:Dt}),ut?yt.data=ut:(ut=Zl(i),ut!==null&&(yt.data=ut)))),(ut=Ui?ul(t,i):Qd(t,i))&&(yt=Xc(Se,"onBeforeInput"),0<yt.length&&(Dt=new il("onBeforeInput","beforeinput",null,i,ze),Ue.push({event:Dt,listeners:yt}),Dt.data=ut)),gy(Ue,t,Se,i,ze)}pg(Ue,r)})}function wo(t,r,i){return{instance:t,listener:r,currentTarget:i}}function Xc(t,r){for(var i=r+"Capture",f=[];t!==null;){var y=t,k=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||k===null||(y=ft(t,i),y!=null&&f.unshift(wo(t,y,k)),y=ft(t,r),y!=null&&f.push(wo(t,y,k))),t.tag===3)return f;t=t.return}return[]}function wi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function bg(t,r,i,f,y){for(var k=r._reactName,B=[];i!==null&&i!==f;){var Z=i,ue=Z.alternate,Se=Z.stateNode;if(Z=Z.tag,ue!==null&&ue===f)break;Z!==5&&Z!==26&&Z!==27||Se===null||(ue=Se,y?(Se=ft(i,k),Se!=null&&B.unshift(wo(i,Se,ue))):y||(Se=ft(i,k),Se!=null&&B.push(wo(i,Se,ue)))),i=i.return}B.length!==0&&t.push({event:r,listeners:B})}var by=/\r\n?/g,wy=/\u0000|\uFFFD/g;function wg(t){return(typeof t=="string"?t:""+t).replace(by,`
`).replace(wy,"")}function vg(t,r){return r=wg(r),wg(t)===r}function $c(){}function ia(t,r,i,f,y,k){switch(i){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||$a(t,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&$a(t,""+f);break;case"className":Fl(t,"class",f);break;case"tabIndex":Fl(t,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Fl(t,i,f);break;case"style":yr(t,f,k);break;case"data":if(r!=="object"){Fl(t,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||i!=="href")){t.removeAttribute(i);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){t.removeAttribute(i);break}f=ql(""+f),t.setAttribute(i,f);break;case"action":case"formAction":if(typeof f=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(i==="formAction"?(r!=="input"&&ia(t,r,"name",y.name,y,null),ia(t,r,"formEncType",y.formEncType,y,null),ia(t,r,"formMethod",y.formMethod,y,null),ia(t,r,"formTarget",y.formTarget,y,null)):(ia(t,r,"encType",y.encType,y,null),ia(t,r,"method",y.method,y,null),ia(t,r,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){t.removeAttribute(i);break}f=ql(""+f),t.setAttribute(i,f);break;case"onClick":f!=null&&(t.onclick=$c);break;case"onScroll":f!=null&&Ot("scroll",t);break;case"onScrollEnd":f!=null&&Ot("scrollend",t);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(h(61));if(i=f.__html,i!=null){if(y.children!=null)throw Error(h(60));t.innerHTML=i}}break;case"multiple":t.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":t.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){t.removeAttribute("xlink:href");break}i=ql(""+f),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?t.setAttribute(i,""+f):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":f===!0?t.setAttribute(i,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?t.setAttribute(i,f):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?t.setAttribute(i,f):t.removeAttribute(i);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?t.removeAttribute(i):t.setAttribute(i,f);break;case"popover":Ot("beforetoggle",t),Ot("toggle",t),He(t,"popover",f);break;case"xlinkActuate":Ht(t,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ht(t,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ht(t,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ht(t,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ht(t,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ht(t,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ht(t,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ht(t,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ht(t,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":He(t,"is",f);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=ga.get(i)||i,He(t,i,f))}}function y0(t,r,i,f,y,k){switch(i){case"style":yr(t,f,k);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(h(61));if(i=f.__html,i!=null){if(y.children!=null)throw Error(h(60));t.innerHTML=i}}break;case"children":typeof f=="string"?$a(t,f):(typeof f=="number"||typeof f=="bigint")&&$a(t,""+f);break;case"onScroll":f!=null&&Ot("scroll",t);break;case"onScrollEnd":f!=null&&Ot("scrollend",t);break;case"onClick":f!=null&&(t.onclick=$c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ec.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(y=i.endsWith("Capture"),r=i.slice(2,y?i.length-7:void 0),k=t[Ca]||null,k=k!=null?k[i]:null,typeof k=="function"&&t.removeEventListener(r,k,y),typeof f=="function")){typeof k!="function"&&k!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(r,f,y);break e}i in t?t[i]=f:f===!0?t.setAttribute(i,""):He(t,i,f)}}}function cr(t,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",t),Ot("load",t);var f=!1,y=!1,k;for(k in i)if(i.hasOwnProperty(k)){var B=i[k];if(B!=null)switch(k){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(h(137,r));default:ia(t,r,k,B,i,null)}}y&&ia(t,r,"srcSet",i.srcSet,i,null),f&&ia(t,r,"src",i.src,i,null);return;case"input":Ot("invalid",t);var Z=k=B=y=null,ue=null,Se=null;for(f in i)if(i.hasOwnProperty(f)){var ze=i[f];if(ze!=null)switch(f){case"name":y=ze;break;case"type":B=ze;break;case"checked":ue=ze;break;case"defaultChecked":Se=ze;break;case"value":k=ze;break;case"defaultValue":Z=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(h(137,r));break;default:ia(t,r,f,ze,i,null)}}Xa(t,k,Z,ue,Se,B,y,!1),Hl(t);return;case"select":Ot("invalid",t),f=B=k=null;for(y in i)if(i.hasOwnProperty(y)&&(Z=i[y],Z!=null))switch(y){case"value":k=Z;break;case"defaultValue":B=Z;break;case"multiple":f=Z;default:ia(t,r,y,Z,i,null)}r=k,i=B,t.multiple=!!f,r!=null?ee(t,!!f,r,!1):i!=null&&ee(t,!!f,i,!0);return;case"textarea":Ot("invalid",t),k=y=f=null;for(B in i)if(i.hasOwnProperty(B)&&(Z=i[B],Z!=null))switch(B){case"value":f=Z;break;case"defaultValue":y=Z;break;case"children":k=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(h(91));break;default:ia(t,r,B,Z,i,null)}Ra(t,f,y,k),Hl(t);return;case"option":for(ue in i)if(i.hasOwnProperty(ue)&&(f=i[ue],f!=null))switch(ue){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ia(t,r,ue,f,i,null)}return;case"dialog":Ot("beforetoggle",t),Ot("toggle",t),Ot("cancel",t),Ot("close",t);break;case"iframe":case"object":Ot("load",t);break;case"video":case"audio":for(f=0;f<bo.length;f++)Ot(bo[f],t);break;case"image":Ot("error",t),Ot("load",t);break;case"details":Ot("toggle",t);break;case"embed":case"source":case"link":Ot("error",t),Ot("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Se in i)if(i.hasOwnProperty(Se)&&(f=i[Se],f!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":throw Error(h(137,r));default:ia(t,r,Se,f,i,null)}return;default:if(dt(r)){for(ze in i)i.hasOwnProperty(ze)&&(f=i[ze],f!==void 0&&y0(t,r,ze,f,i,void 0));return}}for(Z in i)i.hasOwnProperty(Z)&&(f=i[Z],f!=null&&ia(t,r,Z,f,i,null))}function vy(t,r,i,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,k=null,B=null,Z=null,ue=null,Se=null,ze=null;for(Te in i){var Ue=i[Te];if(i.hasOwnProperty(Te)&&Ue!=null)switch(Te){case"checked":break;case"value":break;case"defaultValue":ue=Ue;default:f.hasOwnProperty(Te)||ia(t,r,Te,null,f,Ue)}}for(var Ae in f){var Te=f[Ae];if(Ue=i[Ae],f.hasOwnProperty(Ae)&&(Te!=null||Ue!=null))switch(Ae){case"type":k=Te;break;case"name":y=Te;break;case"checked":Se=Te;break;case"defaultChecked":ze=Te;break;case"value":B=Te;break;case"defaultValue":Z=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(h(137,r));break;default:Te!==Ue&&ia(t,r,Ae,Te,f,Ue)}}Qt(t,B,Z,ue,Se,ze,k,y);return;case"select":Te=B=Z=Ae=null;for(k in i)if(ue=i[k],i.hasOwnProperty(k)&&ue!=null)switch(k){case"value":break;case"multiple":Te=ue;default:f.hasOwnProperty(k)||ia(t,r,k,null,f,ue)}for(y in f)if(k=f[y],ue=i[y],f.hasOwnProperty(y)&&(k!=null||ue!=null))switch(y){case"value":Ae=k;break;case"defaultValue":Z=k;break;case"multiple":B=k;default:k!==ue&&ia(t,r,y,k,f,ue)}r=Z,i=B,f=Te,Ae!=null?ee(t,!!i,Ae,!1):!!f!=!!i&&(r!=null?ee(t,!!i,r,!0):ee(t,!!i,i?[]:"",!1));return;case"textarea":Te=Ae=null;for(Z in i)if(y=i[Z],i.hasOwnProperty(Z)&&y!=null&&!f.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:ia(t,r,Z,null,f,y)}for(B in f)if(y=f[B],k=i[B],f.hasOwnProperty(B)&&(y!=null||k!=null))switch(B){case"value":Ae=y;break;case"defaultValue":Te=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(h(91));break;default:y!==k&&ia(t,r,B,y,f,k)}ct(t,Ae,Te);return;case"option":for(var bt in i)if(Ae=i[bt],i.hasOwnProperty(bt)&&Ae!=null&&!f.hasOwnProperty(bt))switch(bt){case"selected":t.selected=!1;break;default:ia(t,r,bt,null,f,Ae)}for(ue in f)if(Ae=f[ue],Te=i[ue],f.hasOwnProperty(ue)&&Ae!==Te&&(Ae!=null||Te!=null))switch(ue){case"selected":t.selected=Ae&&typeof Ae!="function"&&typeof Ae!="symbol";break;default:ia(t,r,ue,Ae,f,Te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in i)Ae=i[pt],i.hasOwnProperty(pt)&&Ae!=null&&!f.hasOwnProperty(pt)&&ia(t,r,pt,null,f,Ae);for(Se in f)if(Ae=f[Se],Te=i[Se],f.hasOwnProperty(Se)&&Ae!==Te&&(Ae!=null||Te!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(h(137,r));break;default:ia(t,r,Se,Ae,f,Te)}return;default:if(dt(r)){for(var oa in i)Ae=i[oa],i.hasOwnProperty(oa)&&Ae!==void 0&&!f.hasOwnProperty(oa)&&y0(t,r,oa,void 0,f,Ae);for(ze in f)Ae=f[ze],Te=i[ze],!f.hasOwnProperty(ze)||Ae===Te||Ae===void 0&&Te===void 0||y0(t,r,ze,Ae,f,Te);return}}for(var ve in i)Ae=i[ve],i.hasOwnProperty(ve)&&Ae!=null&&!f.hasOwnProperty(ve)&&ia(t,r,ve,null,f,Ae);for(Ue in f)Ae=f[Ue],Te=i[Ue],!f.hasOwnProperty(Ue)||Ae===Te||Ae==null&&Te==null||ia(t,r,Ue,Ae,f,Te)}var b0=null,w0=null;function Zc(t){return t.nodeType===9?t:t.ownerDocument}function Ng(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jg(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function v0(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var N0=null;function Ny(){var t=window.event;return t&&t.type==="popstate"?t===N0?!1:(N0=t,!0):(N0=null,!1)}var kg=typeof setTimeout=="function"?setTimeout:void 0,jy=typeof clearTimeout=="function"?clearTimeout:void 0,Cg=typeof Promise=="function"?Promise:void 0,ky=typeof queueMicrotask=="function"?queueMicrotask:typeof Cg<"u"?function(t){return Cg.resolve(null).then(t).catch(Cy)}:kg;function Cy(t){setTimeout(function(){throw t})}function Gn(t){return t==="head"}function Sg(t,r){var i=r,f=0,y=0;do{var k=i.nextSibling;if(t.removeChild(i),k&&k.nodeType===8)if(i=k.data,i==="/$"){if(0<f&&8>f){i=f;var B=t.ownerDocument;if(i&1&&vo(B.documentElement),i&2&&vo(B.body),i&4)for(i=B.head,vo(i),B=i.firstChild;B;){var Z=B.nextSibling,ue=B.nodeName;B[Qr]||ue==="SCRIPT"||ue==="STYLE"||ue==="LINK"&&B.rel.toLowerCase()==="stylesheet"||i.removeChild(B),B=Z}}if(y===0){t.removeChild(k),_o(r);return}y--}else i==="$"||i==="$?"||i==="$!"?y++:f=i.charCodeAt(0)-48;else f=0;i=k}while(i);_o(r)}function j0(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":j0(i),rl(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function Sy(t,r,i,f){for(;t.nodeType===1;){var y=i;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(f){if(!t[Qr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(k=t.getAttribute("rel"),k==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(k!==y.rel||t.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||t.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||t.getAttribute("title")!==(y.title==null?null:y.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(k=t.getAttribute("src"),(k!==(y.src==null?null:y.src)||t.getAttribute("type")!==(y.type==null?null:y.type)||t.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&k&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var k=y.name==null?null:""+y.name;if(y.type==="hidden"&&t.getAttribute("name")===k)return t}else return t;if(t=hs(t.nextSibling),t===null)break}return null}function Ay(t,r,i){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=hs(t.nextSibling),t===null))return null;return t}function k0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Ey(t,r){var i=t.ownerDocument;if(t.data!=="$?"||i.readyState==="complete")r();else{var f=function(){r(),i.removeEventListener("DOMContentLoaded",f)};i.addEventListener("DOMContentLoaded",f),t._reactRetry=f}}function hs(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var C0=null;function Ag(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return t;r--}else i==="/$"&&r++}t=t.previousSibling}return null}function Eg(t,r,i){switch(r=Zc(i),t){case"html":if(t=r.documentElement,!t)throw Error(h(452));return t;case"head":if(t=r.head,!t)throw Error(h(453));return t;case"body":if(t=r.body,!t)throw Error(h(454));return t;default:throw Error(h(451))}}function vo(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);rl(t)}var ss=new Map,_g=new Set;function Qc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var fn=W.d;W.d={f:_y,r:Ty,D:My,C:Dy,L:Ry,m:Iy,X:By,S:Oy,M:Ly};function _y(){var t=fn.f(),r=Uc();return t||r}function Ty(t){var r=Lr(t);r!==null&&r.tag===5&&r.type==="form"?Zf(r):fn.r(t)}var vi=typeof document>"u"?null:document;function Tg(t,r,i){var f=vi;if(f&&typeof r=="string"&&r){var y=Ya(r);y='link[rel="'+t+'"][href="'+y+'"]',typeof i=="string"&&(y+='[crossorigin="'+i+'"]'),_g.has(y)||(_g.add(y),t={rel:t,crossOrigin:i,href:r},f.querySelector(y)===null&&(r=f.createElement("link"),cr(r,"link",t),Jt(r),f.head.appendChild(r)))}}function My(t){fn.D(t),Tg("dns-prefetch",t,null)}function Dy(t,r){fn.C(t,r),Tg("preconnect",t,r)}function Ry(t,r,i){fn.L(t,r,i);var f=vi;if(f&&t&&r){var y='link[rel="preload"][as="'+Ya(r)+'"]';r==="image"&&i&&i.imageSrcSet?(y+='[imagesrcset="'+Ya(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(y+='[imagesizes="'+Ya(i.imageSizes)+'"]')):y+='[href="'+Ya(t)+'"]';var k=y;switch(r){case"style":k=Ni(t);break;case"script":k=ji(t)}ss.has(k)||(t=S({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:t,as:r},i),ss.set(k,t),f.querySelector(y)!==null||r==="style"&&f.querySelector(No(k))||r==="script"&&f.querySelector(jo(k))||(r=f.createElement("link"),cr(r,"link",t),Jt(r),f.head.appendChild(r)))}}function Iy(t,r){fn.m(t,r);var i=vi;if(i&&t){var f=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Ya(f)+'"][href="'+Ya(t)+'"]',k=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=ji(t)}if(!ss.has(k)&&(t=S({rel:"modulepreload",href:t},r),ss.set(k,t),i.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(jo(k)))return}f=i.createElement("link"),cr(f,"link",t),Jt(f),i.head.appendChild(f)}}}function Oy(t,r,i){fn.S(t,r,i);var f=vi;if(f&&t){var y=ls(f).hoistableStyles,k=Ni(t);r=r||"default";var B=y.get(k);if(!B){var Z={loading:0,preload:null};if(B=f.querySelector(No(k)))Z.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":r},i),(i=ss.get(k))&&S0(t,i);var ue=B=f.createElement("link");Jt(ue),cr(ue,"link",t),ue._p=new Promise(function(Se,ze){ue.onload=Se,ue.onerror=ze}),ue.addEventListener("load",function(){Z.loading|=1}),ue.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,Wc(B,r,f)}B={type:"stylesheet",instance:B,count:1,state:Z},y.set(k,B)}}}function By(t,r){fn.X(t,r);var i=vi;if(i&&t){var f=ls(i).hoistableScripts,y=ji(t),k=f.get(y);k||(k=i.querySelector(jo(y)),k||(t=S({src:t,async:!0},r),(r=ss.get(y))&&A0(t,r),k=i.createElement("script"),Jt(k),cr(k,"link",t),i.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},f.set(y,k))}}function Ly(t,r){fn.M(t,r);var i=vi;if(i&&t){var f=ls(i).hoistableScripts,y=ji(t),k=f.get(y);k||(k=i.querySelector(jo(y)),k||(t=S({src:t,async:!0,type:"module"},r),(r=ss.get(y))&&A0(t,r),k=i.createElement("script"),Jt(k),cr(k,"link",t),i.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},f.set(y,k))}}function Mg(t,r,i,f){var y=(y=oe.current)?Qc(y):null;if(!y)throw Error(h(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=Ni(i.href),i=ls(y).hoistableStyles,f=i.get(r),f||(f={type:"style",instance:null,count:0,state:null},i.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Ni(i.href);var k=ls(y).hoistableStyles,B=k.get(t);if(B||(y=y.ownerDocument||y,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(t,B),(k=y.querySelector(No(t)))&&!k._p&&(B.instance=k,B.state.loading=5),ss.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ss.set(t,i),k||Py(y,t,i,B.state))),r&&f===null)throw Error(h(528,""));return B}if(r&&f!==null)throw Error(h(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ji(i),i=ls(y).hoistableScripts,f=i.get(r),f||(f={type:"script",instance:null,count:0,state:null},i.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(h(444,t))}}function Ni(t){return'href="'+Ya(t)+'"'}function No(t){return'link[rel="stylesheet"]['+t+"]"}function Dg(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Py(t,r,i,f){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=t.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),cr(r,"link",i),Jt(r),t.head.appendChild(r))}function ji(t){return'[src="'+Ya(t)+'"]'}function jo(t){return"script[async]"+t}function Rg(t,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var f=t.querySelector('style[data-href~="'+Ya(i.href)+'"]');if(f)return r.instance=f,Jt(f),f;var y=S({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return f=(t.ownerDocument||t).createElement("style"),Jt(f),cr(f,"style",y),Wc(f,i.precedence,t),r.instance=f;case"stylesheet":y=Ni(i.href);var k=t.querySelector(No(y));if(k)return r.state.loading|=4,r.instance=k,Jt(k),k;f=Dg(i),(y=ss.get(y))&&S0(f,y),k=(t.ownerDocument||t).createElement("link"),Jt(k);var B=k;return B._p=new Promise(function(Z,ue){B.onload=Z,B.onerror=ue}),cr(k,"link",f),r.state.loading|=4,Wc(k,i.precedence,t),r.instance=k;case"script":return k=ji(i.src),(y=t.querySelector(jo(k)))?(r.instance=y,Jt(y),y):(f=i,(y=ss.get(k))&&(f=S({},i),A0(f,y)),t=t.ownerDocument||t,y=t.createElement("script"),Jt(y),cr(y,"link",f),t.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(h(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Wc(f,i.precedence,t));return r.instance}function Wc(t,r,i){for(var f=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,k=y,B=0;B<f.length;B++){var Z=f[B];if(Z.dataset.precedence===r)k=Z;else if(k!==y)break}k?k.parentNode.insertBefore(t,k.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(t,r.firstChild))}function S0(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function A0(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Kc=null;function Ig(t,r,i){if(Kc===null){var f=new Map,y=Kc=new Map;y.set(i,f)}else y=Kc,f=y.get(i),f||(f=new Map,y.set(i,f));if(f.has(t))return f;for(f.set(t,null),i=i.getElementsByTagName(t),y=0;y<i.length;y++){var k=i[y];if(!(k[Qr]||k[Ja]||t==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var B=k.getAttribute(r)||"";B=t+B;var Z=f.get(B);Z?Z.push(k):f.set(B,[k])}}return f}function Og(t,r,i){t=t.ownerDocument||t,t.head.insertBefore(i,r==="title"?t.querySelector("head > title"):null)}function zy(t,r,i){if(i===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Bg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ko=null;function Fy(){}function Uy(t,r,i){if(ko===null)throw Error(h(475));var f=ko;if(r.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var y=Ni(i.href),k=t.querySelector(No(y));if(k){t=k._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(f.count++,f=Jc.bind(f),t.then(f,f)),r.state.loading|=4,r.instance=k,Jt(k);return}k=t.ownerDocument||t,i=Dg(i),(y=ss.get(y))&&S0(i,y),k=k.createElement("link"),Jt(k);var B=k;B._p=new Promise(function(Z,ue){B.onload=Z,B.onerror=ue}),cr(k,"link",i),r.instance=k}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(f.count++,r=Jc.bind(f),t.addEventListener("load",r),t.addEventListener("error",r))}}function Hy(){if(ko===null)throw Error(h(475));var t=ko;return t.stylesheets&&t.count===0&&E0(t,t.stylesheets),0<t.count?function(r){var i=setTimeout(function(){if(t.stylesheets&&E0(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(i)}}:null}function Jc(){if(this.count--,this.count===0){if(this.stylesheets)E0(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ed=null;function E0(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ed=new Map,r.forEach(Vy,t),ed=null,Jc.call(t))}function Vy(t,r){if(!(r.state.loading&4)){var i=ed.get(t);if(i)var f=i.get(null);else{i=new Map,ed.set(t,i);for(var y=t.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<y.length;k++){var B=y[k];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(i.set(B.dataset.precedence,B),f=B)}f&&i.set(null,f)}y=r.instance,B=y.getAttribute("data-precedence"),k=i.get(B)||f,k===f&&i.set(null,y),i.set(B,y),this.count++,f=Jc.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),k?k.parentNode.insertBefore(y,k.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(y,t.firstChild)),r.state.loading|=4}}var Co={$$typeof:O,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function qy(t,r,i,f,y,k,B,Z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.hiddenUpdates=zt(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=k,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function Lg(t,r,i,f,y,k,B,Z,ue,Se,ze,Ue){return t=new qy(t,r,i,B,Z,ue,Se,Ue),r=1,k===!0&&(r|=24),k=Fr(3,null,null,r),t.current=k,k.stateNode=t,r=cu(),r.refCount++,t.pooledCache=r,r.refCount++,k.memoizedState={element:f,isDehydrated:i,cache:r},fu(k),t}function Pg(t){return t?(t=ei,t):ei}function zg(t,r,i,f,y,k){y=Pg(y),f.context===null?f.context=y:f.pendingContext=y,f=Dn(r),f.payload={element:i},k=k===void 0?null:k,k!==null&&(f.callback=k),i=Rn(t,f,r),i!==null&&(Gr(i,t,r),eo(i,t,r))}function Fg(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function _0(t,r){Fg(t,r),(t=t.alternate)&&Fg(t,r)}function Ug(t){if(t.tag===13){var r=Jl(t,67108864);r!==null&&Gr(r,t,67108864),_0(t,67108864)}}var td=!0;function Gy(t,r,i,f){var y=V.T;V.T=null;var k=W.p;try{W.p=2,T0(t,r,i,f)}finally{W.p=k,V.T=y}}function Yy(t,r,i,f){var y=V.T;V.T=null;var k=W.p;try{W.p=8,T0(t,r,i,f)}finally{W.p=k,V.T=y}}function T0(t,r,i,f){if(td){var y=M0(f);if(y===null)p0(t,r,f,ad,i),Vg(t,f);else if($y(y,t,r,i,f))f.stopPropagation();else if(Vg(t,f),r&4&&-1<Xy.indexOf(t)){for(;y!==null;){var k=Lr(y);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var B=Kt(k.pendingLanes);if(B!==0){var Z=k;for(Z.pendingLanes|=2,Z.entangledLanes|=2;B;){var ue=1<<31-xt(B);Z.entanglements[1]|=ue,B&=~ue}Ps(k),(aa&6)===0&&(zc=Me()+500,yo(0))}}break;case 13:Z=Jl(k,2),Z!==null&&Gr(Z,k,2),Uc(),_0(k,2)}if(k=M0(f),k===null&&p0(t,r,f,ad,i),k===y)break;y=k}y!==null&&f.stopPropagation()}else p0(t,r,f,null,i)}}function M0(t){return t=bn(t),D0(t)}var ad=null;function D0(t){if(ad=null,t=Da(t),t!==null){var r=m(t);if(r===null)t=null;else{var i=r.tag;if(i===13){if(t=w(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return ad=t,null}function Hg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Je()){case Ee:return 2;case be:return 8;case Pe:case Bt:return 32;case mt:return 268435456;default:return 32}default:return 32}}var R0=!1,Yn=null,Xn=null,$n=null,So=new Map,Ao=new Map,Zn=[],Xy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vg(t,r){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":So.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ao.delete(r.pointerId)}}function Eo(t,r,i,f,y,k){return t===null||t.nativeEvent!==k?(t={blockedOn:r,domEventName:i,eventSystemFlags:f,nativeEvent:k,targetContainers:[y]},r!==null&&(r=Lr(r),r!==null&&Ug(r)),t):(t.eventSystemFlags|=f,r=t.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),t)}function $y(t,r,i,f,y){switch(r){case"focusin":return Yn=Eo(Yn,t,r,i,f,y),!0;case"dragenter":return Xn=Eo(Xn,t,r,i,f,y),!0;case"mouseover":return $n=Eo($n,t,r,i,f,y),!0;case"pointerover":var k=y.pointerId;return So.set(k,Eo(So.get(k)||null,t,r,i,f,y)),!0;case"gotpointercapture":return k=y.pointerId,Ao.set(k,Eo(Ao.get(k)||null,t,r,i,f,y)),!0}return!1}function qg(t){var r=Da(t.target);if(r!==null){var i=m(r);if(i!==null){if(r=i.tag,r===13){if(r=w(i),r!==null){t.blockedOn=r,zl(t.priority,function(){if(i.tag===13){var f=qr();f=al(f);var y=Jl(i,f);y!==null&&Gr(y,i,f),_0(i,f)}});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rd(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=M0(t.nativeEvent);if(i===null){i=t.nativeEvent;var f=new i.constructor(i.type,i);sl=f,i.target.dispatchEvent(f),sl=null}else return r=Lr(i),r!==null&&Ug(r),t.blockedOn=i,!1;r.shift()}return!0}function Gg(t,r,i){rd(t)&&i.delete(r)}function Zy(){R0=!1,Yn!==null&&rd(Yn)&&(Yn=null),Xn!==null&&rd(Xn)&&(Xn=null),$n!==null&&rd($n)&&($n=null),So.forEach(Gg),Ao.forEach(Gg)}function sd(t,r){t.blockedOn===r&&(t.blockedOn=null,R0||(R0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Zy)))}var nd=null;function Yg(t){nd!==t&&(nd=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){nd===t&&(nd=null);for(var r=0;r<t.length;r+=3){var i=t[r],f=t[r+1],y=t[r+2];if(typeof f!="function"){if(D0(f||i)===null)continue;break}var k=Lr(i);k!==null&&(t.splice(r,3),r-=3,Du(k,{pending:!0,data:y,method:i.method,action:f},f,y))}}))}function _o(t){function r(ue){return sd(ue,t)}Yn!==null&&sd(Yn,t),Xn!==null&&sd(Xn,t),$n!==null&&sd($n,t),So.forEach(r),Ao.forEach(r);for(var i=0;i<Zn.length;i++){var f=Zn[i];f.blockedOn===t&&(f.blockedOn=null)}for(;0<Zn.length&&(i=Zn[0],i.blockedOn===null);)qg(i),i.blockedOn===null&&Zn.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(f=0;f<i.length;f+=3){var y=i[f],k=i[f+1],B=y[Ca]||null;if(typeof k=="function")B||Yg(i);else if(B){var Z=null;if(k&&k.hasAttribute("formAction")){if(y=k,B=k[Ca]||null)Z=B.formAction;else if(D0(y)!==null)continue}else Z=B.action;typeof Z=="function"?i[f+1]=Z:(i.splice(f,3),f-=3),Yg(i)}}}function I0(t){this._internalRoot=t}ld.prototype.render=I0.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(h(409));var i=r.current,f=qr();zg(i,f,t,r,null,null)},ld.prototype.unmount=I0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;zg(t.current,2,null,t,null,null),Uc(),r[vs]=null}};function ld(t){this._internalRoot=t}ld.prototype.unstable_scheduleHydration=function(t){if(t){var r=Xs();t={blockedOn:null,target:t,priority:r};for(var i=0;i<Zn.length&&r!==0&&r<Zn[i].priority;i++);Zn.splice(i,0,t),i===0&&qg(t)}};var Xg=c.version;if(Xg!=="19.1.1")throw Error(h(527,Xg,"19.1.1"));W.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(h(188)):(t=Object.keys(t).join(","),Error(h(268,t)));return t=C(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var Qy={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!id.isDisabled&&id.supportsFiber)try{we=id.inject(Qy),Ze=id}catch{}}return Mo.createRoot=function(t,r){if(!g(t))throw Error(h(299));var i=!1,f="",y=cx,k=dx,B=ux,Z=null;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(k=r.onCaughtError),r.onRecoverableError!==void 0&&(B=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(Z=r.unstable_transitionCallbacks)),r=Lg(t,1,!1,null,null,i,f,y,k,B,Z,null),t[vs]=r.current,m0(t),new I0(r)},Mo.hydrateRoot=function(t,r,i){if(!g(t))throw Error(h(299));var f=!1,y="",k=cx,B=dx,Z=ux,ue=null,Se=null;return i!=null&&(i.unstable_strictMode===!0&&(f=!0),i.identifierPrefix!==void 0&&(y=i.identifierPrefix),i.onUncaughtError!==void 0&&(k=i.onUncaughtError),i.onCaughtError!==void 0&&(B=i.onCaughtError),i.onRecoverableError!==void 0&&(Z=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(ue=i.unstable_transitionCallbacks),i.formState!==void 0&&(Se=i.formState)),r=Lg(t,1,!0,r,i??null,f,y,k,B,Z,ue,Se),r.context=Pg(null),i=r.current,f=qr(),f=al(f),y=Dn(f),y.callback=null,Rn(i,y,f),i=f,r.current.lanes=i,Br(r,i),Ps(r),t[vs]=r.current,m0(t),new ld(r)},Mo.version="19.1.1",Mo}var rm;function ib(){if(rm)return L0.exports;rm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(c){console.error(c)}}return n(),L0.exports=lb(),L0.exports}var ob=ib();const cb=Cd(ob);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sm="popstate";function db(n={}){function c(h,g){let{pathname:m,search:w,hash:j}=h.location;return gh("",{pathname:m,search:w,hash:j},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}function d(h,g){return typeof g=="string"?g:Bo(g)}return hb(c,d,null,n)}function Na(n,c){if(n===!1||n===null||typeof n>"u")throw new Error(c)}function xs(n,c){if(!n){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function ub(){return Math.random().toString(36).substring(2,10)}function nm(n,c){return{usr:n.state,key:n.key,idx:c}}function gh(n,c,d=null,h){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof c=="string"?Ti(c):c,state:d,key:c&&c.key||h||ub()}}function Bo({pathname:n="/",search:c="",hash:d=""}){return c&&c!=="?"&&(n+=c.charAt(0)==="?"?c:"?"+c),d&&d!=="#"&&(n+=d.charAt(0)==="#"?d:"#"+d),n}function Ti(n){let c={};if(n){let d=n.indexOf("#");d>=0&&(c.hash=n.substring(d),n=n.substring(0,d));let h=n.indexOf("?");h>=0&&(c.search=n.substring(h),n=n.substring(0,h)),n&&(c.pathname=n)}return c}function hb(n,c,d,h={}){let{window:g=document.defaultView,v5Compat:m=!1}=h,w=g.history,j="POP",C=null,b=S();b==null&&(b=0,w.replaceState({...w.state,idx:b},""));function S(){return(w.state||{idx:null}).idx}function E(){j="POP";let G=S(),R=G==null?null:G-b;b=G,C&&C({action:j,location:D.location,delta:R})}function _(G,R){j="PUSH";let L=gh(D.location,G,R);b=S()+1;let O=nm(L,b),P=D.createHref(L);try{w.pushState(O,"",P)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;g.location.assign(P)}m&&C&&C({action:j,location:D.location,delta:1})}function M(G,R){j="REPLACE";let L=gh(D.location,G,R);b=S();let O=nm(L,b),P=D.createHref(L);w.replaceState(O,"",P),m&&C&&C({action:j,location:D.location,delta:0})}function I(G){return fb(G)}let D={get action(){return j},get location(){return n(g,w)},listen(G){if(C)throw new Error("A history only accepts one active listener");return g.addEventListener(sm,E),C=G,()=>{g.removeEventListener(sm,E),C=null}},createHref(G){return c(g,G)},createURL:I,encodeLocation(G){let R=I(G);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:_,replace:M,go(G){return w.go(G)}};return D}function fb(n,c=!1){let d="http://localhost";typeof window<"u"&&(d=window.location.origin!=="null"?window.location.origin:window.location.href),Na(d,"No window.location.(origin|href) available to create URL");let h=typeof n=="string"?n:Bo(n);return h=h.replace(/ $/,"%20"),!c&&h.startsWith("//")&&(h=d+h),new URL(h,d)}function bp(n,c,d="/"){return xb(n,c,d,!1)}function xb(n,c,d,h){let g=typeof c=="string"?Ti(c):c,m=mn(g.pathname||"/",d);if(m==null)return null;let w=wp(n);gb(w);let j=null;for(let C=0;j==null&&C<w.length;++C){let b=Sb(m);j=kb(w[C],b,h)}return j}function wp(n,c=[],d=[],h=""){let g=(m,w,j)=>{let C={relativePath:j===void 0?m.path||"":j,caseSensitive:m.caseSensitive===!0,childrenIndex:w,route:m};C.relativePath.startsWith("/")&&(Na(C.relativePath.startsWith(h),`Absolute route path "${C.relativePath}" nested under path "${h}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(h.length));let b=gn([h,C.relativePath]),S=d.concat(C);m.children&&m.children.length>0&&(Na(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),wp(m.children,c,S,b)),!(m.path==null&&!m.index)&&c.push({path:b,score:Nb(b,m.index),routesMeta:S})};return n.forEach((m,w)=>{if(m.path===""||!m.path?.includes("?"))g(m,w);else for(let j of vp(m.path))g(m,w,j)}),c}function vp(n){let c=n.split("/");if(c.length===0)return[];let[d,...h]=c,g=d.endsWith("?"),m=d.replace(/\?$/,"");if(h.length===0)return g?[m,""]:[m];let w=vp(h.join("/")),j=[];return j.push(...w.map(C=>C===""?m:[m,C].join("/"))),g&&j.push(...w),j.map(C=>n.startsWith("/")&&C===""?"/":C)}function gb(n){n.sort((c,d)=>c.score!==d.score?d.score-c.score:jb(c.routesMeta.map(h=>h.childrenIndex),d.routesMeta.map(h=>h.childrenIndex)))}var mb=/^:[\w-]+$/,pb=3,yb=2,bb=1,wb=10,vb=-2,lm=n=>n==="*";function Nb(n,c){let d=n.split("/"),h=d.length;return d.some(lm)&&(h+=vb),c&&(h+=yb),d.filter(g=>!lm(g)).reduce((g,m)=>g+(mb.test(m)?pb:m===""?bb:wb),h)}function jb(n,c){return n.length===c.length&&n.slice(0,-1).every((h,g)=>h===c[g])?n[n.length-1]-c[c.length-1]:0}function kb(n,c,d=!1){let{routesMeta:h}=n,g={},m="/",w=[];for(let j=0;j<h.length;++j){let C=h[j],b=j===h.length-1,S=m==="/"?c:c.slice(m.length)||"/",E=yd({path:C.relativePath,caseSensitive:C.caseSensitive,end:b},S),_=C.route;if(!E&&b&&d&&!h[h.length-1].route.index&&(E=yd({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},S)),!E)return null;Object.assign(g,E.params),w.push({params:g,pathname:gn([m,E.pathname]),pathnameBase:Tb(gn([m,E.pathnameBase])),route:_}),E.pathnameBase!=="/"&&(m=gn([m,E.pathnameBase]))}return w}function yd(n,c){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[d,h]=Cb(n.path,n.caseSensitive,n.end),g=c.match(d);if(!g)return null;let m=g[0],w=m.replace(/(.)\/+$/,"$1"),j=g.slice(1);return{params:h.reduce((b,{paramName:S,isOptional:E},_)=>{if(S==="*"){let I=j[_]||"";w=m.slice(0,m.length-I.length).replace(/(.)\/+$/,"$1")}const M=j[_];return E&&!M?b[S]=void 0:b[S]=(M||"").replace(/%2F/g,"/"),b},{}),pathname:m,pathnameBase:w,pattern:n}}function Cb(n,c=!1,d=!0){xs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let h=[],g="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,j,C)=>(h.push({paramName:j,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(h.push({paramName:"*"}),g+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?g+="\\/*$":n!==""&&n!=="/"&&(g+="(?:(?=\\/|$))"),[new RegExp(g,c?void 0:"i"),h]}function Sb(n){try{return n.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return xs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${c}).`),n}}function mn(n,c){if(c==="/")return n;if(!n.toLowerCase().startsWith(c.toLowerCase()))return null;let d=c.endsWith("/")?c.length-1:c.length,h=n.charAt(d);return h&&h!=="/"?null:n.slice(d)||"/"}function Ab(n,c="/"){let{pathname:d,search:h="",hash:g=""}=typeof n=="string"?Ti(n):n;return{pathname:d?d.startsWith("/")?d:Eb(d,c):c,search:Mb(h),hash:Db(g)}}function Eb(n,c){let d=c.replace(/\/+$/,"").split("/");return n.split("/").forEach(g=>{g===".."?d.length>1&&d.pop():g!=="."&&d.push(g)}),d.length>1?d.join("/"):"/"}function U0(n,c,d,h){return`Cannot include a '${n}' character in a manually specified \`to.${c}\` field [${JSON.stringify(h)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _b(n){return n.filter((c,d)=>d===0||c.route.path&&c.route.path.length>0)}function Np(n){let c=_b(n);return c.map((d,h)=>h===c.length-1?d.pathname:d.pathnameBase)}function jp(n,c,d,h=!1){let g;typeof n=="string"?g=Ti(n):(g={...n},Na(!g.pathname||!g.pathname.includes("?"),U0("?","pathname","search",g)),Na(!g.pathname||!g.pathname.includes("#"),U0("#","pathname","hash",g)),Na(!g.search||!g.search.includes("#"),U0("#","search","hash",g)));let m=n===""||g.pathname==="",w=m?"/":g.pathname,j;if(w==null)j=d;else{let E=c.length-1;if(!h&&w.startsWith("..")){let _=w.split("/");for(;_[0]==="..";)_.shift(),E-=1;g.pathname=_.join("/")}j=E>=0?c[E]:"/"}let C=Ab(g,j),b=w&&w!=="/"&&w.endsWith("/"),S=(m||w===".")&&d.endsWith("/");return!C.pathname.endsWith("/")&&(b||S)&&(C.pathname+="/"),C}var gn=n=>n.join("/").replace(/\/\/+/g,"/"),Tb=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Mb=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Db=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Rb(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var kp=["POST","PUT","PATCH","DELETE"];new Set(kp);var Ib=["GET",...kp];new Set(Ib);var Mi=N.createContext(null);Mi.displayName="DataRouter";var Sd=N.createContext(null);Sd.displayName="DataRouterState";N.createContext(!1);var Cp=N.createContext({isTransitioning:!1});Cp.displayName="ViewTransition";var Ob=N.createContext(new Map);Ob.displayName="Fetchers";var Bb=N.createContext(null);Bb.displayName="Await";var qs=N.createContext(null);qs.displayName="Navigation";var Uo=N.createContext(null);Uo.displayName="Location";var Gs=N.createContext({outlet:null,matches:[],isDataRoute:!1});Gs.displayName="Route";var Ph=N.createContext(null);Ph.displayName="RouteError";function Lb(n,{relative:c}={}){Na(Ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:h}=N.useContext(qs),{hash:g,pathname:m,search:w}=Vo(n,{relative:c}),j=m;return d!=="/"&&(j=m==="/"?d:gn([d,m])),h.createHref({pathname:j,search:w,hash:g})}function Ho(){return N.useContext(Uo)!=null}function Ys(){return Na(Ho(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Uo).location}var Sp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ap(n){N.useContext(qs).static||N.useLayoutEffect(n)}function Gt(){let{isDataRoute:n}=N.useContext(Gs);return n?Qb():Pb()}function Pb(){Na(Ho(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(Mi),{basename:c,navigator:d}=N.useContext(qs),{matches:h}=N.useContext(Gs),{pathname:g}=Ys(),m=JSON.stringify(Np(h)),w=N.useRef(!1);return Ap(()=>{w.current=!0}),N.useCallback((C,b={})=>{if(xs(w.current,Sp),!w.current)return;if(typeof C=="number"){d.go(C);return}let S=jp(C,JSON.parse(m),g,b.relative==="path");n==null&&c!=="/"&&(S.pathname=S.pathname==="/"?c:gn([c,S.pathname])),(b.replace?d.replace:d.push)(S,b.state,b)},[c,d,m,g,n])}N.createContext(null);function ys(){let{matches:n}=N.useContext(Gs),c=n[n.length-1];return c?c.params:{}}function Vo(n,{relative:c}={}){let{matches:d}=N.useContext(Gs),{pathname:h}=Ys(),g=JSON.stringify(Np(d));return N.useMemo(()=>jp(n,JSON.parse(g),h,c==="path"),[n,g,h,c])}function zb(n,c){return Ep(n,c)}function Ep(n,c,d,h){Na(Ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:g}=N.useContext(qs),{matches:m}=N.useContext(Gs),w=m[m.length-1],j=w?w.params:{},C=w?w.pathname:"/",b=w?w.pathnameBase:"/",S=w&&w.route;{let R=S&&S.path||"";_p(C,!S||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${C}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let E=Ys(),_;if(c){let R=typeof c=="string"?Ti(c):c;Na(b==="/"||R.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${R.pathname}" was given in the \`location\` prop.`),_=R}else _=E;let M=_.pathname||"/",I=M;if(b!=="/"){let R=b.replace(/^\//,"").split("/");I="/"+M.replace(/^\//,"").split("/").slice(R.length).join("/")}let D=bp(n,{pathname:I});xs(S||D!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),xs(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=qb(D&&D.map(R=>Object.assign({},R,{params:Object.assign({},j,R.params),pathname:gn([b,g.encodeLocation?g.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?b:gn([b,g.encodeLocation?g.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),m,d,h);return c&&G?N.createElement(Uo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},G):G}function Fb(){let n=Zb(),c=Rb(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),d=n instanceof Error?n.stack:null,h="rgba(200,200,200, 0.5)",g={padding:"0.5rem",backgroundColor:h},m={padding:"2px 4px",backgroundColor:h},w=null;return console.error("Error handled by React Router default ErrorBoundary:",n),w=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:m},"ErrorBoundary")," or"," ",N.createElement("code",{style:m},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},c),d?N.createElement("pre",{style:g},d):null,w)}var Ub=N.createElement(Fb,null),Hb=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,c){return c.location!==n.location||c.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:c.error,location:c.location,revalidation:n.revalidation||c.revalidation}}componentDidCatch(n,c){console.error("React Router caught the following error during render",n,c)}render(){return this.state.error!==void 0?N.createElement(Gs.Provider,{value:this.props.routeContext},N.createElement(Ph.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Vb({routeContext:n,match:c,children:d}){let h=N.useContext(Mi);return h&&h.static&&h.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=c.route.id),N.createElement(Gs.Provider,{value:n},d)}function qb(n,c=[],d=null,h=null){if(n==null){if(!d)return null;if(d.errors)n=d.matches;else if(c.length===0&&!d.initialized&&d.matches.length>0)n=d.matches;else return null}let g=n,m=d?.errors;if(m!=null){let C=g.findIndex(b=>b.route.id&&m?.[b.route.id]!==void 0);Na(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),g=g.slice(0,Math.min(g.length,C+1))}let w=!1,j=-1;if(d)for(let C=0;C<g.length;C++){let b=g[C];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(j=C),b.route.id){let{loaderData:S,errors:E}=d,_=b.route.loader&&!S.hasOwnProperty(b.route.id)&&(!E||E[b.route.id]===void 0);if(b.route.lazy||_){w=!0,j>=0?g=g.slice(0,j+1):g=[g[0]];break}}}return g.reduceRight((C,b,S)=>{let E,_=!1,M=null,I=null;d&&(E=m&&b.route.id?m[b.route.id]:void 0,M=b.route.errorElement||Ub,w&&(j<0&&S===0?(_p("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,I=null):j===S&&(_=!0,I=b.route.hydrateFallbackElement||null)));let D=c.concat(g.slice(0,S+1)),G=()=>{let R;return E?R=M:_?R=I:b.route.Component?R=N.createElement(b.route.Component,null):b.route.element?R=b.route.element:R=C,N.createElement(Vb,{match:b,routeContext:{outlet:C,matches:D,isDataRoute:d!=null},children:R})};return d&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?N.createElement(Hb,{location:d.location,revalidation:d.revalidation,component:M,error:E,children:G(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):G()},null)}function zh(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gb(n){let c=N.useContext(Mi);return Na(c,zh(n)),c}function Yb(n){let c=N.useContext(Sd);return Na(c,zh(n)),c}function Xb(n){let c=N.useContext(Gs);return Na(c,zh(n)),c}function Fh(n){let c=Xb(n),d=c.matches[c.matches.length-1];return Na(d.route.id,`${n} can only be used on routes that contain a unique "id"`),d.route.id}function $b(){return Fh("useRouteId")}function Zb(){let n=N.useContext(Ph),c=Yb("useRouteError"),d=Fh("useRouteError");return n!==void 0?n:c.errors?.[d]}function Qb(){let{router:n}=Gb("useNavigate"),c=Fh("useNavigate"),d=N.useRef(!1);return Ap(()=>{d.current=!0}),N.useCallback(async(g,m={})=>{xs(d.current,Sp),d.current&&(typeof g=="number"?n.navigate(g):await n.navigate(g,{fromRouteId:c,...m}))},[n,c])}var im={};function _p(n,c,d){!c&&!im[n]&&(im[n]=!0,xs(!1,d))}N.memo(Wb);function Wb({routes:n,future:c,state:d}){return Ep(n,void 0,d,c)}function St(n){Na(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Kb({basename:n="/",children:c=null,location:d,navigationType:h="POP",navigator:g,static:m=!1}){Na(!Ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=n.replace(/^\/*/,"/"),j=N.useMemo(()=>({basename:w,navigator:g,static:m,future:{}}),[w,g,m]);typeof d=="string"&&(d=Ti(d));let{pathname:C="/",search:b="",hash:S="",state:E=null,key:_="default"}=d,M=N.useMemo(()=>{let I=mn(C,w);return I==null?null:{location:{pathname:I,search:b,hash:S,state:E,key:_},navigationType:h}},[w,C,b,S,E,_,h]);return xs(M!=null,`<Router basename="${w}"> is not able to match the URL "${C}${b}${S}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:N.createElement(qs.Provider,{value:j},N.createElement(Uo.Provider,{children:c,value:M}))}function Jb({children:n,location:c}){return zb(mh(n),c)}function mh(n,c=[]){let d=[];return N.Children.forEach(n,(h,g)=>{if(!N.isValidElement(h))return;let m=[...c,g];if(h.type===N.Fragment){d.push.apply(d,mh(h.props.children,m));return}Na(h.type===St,`[${typeof h.type=="string"?h.type:h.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Na(!h.props.index||!h.props.children,"An index route cannot have child routes.");let w={id:h.props.id||m.join("-"),caseSensitive:h.props.caseSensitive,element:h.props.element,Component:h.props.Component,index:h.props.index,path:h.props.path,loader:h.props.loader,action:h.props.action,hydrateFallbackElement:h.props.hydrateFallbackElement,HydrateFallback:h.props.HydrateFallback,errorElement:h.props.errorElement,ErrorBoundary:h.props.ErrorBoundary,hasErrorBoundary:h.props.hasErrorBoundary===!0||h.props.ErrorBoundary!=null||h.props.errorElement!=null,shouldRevalidate:h.props.shouldRevalidate,handle:h.props.handle,lazy:h.props.lazy};h.props.children&&(w.children=mh(h.props.children,m)),d.push(w)}),d}var ud="get",hd="application/x-www-form-urlencoded";function Ad(n){return n!=null&&typeof n.tagName=="string"}function e2(n){return Ad(n)&&n.tagName.toLowerCase()==="button"}function t2(n){return Ad(n)&&n.tagName.toLowerCase()==="form"}function a2(n){return Ad(n)&&n.tagName.toLowerCase()==="input"}function r2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function s2(n,c){return n.button===0&&(!c||c==="_self")&&!r2(n)}function ph(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((c,d)=>{let h=n[d];return c.concat(Array.isArray(h)?h.map(g=>[d,g]):[[d,h]])},[]))}function n2(n,c){let d=ph(n);return c&&c.forEach((h,g)=>{d.has(g)||c.getAll(g).forEach(m=>{d.append(g,m)})}),d}var cd=null;function l2(){if(cd===null)try{new FormData(document.createElement("form"),0),cd=!1}catch{cd=!0}return cd}var i2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function H0(n){return n!=null&&!i2.has(n)?(xs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hd}"`),null):n}function o2(n,c){let d,h,g,m,w;if(t2(n)){let j=n.getAttribute("action");h=j?mn(j,c):null,d=n.getAttribute("method")||ud,g=H0(n.getAttribute("enctype"))||hd,m=new FormData(n)}else if(e2(n)||a2(n)&&(n.type==="submit"||n.type==="image")){let j=n.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=n.getAttribute("formaction")||j.getAttribute("action");if(h=C?mn(C,c):null,d=n.getAttribute("formmethod")||j.getAttribute("method")||ud,g=H0(n.getAttribute("formenctype"))||H0(j.getAttribute("enctype"))||hd,m=new FormData(j,n),!l2()){let{name:b,type:S,value:E}=n;if(S==="image"){let _=b?`${b}.`:"";m.append(`${_}x`,"0"),m.append(`${_}y`,"0")}else b&&m.append(b,E)}}else{if(Ad(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=ud,h=null,g=hd,w=n}return m&&g==="text/plain"&&(w=m,m=void 0),{action:h,method:d.toLowerCase(),encType:g,formData:m,body:w}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Uh(n,c){if(n===!1||n===null||typeof n>"u")throw new Error(c)}function c2(n,c,d){let h=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return h.pathname==="/"?h.pathname=`_root.${d}`:c&&mn(h.pathname,c)==="/"?h.pathname=`${c.replace(/\/$/,"")}/_root.${d}`:h.pathname=`${h.pathname.replace(/\/$/,"")}.${d}`,h}async function d2(n,c){if(n.id in c)return c[n.id];try{let d=await import(n.module);return c[n.id]=d,d}catch(d){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function u2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function h2(n,c,d){let h=await Promise.all(n.map(async g=>{let m=c.routes[g.route.id];if(m){let w=await d2(m,d);return w.links?w.links():[]}return[]}));return m2(h.flat(1).filter(u2).filter(g=>g.rel==="stylesheet"||g.rel==="preload").map(g=>g.rel==="stylesheet"?{...g,rel:"prefetch",as:"style"}:{...g,rel:"prefetch"}))}function om(n,c,d,h,g,m){let w=(C,b)=>d[b]?C.route.id!==d[b].route.id:!0,j=(C,b)=>d[b].pathname!==C.pathname||d[b].route.path?.endsWith("*")&&d[b].params["*"]!==C.params["*"];return m==="assets"?c.filter((C,b)=>w(C,b)||j(C,b)):m==="data"?c.filter((C,b)=>{let S=h.routes[C.route.id];if(!S||!S.hasLoader)return!1;if(w(C,b)||j(C,b))return!0;if(C.route.shouldRevalidate){let E=C.route.shouldRevalidate({currentUrl:new URL(g.pathname+g.search+g.hash,window.origin),currentParams:d[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function f2(n,c,{includeHydrateFallback:d}={}){return x2(n.map(h=>{let g=c.routes[h.route.id];if(!g)return[];let m=[g.module];return g.clientActionModule&&(m=m.concat(g.clientActionModule)),g.clientLoaderModule&&(m=m.concat(g.clientLoaderModule)),d&&g.hydrateFallbackModule&&(m=m.concat(g.hydrateFallbackModule)),g.imports&&(m=m.concat(g.imports)),m}).flat(1))}function x2(n){return[...new Set(n)]}function g2(n){let c={},d=Object.keys(n).sort();for(let h of d)c[h]=n[h];return c}function m2(n,c){let d=new Set;return new Set(c),n.reduce((h,g)=>{let m=JSON.stringify(g2(g));return d.has(m)||(d.add(m),h.push({key:m,link:g})),h},[])}function Tp(){let n=N.useContext(Mi);return Uh(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function p2(){let n=N.useContext(Sd);return Uh(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Hh=N.createContext(void 0);Hh.displayName="FrameworkContext";function Mp(){let n=N.useContext(Hh);return Uh(n,"You must render this element inside a <HydratedRouter> element"),n}function y2(n,c){let d=N.useContext(Hh),[h,g]=N.useState(!1),[m,w]=N.useState(!1),{onFocus:j,onBlur:C,onMouseEnter:b,onMouseLeave:S,onTouchStart:E}=c,_=N.useRef(null);N.useEffect(()=>{if(n==="render"&&w(!0),n==="viewport"){let D=R=>{R.forEach(L=>{w(L.isIntersecting)})},G=new IntersectionObserver(D,{threshold:.5});return _.current&&G.observe(_.current),()=>{G.disconnect()}}},[n]),N.useEffect(()=>{if(h){let D=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(D)}}},[h]);let M=()=>{g(!0)},I=()=>{g(!1),w(!1)};return d?n!=="intent"?[m,_,{}]:[m,_,{onFocus:Do(j,M),onBlur:Do(C,I),onMouseEnter:Do(b,M),onMouseLeave:Do(S,I),onTouchStart:Do(E,M)}]:[!1,_,{}]}function Do(n,c){return d=>{n&&n(d),d.defaultPrevented||c(d)}}function b2({page:n,...c}){let{router:d}=Tp(),h=N.useMemo(()=>bp(d.routes,n,d.basename),[d.routes,n,d.basename]);return h?N.createElement(v2,{page:n,matches:h,...c}):null}function w2(n){let{manifest:c,routeModules:d}=Mp(),[h,g]=N.useState([]);return N.useEffect(()=>{let m=!1;return h2(n,c,d).then(w=>{m||g(w)}),()=>{m=!0}},[n,c,d]),h}function v2({page:n,matches:c,...d}){let h=Ys(),{manifest:g,routeModules:m}=Mp(),{basename:w}=Tp(),{loaderData:j,matches:C}=p2(),b=N.useMemo(()=>om(n,c,C,g,h,"data"),[n,c,C,g,h]),S=N.useMemo(()=>om(n,c,C,g,h,"assets"),[n,c,C,g,h]),E=N.useMemo(()=>{if(n===h.pathname+h.search+h.hash)return[];let I=new Set,D=!1;if(c.forEach(R=>{let L=g.routes[R.route.id];!L||!L.hasLoader||(!b.some(O=>O.route.id===R.route.id)&&R.route.id in j&&m[R.route.id]?.shouldRevalidate||L.hasClientLoader?D=!0:I.add(R.route.id))}),I.size===0)return[];let G=c2(n,w,"data");return D&&I.size>0&&G.searchParams.set("_routes",c.filter(R=>I.has(R.route.id)).map(R=>R.route.id).join(",")),[G.pathname+G.search]},[w,j,h,g,b,c,n,m]),_=N.useMemo(()=>f2(S,g),[S,g]),M=w2(S);return N.createElement(N.Fragment,null,E.map(I=>N.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...d})),_.map(I=>N.createElement("link",{key:I,rel:"modulepreload",href:I,...d})),M.map(({key:I,link:D})=>N.createElement("link",{key:I,nonce:d.nonce,...D})))}function N2(...n){return c=>{n.forEach(d=>{typeof d=="function"?d(c):d!=null&&(d.current=c)})}}var Dp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Dp&&(window.__reactRouterVersion="7.8.0")}catch{}function j2({basename:n,children:c,window:d}){let h=N.useRef();h.current==null&&(h.current=db({window:d,v5Compat:!0}));let g=h.current,[m,w]=N.useState({action:g.action,location:g.location}),j=N.useCallback(C=>{N.startTransition(()=>w(C))},[w]);return N.useLayoutEffect(()=>g.listen(j),[g,j]),N.createElement(Kb,{basename:n,children:c,location:m.location,navigationType:m.action,navigator:g})}var Rp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sl=N.forwardRef(function({onClick:c,discover:d="render",prefetch:h="none",relative:g,reloadDocument:m,replace:w,state:j,target:C,to:b,preventScrollReset:S,viewTransition:E,..._},M){let{basename:I}=N.useContext(qs),D=typeof b=="string"&&Rp.test(b),G,R=!1;if(typeof b=="string"&&D&&(G=b,Dp))try{let $=new URL(window.location.href),ce=b.startsWith("//")?new URL($.protocol+b):new URL(b),he=mn(ce.pathname,I);ce.origin===$.origin&&he!=null?b=he+ce.search+ce.hash:R=!0}catch{xs(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=Lb(b,{relative:g}),[O,P,Q]=y2(h,_),F=S2(b,{replace:w,state:j,target:C,preventScrollReset:S,relative:g,viewTransition:E});function q($){c&&c($),$.defaultPrevented||F($)}let Y=N.createElement("a",{..._,...Q,href:G||L,onClick:R||m?c:q,ref:N2(M,P),target:C,"data-discover":!D&&d==="render"?"true":void 0});return O&&!D?N.createElement(N.Fragment,null,Y,N.createElement(b2,{page:L})):Y});Sl.displayName="Link";var yh=N.forwardRef(function({"aria-current":c="page",caseSensitive:d=!1,className:h="",end:g=!1,style:m,to:w,viewTransition:j,children:C,...b},S){let E=Vo(w,{relative:b.relative}),_=Ys(),M=N.useContext(Sd),{navigator:I,basename:D}=N.useContext(qs),G=M!=null&&M2(E)&&j===!0,R=I.encodeLocation?I.encodeLocation(E).pathname:E.pathname,L=_.pathname,O=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;d||(L=L.toLowerCase(),O=O?O.toLowerCase():null,R=R.toLowerCase()),O&&D&&(O=mn(O,D)||O);const P=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let Q=L===R||!g&&L.startsWith(R)&&L.charAt(P)==="/",F=O!=null&&(O===R||!g&&O.startsWith(R)&&O.charAt(R.length)==="/"),q={isActive:Q,isPending:F,isTransitioning:G},Y=Q?c:void 0,$;typeof h=="function"?$=h(q):$=[h,Q?"active":null,F?"pending":null,G?"transitioning":null].filter(Boolean).join(" ");let ce=typeof m=="function"?m(q):m;return N.createElement(Sl,{...b,"aria-current":Y,className:$,ref:S,style:ce,to:w,viewTransition:j},typeof C=="function"?C(q):C)});yh.displayName="NavLink";var k2=N.forwardRef(({discover:n="render",fetcherKey:c,navigate:d,reloadDocument:h,replace:g,state:m,method:w=ud,action:j,onSubmit:C,relative:b,preventScrollReset:S,viewTransition:E,..._},M)=>{let I=_2(),D=T2(j,{relative:b}),G=w.toLowerCase()==="get"?"get":"post",R=typeof j=="string"&&Rp.test(j),L=O=>{if(C&&C(O),O.defaultPrevented)return;O.preventDefault();let P=O.nativeEvent.submitter,Q=P?.getAttribute("formmethod")||w;I(P||O.currentTarget,{fetcherKey:c,method:Q,navigate:d,replace:g,state:m,relative:b,preventScrollReset:S,viewTransition:E})};return N.createElement("form",{ref:M,method:G,action:D,onSubmit:h?C:L,..._,"data-discover":!R&&n==="render"?"true":void 0})});k2.displayName="Form";function C2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ip(n){let c=N.useContext(Mi);return Na(c,C2(n)),c}function S2(n,{target:c,replace:d,state:h,preventScrollReset:g,relative:m,viewTransition:w}={}){let j=Gt(),C=Ys(),b=Vo(n,{relative:m});return N.useCallback(S=>{if(s2(S,c)){S.preventDefault();let E=d!==void 0?d:Bo(C)===Bo(b);j(n,{replace:E,state:h,preventScrollReset:g,relative:m,viewTransition:w})}},[C,j,b,d,h,c,n,g,m,w])}function qo(n){xs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let c=N.useRef(ph(n)),d=N.useRef(!1),h=Ys(),g=N.useMemo(()=>n2(h.search,d.current?null:c.current),[h.search]),m=Gt(),w=N.useCallback((j,C)=>{const b=ph(typeof j=="function"?j(new URLSearchParams(g)):j);d.current=!0,m("?"+b,C)},[m,g]);return[g,w]}var A2=0,E2=()=>`__${String(++A2)}__`;function _2(){let{router:n}=Ip("useSubmit"),{basename:c}=N.useContext(qs),d=$b();return N.useCallback(async(h,g={})=>{let{action:m,method:w,encType:j,formData:C,body:b}=o2(h,c);if(g.navigate===!1){let S=g.fetcherKey||E2();await n.fetch(S,d,g.action||m,{preventScrollReset:g.preventScrollReset,formData:C,body:b,formMethod:g.method||w,formEncType:g.encType||j,flushSync:g.flushSync})}else await n.navigate(g.action||m,{preventScrollReset:g.preventScrollReset,formData:C,body:b,formMethod:g.method||w,formEncType:g.encType||j,replace:g.replace,state:g.state,fromRouteId:d,flushSync:g.flushSync,viewTransition:g.viewTransition})},[n,c,d])}function T2(n,{relative:c}={}){let{basename:d}=N.useContext(qs),h=N.useContext(Gs);Na(h,"useFormAction must be used inside a RouteContext");let[g]=h.matches.slice(-1),m={...Vo(n||".",{relative:c})},w=Ys();if(n==null){m.search=w.search;let j=new URLSearchParams(m.search),C=j.getAll("index");if(C.some(S=>S==="")){j.delete("index"),C.filter(E=>E).forEach(E=>j.append("index",E));let S=j.toString();m.search=S?`?${S}`:""}}return(!n||n===".")&&g.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(m.pathname=m.pathname==="/"?d:gn([d,m.pathname])),Bo(m)}function M2(n,{relative:c}={}){let d=N.useContext(Cp);Na(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:h}=Ip("useViewTransitionState"),g=Vo(n,{relative:c});if(!d.isTransitioning)return!1;let m=mn(d.currentLocation.pathname,h)||d.currentLocation.pathname,w=mn(d.nextLocation.pathname,h)||d.nextLocation.pathname;return yd(g.pathname,w)!=null||yd(g.pathname,m)!=null}function D2(){const n=Gt(),c=()=>{n("/register")};return e.jsxs("div",{className:"welcomePage",children:[e.jsxs("div",{className:"absolute top-4 right-2 sm:right-6 flex gap-2 sm:gap-4 md:gap-6 mt-5",children:[e.jsx("button",{onClick:()=>n("/login"),className:"signInSignUp",children:"Sign In"}),e.jsx("button",{onClick:()=>n("/register"),className:"signInSignUp",children:"Sign Up"})]}),e.jsxs("div",{className:"welcomeCard",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"animate-pulse w-28 sm:w-36 md:w-44 mx-auto mb-6"}),e.jsxs("h1",{className:"welcomeTitle",children:["Welcome to ",e.jsx("span",{className:"text-yellow-300",children:"AptSync"})]}),e.jsx("p",{className:"welcomeSubtitle",children:"The all-in-one platform to manage residents, maintenance, and keep your community thriving."}),e.jsxs("div",{className:"featureGrid",children:[e.jsx("div",{className:"featureItem",children:" Resident Records"}),e.jsx("div",{className:"featureItem",children:" Role Management"}),e.jsx("div",{className:"featureItem",children:" Maintenance Requests"}),e.jsx("div",{className:"featureItem",children:" Announcements"})]}),e.jsx("button",{className:"welcomeButton",onClick:c,children:" Get Started"})]})]})}function Op(n,c){return function(){return n.apply(c,arguments)}}const{toString:R2}=Object.prototype,{getPrototypeOf:Vh}=Object,{iterator:Ed,toStringTag:Bp}=Symbol,_d=(n=>c=>{const d=R2.call(c);return n[d]||(n[d]=d.slice(8,-1).toLowerCase())})(Object.create(null)),bs=n=>(n=n.toLowerCase(),c=>_d(c)===n),Td=n=>c=>typeof c===n,{isArray:Di}=Array,Lo=Td("undefined");function Go(n){return n!==null&&!Lo(n)&&n.constructor!==null&&!Lo(n.constructor)&&Rr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Lp=bs("ArrayBuffer");function I2(n){let c;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?c=ArrayBuffer.isView(n):c=n&&n.buffer&&Lp(n.buffer),c}const O2=Td("string"),Rr=Td("function"),Pp=Td("number"),Yo=n=>n!==null&&typeof n=="object",B2=n=>n===!0||n===!1,fd=n=>{if(_d(n)!=="object")return!1;const c=Vh(n);return(c===null||c===Object.prototype||Object.getPrototypeOf(c)===null)&&!(Bp in n)&&!(Ed in n)},L2=n=>{if(!Yo(n)||Go(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},P2=bs("Date"),z2=bs("File"),F2=bs("Blob"),U2=bs("FileList"),H2=n=>Yo(n)&&Rr(n.pipe),V2=n=>{let c;return n&&(typeof FormData=="function"&&n instanceof FormData||Rr(n.append)&&((c=_d(n))==="formdata"||c==="object"&&Rr(n.toString)&&n.toString()==="[object FormData]"))},q2=bs("URLSearchParams"),[G2,Y2,X2,$2]=["ReadableStream","Request","Response","Headers"].map(bs),Z2=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xo(n,c,{allOwnKeys:d=!1}={}){if(n===null||typeof n>"u")return;let h,g;if(typeof n!="object"&&(n=[n]),Di(n))for(h=0,g=n.length;h<g;h++)c.call(null,n[h],h,n);else{if(Go(n))return;const m=d?Object.getOwnPropertyNames(n):Object.keys(n),w=m.length;let j;for(h=0;h<w;h++)j=m[h],c.call(null,n[j],j,n)}}function zp(n,c){if(Go(n))return null;c=c.toLowerCase();const d=Object.keys(n);let h=d.length,g;for(;h-- >0;)if(g=d[h],c===g.toLowerCase())return g;return null}const Al=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Fp=n=>!Lo(n)&&n!==Al;function bh(){const{caseless:n}=Fp(this)&&this||{},c={},d=(h,g)=>{const m=n&&zp(c,g)||g;fd(c[m])&&fd(h)?c[m]=bh(c[m],h):fd(h)?c[m]=bh({},h):Di(h)?c[m]=h.slice():c[m]=h};for(let h=0,g=arguments.length;h<g;h++)arguments[h]&&Xo(arguments[h],d);return c}const Q2=(n,c,d,{allOwnKeys:h}={})=>(Xo(c,(g,m)=>{d&&Rr(g)?n[m]=Op(g,d):n[m]=g},{allOwnKeys:h}),n),W2=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),K2=(n,c,d,h)=>{n.prototype=Object.create(c.prototype,h),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:c.prototype}),d&&Object.assign(n.prototype,d)},J2=(n,c,d,h)=>{let g,m,w;const j={};if(c=c||{},n==null)return c;do{for(g=Object.getOwnPropertyNames(n),m=g.length;m-- >0;)w=g[m],(!h||h(w,n,c))&&!j[w]&&(c[w]=n[w],j[w]=!0);n=d!==!1&&Vh(n)}while(n&&(!d||d(n,c))&&n!==Object.prototype);return c},ew=(n,c,d)=>{n=String(n),(d===void 0||d>n.length)&&(d=n.length),d-=c.length;const h=n.indexOf(c,d);return h!==-1&&h===d},tw=n=>{if(!n)return null;if(Di(n))return n;let c=n.length;if(!Pp(c))return null;const d=new Array(c);for(;c-- >0;)d[c]=n[c];return d},aw=(n=>c=>n&&c instanceof n)(typeof Uint8Array<"u"&&Vh(Uint8Array)),rw=(n,c)=>{const h=(n&&n[Ed]).call(n);let g;for(;(g=h.next())&&!g.done;){const m=g.value;c.call(n,m[0],m[1])}},sw=(n,c)=>{let d;const h=[];for(;(d=n.exec(c))!==null;)h.push(d);return h},nw=bs("HTMLFormElement"),lw=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(d,h,g){return h.toUpperCase()+g}),cm=(({hasOwnProperty:n})=>(c,d)=>n.call(c,d))(Object.prototype),iw=bs("RegExp"),Up=(n,c)=>{const d=Object.getOwnPropertyDescriptors(n),h={};Xo(d,(g,m)=>{let w;(w=c(g,m,n))!==!1&&(h[m]=w||g)}),Object.defineProperties(n,h)},ow=n=>{Up(n,(c,d)=>{if(Rr(n)&&["arguments","caller","callee"].indexOf(d)!==-1)return!1;const h=n[d];if(Rr(h)){if(c.enumerable=!1,"writable"in c){c.writable=!1;return}c.set||(c.set=()=>{throw Error("Can not rewrite read-only method '"+d+"'")})}})},cw=(n,c)=>{const d={},h=g=>{g.forEach(m=>{d[m]=!0})};return Di(n)?h(n):h(String(n).split(c)),d},dw=()=>{},uw=(n,c)=>n!=null&&Number.isFinite(n=+n)?n:c;function hw(n){return!!(n&&Rr(n.append)&&n[Bp]==="FormData"&&n[Ed])}const fw=n=>{const c=new Array(10),d=(h,g)=>{if(Yo(h)){if(c.indexOf(h)>=0)return;if(Go(h))return h;if(!("toJSON"in h)){c[g]=h;const m=Di(h)?[]:{};return Xo(h,(w,j)=>{const C=d(w,g+1);!Lo(C)&&(m[j]=C)}),c[g]=void 0,m}}return h};return d(n,0)},xw=bs("AsyncFunction"),gw=n=>n&&(Yo(n)||Rr(n))&&Rr(n.then)&&Rr(n.catch),Hp=((n,c)=>n?setImmediate:c?((d,h)=>(Al.addEventListener("message",({source:g,data:m})=>{g===Al&&m===d&&h.length&&h.shift()()},!1),g=>{h.push(g),Al.postMessage(d,"*")}))(`axios@${Math.random()}`,[]):d=>setTimeout(d))(typeof setImmediate=="function",Rr(Al.postMessage)),mw=typeof queueMicrotask<"u"?queueMicrotask.bind(Al):typeof process<"u"&&process.nextTick||Hp,pw=n=>n!=null&&Rr(n[Ed]),Oe={isArray:Di,isArrayBuffer:Lp,isBuffer:Go,isFormData:V2,isArrayBufferView:I2,isString:O2,isNumber:Pp,isBoolean:B2,isObject:Yo,isPlainObject:fd,isEmptyObject:L2,isReadableStream:G2,isRequest:Y2,isResponse:X2,isHeaders:$2,isUndefined:Lo,isDate:P2,isFile:z2,isBlob:F2,isRegExp:iw,isFunction:Rr,isStream:H2,isURLSearchParams:q2,isTypedArray:aw,isFileList:U2,forEach:Xo,merge:bh,extend:Q2,trim:Z2,stripBOM:W2,inherits:K2,toFlatObject:J2,kindOf:_d,kindOfTest:bs,endsWith:ew,toArray:tw,forEachEntry:rw,matchAll:sw,isHTMLForm:nw,hasOwnProperty:cm,hasOwnProp:cm,reduceDescriptors:Up,freezeMethods:ow,toObjectSet:cw,toCamelCase:lw,noop:dw,toFiniteNumber:uw,findKey:zp,global:Al,isContextDefined:Fp,isSpecCompliantForm:hw,toJSONObject:fw,isAsyncFn:xw,isThenable:gw,setImmediate:Hp,asap:mw,isIterable:pw};function jt(n,c,d,h,g){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",c&&(this.code=c),d&&(this.config=d),h&&(this.request=h),g&&(this.response=g,this.status=g.status?g.status:null)}Oe.inherits(jt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Oe.toJSONObject(this.config),code:this.code,status:this.status}}});const Vp=jt.prototype,qp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{qp[n]={value:n}});Object.defineProperties(jt,qp);Object.defineProperty(Vp,"isAxiosError",{value:!0});jt.from=(n,c,d,h,g,m)=>{const w=Object.create(Vp);return Oe.toFlatObject(n,w,function(C){return C!==Error.prototype},j=>j!=="isAxiosError"),jt.call(w,n.message,c,d,h,g),w.cause=n,w.name=n.name,m&&Object.assign(w,m),w};const yw=null;function wh(n){return Oe.isPlainObject(n)||Oe.isArray(n)}function Gp(n){return Oe.endsWith(n,"[]")?n.slice(0,-2):n}function dm(n,c,d){return n?n.concat(c).map(function(g,m){return g=Gp(g),!d&&m?"["+g+"]":g}).join(d?".":""):c}function bw(n){return Oe.isArray(n)&&!n.some(wh)}const ww=Oe.toFlatObject(Oe,{},null,function(c){return/^is[A-Z]/.test(c)});function Md(n,c,d){if(!Oe.isObject(n))throw new TypeError("target must be an object");c=c||new FormData,d=Oe.toFlatObject(d,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,G){return!Oe.isUndefined(G[D])});const h=d.metaTokens,g=d.visitor||S,m=d.dots,w=d.indexes,C=(d.Blob||typeof Blob<"u"&&Blob)&&Oe.isSpecCompliantForm(c);if(!Oe.isFunction(g))throw new TypeError("visitor must be a function");function b(I){if(I===null)return"";if(Oe.isDate(I))return I.toISOString();if(Oe.isBoolean(I))return I.toString();if(!C&&Oe.isBlob(I))throw new jt("Blob is not supported. Use a Buffer instead.");return Oe.isArrayBuffer(I)||Oe.isTypedArray(I)?C&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function S(I,D,G){let R=I;if(I&&!G&&typeof I=="object"){if(Oe.endsWith(D,"{}"))D=h?D:D.slice(0,-2),I=JSON.stringify(I);else if(Oe.isArray(I)&&bw(I)||(Oe.isFileList(I)||Oe.endsWith(D,"[]"))&&(R=Oe.toArray(I)))return D=Gp(D),R.forEach(function(O,P){!(Oe.isUndefined(O)||O===null)&&c.append(w===!0?dm([D],P,m):w===null?D:D+"[]",b(O))}),!1}return wh(I)?!0:(c.append(dm(G,D,m),b(I)),!1)}const E=[],_=Object.assign(ww,{defaultVisitor:S,convertValue:b,isVisitable:wh});function M(I,D){if(!Oe.isUndefined(I)){if(E.indexOf(I)!==-1)throw Error("Circular reference detected in "+D.join("."));E.push(I),Oe.forEach(I,function(R,L){(!(Oe.isUndefined(R)||R===null)&&g.call(c,R,Oe.isString(L)?L.trim():L,D,_))===!0&&M(R,D?D.concat(L):[L])}),E.pop()}}if(!Oe.isObject(n))throw new TypeError("data must be an object");return M(n),c}function um(n){const c={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(h){return c[h]})}function qh(n,c){this._pairs=[],n&&Md(n,this,c)}const Yp=qh.prototype;Yp.append=function(c,d){this._pairs.push([c,d])};Yp.toString=function(c){const d=c?function(h){return c.call(this,h,um)}:um;return this._pairs.map(function(g){return d(g[0])+"="+d(g[1])},"").join("&")};function vw(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Xp(n,c,d){if(!c)return n;const h=d&&d.encode||vw;Oe.isFunction(d)&&(d={serialize:d});const g=d&&d.serialize;let m;if(g?m=g(c,d):m=Oe.isURLSearchParams(c)?c.toString():new qh(c,d).toString(h),m){const w=n.indexOf("#");w!==-1&&(n=n.slice(0,w)),n+=(n.indexOf("?")===-1?"?":"&")+m}return n}class hm{constructor(){this.handlers=[]}use(c,d,h){return this.handlers.push({fulfilled:c,rejected:d,synchronous:h?h.synchronous:!1,runWhen:h?h.runWhen:null}),this.handlers.length-1}eject(c){this.handlers[c]&&(this.handlers[c]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(c){Oe.forEach(this.handlers,function(h){h!==null&&c(h)})}}const $p={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nw=typeof URLSearchParams<"u"?URLSearchParams:qh,jw=typeof FormData<"u"?FormData:null,kw=typeof Blob<"u"?Blob:null,Cw={isBrowser:!0,classes:{URLSearchParams:Nw,FormData:jw,Blob:kw},protocols:["http","https","file","blob","url","data"]},Gh=typeof window<"u"&&typeof document<"u",vh=typeof navigator=="object"&&navigator||void 0,Sw=Gh&&(!vh||["ReactNative","NativeScript","NS"].indexOf(vh.product)<0),Aw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ew=Gh&&window.location.href||"http://localhost",_w=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gh,hasStandardBrowserEnv:Sw,hasStandardBrowserWebWorkerEnv:Aw,navigator:vh,origin:Ew},Symbol.toStringTag,{value:"Module"})),pr={..._w,...Cw};function Tw(n,c){return Md(n,new pr.classes.URLSearchParams,{visitor:function(d,h,g,m){return pr.isNode&&Oe.isBuffer(d)?(this.append(h,d.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)},...c})}function Mw(n){return Oe.matchAll(/\w+|\[(\w*)]/g,n).map(c=>c[0]==="[]"?"":c[1]||c[0])}function Dw(n){const c={},d=Object.keys(n);let h;const g=d.length;let m;for(h=0;h<g;h++)m=d[h],c[m]=n[m];return c}function Zp(n){function c(d,h,g,m){let w=d[m++];if(w==="__proto__")return!0;const j=Number.isFinite(+w),C=m>=d.length;return w=!w&&Oe.isArray(g)?g.length:w,C?(Oe.hasOwnProp(g,w)?g[w]=[g[w],h]:g[w]=h,!j):((!g[w]||!Oe.isObject(g[w]))&&(g[w]=[]),c(d,h,g[w],m)&&Oe.isArray(g[w])&&(g[w]=Dw(g[w])),!j)}if(Oe.isFormData(n)&&Oe.isFunction(n.entries)){const d={};return Oe.forEachEntry(n,(h,g)=>{c(Mw(h),g,d,0)}),d}return null}function Rw(n,c,d){if(Oe.isString(n))try{return(c||JSON.parse)(n),Oe.trim(n)}catch(h){if(h.name!=="SyntaxError")throw h}return(d||JSON.stringify)(n)}const $o={transitional:$p,adapter:["xhr","http","fetch"],transformRequest:[function(c,d){const h=d.getContentType()||"",g=h.indexOf("application/json")>-1,m=Oe.isObject(c);if(m&&Oe.isHTMLForm(c)&&(c=new FormData(c)),Oe.isFormData(c))return g?JSON.stringify(Zp(c)):c;if(Oe.isArrayBuffer(c)||Oe.isBuffer(c)||Oe.isStream(c)||Oe.isFile(c)||Oe.isBlob(c)||Oe.isReadableStream(c))return c;if(Oe.isArrayBufferView(c))return c.buffer;if(Oe.isURLSearchParams(c))return d.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),c.toString();let j;if(m){if(h.indexOf("application/x-www-form-urlencoded")>-1)return Tw(c,this.formSerializer).toString();if((j=Oe.isFileList(c))||h.indexOf("multipart/form-data")>-1){const C=this.env&&this.env.FormData;return Md(j?{"files[]":c}:c,C&&new C,this.formSerializer)}}return m||g?(d.setContentType("application/json",!1),Rw(c)):c}],transformResponse:[function(c){const d=this.transitional||$o.transitional,h=d&&d.forcedJSONParsing,g=this.responseType==="json";if(Oe.isResponse(c)||Oe.isReadableStream(c))return c;if(c&&Oe.isString(c)&&(h&&!this.responseType||g)){const w=!(d&&d.silentJSONParsing)&&g;try{return JSON.parse(c)}catch(j){if(w)throw j.name==="SyntaxError"?jt.from(j,jt.ERR_BAD_RESPONSE,this,null,this.response):j}}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pr.classes.FormData,Blob:pr.classes.Blob},validateStatus:function(c){return c>=200&&c<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Oe.forEach(["delete","get","head","post","put","patch"],n=>{$o.headers[n]={}});const Iw=Oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ow=n=>{const c={};let d,h,g;return n&&n.split(`
`).forEach(function(w){g=w.indexOf(":"),d=w.substring(0,g).trim().toLowerCase(),h=w.substring(g+1).trim(),!(!d||c[d]&&Iw[d])&&(d==="set-cookie"?c[d]?c[d].push(h):c[d]=[h]:c[d]=c[d]?c[d]+", "+h:h)}),c},fm=Symbol("internals");function Ro(n){return n&&String(n).trim().toLowerCase()}function xd(n){return n===!1||n==null?n:Oe.isArray(n)?n.map(xd):String(n)}function Bw(n){const c=Object.create(null),d=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let h;for(;h=d.exec(n);)c[h[1]]=h[2];return c}const Lw=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function V0(n,c,d,h,g){if(Oe.isFunction(h))return h.call(this,c,d);if(g&&(c=d),!!Oe.isString(c)){if(Oe.isString(h))return c.indexOf(h)!==-1;if(Oe.isRegExp(h))return h.test(c)}}function Pw(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(c,d,h)=>d.toUpperCase()+h)}function zw(n,c){const d=Oe.toCamelCase(" "+c);["get","set","has"].forEach(h=>{Object.defineProperty(n,h+d,{value:function(g,m,w){return this[h].call(this,c,g,m,w)},configurable:!0})})}let Ir=class{constructor(c){c&&this.set(c)}set(c,d,h){const g=this;function m(j,C,b){const S=Ro(C);if(!S)throw new Error("header name must be a non-empty string");const E=Oe.findKey(g,S);(!E||g[E]===void 0||b===!0||b===void 0&&g[E]!==!1)&&(g[E||C]=xd(j))}const w=(j,C)=>Oe.forEach(j,(b,S)=>m(b,S,C));if(Oe.isPlainObject(c)||c instanceof this.constructor)w(c,d);else if(Oe.isString(c)&&(c=c.trim())&&!Lw(c))w(Ow(c),d);else if(Oe.isObject(c)&&Oe.isIterable(c)){let j={},C,b;for(const S of c){if(!Oe.isArray(S))throw TypeError("Object iterator must return a key-value pair");j[b=S[0]]=(C=j[b])?Oe.isArray(C)?[...C,S[1]]:[C,S[1]]:S[1]}w(j,d)}else c!=null&&m(d,c,h);return this}get(c,d){if(c=Ro(c),c){const h=Oe.findKey(this,c);if(h){const g=this[h];if(!d)return g;if(d===!0)return Bw(g);if(Oe.isFunction(d))return d.call(this,g,h);if(Oe.isRegExp(d))return d.exec(g);throw new TypeError("parser must be boolean|regexp|function")}}}has(c,d){if(c=Ro(c),c){const h=Oe.findKey(this,c);return!!(h&&this[h]!==void 0&&(!d||V0(this,this[h],h,d)))}return!1}delete(c,d){const h=this;let g=!1;function m(w){if(w=Ro(w),w){const j=Oe.findKey(h,w);j&&(!d||V0(h,h[j],j,d))&&(delete h[j],g=!0)}}return Oe.isArray(c)?c.forEach(m):m(c),g}clear(c){const d=Object.keys(this);let h=d.length,g=!1;for(;h--;){const m=d[h];(!c||V0(this,this[m],m,c,!0))&&(delete this[m],g=!0)}return g}normalize(c){const d=this,h={};return Oe.forEach(this,(g,m)=>{const w=Oe.findKey(h,m);if(w){d[w]=xd(g),delete d[m];return}const j=c?Pw(m):String(m).trim();j!==m&&delete d[m],d[j]=xd(g),h[j]=!0}),this}concat(...c){return this.constructor.concat(this,...c)}toJSON(c){const d=Object.create(null);return Oe.forEach(this,(h,g)=>{h!=null&&h!==!1&&(d[g]=c&&Oe.isArray(h)?h.join(", "):h)}),d}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([c,d])=>c+": "+d).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(c){return c instanceof this?c:new this(c)}static concat(c,...d){const h=new this(c);return d.forEach(g=>h.set(g)),h}static accessor(c){const h=(this[fm]=this[fm]={accessors:{}}).accessors,g=this.prototype;function m(w){const j=Ro(w);h[j]||(zw(g,w),h[j]=!0)}return Oe.isArray(c)?c.forEach(m):m(c),this}};Ir.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Oe.reduceDescriptors(Ir.prototype,({value:n},c)=>{let d=c[0].toUpperCase()+c.slice(1);return{get:()=>n,set(h){this[d]=h}}});Oe.freezeMethods(Ir);function q0(n,c){const d=this||$o,h=c||d,g=Ir.from(h.headers);let m=h.data;return Oe.forEach(n,function(j){m=j.call(d,m,g.normalize(),c?c.status:void 0)}),g.normalize(),m}function Qp(n){return!!(n&&n.__CANCEL__)}function Ri(n,c,d){jt.call(this,n??"canceled",jt.ERR_CANCELED,c,d),this.name="CanceledError"}Oe.inherits(Ri,jt,{__CANCEL__:!0});function Wp(n,c,d){const h=d.config.validateStatus;!d.status||!h||h(d.status)?n(d):c(new jt("Request failed with status code "+d.status,[jt.ERR_BAD_REQUEST,jt.ERR_BAD_RESPONSE][Math.floor(d.status/100)-4],d.config,d.request,d))}function Fw(n){const c=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return c&&c[1]||""}function Uw(n,c){n=n||10;const d=new Array(n),h=new Array(n);let g=0,m=0,w;return c=c!==void 0?c:1e3,function(C){const b=Date.now(),S=h[m];w||(w=b),d[g]=C,h[g]=b;let E=m,_=0;for(;E!==g;)_+=d[E++],E=E%n;if(g=(g+1)%n,g===m&&(m=(m+1)%n),b-w<c)return;const M=S&&b-S;return M?Math.round(_*1e3/M):void 0}}function Hw(n,c){let d=0,h=1e3/c,g,m;const w=(b,S=Date.now())=>{d=S,g=null,m&&(clearTimeout(m),m=null),n(...b)};return[(...b)=>{const S=Date.now(),E=S-d;E>=h?w(b,S):(g=b,m||(m=setTimeout(()=>{m=null,w(g)},h-E)))},()=>g&&w(g)]}const bd=(n,c,d=3)=>{let h=0;const g=Uw(50,250);return Hw(m=>{const w=m.loaded,j=m.lengthComputable?m.total:void 0,C=w-h,b=g(C),S=w<=j;h=w;const E={loaded:w,total:j,progress:j?w/j:void 0,bytes:C,rate:b||void 0,estimated:b&&j&&S?(j-w)/b:void 0,event:m,lengthComputable:j!=null,[c?"download":"upload"]:!0};n(E)},d)},xm=(n,c)=>{const d=n!=null;return[h=>c[0]({lengthComputable:d,total:n,loaded:h}),c[1]]},gm=n=>(...c)=>Oe.asap(()=>n(...c)),Vw=pr.hasStandardBrowserEnv?((n,c)=>d=>(d=new URL(d,pr.origin),n.protocol===d.protocol&&n.host===d.host&&(c||n.port===d.port)))(new URL(pr.origin),pr.navigator&&/(msie|trident)/i.test(pr.navigator.userAgent)):()=>!0,qw=pr.hasStandardBrowserEnv?{write(n,c,d,h,g,m){const w=[n+"="+encodeURIComponent(c)];Oe.isNumber(d)&&w.push("expires="+new Date(d).toGMTString()),Oe.isString(h)&&w.push("path="+h),Oe.isString(g)&&w.push("domain="+g),m===!0&&w.push("secure"),document.cookie=w.join("; ")},read(n){const c=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Gw(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Yw(n,c){return c?n.replace(/\/?\/$/,"")+"/"+c.replace(/^\/+/,""):n}function Kp(n,c,d){let h=!Gw(c);return n&&(h||d==!1)?Yw(n,c):c}const mm=n=>n instanceof Ir?{...n}:n;function Ml(n,c){c=c||{};const d={};function h(b,S,E,_){return Oe.isPlainObject(b)&&Oe.isPlainObject(S)?Oe.merge.call({caseless:_},b,S):Oe.isPlainObject(S)?Oe.merge({},S):Oe.isArray(S)?S.slice():S}function g(b,S,E,_){if(Oe.isUndefined(S)){if(!Oe.isUndefined(b))return h(void 0,b,E,_)}else return h(b,S,E,_)}function m(b,S){if(!Oe.isUndefined(S))return h(void 0,S)}function w(b,S){if(Oe.isUndefined(S)){if(!Oe.isUndefined(b))return h(void 0,b)}else return h(void 0,S)}function j(b,S,E){if(E in c)return h(b,S);if(E in n)return h(void 0,b)}const C={url:m,method:m,data:m,baseURL:w,transformRequest:w,transformResponse:w,paramsSerializer:w,timeout:w,timeoutMessage:w,withCredentials:w,withXSRFToken:w,adapter:w,responseType:w,xsrfCookieName:w,xsrfHeaderName:w,onUploadProgress:w,onDownloadProgress:w,decompress:w,maxContentLength:w,maxBodyLength:w,beforeRedirect:w,transport:w,httpAgent:w,httpsAgent:w,cancelToken:w,socketPath:w,responseEncoding:w,validateStatus:j,headers:(b,S,E)=>g(mm(b),mm(S),E,!0)};return Oe.forEach(Object.keys({...n,...c}),function(S){const E=C[S]||g,_=E(n[S],c[S],S);Oe.isUndefined(_)&&E!==j||(d[S]=_)}),d}const Jp=n=>{const c=Ml({},n);let{data:d,withXSRFToken:h,xsrfHeaderName:g,xsrfCookieName:m,headers:w,auth:j}=c;c.headers=w=Ir.from(w),c.url=Xp(Kp(c.baseURL,c.url,c.allowAbsoluteUrls),n.params,n.paramsSerializer),j&&w.set("Authorization","Basic "+btoa((j.username||"")+":"+(j.password?unescape(encodeURIComponent(j.password)):"")));let C;if(Oe.isFormData(d)){if(pr.hasStandardBrowserEnv||pr.hasStandardBrowserWebWorkerEnv)w.setContentType(void 0);else if((C=w.getContentType())!==!1){const[b,...S]=C?C.split(";").map(E=>E.trim()).filter(Boolean):[];w.setContentType([b||"multipart/form-data",...S].join("; "))}}if(pr.hasStandardBrowserEnv&&(h&&Oe.isFunction(h)&&(h=h(c)),h||h!==!1&&Vw(c.url))){const b=g&&m&&qw.read(m);b&&w.set(g,b)}return c},Xw=typeof XMLHttpRequest<"u",$w=Xw&&function(n){return new Promise(function(d,h){const g=Jp(n);let m=g.data;const w=Ir.from(g.headers).normalize();let{responseType:j,onUploadProgress:C,onDownloadProgress:b}=g,S,E,_,M,I;function D(){M&&M(),I&&I(),g.cancelToken&&g.cancelToken.unsubscribe(S),g.signal&&g.signal.removeEventListener("abort",S)}let G=new XMLHttpRequest;G.open(g.method.toUpperCase(),g.url,!0),G.timeout=g.timeout;function R(){if(!G)return;const O=Ir.from("getAllResponseHeaders"in G&&G.getAllResponseHeaders()),Q={data:!j||j==="text"||j==="json"?G.responseText:G.response,status:G.status,statusText:G.statusText,headers:O,config:n,request:G};Wp(function(q){d(q),D()},function(q){h(q),D()},Q),G=null}"onloadend"in G?G.onloadend=R:G.onreadystatechange=function(){!G||G.readyState!==4||G.status===0&&!(G.responseURL&&G.responseURL.indexOf("file:")===0)||setTimeout(R)},G.onabort=function(){G&&(h(new jt("Request aborted",jt.ECONNABORTED,n,G)),G=null)},G.onerror=function(){h(new jt("Network Error",jt.ERR_NETWORK,n,G)),G=null},G.ontimeout=function(){let P=g.timeout?"timeout of "+g.timeout+"ms exceeded":"timeout exceeded";const Q=g.transitional||$p;g.timeoutErrorMessage&&(P=g.timeoutErrorMessage),h(new jt(P,Q.clarifyTimeoutError?jt.ETIMEDOUT:jt.ECONNABORTED,n,G)),G=null},m===void 0&&w.setContentType(null),"setRequestHeader"in G&&Oe.forEach(w.toJSON(),function(P,Q){G.setRequestHeader(Q,P)}),Oe.isUndefined(g.withCredentials)||(G.withCredentials=!!g.withCredentials),j&&j!=="json"&&(G.responseType=g.responseType),b&&([_,I]=bd(b,!0),G.addEventListener("progress",_)),C&&G.upload&&([E,M]=bd(C),G.upload.addEventListener("progress",E),G.upload.addEventListener("loadend",M)),(g.cancelToken||g.signal)&&(S=O=>{G&&(h(!O||O.type?new Ri(null,n,G):O),G.abort(),G=null)},g.cancelToken&&g.cancelToken.subscribe(S),g.signal&&(g.signal.aborted?S():g.signal.addEventListener("abort",S)));const L=Fw(g.url);if(L&&pr.protocols.indexOf(L)===-1){h(new jt("Unsupported protocol "+L+":",jt.ERR_BAD_REQUEST,n));return}G.send(m||null)})},Zw=(n,c)=>{const{length:d}=n=n?n.filter(Boolean):[];if(c||d){let h=new AbortController,g;const m=function(b){if(!g){g=!0,j();const S=b instanceof Error?b:this.reason;h.abort(S instanceof jt?S:new Ri(S instanceof Error?S.message:S))}};let w=c&&setTimeout(()=>{w=null,m(new jt(`timeout ${c} of ms exceeded`,jt.ETIMEDOUT))},c);const j=()=>{n&&(w&&clearTimeout(w),w=null,n.forEach(b=>{b.unsubscribe?b.unsubscribe(m):b.removeEventListener("abort",m)}),n=null)};n.forEach(b=>b.addEventListener("abort",m));const{signal:C}=h;return C.unsubscribe=()=>Oe.asap(j),C}},Qw=function*(n,c){let d=n.byteLength;if(d<c){yield n;return}let h=0,g;for(;h<d;)g=h+c,yield n.slice(h,g),h=g},Ww=async function*(n,c){for await(const d of Kw(n))yield*Qw(d,c)},Kw=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const c=n.getReader();try{for(;;){const{done:d,value:h}=await c.read();if(d)break;yield h}}finally{await c.cancel()}},pm=(n,c,d,h)=>{const g=Ww(n,c);let m=0,w,j=C=>{w||(w=!0,h&&h(C))};return new ReadableStream({async pull(C){try{const{done:b,value:S}=await g.next();if(b){j(),C.close();return}let E=S.byteLength;if(d){let _=m+=E;d(_)}C.enqueue(new Uint8Array(S))}catch(b){throw j(b),b}},cancel(C){return j(C),g.return()}},{highWaterMark:2})},Dd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",e1=Dd&&typeof ReadableStream=="function",Jw=Dd&&(typeof TextEncoder=="function"?(n=>c=>n.encode(c))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),t1=(n,...c)=>{try{return!!n(...c)}catch{return!1}},ev=e1&&t1(()=>{let n=!1;const c=new Request(pr.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!c}),ym=64*1024,Nh=e1&&t1(()=>Oe.isReadableStream(new Response("").body)),wd={stream:Nh&&(n=>n.body)};Dd&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(c=>{!wd[c]&&(wd[c]=Oe.isFunction(n[c])?d=>d[c]():(d,h)=>{throw new jt(`Response type '${c}' is not supported`,jt.ERR_NOT_SUPPORT,h)})})})(new Response);const tv=async n=>{if(n==null)return 0;if(Oe.isBlob(n))return n.size;if(Oe.isSpecCompliantForm(n))return(await new Request(pr.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Oe.isArrayBufferView(n)||Oe.isArrayBuffer(n))return n.byteLength;if(Oe.isURLSearchParams(n)&&(n=n+""),Oe.isString(n))return(await Jw(n)).byteLength},av=async(n,c)=>{const d=Oe.toFiniteNumber(n.getContentLength());return d??tv(c)},rv=Dd&&(async n=>{let{url:c,method:d,data:h,signal:g,cancelToken:m,timeout:w,onDownloadProgress:j,onUploadProgress:C,responseType:b,headers:S,withCredentials:E="same-origin",fetchOptions:_}=Jp(n);b=b?(b+"").toLowerCase():"text";let M=Zw([g,m&&m.toAbortSignal()],w),I;const D=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let G;try{if(C&&ev&&d!=="get"&&d!=="head"&&(G=await av(S,h))!==0){let Q=new Request(c,{method:"POST",body:h,duplex:"half"}),F;if(Oe.isFormData(h)&&(F=Q.headers.get("content-type"))&&S.setContentType(F),Q.body){const[q,Y]=xm(G,bd(gm(C)));h=pm(Q.body,ym,q,Y)}}Oe.isString(E)||(E=E?"include":"omit");const R="credentials"in Request.prototype;I=new Request(c,{..._,signal:M,method:d.toUpperCase(),headers:S.normalize().toJSON(),body:h,duplex:"half",credentials:R?E:void 0});let L=await fetch(I,_);const O=Nh&&(b==="stream"||b==="response");if(Nh&&(j||O&&D)){const Q={};["status","statusText","headers"].forEach($=>{Q[$]=L[$]});const F=Oe.toFiniteNumber(L.headers.get("content-length")),[q,Y]=j&&xm(F,bd(gm(j),!0))||[];L=new Response(pm(L.body,ym,q,()=>{Y&&Y(),D&&D()}),Q)}b=b||"text";let P=await wd[Oe.findKey(wd,b)||"text"](L,n);return!O&&D&&D(),await new Promise((Q,F)=>{Wp(Q,F,{data:P,headers:Ir.from(L.headers),status:L.status,statusText:L.statusText,config:n,request:I})})}catch(R){throw D&&D(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new jt("Network Error",jt.ERR_NETWORK,n,I),{cause:R.cause||R}):jt.from(R,R&&R.code,n,I)}}),jh={http:yw,xhr:$w,fetch:rv};Oe.forEach(jh,(n,c)=>{if(n){try{Object.defineProperty(n,"name",{value:c})}catch{}Object.defineProperty(n,"adapterName",{value:c})}});const bm=n=>`- ${n}`,sv=n=>Oe.isFunction(n)||n===null||n===!1,a1={getAdapter:n=>{n=Oe.isArray(n)?n:[n];const{length:c}=n;let d,h;const g={};for(let m=0;m<c;m++){d=n[m];let w;if(h=d,!sv(d)&&(h=jh[(w=String(d)).toLowerCase()],h===void 0))throw new jt(`Unknown adapter '${w}'`);if(h)break;g[w||"#"+m]=h}if(!h){const m=Object.entries(g).map(([j,C])=>`adapter ${j} `+(C===!1?"is not supported by the environment":"is not available in the build"));let w=c?m.length>1?`since :
`+m.map(bm).join(`
`):" "+bm(m[0]):"as no adapter specified";throw new jt("There is no suitable adapter to dispatch the request "+w,"ERR_NOT_SUPPORT")}return h},adapters:jh};function G0(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Ri(null,n)}function wm(n){return G0(n),n.headers=Ir.from(n.headers),n.data=q0.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),a1.getAdapter(n.adapter||$o.adapter)(n).then(function(h){return G0(n),h.data=q0.call(n,n.transformResponse,h),h.headers=Ir.from(h.headers),h},function(h){return Qp(h)||(G0(n),h&&h.response&&(h.response.data=q0.call(n,n.transformResponse,h.response),h.response.headers=Ir.from(h.response.headers))),Promise.reject(h)})}const r1="1.11.0",Rd={};["object","boolean","number","function","string","symbol"].forEach((n,c)=>{Rd[n]=function(h){return typeof h===n||"a"+(c<1?"n ":" ")+n}});const vm={};Rd.transitional=function(c,d,h){function g(m,w){return"[Axios v"+r1+"] Transitional option '"+m+"'"+w+(h?". "+h:"")}return(m,w,j)=>{if(c===!1)throw new jt(g(w," has been removed"+(d?" in "+d:"")),jt.ERR_DEPRECATED);return d&&!vm[w]&&(vm[w]=!0,console.warn(g(w," has been deprecated since v"+d+" and will be removed in the near future"))),c?c(m,w,j):!0}};Rd.spelling=function(c){return(d,h)=>(console.warn(`${h} is likely a misspelling of ${c}`),!0)};function nv(n,c,d){if(typeof n!="object")throw new jt("options must be an object",jt.ERR_BAD_OPTION_VALUE);const h=Object.keys(n);let g=h.length;for(;g-- >0;){const m=h[g],w=c[m];if(w){const j=n[m],C=j===void 0||w(j,m,n);if(C!==!0)throw new jt("option "+m+" must be "+C,jt.ERR_BAD_OPTION_VALUE);continue}if(d!==!0)throw new jt("Unknown option "+m,jt.ERR_BAD_OPTION)}}const gd={assertOptions:nv,validators:Rd},zs=gd.validators;let _l=class{constructor(c){this.defaults=c||{},this.interceptors={request:new hm,response:new hm}}async request(c,d){try{return await this._request(c,d)}catch(h){if(h instanceof Error){let g={};Error.captureStackTrace?Error.captureStackTrace(g):g=new Error;const m=g.stack?g.stack.replace(/^.+\n/,""):"";try{h.stack?m&&!String(h.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(h.stack+=`
`+m):h.stack=m}catch{}}throw h}}_request(c,d){typeof c=="string"?(d=d||{},d.url=c):d=c||{},d=Ml(this.defaults,d);const{transitional:h,paramsSerializer:g,headers:m}=d;h!==void 0&&gd.assertOptions(h,{silentJSONParsing:zs.transitional(zs.boolean),forcedJSONParsing:zs.transitional(zs.boolean),clarifyTimeoutError:zs.transitional(zs.boolean)},!1),g!=null&&(Oe.isFunction(g)?d.paramsSerializer={serialize:g}:gd.assertOptions(g,{encode:zs.function,serialize:zs.function},!0)),d.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?d.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:d.allowAbsoluteUrls=!0),gd.assertOptions(d,{baseUrl:zs.spelling("baseURL"),withXsrfToken:zs.spelling("withXSRFToken")},!0),d.method=(d.method||this.defaults.method||"get").toLowerCase();let w=m&&Oe.merge(m.common,m[d.method]);m&&Oe.forEach(["delete","get","head","post","put","patch","common"],I=>{delete m[I]}),d.headers=Ir.concat(w,m);const j=[];let C=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(d)===!1||(C=C&&D.synchronous,j.unshift(D.fulfilled,D.rejected))});const b=[];this.interceptors.response.forEach(function(D){b.push(D.fulfilled,D.rejected)});let S,E=0,_;if(!C){const I=[wm.bind(this),void 0];for(I.unshift(...j),I.push(...b),_=I.length,S=Promise.resolve(d);E<_;)S=S.then(I[E++],I[E++]);return S}_=j.length;let M=d;for(E=0;E<_;){const I=j[E++],D=j[E++];try{M=I(M)}catch(G){D.call(this,G);break}}try{S=wm.call(this,M)}catch(I){return Promise.reject(I)}for(E=0,_=b.length;E<_;)S=S.then(b[E++],b[E++]);return S}getUri(c){c=Ml(this.defaults,c);const d=Kp(c.baseURL,c.url,c.allowAbsoluteUrls);return Xp(d,c.params,c.paramsSerializer)}};Oe.forEach(["delete","get","head","options"],function(c){_l.prototype[c]=function(d,h){return this.request(Ml(h||{},{method:c,url:d,data:(h||{}).data}))}});Oe.forEach(["post","put","patch"],function(c){function d(h){return function(m,w,j){return this.request(Ml(j||{},{method:c,headers:h?{"Content-Type":"multipart/form-data"}:{},url:m,data:w}))}}_l.prototype[c]=d(),_l.prototype[c+"Form"]=d(!0)});let lv=class s1{constructor(c){if(typeof c!="function")throw new TypeError("executor must be a function.");let d;this.promise=new Promise(function(m){d=m});const h=this;this.promise.then(g=>{if(!h._listeners)return;let m=h._listeners.length;for(;m-- >0;)h._listeners[m](g);h._listeners=null}),this.promise.then=g=>{let m;const w=new Promise(j=>{h.subscribe(j),m=j}).then(g);return w.cancel=function(){h.unsubscribe(m)},w},c(function(m,w,j){h.reason||(h.reason=new Ri(m,w,j),d(h.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(c){if(this.reason){c(this.reason);return}this._listeners?this._listeners.push(c):this._listeners=[c]}unsubscribe(c){if(!this._listeners)return;const d=this._listeners.indexOf(c);d!==-1&&this._listeners.splice(d,1)}toAbortSignal(){const c=new AbortController,d=h=>{c.abort(h)};return this.subscribe(d),c.signal.unsubscribe=()=>this.unsubscribe(d),c.signal}static source(){let c;return{token:new s1(function(g){c=g}),cancel:c}}};function iv(n){return function(d){return n.apply(null,d)}}function ov(n){return Oe.isObject(n)&&n.isAxiosError===!0}const kh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kh).forEach(([n,c])=>{kh[c]=n});function n1(n){const c=new _l(n),d=Op(_l.prototype.request,c);return Oe.extend(d,_l.prototype,c,{allOwnKeys:!0}),Oe.extend(d,c,null,{allOwnKeys:!0}),d.create=function(g){return n1(Ml(n,g))},d}const Pa=n1($o);Pa.Axios=_l;Pa.CanceledError=Ri;Pa.CancelToken=lv;Pa.isCancel=Qp;Pa.VERSION=r1;Pa.toFormData=Md;Pa.AxiosError=jt;Pa.Cancel=Pa.CanceledError;Pa.all=function(c){return Promise.all(c)};Pa.spread=iv;Pa.isAxiosError=ov;Pa.mergeConfig=Ml;Pa.AxiosHeaders=Ir;Pa.formToJSON=n=>Zp(Oe.isHTMLForm(n)?new FormData(n):n);Pa.getAdapter=a1.getAdapter;Pa.HttpStatusCode=kh;Pa.default=Pa;const{Axios:ik,AxiosError:ok,CanceledError:ck,isCancel:dk,CancelToken:uk,VERSION:hk,all:fk,Cancel:xk,isAxiosError:gk,spread:mk,toFormData:pk,AxiosHeaders:yk,HttpStatusCode:bk,formToJSON:wk,getAdapter:vk,mergeConfig:Nk}=Pa,Ma=N.createContext(null);function cv({children:n}){const[c,d]=N.useState(()=>{const _=localStorage.getItem("houseOwnerToken"),M=localStorage.getItem("houseOwnerData"),I=localStorage.getItem("userType");if(_&&M&&I==="houseowner")return{accessToken:_,user:JSON.parse(M),userType:"houseowner"};const D=localStorage.getItem("auth");return D?{...JSON.parse(D),userType:localStorage.getItem("userType")||"admin"}:{accessToken:null,user:null,userType:null}}),h=Gt(),g=N.useRef(null),m=600*1e3,w=N.useCallback(()=>{d({accessToken:null,user:null,userType:null}),localStorage.removeItem("auth"),localStorage.removeItem("accessToken"),localStorage.removeItem("user"),localStorage.removeItem("userType"),localStorage.removeItem("houseOwnerToken"),localStorage.removeItem("houseOwnerData"),localStorage.removeItem("lastActivity"),g.current&&clearTimeout(g.current),h("/login"),console.log("Auto logged out due to inactivity")},[h]),j=N.useCallback(()=>{g.current&&clearTimeout(g.current),localStorage.setItem("lastActivity",Date.now().toString()),g.current=setTimeout(()=>{w()},m)},[w,m]),C=N.useCallback(()=>{const _=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],M=()=>{j()};_.forEach(D=>{window.addEventListener(D,M,{passive:!0})});const I=()=>{document.hidden||j()};return document.addEventListener("visibilitychange",I),()=>{_.forEach(D=>{window.removeEventListener(D,M)}),document.removeEventListener("visibilitychange",I),g.current&&clearTimeout(g.current)}},[j]);N.useEffect(()=>{if(c&&c.accessToken){const _=localStorage.getItem("lastActivity");if(_){const I=parseInt(_,10),D=Date.now()-I;if(D>m){w();return}const G=m-D;g.current=setTimeout(w,G)}else j();return C()}else g.current&&clearTimeout(g.current)},[c,j,C,w,m]);const b=N.useCallback(_=>{const M=_.user?.isHouseOwner?"houseowner":"admin",I={..._,userType:M};d(I),_&&_.accessToken?(M==="houseowner"?(localStorage.setItem("houseOwnerToken",_.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(_.user))):(localStorage.setItem("auth",JSON.stringify(_)),localStorage.setItem("accessToken",_.accessToken),localStorage.setItem("user",JSON.stringify(_.user))),localStorage.setItem("userType",M),j()):w()},[j,w]),S=N.useCallback(async()=>{try{c.userType==="houseowner"?await me.post("/houseowner-auth/logout",{},{credentials:"include"}):await me.post("/auth/logout",{},{credentials:"include"})}catch(_){console.error("Logout error:",_)}finally{w()}},[w,c.userType]),E={auth:c,setAuth:b,logout:S,resetActivityTimer:j};return e.jsx(Ma.Provider,{value:E,children:n})}const me=Pa.create({baseURL:"http://localhost:2500/api",withCredentials:!0});me.interceptors.request.use(n=>{try{const c=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");c&&(n.headers=n.headers||{},n.headers.Authorization=`Bearer ${c}`)}catch{}return n},n=>Promise.reject(n));me.interceptors.response.use(n=>n,async n=>{const c=n.config;if(n.response&&n.response.status===401&&!c?._retry){c._retry=!0;try{const h=(await me.post("/auth/refresh")).data?.accessToken;if(h){try{localStorage.setItem("accessToken",h)}catch{}me.defaults.headers.common.Authorization=`Bearer ${h}`,c.headers=c.headers||{},c.headers.Authorization=`Bearer ${h}`}return me(c)}catch(d){try{window.location.href="/login"}catch{}return Promise.reject(d)}}return Promise.reject(n)});/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uv=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(c,d,h)=>h?h.toUpperCase():d.toLowerCase()),Nm=n=>{const c=uv(n);return c.charAt(0).toUpperCase()+c.slice(1)},l1=(...n)=>n.filter((c,d,h)=>!!c&&c.trim()!==""&&h.indexOf(c)===d).join(" ").trim(),hv=n=>{for(const c in n)if(c.startsWith("aria-")||c==="role"||c==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=N.forwardRef(({color:n="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:h,className:g="",children:m,iconNode:w,...j},C)=>N.createElement("svg",{ref:C,...fv,width:c,height:c,stroke:n,strokeWidth:h?Number(d)*24/Number(c):d,className:l1("lucide",g),...!m&&!hv(j)&&{"aria-hidden":"true"},...j},[...w.map(([b,S])=>N.createElement(b,S)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(n,c)=>{const d=N.forwardRef(({className:h,...g},m)=>N.createElement(xv,{ref:m,iconNode:c,className:l1(`lucide-${dv(Nm(n))}`,`lucide-${n}`,h),...g}));return d.displayName=Nm(n),d};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],mv=tt("activity",gv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M11 9a1 1 0 0 0 1-1V5.061a1 1 0 0 1 1.811-.75l6.836 6.836a1.207 1.207 0 0 1 0 1.707l-6.836 6.835a1 1 0 0 1-1.811-.75V16a1 1 0 0 0-1-1H5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z",key:"1232du"}]],jm=tt("arrow-big-right",pv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],bv=tt("arrow-down-right",yv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Po=tt("arrow-left",wv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Nv=tt("arrow-right",vv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],El=tt("arrow-up-right",jv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["path",{d:"M12 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5",key:"x6cv4u"}],["path",{d:"m16 19 3 3 3-3",key:"1ibux0"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Cv=tt("banknote-arrow-down",kv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],Av=tt("bath",Sv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],_v=tt("bed",Ev);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],md=tt("bell",Tv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ch=tt("briefcase",Mv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],nr=tt("building-2",Dv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Id=tt("building",Rv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Dl=tt("calendar",Iv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Bv=tt("camera",Ov);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],pd=tt("chart-no-axes-column-increasing",Lv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Rl=tt("check",Pv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Si=tt("chevron-down",zv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Hs=tt("chevron-left",Fv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ai=tt("chevron-right",Uv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ei=tt("chevron-up",Hv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vr=tt("circle-alert",Vv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nr=tt("circle-check-big",qv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Sh=tt("circle-x",Gv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],km=tt("clipboard-list",Yv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ns=tt("clock",Xv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Yh=tt("credit-card",$v);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],$r=tt("dollar-sign",Zv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ii=tt("download",Qv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],pn=tt("eye-off",Wv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gs=tt("eye",Kv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qt=tt("file-text",Jv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Od=tt("funnel",eN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],i1=tt("globe",tN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],rN=tt("hash",aN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],xa=tt("house",sN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],o1=tt("id-card",nN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ms=tt("image",lN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oN=tt("info",iN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],c1=tt("key",cN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Xh=tt("layers",dN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],hN=tt("layout-dashboard",uN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],At=tt("loader",fN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ah=tt("log-out",xN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Il=tt("mail",gN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],_i=tt("map-pin",mN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],$h=tt("menu",pN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Eh=tt("moon",yN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],wN=tt("panel-left",bN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],NN=tt("phone-call",vN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Zo=tt("phone",jN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qa=tt("plus",kN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Zh=tt("qr-code",CN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Va=tt("receipt",SN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_h=tt("refresh-cw",AN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Qh=tt("save",EN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Or=tt("search",_N);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],d1=tt("send",TN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Th=tt("settings",MN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Cm=tt("shield-check",DN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vd=tt("shield",RN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ON=tt("square-check-big",IN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],kr=tt("square-pen",BN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Nd=tt("square",LN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Mh=tt("sun",PN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Bd=tt("toggle-left",zN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Ld=tt("toggle-right",FN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ja=tt("trash-2",UN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ps=tt("upload",HN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qN=tt("user-check",VN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],zo=tt("user-plus",GN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],XN=tt("user-x",YN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cr=tt("user",$N);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vs=tt("users",ZN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],u1=tt("wrench",QN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$t=tt("x",WN);function h1(n){var c,d,h="";if(typeof n=="string"||typeof n=="number")h+=n;else if(typeof n=="object")if(Array.isArray(n)){var g=n.length;for(c=0;c<g;c++)n[c]&&(d=h1(n[c]))&&(h&&(h+=" "),h+=d)}else for(d in n)n[d]&&(h&&(h+=" "),h+=d);return h}function Tl(){for(var n,c,d=0,h="",g=arguments.length;d<g;d++)(n=arguments[d])&&(c=h1(n))&&(h&&(h+=" "),h+=c);return h}function KN(n){if(typeof document>"u")return;let c=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css",c.firstChild?c.insertBefore(d,c.firstChild):c.appendChild(d),d.styleSheet?d.styleSheet.cssText=n:d.appendChild(document.createTextNode(n))}KN(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Qo=n=>typeof n=="number"&&!isNaN(n),Ol=n=>typeof n=="string",yn=n=>typeof n=="function",JN=n=>Ol(n)||Qo(n),Dh=n=>Ol(n)||yn(n)?n:null,e4=(n,c)=>n===!1||Qo(n)&&n>0?n:c,Rh=n=>N.isValidElement(n)||Ol(n)||yn(n)||Qo(n);function t4(n,c,d=300){let{scrollHeight:h,style:g}=n;requestAnimationFrame(()=>{g.minHeight="initial",g.height=h+"px",g.transition=`all ${d}ms`,requestAnimationFrame(()=>{g.height="0",g.padding="0",g.margin="0",setTimeout(c,d)})})}function a4({enter:n,exit:c,appendPosition:d=!1,collapse:h=!0,collapseDuration:g=300}){return function({children:m,position:w,preventExitTransition:j,done:C,nodeRef:b,isIn:S,playToast:E}){let _=d?`${n}--${w}`:n,M=d?`${c}--${w}`:c,I=N.useRef(0);return N.useLayoutEffect(()=>{let D=b.current,G=_.split(" "),R=L=>{L.target===b.current&&(E(),D.removeEventListener("animationend",R),D.removeEventListener("animationcancel",R),I.current===0&&L.type!=="animationcancel"&&D.classList.remove(...G))};D.classList.add(...G),D.addEventListener("animationend",R),D.addEventListener("animationcancel",R)},[]),N.useEffect(()=>{let D=b.current,G=()=>{D.removeEventListener("animationend",G),h?t4(D,C,g):C()};S||(j?G():(I.current=1,D.className+=` ${M}`,D.addEventListener("animationend",G)))},[S]),na.createElement(na.Fragment,null,m)}}function Sm(n,c){return{content:f1(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:c}}function f1(n,c,d=!1){return N.isValidElement(n)&&!Ol(n.type)?N.cloneElement(n,{closeToast:c.closeToast,toastProps:c,data:c.data,isPaused:d}):yn(n)?n({closeToast:c.closeToast,toastProps:c,data:c.data,isPaused:d}):n}function r4({closeToast:n,theme:c,ariaLabel:d="close"}){return na.createElement("button",{className:`Toastify__close-button Toastify__close-button--${c}`,type:"button",onClick:h=>{h.stopPropagation(),n(!0)},"aria-label":d},na.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},na.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function s4({delay:n,isRunning:c,closeToast:d,type:h="default",hide:g,className:m,controlledProgress:w,progress:j,rtl:C,isIn:b,theme:S}){let E=g||w&&j===0,_={animationDuration:`${n}ms`,animationPlayState:c?"running":"paused"};w&&(_.transform=`scaleX(${j})`);let M=Tl("Toastify__progress-bar",w?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${S}`,`Toastify__progress-bar--${h}`,{"Toastify__progress-bar--rtl":C}),I=yn(m)?m({rtl:C,type:h,defaultClassName:M}):Tl(M,m),D={[w&&j>=1?"onTransitionEnd":"onAnimationEnd"]:w&&j<1?null:()=>{b&&d()}};return na.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":E},na.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${S} Toastify__progress-bar--${h}`}),na.createElement("div",{role:"progressbar","aria-hidden":E?"true":"false","aria-label":"notification timer",className:I,style:_,...D}))}var n4=1,x1=()=>`${n4++}`;function l4(n,c,d){let h=1,g=0,m=[],w=[],j=c,C=new Map,b=new Set,S=L=>(b.add(L),()=>b.delete(L)),E=()=>{w=Array.from(C.values()),b.forEach(L=>L())},_=({containerId:L,toastId:O,updateId:P})=>{let Q=L?L!==n:n!==1,F=C.has(O)&&P==null;return Q||F},M=(L,O)=>{C.forEach(P=>{var Q;(O==null||O===P.props.toastId)&&((Q=P.toggle)==null||Q.call(P,L))})},I=L=>{var O,P;(P=(O=L.props)==null?void 0:O.onClose)==null||P.call(O,L.removalReason),L.isActive=!1},D=L=>{if(L==null)C.forEach(I);else{let O=C.get(L);O&&I(O)}E()},G=()=>{g-=m.length,m=[]},R=L=>{var O,P;let{toastId:Q,updateId:F}=L.props,q=F==null;L.staleId&&C.delete(L.staleId),L.isActive=!0,C.set(Q,L),E(),d(Sm(L,q?"added":"updated")),q&&((P=(O=L.props).onOpen)==null||P.call(O))};return{id:n,props:j,observe:S,toggle:M,removeToast:D,toasts:C,clearQueue:G,buildToast:(L,O)=>{if(_(O))return;let{toastId:P,updateId:Q,data:F,staleId:q,delay:Y}=O,$=Q==null;$&&g++;let ce={...j,style:j.toastStyle,key:h++,...Object.fromEntries(Object.entries(O).filter(([de,ne])=>ne!=null)),toastId:P,updateId:Q,data:F,isIn:!1,className:Dh(O.className||j.toastClassName),progressClassName:Dh(O.progressClassName||j.progressClassName),autoClose:O.isLoading?!1:e4(O.autoClose,j.autoClose),closeToast(de){C.get(P).removalReason=de,D(P)},deleteToast(){let de=C.get(P);if(de!=null){if(d(Sm(de,"removed")),C.delete(P),g--,g<0&&(g=0),m.length>0){R(m.shift());return}E()}}};ce.closeButton=j.closeButton,O.closeButton===!1||Rh(O.closeButton)?ce.closeButton=O.closeButton:O.closeButton===!0&&(ce.closeButton=Rh(j.closeButton)?j.closeButton:!0);let he={content:L,props:ce,staleId:q};j.limit&&j.limit>0&&g>j.limit&&$?m.push(he):Qo(Y)?setTimeout(()=>{R(he)},Y):R(he)},setProps(L){j=L},setToggle:(L,O)=>{let P=C.get(L);P&&(P.toggle=O)},isToastActive:L=>{var O;return(O=C.get(L))==null?void 0:O.isActive},getSnapshot:()=>w}}var jr=new Map,Fo=[],Ih=new Set,i4=n=>Ih.forEach(c=>c(n)),g1=()=>jr.size>0;function o4(){Fo.forEach(n=>p1(n.content,n.options)),Fo=[]}var c4=(n,{containerId:c})=>{var d;return(d=jr.get(c||1))==null?void 0:d.toasts.get(n)};function m1(n,c){var d;if(c)return!!((d=jr.get(c))!=null&&d.isToastActive(n));let h=!1;return jr.forEach(g=>{g.isToastActive(n)&&(h=!0)}),h}function d4(n){if(!g1()){Fo=Fo.filter(c=>n!=null&&c.options.toastId!==n);return}if(n==null||JN(n))jr.forEach(c=>{c.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let c=jr.get(n.containerId);c?c.removeToast(n.id):jr.forEach(d=>{d.removeToast(n.id)})}}var u4=(n={})=>{jr.forEach(c=>{c.props.limit&&(!n.containerId||c.id===n.containerId)&&c.clearQueue()})};function p1(n,c){Rh(n)&&(g1()||Fo.push({content:n,options:c}),jr.forEach(d=>{d.buildToast(n,c)}))}function h4(n){var c;(c=jr.get(n.containerId||1))==null||c.setToggle(n.id,n.fn)}function y1(n,c){jr.forEach(d=>{(c==null||!(c!=null&&c.containerId)||c?.containerId===d.id)&&d.toggle(n,c?.id)})}function f4(n){let c=n.containerId||1;return{subscribe(d){let h=l4(c,n,i4);jr.set(c,h);let g=h.observe(d);return o4(),()=>{g(),jr.delete(c)}},setProps(d){var h;(h=jr.get(c))==null||h.setProps(d)},getSnapshot(){var d;return(d=jr.get(c))==null?void 0:d.getSnapshot()}}}function x4(n){return Ih.add(n),()=>{Ih.delete(n)}}function g4(n){return n&&(Ol(n.toastId)||Qo(n.toastId))?n.toastId:x1()}function Wo(n,c){return p1(n,c),c.toastId}function Pd(n,c){return{...c,type:c&&c.type||n,toastId:g4(c)}}function zd(n){return(c,d)=>Wo(c,Pd(n,d))}function re(n,c){return Wo(n,Pd("default",c))}re.loading=(n,c)=>Wo(n,Pd("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...c}));function m4(n,{pending:c,error:d,success:h},g){let m;c&&(m=Ol(c)?re.loading(c,g):re.loading(c.render,{...g,...c}));let w={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},j=(b,S,E)=>{if(S==null){re.dismiss(m);return}let _={type:b,...w,...g,data:E},M=Ol(S)?{render:S}:S;return m?re.update(m,{..._,...M}):re(M.render,{..._,...M}),E},C=yn(n)?n():n;return C.then(b=>j("success",h,b)).catch(b=>j("error",d,b)),C}re.promise=m4;re.success=zd("success");re.info=zd("info");re.error=zd("error");re.warning=zd("warning");re.warn=re.warning;re.dark=(n,c)=>Wo(n,Pd("default",{theme:"dark",...c}));function p4(n){d4(n)}re.dismiss=p4;re.clearWaitingQueue=u4;re.isActive=m1;re.update=(n,c={})=>{let d=c4(n,c);if(d){let{props:h,content:g}=d,m={delay:100,...h,...c,toastId:c.toastId||n,updateId:x1()};m.toastId!==n&&(m.staleId=n);let w=m.render||g;delete m.render,Wo(w,m)}};re.done=n=>{re.update(n,{progress:1})};re.onChange=x4;re.play=n=>y1(!0,n);re.pause=n=>y1(!1,n);function y4(n){var c;let{subscribe:d,getSnapshot:h,setProps:g}=N.useRef(f4(n)).current;g(n);let m=(c=N.useSyncExternalStore(d,h,h))==null?void 0:c.slice();function w(j){if(!m)return[];let C=new Map;return n.newestOnTop&&m.reverse(),m.forEach(b=>{let{position:S}=b.props;C.has(S)||C.set(S,[]),C.get(S).push(b)}),Array.from(C,b=>j(b[0],b[1]))}return{getToastToRender:w,isToastActive:m1,count:m?.length}}function b4(n){let[c,d]=N.useState(!1),[h,g]=N.useState(!1),m=N.useRef(null),w=N.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:j,pauseOnHover:C,closeToast:b,onClick:S,closeOnClick:E}=n;h4({id:n.toastId,containerId:n.containerId,fn:d}),N.useEffect(()=>{if(n.pauseOnFocusLoss)return _(),()=>{M()}},[n.pauseOnFocusLoss]);function _(){document.hasFocus()||R(),window.addEventListener("focus",G),window.addEventListener("blur",R)}function M(){window.removeEventListener("focus",G),window.removeEventListener("blur",R)}function I(q){if(n.draggable===!0||n.draggable===q.pointerType){L();let Y=m.current;w.canCloseOnClick=!0,w.canDrag=!0,Y.style.transition="none",n.draggableDirection==="x"?(w.start=q.clientX,w.removalDistance=Y.offsetWidth*(n.draggablePercent/100)):(w.start=q.clientY,w.removalDistance=Y.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function D(q){let{top:Y,bottom:$,left:ce,right:he}=m.current.getBoundingClientRect();q.nativeEvent.type!=="touchend"&&n.pauseOnHover&&q.clientX>=ce&&q.clientX<=he&&q.clientY>=Y&&q.clientY<=$?R():G()}function G(){d(!0)}function R(){d(!1)}function L(){w.didMove=!1,document.addEventListener("pointermove",P),document.addEventListener("pointerup",Q)}function O(){document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",Q)}function P(q){let Y=m.current;if(w.canDrag&&Y){w.didMove=!0,c&&R(),n.draggableDirection==="x"?w.delta=q.clientX-w.start:w.delta=q.clientY-w.start,w.start!==q.clientX&&(w.canCloseOnClick=!1);let $=n.draggableDirection==="x"?`${w.delta}px, var(--y)`:`0, calc(${w.delta}px + var(--y))`;Y.style.transform=`translate3d(${$},0)`,Y.style.opacity=`${1-Math.abs(w.delta/w.removalDistance)}`}}function Q(){O();let q=m.current;if(w.canDrag&&w.didMove&&q){if(w.canDrag=!1,Math.abs(w.delta)>w.removalDistance){g(!0),n.closeToast(!0),n.collapseAll();return}q.style.transition="transform 0.2s, opacity 0.2s",q.style.removeProperty("transform"),q.style.removeProperty("opacity")}}let F={onPointerDown:I,onPointerUp:D};return j&&C&&(F.onMouseEnter=R,n.stacked||(F.onMouseLeave=G)),E&&(F.onClick=q=>{S&&S(q),w.canCloseOnClick&&b(!0)}),{playToast:G,pauseToast:R,isRunning:c,preventExitTransition:h,toastRef:m,eventHandlers:F}}var w4=typeof window<"u"?N.useLayoutEffect:N.useEffect,Fd=({theme:n,type:c,isLoading:d,...h})=>na.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${c})`,...h});function v4(n){return na.createElement(Fd,{...n},na.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function N4(n){return na.createElement(Fd,{...n},na.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function j4(n){return na.createElement(Fd,{...n},na.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function k4(n){return na.createElement(Fd,{...n},na.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function C4(){return na.createElement("div",{className:"Toastify__spinner"})}var Oh={info:N4,warning:v4,success:j4,error:k4,spinner:C4},S4=n=>n in Oh;function A4({theme:n,type:c,isLoading:d,icon:h}){let g=null,m={theme:n,type:c};return h===!1||(yn(h)?g=h({...m,isLoading:d}):N.isValidElement(h)?g=N.cloneElement(h,m):d?g=Oh.spinner():S4(c)&&(g=Oh[c](m))),g}var E4=n=>{let{isRunning:c,preventExitTransition:d,toastRef:h,eventHandlers:g,playToast:m}=b4(n),{closeButton:w,children:j,autoClose:C,onClick:b,type:S,hideProgressBar:E,closeToast:_,transition:M,position:I,className:D,style:G,progressClassName:R,updateId:L,role:O,progress:P,rtl:Q,toastId:F,deleteToast:q,isIn:Y,isLoading:$,closeOnClick:ce,theme:he,ariaLabel:de}=n,ne=Tl("Toastify__toast",`Toastify__toast-theme--${he}`,`Toastify__toast--${S}`,{"Toastify__toast--rtl":Q},{"Toastify__toast--close-on-click":ce}),J=yn(D)?D({rtl:Q,position:I,type:S,defaultClassName:ne}):Tl(ne,D),z=A4(n),V=!!P||!C,W={closeToast:_,type:S,theme:he},se=null;return w===!1||(yn(w)?se=w(W):N.isValidElement(w)?se=N.cloneElement(w,W):se=r4(W)),na.createElement(M,{isIn:Y,done:q,position:I,preventExitTransition:d,nodeRef:h,playToast:m},na.createElement("div",{id:F,tabIndex:0,onClick:b,"data-in":Y,className:J,...g,style:G,ref:h,...Y&&{role:O,"aria-label":de}},z!=null&&na.createElement("div",{className:Tl("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!$})},z),f1(j,n,!c),se,!n.customProgressBar&&na.createElement(s4,{...L&&!V?{key:`p-${L}`}:{},rtl:Q,theme:he,delay:C,isRunning:c,isIn:Y,closeToast:_,hide:E,type:S,className:R,controlledProgress:V,progress:P||0})))},_4=(n,c=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:c}),T4=a4(_4("bounce",!0)),M4={position:"top-right",transition:T4,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function Yt(n){let c={...M4,...n},d=n.stacked,[h,g]=N.useState(!0),m=N.useRef(null),{getToastToRender:w,isToastActive:j,count:C}=y4(c),{className:b,style:S,rtl:E,containerId:_,hotKeys:M}=c;function I(G){let R=Tl("Toastify__toast-container",`Toastify__toast-container--${G}`,{"Toastify__toast-container--rtl":E});return yn(b)?b({position:G,rtl:E,defaultClassName:R}):Tl(R,Dh(b))}function D(){d&&(g(!0),re.play())}return w4(()=>{var G;if(d){let R=m.current.querySelectorAll('[data-in="true"]'),L=12,O=(G=c.position)==null?void 0:G.includes("top"),P=0,Q=0;Array.from(R).reverse().forEach((F,q)=>{let Y=F;Y.classList.add("Toastify__toast--stacked"),q>0&&(Y.dataset.collapsed=`${h}`),Y.dataset.pos||(Y.dataset.pos=O?"top":"bot");let $=P*(h?.2:1)+(h?0:L*q);Y.style.setProperty("--y",`${O?$:$*-1}px`),Y.style.setProperty("--g",`${L}`),Y.style.setProperty("--s",`${1-(h?Q:0)}`),P+=Y.offsetHeight,Q+=.025})}},[h,C,d]),N.useEffect(()=>{function G(R){var L;let O=m.current;M(R)&&((L=O.querySelector('[tabIndex="0"]'))==null||L.focus(),g(!1),re.pause()),R.key==="Escape"&&(document.activeElement===O||O!=null&&O.contains(document.activeElement))&&(g(!0),re.play())}return document.addEventListener("keydown",G),()=>{document.removeEventListener("keydown",G)}},[M]),na.createElement("section",{ref:m,className:"Toastify",id:_,onMouseEnter:()=>{d&&(g(!1),re.pause())},onMouseLeave:D,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":c["aria-label"]},w((G,R)=>{let L=R.length?{...S}:{...S,pointerEvents:"none"};return na.createElement("div",{tabIndex:-1,className:I(G),"data-stacked":d,style:L,key:`c-${G}`},R.map(({content:O,props:P})=>na.createElement(E4,{...P,stacked:d,collapseAll:D,isIn:j(P.toastId,P.containerId),key:`t-${P.key}`},O)))}))}function D4(){const{setAuth:n}=N.useContext(Ma),[c,d]=N.useState(""),[h,g]=N.useState(""),[m,w]=N.useState(!1),[j,C]=N.useState(null),[b,S]=N.useState(!1),[E,_]=N.useState(!1),[M,I]=N.useState(!1),[D,G]=N.useState(0),[R,L]=N.useState("admin"),O=Gt();let[P,Q]=qo();N.useEffect(()=>{const V=P.get("token"),W=P.get("id"),se=P.get("type");V&&W&&(se==="houseowner"?q(V,W):F(V,W))},[P]);const F=async(V,W)=>{S(!0),C(null);try{await me.post("/auth/verify",{token:V,id:W}),re.success("Email verified successfully! You can now log in."),Q({})}catch(se){re.error(se.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{S(!1)}},q=async(V,W)=>{S(!0),C(null);try{const se=await me.post("/houseowner-auth/verify",{token:V,id:W});se.data.success&&(se.data.requires_password?(re.success("Email verified! Please set your password."),O(`/houseowner/set-password?token=${V}&id=${W}`)):(re.success("Email verified successfully! You can now log in."),Q({})))}catch(se){re.error(se.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{S(!1)}};async function Y(V){if(V.preventDefault(),!(b||M)){C(null),S(!0);try{const W=await me.post("/auth/login-unified",{email:c,password:h});if(W.data.accessToken){n({accessToken:W.data.accessToken,user:W.data.user}),re.success("Login Successful!");try{localStorage.setItem("accessToken",W.data.accessToken),localStorage.setItem("user",JSON.stringify(W.data.user)),localStorage.setItem("userType",W.data.user.user_type)}catch(se){console.warn("Could not save to localStorage:",se)}$(W.data.user);return}}catch(W){ce(W)}finally{S(!1)}}}const $=V=>{V.user_type==="houseowner"?O("/houseowner/dashboard"):V.role==="Admin"?O("/admindashboard"):O("/employee-dashboard")},ce=V=>{if(V.response?.status===429)he(V);else{const se=V.response?.data?.message||"Login failed";C(se),re.error(se),(se.includes("verify")||se.includes("verified"))&&de()}},he=V=>{const W=V.response?.headers?.["retry-after"],se=W?Math.max(1,Number(W)):60;re.error(`Too many requests. Please wait ${se}s before trying again.`),I(!0),G(se);try{localStorage.setItem("rateLimitedUntil",Date.now()+se*1e3)}catch(xe){console.warn("Could not save rate limit info:",xe)}let le=se;const K=setInterval(()=>{if(le-=1,G(le),le<=0){clearInterval(K),I(!1),G(0);try{localStorage.removeItem("rateLimitedUntil")}catch(xe){console.warn("Could not clear rate limit info:",xe)}}},1e3)},de=()=>{re.info(e.jsxs("div",{children:[e.jsx("p",{children:"Need a new verification email?"}),e.jsx("button",{onClick:ne,className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",disabled:E,children:E?"Sending...":"Resend Verification"})]}),{autoClose:5e3})},ne=async V=>{if(V.preventDefault(),!c){re.error("Please enter your email first");return}_(!0);try{R==="houseowner"?await me.post("/houseowner-auth/resend-verification",{email:c}):await me.post("/auth/resend",{email:c}),re.success("Verification email sent! Please check your inbox.")}catch(W){re.error(W.response?.data?.message||"Failed to resend verification email")}finally{_(!1)}},J=()=>{O("/forgot-password")},z=()=>{O("/")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-xl",children:"Log In"})]}),b&&e.jsx("div",{className:"mb-4 text-purple-600",children:"Verifying your email..."}),e.jsxs("form",{onSubmit:Y,className:"loginForm",children:[e.jsx("div",{children:e.jsx("input",{value:c,onChange:V=>d(V.target.value),placeholder:"Email",className:"loginInput",type:"email",required:!0})}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:h,onChange:V=>g(V.target.value),placeholder:"Password",type:m?"text":"password",className:"loginInput",required:!0}),e.jsx("span",{type:"button",onClick:()=>w(!m),className:"passwordToggle","aria-label":m?"Hide password":"Show password",children:m?e.jsx(pn,{size:20}):e.jsx(gs,{size:20})})]}),e.jsxs("div",{className:"loginButtonGroup",children:[e.jsx("button",{type:"submit",name:"submit",className:"loginButton loginButton--submit",disabled:b||M,children:M?`Try again in ${D}s`:b?"Please Wait...":"Login"}),e.jsx("button",{type:"button",name:"cancel",className:"loginButton loginButton--cancel",onClick:z,disabled:b,children:"Cancel"})]})]}),j&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md text-center",children:j}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Forgot password?"," ",e.jsx("button",{type:"button",onClick:J,className:"text-purple-700 hover:underline bg-white",children:"Reset"})]}),R==="admin"&&e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Didn't get a verification email?"," ",e.jsx("button",{type:"button",onClick:ne,disabled:E,className:"text-purple-700 hover:underline disabled:text-gray-400 disabled:cursor-not-allowed bg-white",children:E?"Sending...":"Resend"})]}),R==="houseowner"&&e.jsx("p",{className:"mt-4 text-sm text-center text-gray-600",children:"Need help? Contact your apartment administrator."})]})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function R4(){const[n,c]=N.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:""}),[d,h]=N.useState({regNo:"",name:"",address:""}),[g,m]=N.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:"",regNo:"",name:"",address:""}),[w,j]=N.useState({firstname:!1,lastname:!1,country:!1,mobile:!1,email:!1,password:!1,confirmPassword:!1,regNo:!1,name:!1,address:!1}),[C,b]=N.useState(1),[S,E]=N.useState(!1),[_,M]=N.useState(!1),[I,D]=N.useState([]);N.useEffect(()=>{(async()=>{try{const z=await me.get("/countries");D(z.data.data)}catch(z){console.error("Error fetching countries:",z)}})()},[]);const G=J=>{const z=J.target.value,V=I.find(W=>W.id.toString()===z);V&&c(W=>({...W,country:V.country_name,mobile:V.phone_code}))},R=Gt(),L=3,O=(J,z)=>{let V="";switch(J){case"firstname":z.trim()?z.length<3?V="First name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(z)?z.length>20&&(V="First name cannot exceed 20 characters"):V="First name can only contain letters, and numbers":V="First name is required";break;case"lastname":z.trim()?z.length<3?V="Last name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(z)?z.length>20&&(V="Last name cannot exceed 20 characters"):V="Last name can only contain letters, and numbers":V="Last name is required";break;case"country":z.trim()||(V="Country is required");break;case"mobile":z.trim()?/^\+\d{2} \d{9}$/.test(z)?z.length>15&&(V="Mobile cannot exceed 15 digits"):V="Mobile must be in format +XX XXXXXXXXX":V="Mobile Number is required";break;case"email":z.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z)||(V="Please enter a valid email address"):V="Email is required";break;case"password":z?z.length<8?V="Password must be at least 8 characters":/(?=.*[a-z])/.test(z)?/(?=.*[A-Z])/.test(z)?/(?=.*\d)/.test(z)?/(?=.*[@$!%*?&])/.test(z)||(V="Password must contain at least one special character (@$!%*?&)"):V="Password must contain at least one number":V="Password must contain at least one uppercase letter":V="Password must contain at least one lowercase letter":V="Password is required";break;case"confirmPassword":z?z!==n.password&&(V="Passwords do not match"):V="Please confirm your password";break;case"regNo":z.trim()?z.length<2&&(V="Business REgistration No must be at least 2 characters"):V="Business Registration No is required";break;case"name":z.trim()?z.length<2&&(V="Company name must be at least 2 characters"):V="Company name is required";break;case"address":z.trim()?z.length<3&&(V="Company address must be at least 3 characters"):V="Company address is required";break}return V},P=(J,z=!1)=>{const{name:V,value:W}=J.target;if(z?h(se=>({...se,[V]:W})):c(se=>({...se,[V]:W})),w[V]){const se=O(V,W);m(le=>({...le,[V]:se}))}},Q=(J,z=!1)=>{const{name:V}=J.target;j(le=>({...le,[V]:!0}));const W=z?d[V]:n[V],se=O(V,W);m(le=>({...le,[V]:se}))},F=J=>{if(c(z=>({...z,confirmPassword:J})),w.confirmPassword){const z=O("confirmPassword",J);m(V=>({...V,confirmPassword:z}))}},q=J=>{const z={},V={};let W=!0;return{1:["regNo","name","address"],2:["firstname","lastname","country","mobile","email"],3:["password","confirmPassword"]}[J].forEach(le=>{V[le]=!0;const K=le in d?d[le]:n[le],xe=O(le,K);z[le]=xe,xe&&(W=!1)}),j(le=>({...le,...V})),m(le=>({...le,...z})),W},Y=()=>{q(C)?b(C+1):re.error("Please fix the validation errors before proceeding")},$=()=>{b(C-1)};async function ce(J){J.preventDefault();let z=!0;for(let V=1;V<=L;V++)if(!q(V)){z=!1,V!==C&&b(V);break}if(!z){re.error("Please fix all validation errors before submitting");return}try{const V={regNo:d.regNo,name:d.name,address:d.address};console.log("Sending company data to /tenants:",V);const W=await me.post("/tenants",V);console.log("Company registration successful:",W.data);const se=W.data.data.id,le=await me.post("/auth/register",{firstname:n.firstname,lastname:n.lastname,country:n.country,mobile:n.mobile,email:n.email,password:n.password,company_id:se});console.log("User registration successful:",le.data),re.success("Registration successful! Company and user account created. Please check your email to verify your account."),setTimeout(()=>R("/login"),3e3)}catch(V){console.error("Registration error:",V),V.response?.status===403?re.error("Access denied. Please try registering again."):V.response?.data?.message?re.error(V.response.data.message):re.error("Registration failed. Please try again.")}}const de=(()=>{if(!n.password)return{strength:0,label:""};let J=0;return n.password.length>=8&&J++,/(?=.*[a-z])/.test(n.password)&&J++,/(?=.*[A-Z])/.test(n.password)&&J++,/(?=.*\d)/.test(n.password)&&J++,/(?=.*[@$!%*?&])/.test(n.password)&&J++,{strength:J,label:["Very Weak","Weak","Fair","Good","Strong","Very Strong"][J]}})(),ne=[{number:1,title:"Company Info"},{number:2,title:"User Info"},{number:3,title:"Security"}];return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-4xl items-center",children:"Get Start with AptSync"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:ne.map(J=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${C>=J.number?"bg-purple-600 text-white":"bg-gray-200 text-gray-500"}`,children:J.number}),e.jsx("span",{className:"text-xs mt-1 hidden sm:block",children:J.title})]},J.number))}),e.jsx("div",{className:"w-full bg-gray-200 h-1 rounded",children:e.jsx("div",{className:"bg-purple-600 h-1 rounded transition-all duration-300",style:{width:`${(C-1)/(L-1)*100}%`}})})]}),e.jsxs("form",{onSubmit:ce,className:"loginForm",children:[C===1&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Information"}),e.jsxs("div",{children:[e.jsx("input",{name:"regNo",value:d.regNo,onChange:J=>P(J,!0),onBlur:J=>Q(J,!0),placeholder:"Company Registration No *",className:`loginInput ${g.regNo?"border-red-500":w.regNo&&"border-green-500"}`}),w.regNo&&g.regNo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx($t,{size:14,className:"mr-1"})," ",g.regNo]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"name",value:d.name,onChange:J=>P(J,!0),onBlur:J=>Q(J,!0),placeholder:"Company Name *",className:`loginInput ${g.name?"border-red-500":w.name&&"border-green-500"}`}),w.name&&g.name&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx($t,{size:14,className:"mr-1"})," ",g.name]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"address",value:d.address,onChange:J=>P(J,!0),onBlur:J=>Q(J,!0),placeholder:"Company Address *",className:`loginInput ${g.address?"border-red-500":w.address&&"border-green-500"}`}),w.businessInfo&&g.businessInfo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx($t,{size:14,className:"mr-1"})," ",g.businessInfo]})]})]}),C===2&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Info"}),e.jsxs("div",{children:[e.jsx("input",{name:"firstname",value:n.firstname,onChange:J=>P(J,!1),onBlur:J=>Q(J,!1),placeholder:"First Name *",className:`loginInput ${g.firstname?"border-red-500":w.firstname&&"border-green-500"}`}),w.firstname&&g.firstname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx($t,{size:14,className:"mr-1"})," ",g.firstname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"lastname",value:n.lastname,onChange:J=>P(J,!1),onBlur:J=>Q(J,!1),placeholder:"Last Name *",className:`loginInput ${g.lastname?"border-red-500":w.lastname&&"border-green-500"}`}),w.lastname&&g.lastname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx($t,{size:14,className:"mr-1"})," ",g.lastname]})]}),e.jsxs("div",{children:[e.jsxs("select",{name:"country",value:I.find(J=>J.country_name===n.country)?.id||"",onChange:G,onBlur:J=>Q(J,!1),className:`loginInput ${g.country?"border-red-500":w.country&&"border-green-500"}`,children:[e.jsx("option",{value:"",children:"Select country *"}),I.map(J=>e.jsx("option",{value:J.id,children:J.country_name},J.id))]}),w.country&&g.country&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx($t,{size:14,className:"mr-1"})," ",g.country]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"mobile",value:n.mobile,onChange:J=>P(J,!1),onBlur:J=>Q(J,!1),placeholder:"Mobile *",className:`loginInput ${g.mobile?"border-red-500":w.mobile&&"border-green-500"}`}),w.mobile&&g.mobile&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx($t,{size:14,className:"mr-1"})," ",g.mobile]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"email",type:"email",value:n.email,onChange:J=>P(J,!1),onBlur:J=>Q(J,!1),placeholder:"Email *",className:`loginInput ${g.email?"border-red-500":w.email&&"border-green-500"}`}),w.email&&g.email&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx($t,{size:14,className:"mr-1"})," ",g.email]})]})]}),C===3&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account Security"}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{name:"password",value:n.password,onChange:J=>P(J,!1),onBlur:J=>Q(J,!1),placeholder:"Password *",type:S?"text":"password",className:`loginInput ${g.password?"border-red-500":w.password&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>E(!S),className:"passwordToggle","aria-label":S?"Hide password":"Show password",children:S?e.jsx(pn,{size:20}):e.jsx(gs,{size:20})})]}),w.password&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Password strength: ",de.label]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded",children:e.jsx("div",{className:`h-2 rounded transition-all duration-300 ${de.strength<2?"bg-red-500":de.strength<4?"bg-yellow-500":"bg-green-500"}`,style:{width:`${de.strength/5*100}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Must include: uppercase, lowercase, number, special character (@$!%*?&), and be at least 8 characters long."})]}),w.password&&g.password&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx($t,{size:14,className:"mr-1"})," ",g.password]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:n.confirmPassword,onChange:J=>F(J.target.value),onBlur:()=>j(J=>({...J,confirmPassword:!0})),placeholder:"Confirm Password *",type:_?"text":"password",className:`loginInput ${g.confirmPassword?"border-red-500":w.confirmPassword&&n.confirmPassword&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>M(!_),className:"passwordToggle","aria-label":_?"Hide password":"Show password",children:_?e.jsx(pn,{size:20}):e.jsx(gs,{size:20})})]}),w.confirmPassword&&g.confirmPassword&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx($t,{size:14,className:"mr-1"})," ",g.confirmPassword]}),w.confirmPassword&&!g.confirmPassword&&n.confirmPassword&&e.jsxs("div",{className:"text-green-500 text-sm mt-1 flex items-center",children:[e.jsx(Rl,{size:14,className:"mr-1"})," Passwords match!"]})]}),e.jsxs("div",{className:"loginButtonGroup mt-6",children:[C>1&&e.jsxs("button",{type:"button",onClick:$,className:"loginButton loginButton--cancel flex items-center justify-center",children:[e.jsx(Hs,{size:18,className:"mr-1"}),"Back"]}),C<L?e.jsxs("button",{type:"button",onClick:Y,className:"loginButton loginButton--submit flex items-center justify-center",children:["Next",e.jsx(Ai,{size:18,className:"ml-1"})]}):e.jsx("button",{type:"submit",className:"loginButton loginButton--submit",children:"Register"}),e.jsx("button",{type:"button",className:"loginButton loginButton--cancel",onClick:()=>R("/"),children:"Cancel"})]})]})]})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function I4(){const[n]=qo(),c=Gt(),[d,h]=N.useState(!1),[g,m]=N.useState("");N.useEffect(()=>{const j=n.get("token"),C=n.get("id");j&&C&&w(j,C)},[n]);const w=async(j,C)=>{try{h(!0);const b=await me.post("/auth/verify",{token:j,id:C});m(b.data.message),re.success("Email verified successfully!"),setTimeout(()=>{c("/login")},3e3)}catch(b){console.error("Verification error:",b),m(b.response?.data?.message||"Verification failed"),re.error("Email verification failed")}finally{h(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"Email Verification"}),d?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Verifying your email..."})]}):g?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:g}),e.jsx("button",{onClick:()=>c("/login"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Go to Login"})]}):e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-300",children:e.jsx("p",{children:"No verification token found"})})]})})}function ka(){const[n,c]=N.useState(!1),[d,h]=N.useState(!1),{auth:g,setAuth:m}=N.useContext(Ma),{logout:w,resetActivityTimer:j}=N.useContext(Ma),C=Gt(),[b,S]=N.useState(!1);N.useEffect(()=>{const D=localStorage.getItem("theme"),G=window.matchMedia("(prefers-color-scheme: dark)").matches;D==="dark"||!D&&G?(h(!0),document.documentElement.classList.add("dark")):(h(!1),document.documentElement.classList.remove("dark"))},[]),N.useEffect(()=>{if(!g.accessToken)return;const D=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],G=()=>j();D.forEach(L=>window.addEventListener(L,G,{passive:!0}));const R=()=>{document.hidden||j()};return document.addEventListener("visibilitychange",R),()=>{D.forEach(L=>window.removeEventListener(L,G)),document.removeEventListener("visibilitychange",R)}},[g.accessToken,j]);const E=async()=>{try{await me.post("/auth/logout"),w(),re.success("Logged out successfully"),C("/")}catch(D){console.error("Logout error:",D),w(),re.success("Logged out successfully"),C("/")}},_=()=>{S(!0)},M=()=>{S(!1)},I=()=>{const D=!d;h(D),D?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>c(!n),className:"lg:hidden p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:n?e.jsx($t,{size:24}):e.jsx($h,{size:24})}),e.jsx("div",{className:"hidden md:block relative ml-4"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:I,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 relative",title:d?"Switch to light mode":"Switch to dark mode",children:d?e.jsx(Mh,{size:20}):e.jsx(Eh,{size:20})}),e.jsxs("button",{className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 relative",children:[e.jsx(md,{size:20}),e.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:"3"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:g?.user?.firstname?.charAt(0)?.toUpperCase()})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:g?.user?.firstname}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:g?.user?.role})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:_,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Ah,{size:20})})})]})]})}),n&&e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 transition-colors duration-200",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Or,{size:18,className:"text-gray-400 dark:text-gray-500"})}),e.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-sm transition-colors duration-200"})]})}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("button",{onClick:I,className:"flex items-center w-full px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",children:[d?e.jsx(Mh,{size:18,className:"mr-2"}):e.jsx(Eh,{size:18,className:"mr-2"}),d?"Light Mode":"Dark Mode"]})}),e.jsx("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:_,className:"flex items-center w-full px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors duration-200",children:[e.jsx(Ah,{size:18,className:"mr-2"}),"Logout"]})})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:M,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:E,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function ua(){const{auth:n}=N.useContext(Ma),c=Ys(),[d,h]=N.useState(!1),[g,m]=N.useState(null),[w,j]=N.useState([]),[C,b]=N.useState(!0),[S,E]=N.useState(Date.now()),[_,M]=N.useState(!1),[I,D]=N.useState(!1),G=n?.user?.role||"Admin",R=n?.user?.id;N.useEffect(()=>{const z=()=>{D(window.innerWidth<1024)};return z(),window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]),N.useEffect(()=>{M(!1)},[c.pathname]);const L=["employee_dashboard","profile"],O={employee_dashboard:{id:"employee_dashboard",name:"Dashboard",path:"/employee-dashboard",icon:xa,isConstant:!0},profile:{id:"profile",name:"Profile",path:"/profile-page",icon:Th,isConstant:!0},admin_dashboard:{id:"admin_dashboard",name:"Dashboard",path:"/admindashboard",icon:xa,isConstant:!0},admin_profile:{id:"admin_profile",name:"Profile",path:"/profile-page",icon:Th,isConstant:!0},users_management:{id:"users_management",name:"Users",path:"/userview",icon:Vs,isConstant:!1},apartments_management:{id:"apartments_management",name:"Apartments",path:"/apartmentview",icon:nr,isConstant:!1},expenses_management:{id:"expenses_management",name:"Expenses",icon:Cv,isConstant:!1,children:[{name:"Bills",path:"/bills-and-calculations"},{name:"Bill Review",path:"/bill-payments"},{name:"Bill Payments",path:"/bill-payment-settle"}]},complaint_management:{id:"complaint_management",name:"Complaints",path:"/view-complaints",icon:km,isConstant:!1},tenant_management:{id:"tenant_management",name:"Tenants",path:"/manager-tenants",icon:Vs,isConstant:!1},my_apartments:{id:"my_apartments",name:"My Apartments",path:"/my-apartments",icon:nr,isConstant:!1},my_bills:{id:"my_bills",name:"My Bills",path:"/my-bills",icon:Yh,isConstant:!1},my_complaints:{id:"my_complaints",name:"My Complaints",path:"/my-complaints",icon:km,isConstant:!1}},P=()=>["admin_dashboard","users_management","apartments_management","expenses_management","complaint_management","admin_profile"],Q=async()=>{try{if(b(!0),console.log("Fetching components for role:",G),G==="Admin"){j(P()),b(!1);return}try{const z=await me.get("/role-components/user/components");if(console.log("API Response:",z.data),z.data.success){const V=z.data.data||[];console.log("Components from API:",V);const W=V.filter(le=>!L.includes(le)),se=[...L,...W];console.log("Final components to set:",se),j(se)}else console.error("API returned error:",z.data.message),j([...L])}catch(z){console.error("Error fetching user components",z),j([...L])}}catch(z){console.error("Error in fetchUserComponents",z),j(G==="Admin"?P():[...L])}finally{b(!1)}};N.useEffect(()=>{Q()},[G,R,S]);const F=()=>{E(Date.now())},Y=(()=>{const z=w.map(V=>O[V]).filter(Boolean);return console.log("Built navigation items:",z),z})(),$=z=>c.pathname===z,ce=z=>m(g===z?null:z),he=()=>M(!_),de=()=>e.jsx("button",{onClick:he,className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 text-purple-700 dark:text-purple-400",children:_?e.jsx($t,{size:24}):e.jsx($h,{size:24})}),ne=()=>e.jsxs("div",{className:`hidden lg:flex flex-col h-full bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 fixed left-0 top-0 z-40 transition-all duration-300 ${d?"w-20":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[!d&&e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsx("button",{onClick:F,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(_h,{size:16})})]}),d&&e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("img",{className:"h-8 w-8",src:"/favicon.ico",alt:"Logo"})}),e.jsx("button",{onClick:()=>h(!d),className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400",children:d?e.jsx(Ai,{size:20}):e.jsx(Hs,{size:20})})]}),e.jsx("nav",{className:"p-4 space-y-1 flex-1 overflow-y-auto",children:C?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),!d&&e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):Y.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):Y.map(z=>{if(!z)return null;const V=z.icon;if(z.children){const W=z.children.some(se=>se.path&&$(se.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ce(z.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${g===z.name||W?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{size:20,className:d?"mx-auto":"mr-3"}),!d&&e.jsx("span",{children:z.name})]}),!d&&z.children&&z.children.length>0&&(g===z.name?e.jsx(Ei,{size:16}):e.jsx(Si,{size:16}))]}),g===z.name&&!d&&z.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:z.children.map(se=>e.jsx(Sl,{to:se.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${$(se.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:se.name},se.name))})]},z.id)}return e.jsxs(Sl,{to:z.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${$(z.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(V,{size:20,className:d?"mx-auto":"mr-3"}),!d&&e.jsx("span",{children:z.name})]},z.id)})})]}),J=()=>e.jsxs("div",{className:"lg:hidden fixed left-0 top-0 h-full w-64 z-50 bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",style:{transform:_?"translateX(0)":"translateX(-100%)"},children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 pt-16",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:F,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(_h,{size:16})}),e.jsx("button",{onClick:he,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400",children:e.jsx($t,{size:20})})]})]})}),e.jsx("nav",{className:"p-4 space-y-1",children:C?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):Y.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):Y.map(z=>{if(!z)return null;const V=z.icon;if(z.children){const W=z.children.some(se=>se.path&&$(se.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ce(z.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${g===z.name||W?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{size:20,className:"mr-3"}),e.jsx("span",{children:z.name})]}),z.children&&z.children.length>0&&(g===z.name?e.jsx(Ei,{size:16}):e.jsx(Si,{size:16}))]}),g===z.name&&z.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:z.children.map(se=>e.jsx(Sl,{to:se.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${$(se.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:se.name},se.name))})]},z.id)}return e.jsxs(Sl,{to:z.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${$(z.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(V,{size:20,className:"mr-3"}),e.jsx("span",{children:z.name})]},z.id)})})]});return e.jsxs(e.Fragment,{children:[e.jsx(de,{}),_&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:he}),e.jsx(J,{}),e.jsx(ne,{}),e.jsx("div",{className:"lg:hidden h-16"})]})}function O4(){const[n,c]=N.useState(!1),d=Gt(),[h,g]=N.useState([]),[m,w]=N.useState([]),[j,C]=N.useState([]),[b,S]=N.useState([]),[E,_]=N.useState(!0),[M,I]=N.useState(null),D={USER_REGISTERED:{icon:zo,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",trend:"up"},USER_UPDATED:{icon:kr,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",trend:"up"},USER_DELETED:{icon:ja,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},USER_VERIFIED:{icon:qN,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",trend:"up"},USER_DEACTIVATED:{icon:XN,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},APARTMENT_CREATED:{icon:nr,color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/30",trend:"up"},APARTMENT_UPDATED:{icon:nr,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",trend:"up"},APARTMENT_DELETED:{icon:nr,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},PASSWORD_RESET:{icon:c1,color:"text-orange-600",bgColor:"bg-orange-100 dark:bg-orange-900/30",trend:"up"},EMAIL_SENT:{icon:Il,color:"text-indigo-600",bgColor:"bg-indigo-100 dark:bg-indigo-900/30",trend:"up"}},G=(V,W)=>({USER_REGISTERED:`New user registered: ${W.email}`,USER_UPDATED:`User updated: ${W.email}`,USER_DELETED:`User deleted: ${W.email}`,USER_VERIFIED:`User verified: ${W.email}`,USER_DEACTIVATED:`User deactivated: ${W.email}`,APARTMENT_CREATED:`New apartment created: ${W.name}`,APARTMENT_UPDATED:`Apartment updated: ${W.name}`,APARTMENT_DELETED:`Apartment deleted: ${W.name}`,PASSWORD_RESET:`Password reset requested for: ${W.email}`,EMAIL_SENT:`Verification email sent to: ${W.email}`})[V]||"Activity recorded",R=(V,W)=>{const se={id:Date.now(),type:V,action:G(V,W),time:"Just now",timestamp:new Date,...D[V]};S(le=>[se,...le.slice(0,9)])},L=V=>{const se=Math.floor((new Date-new Date(V))/1e3);return se<60?"Just now":se<3600?`${Math.floor(se/60)} minutes ago`:se<86400?`${Math.floor(se/3600)} hours ago`:`${Math.floor(se/86400)} days ago`};N.useEffect(()=>{const V=setInterval(()=>{S(W=>W.map(se=>({...se,time:L(se.timestamp)})))},6e4);return()=>clearInterval(V)},[]);const O=async()=>{try{const V=await me.get("/apartments");console.log("Apartments API Response:",V.data),V.data.success&&Array.isArray(V.data.data)?(g(V.data.data),V.data.data.length>0&&R("APARTMENT_CREATED",{name:`${V.data.data.length} apartments loaded`})):Array.isArray(V.data)?g(V.data):(console.warn("Unexpected apartments response format:",V.data),g([]))}catch(V){console.error("Error loading apartments:",V),V.response?.status===401?(I("Unauthorized. Please login again."),d("/login")):V.response?.status===400?I("Company information missing. Please contact support."):I("Failed to load apartments. Please try again.")}},P=async()=>{try{const V=await me.get("/auth/users");if(console.log("Users API Response:",V.data),V.data.success&&Array.isArray(V.data.data)){const W=V.data.data;w(W),W.length>0&&R("USER_REGISTERED",{email:`${W.length} users loaded`}),W.filter(le=>le.is_verified&&!m.find(K=>K.id===le.id&&K.is_verified)).forEach(le=>{R("USER_VERIFIED",{email:le.email})})}else console.warn("Unexpected users response format:",V.data),w([])}catch(V){console.error("Error in fetching users:",V),I("Failed to load users. Please try again.")}},Q=async()=>{try{const V=await me.get("/roles");V.data.success&&Array.isArray(V.data.data)?C(V.data.data):C([])}catch(V){console.error("Error loading roles:",V)}},F=()=>{try{const V=localStorage.getItem("recentActivities");if(V){const se=JSON.parse(V).map(le=>({...le,time:L(le.timestamp),...D[le.type]}));S(se)}}catch(V){console.error("Error loading recent activities:",V)}};N.useEffect(()=>{b.length>0&&localStorage.setItem("recentActivities",JSON.stringify(b))},[b]);const q=async()=>{try{_(!0),I(null),F(),await Promise.all([O(),P(),Q()]),R("EMAIL_SENT",{email:"System initialized successfully"})}catch(V){console.error("Error loading dashboard data:",V),I("Failed to load dashboard data")}finally{_(!1)}};N.useEffect(()=>{E||[{type:"USER_REGISTERED",data:{email:"demo@example.com"}},{type:"APARTMENT_CREATED",data:{name:"Demo Apartment"}},{type:"EMAIL_SENT",data:{email:"user@example.com"}}].forEach((W,se)=>{setTimeout(()=>{R(W.type,W.data)},(se+1)*5e3)})},[E]),N.useEffect(()=>{q()},[]);const Y=m.length,$=h.length,ce=j.length,he=m.filter(V=>V.is_active).length,de=m.filter(V=>V.is_verified).length,ne=h.filter(V=>V.is_active).length,J=V=>V.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),z=()=>{S([]),localStorage.removeItem("recentActivities"),re.success("Activities cleared")};return E?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading Dashboard..."})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:[e.jsx(xa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Admin Dashboard"})]}),M&&e.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:M}),e.jsx("button",{onClick:q,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Total Apartments"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:J($)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[ne," active apartments"]})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(nr,{size:24,className:"text-blue-600 dark:text-blue-400"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(El,{size:16,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-sm text-green-500",children:$>0?"Properties managed":"No apartments yet"})]})]})}),e.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Activity"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:z,className:"text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:"Clear All"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View all"})]})]}),e.jsx("div",{className:"space-y-4",children:b.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(mv,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No recent activities"}),e.jsx("p",{className:"text-sm",children:"Activities will appear here as they happen"})]}):b.map(V=>{const W=V.icon,se=V.trend==="up"?El:bv,le=V.trend==="up"?"text-green-500":"text-red-500";return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 ${V.bgColor} rounded-full mr-3`,children:e.jsx(W,{size:18,className:V.color})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:V.action}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:V.time})]})]}),e.jsx(se,{size:16,className:le})]},V.id)})})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Users Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Users"}),e.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:Y})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Active Users"}),e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:he})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Verified Users"}),e.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:de})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Pending Verification"}),e.jsx("span",{className:"font-semibold text-yellow-600 dark:text-yellow-400",children:m.filter(V=>!V.is_verified).length})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Apartments Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Apartments"}),e.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:$})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Active Apartments"}),e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:ne})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Inactive Apartments"}),e.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:h.filter(V=>!V.is_active).length})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Roles Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Roles"}),e.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:ce})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Active Roles"}),e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:j.filter(V=>V.is_active).length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Inactive Roles"}),e.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:j.filter(V=>!V.is_active).length})]})]})]})]})]})})]})]})}function B4({onClose:n,onCreated:c}){const[d,h]=N.useState({apartment_id:"",name:"",address:"",city:"",image:null}),[g,m]=N.useState(!1),[w,j]=N.useState(""),C=E=>{const{name:_,value:M,files:I}=E.target;h(D=>({...D,[_]:I?I[0]:M}))},b=async()=>{try{const M=(await me.get("/apartments")).data.data[0],I=M?parseInt(M.apartment_id.slice(3)):0,D=`A${String(I+1).padStart(3,"0")}`;h(G=>({...G,apartment_id:D}))}catch(E){console.error("Error fetching last apartment id:",E)}};N.useEffect(()=>{b()},[]);const S=async E=>{E.preventDefault(),j(""),m(!0);try{const _=new FormData;_.append("apartment_id",d.apartment_id),_.append("name",d.name),_.append("address",d.address),_.append("city",d.city),d.image&&_.append("picture",d.image);const M=await me.post("/apartments",_,{headers:{"Content-Type":"multipart/form-data"}});m(!1),c&&c(),n&&n()}catch(_){re.error("Failed to create apartment"),console.error(_),m(!1)}};return e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-4",children:[w&&e.jsx("p",{className:"text-red-500",children:w}),e.jsx("input",{type:"text",name:"apartment_id",value:d.apartment_id,onChange:C,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:d.name,onChange:C,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:d.address,onChange:C,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:d.city,onChange:C,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:C,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:g?"Saving...":"Save"})]})]})}function L4({onClose:n,onEdited:c,apartment:d}){const[h,g]=N.useState({name:"",address:"",city:"",floors:"",houses:"",image:null}),[m,w]=N.useState(!1),[j,C]=N.useState("");N.useEffect(()=>{d&&g({name:d.name||"",address:d.address||"",city:d.city||"",floors:d.floors||"",houses:d.houses||"",image:null})},[d]);const b=E=>{const{name:_,value:M,files:I}=E.target;g(D=>({...D,[_]:I?I[0]:M}))},S=async E=>{E.preventDefault(),C(""),w(!0);try{const _=new FormData;_.append("name",h.name),_.append("address",h.address),_.append("city",h.city),_.append("floors",h.floors),_.append("houses",h.houses),h.image&&_.append("picture",h.image);const M=await me.put(`/apartments/${d.id}`,_,{headers:{"Content-Type":"multipart/form-data"}});w(!1),c&&c(),n&&n()}catch(_){console.error("Update error:",_),re.error(_.response?.data?.message||"Failed to update apartment"),w(!1)}};return e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-4",children:[j&&e.jsx("p",{className:"text-red-500",children:j}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:h.name,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:h.address,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:h.city,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"floors",placeholder:"No of Floors",value:h.floors,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"houses",placeholder:"No of Houses",value:h.houses,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:m?"Updating...":"Update"})]})]})}function P4({isOpen:n,onClose:c,onImportSuccess:d}){const[h,g]=N.useState(null),[m,w]=N.useState(!1),[j,C]=N.useState(!1),[b,S]=N.useState(null),E=P=>{P.preventDefault(),w(!0)},_=P=>{P.preventDefault(),w(!1)},M=P=>{P.preventDefault(),w(!1);const Q=P.dataTransfer.files[0];Q&&D(Q)},I=P=>{const Q=P.target.files[0];Q&&D(Q)},D=P=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(P.type)){re.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(P.size>10*1024*1024){re.error("File size must be less than 10MB");return}g(P),S(null)},G=async()=>{if(!h){re.error("Please select a file first");return}C(!0);const P=new FormData;P.append("excelFile",h);try{const Q=await me.post("/bulk-import/import",P,{headers:{"Content-Type":"multipart/form-data"}});S(Q.data.data),d&&d()}catch(Q){console.error("Import error:",Q),re.error(Q.response?.data?.message||"Failed to import data")}finally{C(!1)}},R=async()=>{try{const P=await me.get("/bulk-import/template",{responseType:"blob"}),Q=window.URL.createObjectURL(new Blob([P.data])),F=document.createElement("a");F.href=Q,F.setAttribute("download","apartment-import-template.xlsx"),document.body.appendChild(F),F.click(),F.remove(),window.URL.revokeObjectURL(Q),re.success("Template downloaded successfully!")}catch(P){console.error("Download error:",P),re.error("Failed to download template")}},L=()=>{g(null),S(null)},O=()=>{L(),c()};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Bulk Import Apartments"}),e.jsx("button",{onClick:O,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx($t,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[!b&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our Excel template to ensure proper formatting"})]}),e.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ii,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${m?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:E,onDragLeave:_,onDrop:M,children:[e.jsx(ps,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:h?h.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:I})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"New Format - Specify Number of Houses:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment & Floor"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"apartment_name"})," - Name of apartment"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"address"})," - Address (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"city"})," - City (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"floor_number"})," - Floor number/name"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House Configuration"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_type"})," - Type of house"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"number_of_houses"})," - How many houses to create"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_prefix"})," - House number prefix (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"status"})," - vacant/occupied/maintenance"]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800",children:[e.jsx("h5",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Example:"}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:["If you specify: ",e.jsx("strong",{children:'floor_number: "1"'}),", ",e.jsx("strong",{children:'house_type: "Standard"'}),", ",e.jsx("strong",{children:"number_of_houses: 5"}),", ",e.jsx("strong",{children:'house_prefix: "1"'})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:["It will create houses: ",e.jsx("strong",{children:"101, 102, 103, 104, 105"})," automatically!"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:O,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:j,children:"Cancel"}),e.jsx("button",{onClick:G,disabled:!h||j,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ps,{size:16}),"Import Data"]})})]})]}),b&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Nr,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"Import Completed Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Created ",b.created.houses," houses from ",b.total," configuration rows"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[e.jsx(Id,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:b.created.apartments}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Apartments"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[e.jsx(Xh,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:b.created.floors}),e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Floors"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 text-center",children:[e.jsx(xa,{className:"h-8 w-8 text-purple-600 dark:text-purple-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:b.created.houseTypes}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"House Types"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[e.jsx(rN,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:b.created.houses}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Houses Created"})]})]}),b.errors.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(vr,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsxs("h3",{className:"font-medium text-red-800 dark:text-red-300",children:[b.errors.length," Error(s) Found"]})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:b.errors.map((P,Q)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400 py-1",children:[e.jsx(Sh,{size:14}),P]},Q))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:L,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another File"}),e.jsx("button",{onClick:O,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]})]})]})}):null}function z4({apartment:n,onClose:c,onUploadSuccess:d}){const[h,g]=N.useState(!1),[m,w]=N.useState([]),[j,C]=N.useState([]),[b,S]=N.useState(!0),E=N.useRef(null);N.useEffect(()=>{D()},[n.id]);const _=O=>{const P=Array.from(O.target.files);C(Q=>[...Q,...P])},M=O=>{C(P=>P.filter((Q,F)=>F!==O))},I=async()=>{if(j.length===0){re.error("Please select at least one file");return}try{g(!0);const O=new FormData;j.forEach(Q=>{O.append("documents",Q)}),O.append("apartmentId",n.id),(await me.post("/apartment-documents/upload",O,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(C([]),d?.(),D(),E.current&&(E.current.value=""))}catch(O){console.error("Upload error:",O);const P=O.response?.data?.message||"Failed to upload documents";re.error(P)}finally{g(!1)}},D=async()=>{try{S(!0);const O=await me.get(`/apartment-documents/apartments/${n.id}/documents`);O.data.success&&w(O.data.data)}catch(O){console.error("Error loading documents:",O);const P=O.response?.data?.message||"Failed to load documents";re.error(P)}finally{S(!1)}},G=async O=>{if(window.confirm("Are you sure you want to delete this document?"))try{await me.delete(`/apartment-documents/documents/${O}`),re.success("Document deleted successfully"),D()}catch(P){console.error("Delete error:",P);const Q=P.response?.data?.message||"Failed to delete document";re.error(Q)}},R=async O=>{try{const P=await me.get(`/apartment-documents/documents/${O.id}/download`,{responseType:"blob"}),Q=window.URL.createObjectURL(new Blob([P.data])),F=document.createElement("a");F.href=Q,F.setAttribute("download",O.original_name||O.file_name),document.body.appendChild(F),F.click(),F.remove(),window.URL.revokeObjectURL(Q)}catch(P){console.error("Download error:",P);const Q=P.response?.data?.message||"Failed to download document";re.error(Q)}},L=O=>{if(O===0)return"0 Bytes";const P=1024,Q=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(O)/Math.log(P));return parseFloat((O/Math.pow(P,F)).toFixed(2))+" "+Q[F]};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Documents - ",n.name]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:E,onChange:_,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>E.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ps,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),j.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:j.map((O,P)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qt,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:O.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:L(O.size)})]})]}),e.jsx("button",{onClick:()=>M(P),className:"text-red-500 hover:text-red-700",children:e.jsx($t,{size:16})})]},P))})]}),j.length>0&&e.jsx("button",{onClick:I,disabled:h,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ps,{size:20}),"Upload ",j.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Documents"}),b?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading documents..."})]}):m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(qt,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:m.map(O=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(qt,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:O.original_name||O.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[L(O.file_size),"  Uploaded on ",new Date(O.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>R(O),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Ii,{size:18})}),e.jsx("button",{onClick:()=>G(O.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:18})})]})]},O.id))})]})]})}function F4(){const{auth:n}=N.useContext(Ma),c=Gt(),[d,h]=N.useState(!1),[g,m]=N.useState([]),[w,j]=N.useState(!0),[C,b]=N.useState(null),[S,E]=N.useState(!1),[_,M]=N.useState(!1),[I,D]=N.useState(null),[G,R]=N.useState(!1),[L,O]=N.useState(null),[P,Q]=N.useState(!1),[F,q]=N.useState(!1),[Y,$]=N.useState(null),[ce,he]=N.useState(!1),[de,ne]=N.useState(null),J=()=>{E(!0)},z=()=>{Q(!0)},V=()=>{Q(!1)},W=Ne=>{D(Ne),M(!0)},se=Ne=>{c(`/floors/${Ne.id}`)},le=()=>{E(!1)},K=()=>{M(!1),D(null)},xe=()=>{oe(),E(!1),re.success("Apartment created successfully!")},Le=()=>{oe(),M(!1),D(null),re.success("Apartment updated successfully!")},ye=()=>{oe(),re.success("Bulk import completed successfully!")},ie=Ne=>{O(Ne),R(!0)},Re=()=>{R(!1)},oe=async()=>{try{j(!0),b(null);const Ne=await me.get("/apartments");console.log("API Response:",Ne.data),Ne.data.success&&Array.isArray(Ne.data.data)?m(Ne.data.data):Array.isArray(Ne.data)?m(Ne.data):(console.warn("Unexpected response format:",Ne.data),m([]))}catch(Ne){console.error("Error loading apartments:",Ne),Ne.response?.status===401?(b("Unauthorized. Please login again."),c("/login")):Ne.response?.status===400?b("Company information missing. Please contact support."):b("Failed to load apartments. Please try again.")}finally{j(!1)}};N.useEffect(()=>{oe()},[]);const Ve=async Ne=>{try{const We=await me.patch(`/apartments/${Ne.id}/toggle`);re.success(We.data.message),oe()}catch(We){console.error("Error toggling apartment:",We),re.error("Failed to toggle apartment status")}},te=Ne=>{$(Ne),q(!0)},Ie=async()=>{try{if(!Y)return;await me.delete(`/apartments/${Y.id}`),re.success("Apartment deleted successfully"),q(!1),$(null),oe()}catch(Ne){console.error("Delete apartment error:",Ne),re.error("Failed to delete apartment")}},$e=()=>{q(!1),$(null)},rt=Ne=>{ne(Ne),he(!0)},Ke=()=>{he(!1),ne(null)},et=()=>{re.success("Document uploaded successfully!")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:h}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${d?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(nr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Apartments"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2 rounded-md font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105",children:[e.jsx(ps,{size:20}),e.jsx("span",{children:"Upload Excel"})]}),e.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Add New"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:w?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):C?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[C,e.jsx("button",{onClick:oe,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):g.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ms,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No apartments found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding your first apartment"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:g.map((Ne,We)=>e.jsxs("tr",{onClick:()=>Ne.is_active&&se(Ne),className:`transition-colors cursor-pointer ${Ne.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ne.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${Ne.picture}`,alt:Ne.name,className:"w-12 h-12 object-cover rounded-lg",onError:Ye=>{console.error("Image failed to load:",Ne.picture),Ye.target.style.display="none";const Me=Ye.target.parentNode.querySelector(".image-fallback");Me&&(Me.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(ms,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ne.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ne.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ne.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ne.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ne.houses}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),rt(Ne)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(qt,{size:20})}),e.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),W(Ne)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(kr,{size:20})}),e.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),ie(Ne)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:Ne.is_active?"Deactivate":"Activate",children:Ne.is_active?e.jsx(Ld,{size:25}):e.jsx(Bd,{size:25})}),e.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),te(Ne)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:20})})]})})]},Ne.id||We))})]})})})]})})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:le,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create New Apartment"}),e.jsx(B4,{onClose:le,onCreated:xe})]})}),_&&I&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:K,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit Apartment"}),e.jsx(L4,{onClose:K,onEdited:Le,apartment:I})]})}),e.jsx(P4,{isOpen:P,onClose:V,onImportSuccess:ye}),G&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:L?.is_active?"Confirm Deactivation of Apartment":"Confirm Activation of Apartment"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:L?.is_active?"Are you sure you want to deactivate the apartment?":"Are you sure you want to activate the apartment?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Re,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:()=>{L&&(Ve(L),R(!1),O(null))},className:`px-4 py-2 rounded-md text-white transition-colors duration-200 ${L?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:L?.is_active?"Deactivate":"Activate"})]})]})}),F&&Y&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',Y.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:$e,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Ie,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),ce&&de&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-4xl relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:Ke,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white z-10",children:""}),e.jsx(z4,{apartment:de,onClose:Ke,onUploadSuccess:et})]})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function U4({onClose:n,onCreated:c,roles:d,rolesLoading:h}){const[g,m]=N.useState({email:"",role_id:""}),[w,j]=N.useState(!1),[C,b]=N.useState(""),S=_=>{const{name:M,value:I}=_.target;m(D=>({...D,[M]:I}))},E=async _=>{_.preventDefault(),b(""),j(!0);try{const M=await me.post("/auth/invite",{email:g.email,role_id:g.role_id});re.success("Invitation sent successfully!"),c&&c(),n&&n()}catch(M){console.error("Invite error:",M);const I=M.response?.data?.message||"Failed to send invitation. Try again.";b(I),re.error(I)}finally{j(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4 text-black dark:text-white",children:[C&&e.jsx("p",{className:"text-red-500",children:C}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter user email",value:g.email,onChange:S,className:"border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0}),e.jsxs("div",{children:[e.jsxs("select",{name:"role_id",value:g.role_id,onChange:S,className:"w-full border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0,disabled:h,children:[e.jsx("option",{value:"",children:"Select Role"}),h?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):d.map(_=>e.jsx("option",{value:_.id,children:_.role_name},_.id))]}),h&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(At,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",disabled:w,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w||h,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 flex items-center",children:w?e.jsxs(e.Fragment,{children:[e.jsx(At,{size:16,className:"animate-spin mr-2"}),"Sending..."]}):"Save & Invite"})]})]})}function H4({user:n,onClose:c,onUpdated:d,roles:h,rolesLoading:g}){const[m,w]=N.useState({firstname:"",lastname:"",email:"",country:"",mobile:"",role_id:"",password:"",confirmPassword:""}),[j,C]=N.useState(!1),[b,S]=N.useState(""),[E,_]=N.useState(!1),[M,I]=N.useState(!1),[D,G]=N.useState(!1),[R,L]=N.useState("");N.useEffect(()=>{n&&(w({firstname:n.firstname||"",lastname:n.lastname||"",email:n.email||"",country:n.country||"",mobile:n.mobile||"",role_id:n.role_id||"",password:"",confirmPassword:""}),L(n.email||""))},[n]);const O=F=>{const{name:q,value:Y}=F.target;w($=>({...$,[q]:Y})),q==="email"&&G(Y!==R)},P=async()=>{try{C(!0),await me.post("/auth/resend",{email:m.email}),re.success("Verification email sent successfully!"),G(!1)}catch(F){console.error("Error sending verification email:",F),re.error(F.response?.data?.message||"Failed to send verification email")}finally{C(!1)}},Q=async F=>{if(F.preventDefault(),C(!0),S(""),m.password&&m.password!==m.confirmPassword){S("Passwords do not match"),C(!1);return}if(m.password&&m.password.length<8){S("Password must be at least 8 characters long"),C(!1);return}try{const q={firstname:m.firstname,lastname:m.lastname,email:m.email,country:m.country,mobile:m.mobile,role_id:m.role_id};m.password&&(q.password=m.password);const Y=await me.put(`/auth/users/${n.id}`,q);Y.data.success?(re.success("User updated successfully!"),Y.data.data.requires_verification&&await P(),d?.(Y.data.data)):S(Y.data.message||"Failed to update user")}catch(q){console.error("Error updating user:",q),S(q.response?.data?.message||"Failed to update user")}finally{C(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Edit User"}),b&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstname",value:m.firstname,onChange:O,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastname",value:m.lastname,onChange:O,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",name:"email",value:m.email,onChange:O,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",required:!0}),D&&e.jsx("button",{type:"button",onClick:P,disabled:j,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Send verification email",children:e.jsx(d1,{size:16})})]}),D&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Email changed. Verification email will be sent after saving."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"country",value:m.country,onChange:O,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mobile"}),e.jsx("input",{type:"tel",name:"mobile",value:m.mobile,onChange:O,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role *"}),e.jsxs("select",{name:"role_id",value:m.role_id,onChange:O,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,disabled:g,children:[e.jsx("option",{value:"",children:"Select Role"}),g?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):h.map(F=>e.jsx("option",{value:F.id,children:F.role_name},F.id))]}),g&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(At,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Change Password (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:E?"text":"password",name:"password",value:m.password,onChange:O,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Leave blank to keep current password"}),e.jsx("button",{type:"button",onClick:()=>_(!E),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:E?e.jsx(pn,{size:16}):e.jsx(gs,{size:16})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),e.jsx("input",{type:M?"text":"password",name:"confirmPassword",value:m.confirmPassword,onChange:O,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>I(!M),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:M?e.jsx(pn,{size:16}):e.jsx(gs,{size:16})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors",disabled:j,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j||g,className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors disabled:bg-purple-400 disabled:cursor-not-allowed flex items-center",children:j?e.jsxs(e.Fragment,{children:[e.jsx(At,{size:16,className:"animate-spin mr-2"}),"Updating..."]}):"Update User"})]})]})]})})}):null}function V4({user:n,onClose:c,onAssignSuccess:d}){const[h,g]=N.useState([]),[m,w]=N.useState([]),[j,C]=N.useState(!0),[b,S]=N.useState(!1),[E,_]=N.useState(""),[M,I]=N.useState(new Set);N.useEffect(()=>{n&&(async()=>{try{C(!0);const $=await me.get("/bills");if($.data.success){const he=($.data.data||[]).filter(de=>de.billtype?.toLowerCase()==="measurable");g(he)}const ce=await me.get(`/user-bills/users/${n.id}/bills`);if(ce.data.success){const de=(ce.data.data||[]).filter(J=>J.billtype?.toLowerCase()==="measurable");w(de);const ne=new Set(de.map(J=>J.id));I(ne)}}catch($){console.error("Error loading bill data:",$),re.error("Failed to load bill data")}finally{C(!1)}})()},[n]);const D=h.filter(Y=>Y.bill_name?.toLowerCase().includes(E.toLowerCase())),G=Y=>m.some($=>$.id===Y),R=Y=>M.has(Y),L=Y=>{I($=>{const ce=new Set($);return ce.has(Y)?ce.delete(Y):ce.add(Y),ce})},O=()=>{const Y=new Set(h.map($=>$.id));I(Y)},P=()=>{I(new Set)},Q=async()=>{try{S(!0);const Y=Array.from(M);await me.post(`/user-bills/users/${n.id}/bills`,{bill_ids:Y}),re.success("Measurable bills assigned successfully!"),d?.(),c()}catch(Y){console.error("Error assigning bills:",Y),re.error(Y.response?.data?.message||"Failed to assign bills")}finally{S(!1)}},F=Y=>m.find($=>$.id===Y),q=Y=>{try{return new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Or,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search measurable bills by name or description...",value:E,onChange:Y=>_(Y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:O,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:P,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:j?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading measurable bills..."})]}):D.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(pd,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No measurable bills found"}),e.jsx("p",{className:"text-sm",children:E?"Try adjusting your search terms":"No measurable bills available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:'Only bills with type "Measurable" are shown here'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:D.map(Y=>{const $=R(Y.id),ce=G(Y.id),he=F(Y.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${$?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>L(Y.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Va,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:Y.bill_name}),ce&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"}),e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:"Measurable"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(qt,{size:14}),e.jsx("span",{className:"capitalize",children:Y.billtype}),Y.is_metered&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:"Metered"})]}),e.jsx("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{children:["Created: ",q(Y.created_at)]})}),he&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",q(he.assigned_at||he.created_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:$?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(Rl,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},Y.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[M.size," measurable bill(s) selected",m.length>0&&e.jsxs("span",{children:["  ",m.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:c,disabled:b,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:Q,disabled:b,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[b&&e.jsx(At,{size:16,className:"animate-spin"}),e.jsx("span",{children:b?"Saving...":"Save Assignments"})]})]})]})]})}function q4({user:n,onClose:c,onAssignSuccess:d}){const[h,g]=N.useState([]),[m,w]=N.useState([]),[j,C]=N.useState(!0),[b,S]=N.useState(!1),[E,_]=N.useState(""),[M,I]=N.useState(new Set),[D,G]=N.useState("apartments");N.useEffect(()=>{n&&(async()=>{try{C(!0);const he=await me.get("/apartments");he.data.success&&g(he.data.data||[]);const de=await me.get(`/user-apartments/users/${n.id}/apartments`);if(de.data.success){const ne=de.data.data||[];w(ne);const J=new Set(ne.map(z=>z.id));I(J)}}catch(he){console.error("Error loading apartment data:",he),re.error("Failed to load apartment data")}finally{C(!1)}})()},[n]);const R=h.filter(ce=>ce.name?.toLowerCase().includes(E.toLowerCase())||ce.address?.toLowerCase().includes(E.toLowerCase())||ce.city?.toLowerCase().includes(E.toLowerCase())),L=ce=>m.some(he=>he.id===ce),O=ce=>M.has(ce),P=ce=>{I(he=>{const de=new Set(he);return de.has(ce)?de.delete(ce):de.add(ce),de})},Q=()=>{const ce=new Set(h.map(he=>he.id));I(ce)},F=()=>{I(new Set)},q=async()=>{try{S(!0);const ce=Array.from(M);await me.post(`/user-apartments/users/${n.id}/apartments`,{apartment_ids:ce}),d?.(),c()}catch(ce){console.error("Error assigning apartments:",ce),re.error(ce.response?.data?.message||"Failed to assign apartments")}finally{S(!1)}},Y=ce=>m.find(he=>he.id===ce),$=ce=>{try{return new Date(ce).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(nr,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Assign Apartments and Bills"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.firstname," ",n.lastname]})]})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx($t,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6 px-6",children:[e.jsx("button",{onClick:()=>G("apartments"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                ${D==="apartments"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Apartments"}),e.jsx("button",{onClick:()=>G("bills"),className:`px-4 py-2 font-semibold 
                ${D==="bills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Bills"})]}),D==="apartments"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Or,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:E,onChange:ce=>_(ce.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Q,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:F,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:j?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):R.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(nr,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No apartments found"}),e.jsx("p",{className:"text-sm",children:E?"Try adjusting your search terms":"No apartments available to assign"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:R.map(ce=>{const he=O(ce.id),de=L(ce.id),ne=Y(ce.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${he?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>P(ce.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(xa,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:ce.name}),de&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(_i,{size:14}),e.jsxs("span",{children:[ce.address,", ",ce.city]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[ce.floors," floors"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[ce.houses," houses"]}),e.jsx("span",{children:""}),e.jsx("span",{children:ce.is_active?"Active":"Inactive"})]}),ne&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",$(ne.assigned_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:he?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(Rl,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},ce.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[M.size," apartment(s) selected",m.length>0&&e.jsxs("span",{children:["  ",m.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:c,disabled:b,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:q,disabled:b,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[b&&e.jsx(At,{size:16,className:"animate-spin"}),e.jsx("span",{children:b?"Saving...":"Save Assignments"})]})]})]})]}):e.jsx(V4,{user:n,onClose:c,onAssignSuccess:d})]})})}function G4({onClose:n,onCreated:c}){const[d,h]=N.useState({role_name:""}),[g,m]=N.useState(!1),[w,j]=N.useState(""),[C,b]=N.useState([]),S=_=>{const{name:M,value:I}=_.target;h(D=>({...D,[M]:I})),M==="role_name"&&w&&j("")},E=async _=>{if(_.preventDefault(),m(!0),j(""),!d.role_name.trim()){j("Please fill in all required fields"),m(!1);return}try{const M=await me.post("/roles",{role_name:d.role_name.trim()},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});M.data.success?(c?.(M.data.data),re.success("Role created successfully"),n()):j(M.data.message||"Failed to save role")}catch(M){console.error("Error saving role:",M);const I=M.response?.data?.message||"Error saving role. Please try again.";j(I),M.response?.status===409&&re.error(I)}finally{m(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[w&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:w}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",name:"role_name",value:d.role_name,onChange:S,placeholder:"Enter unique role name (e.g., Admin, Apartment_manager, Apartment_technician)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||!d.role_name.trim(),className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${g||!d.role_name.trim()?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Role"})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}const Y4=({role:n,onClose:c,onAssign:d})=>{const[h,g]=N.useState([]),[m,w]=N.useState(!1),[j,C]=N.useState(!1),S=[{id:"employee_dashboard",name:"Employee Dashboard",description:"Main dashboard for employees",category:"Core",icon:"Home"},{id:"profile",name:"Profile",description:"User profile management",category:"Core",icon:"User"},{id:"users_management",name:"User Management",description:"Manage system users",category:"Management",icon:"Users"},{id:"role_management",name:"Role Management",description:"Manage user roles and permissions",category:"Management",icon:"Shield"},{id:"apartments_management",name:"Apartments Management",description:"Manage apartment buildings",category:"Management",icon:"Building"},{id:"tenant_management",name:"Tenant Management",description:"Manage tenants and residents",category:"Management",icon:"Users"},{id:"expenses_management",name:"Expenses Management",description:"Manage bills and expenses",category:"Financial",icon:"DollarSign"},{id:"my_apartments",name:"My Apartments",description:"View personal apartments",category:"Personal",icon:"Home"},{id:"my_bills",name:"My Bills",description:"View and manage your bills",category:"Financial",icon:"CreditCard"},{id:"my_complaints",name:"My Complaints",description:"View and manage your complaints",category:"Personal",icon:"ClipboardList"}].reduce((R,L)=>{const O=L.category;return R[O]||(R[O]=[]),R[O].push(L),R},{});N.useEffect(()=>{n&&E()},[n]);const E=async()=>{try{w(!0);const R=await me.get(`/role-components/role/${n.id}`);if(R.data.success){const L=R.data.data||[];g(L)}}catch(R){console.error("Error loading role components:",R),g([])}finally{w(!1)}},_=R=>{g(L=>L.includes(R)?L.filter(O=>O!==R):[...L,R])},M=R=>{const L=S[R].map(O=>O.id);g(O=>{const P=[...O];return L.forEach(Q=>{P.includes(Q)||P.push(Q)}),P})},I=R=>{const L=S[R].map(O=>O.id);g(O=>O.filter(P=>!L.includes(P)))},D=async()=>{try{C(!0);const R=["employee_dashboard","profile"],L=h.filter(P=>!R.includes(P));(await me.post(`/role-components/role/${n.id}`,{components:L})).data.success&&(alert("Components assigned successfully! The sidebar will refresh for affected users."),d(n.id,h),c())}catch(R){console.error("Error saving role components:",R),alert("Failed to save component assignments. Please try again.")}finally{C(!1)}},G=R=>{const O={Core:Cr,Management:vd,Financial:Yh,Personal:xa}[R]||Nd;return e.jsx(O,{size:16})};return n?n.role_name==="Admin"?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(vd,{size:48,className:"mx-auto text-purple-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Admin Role"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"The Admin role has predefined sidebar components and cannot be modified."}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assign Sidebar Components to Role"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Role: ",e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:n.role_name}),e.jsx("span",{className:"ml-2 text-xs text-green-600 dark:text-green-400",children:"(Dashboard and Profile are always included)"})]})]}),e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white transition-colors",children:e.jsx($t,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading components..."})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(S).map(([R,L])=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[G(R),e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:[R," Components"]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",L.length,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M(R),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Select All"}),e.jsx("button",{onClick:()=>I(R),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Deselect All"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 p-4",children:L.map(O=>e.jsxs("div",{onClick:()=>_(O.id),className:`flex items-start p-3 border rounded-lg cursor-pointer transition-all ${h.includes(O.id)?"bg-purple-50 border-purple-300 dark:bg-purple-900/20 dark:border-purple-700 shadow-sm":"bg-white border-gray-200 dark:bg-gray-700 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx("div",{className:"flex items-center justify-center w-5 h-5 mr-3 mt-0.5",children:h.includes(O.id)?e.jsx(ON,{size:18,className:"text-purple-600 dark:text-purple-400"}):e.jsx(Nd,{size:18,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white text-sm",children:O.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:O.description})]})]},O.id))})]},R))})}),e.jsxs("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[h.length," custom components selected + 2 constant components (Dashboard, Profile)"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:j||m,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qh,{size:20}),"Save Assignments"]})})]})]})]})}):null};function X4({role:n,onClose:c,onUpdated:d}){const[h,g]=N.useState({role_name:""}),[m,w]=N.useState(!1),[j,C]=N.useState({});N.useEffect(()=>{n&&g({role_name:n.role_name||""})},[n]);const b=_=>{const{name:M,value:I}=_.target;g(D=>({...D,[M]:I})),j[M]&&C(D=>({...D,[M]:""}))},S=()=>{const _={};return h.role_name.trim()?h.role_name.trim().length<2?_.role_name="Role name must be at least 2 characters long":h.role_name.trim().length>50&&(_.role_name="Role name must be less than 50 characters"):_.role_name="Role name is required",C(_),Object.keys(_).length===0},E=async _=>{if(_.preventDefault(),!!S())try{w(!0);const M=await me.put(`/roles/${n.id}`,{role_name:h.role_name.trim()});M.data.success?(d?.(M.data.data),c()):re.error(M.data.message||"Failed to update role")}catch(M){console.error("Error updating role:",M),M.response?.status===409?(re.error("A role with this name already exists"),C({role_name:"A role with this name already exists"})):M.response?.data?.message?re.error(M.response.data.message):re.error("Failed to update role. Please try again.")}finally{w(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Role"}),e.jsx("button",{onClick:c,disabled:m,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-500 dark:text-gray-400",children:e.jsx($t,{size:20})})]}),e.jsxs("form",{onSubmit:E,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",id:"role_name",name:"role_name",value:h.role_name,onChange:b,disabled:m,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors ${j.role_name?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 disabled:opacity-50`,placeholder:"Enter role name (e.g., Manager, Supervisor)"}),j.role_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.role_name})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Information"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Current Name:"})," ",n.role_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${n.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:n.is_active?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,disabled:m,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[m&&e.jsx(At,{size:16,className:"animate-spin"}),e.jsx("span",{children:m?"Updating...":"Update Role"})]})]})]})]})}):null}function b1(){const[n,c]=N.useState(!1),[d,h]=N.useState([]),[g,m]=N.useState(!0),[w,j]=N.useState(null),[C,b]=N.useState(!1),[S,E]=N.useState(!1),[_,M]=N.useState(null),[I,D]=N.useState(!1),[G,R]=N.useState(null),[L,O]=N.useState(!1),[P,Q]=N.useState(null),F=async()=>{try{m(!0),j(null);const le=await me.get("/roles");le.data.success&&Array.isArray(le.data.data)?h(le.data.data):h([])}catch(le){console.error("Error loading roles:",le),j("Failed to load Roles. Please try again.")}finally{m(!1)}};N.useEffect(()=>{F()},[]);const q=()=>{b(!0)},Y=()=>{b(!1)},$=()=>{F(),b(!1)},ce=le=>{M(le),E(!0)},he=()=>{E(!1),M(null)},de=()=>{re.success("Role updated successfully!"),F(),E(!1),M(null)},ne=le=>{R(le),D(!0)},J=async()=>{try{if(!G)return;const le=await me.delete(`/roles/${G.id}`);le.data.success?(re.success("Role deleted successfully"),D(!1),R(null),F()):re.error(le.data.message||"Failed to delete role")}catch(le){console.error("Delete role error:",le),le.response?.data?.message?.includes("users assigned")||le.response?.data?.message?.includes("Cannot delete role")||le.response?.data?.message?re.error(le.response.data.message):re.error("Failed to delete role. Please try again."),D(!1),R(null)}},z=()=>{D(!1),R(null)},V=le=>{Q(le),O(!0)},W=(le,K)=>{console.log(`Components assigned to role ${le}:`,K)},se=le=>{try{return new Date(le).toLocaleDateString()}catch{return"N/A"}};return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Add Role"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:g?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading roles..."})]}):w?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[w,e.jsx("button",{onClick:F,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ms,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No roles found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding roles"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((le,K)=>e.jsxs("tr",{onClick:()=>V(le),className:`transition-colors cursor-pointer ${le.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:K+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:le.role_name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:se(le.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:xe=>{xe.stopPropagation(),ce(le)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(kr,{size:20})}),e.jsx("button",{onClick:xe=>{xe.stopPropagation(),ne(le)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:xe=>{xe.stopPropagation(),V(le)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Assign Components",children:e.jsx(Th,{size:20})})]})})]},le.id||K))})]})})}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:Y,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(G4,{onClose:Y,onCreated:$})]})}),L&&e.jsx(Y4,{role:P,onClose:()=>O(!1),onAssign:W}),S&&_&&e.jsx(X4,{role:_,onClose:he,onUpdated:de}),I&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',G.role_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:z,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:J,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function $4(){const[n,c]=N.useState(!1),[d,h]=N.useState([]),[g,m]=N.useState([]),[w,j]=N.useState(!1),[C,b]=N.useState(!1),[S,E]=N.useState(!1),[_,M]=N.useState(null),[I,D]=N.useState(null),[G,R]=N.useState(!0),[L,O]=N.useState(!0),[P,Q]=N.useState(null),{auth:F}=N.useContext(Ma),[q,Y]=N.useState(!1),[$,ce]=N.useState(null),[he,de]=N.useState(!1),[ne,J]=N.useState(null),[z,V]=N.useState("users"),W=async()=>{try{R(!0),Q(null);const Me=await me.get("/auth/users");console.log("API Response:",Me.data),Me.data.success&&Array.isArray(Me.data.data)?h(Me.data.data):(console.warn("Unexpected response format:",Me.data),h([]))}catch(Me){console.error("Error in fetching users:",Me),Q("Failed to load users. Please try again."),re.error("Failed to fetch users")}finally{R(!1)}},se=async()=>{try{O(!0);const Me=await me.get("/roles");Me.data.success&&Array.isArray(Me.data.data)?m(Me.data.data):m([])}catch(Me){console.error("Error loading roles:",Me),re.error("Failed to load roles")}finally{O(!1)}};N.useEffect(()=>{W(),se()},[]);const le=()=>j(!0),K=()=>j(!1),xe=Me=>{M(Me),b(!0)},Le=()=>{b(!1),M(null)},ye=Me=>{D(Me),E(!0)},ie=()=>{E(!1),D(null)},Re=()=>{W(),j(!1),re.success("User created successfully!")},oe=()=>{W(),b(!1),M(null)},[Ve,te]=N.useState(!1),Ie=async Me=>{try{te(!0),await me.post("/auth/resend",{email:Me.email}),re.success("Verification email sent successfully!")}catch(Je){console.error("Error sending verification email:",Je),re.error(Je.response?.data?.message||"Failed to send verification email")}finally{te(!1)}},$e=async()=>{if(I)try{await me.patch(`/auth/users/${I.id}/toggle`),re.success(`User ${I.is_active?"deactivated":"activated"} successfully!`),W(),ie()}catch(Me){console.error("Error toggling user:",Me),re.error("Failed to update user status")}},rt=Me=>{ce(Me),Y(!0)},Ke=async()=>{try{if(!$)return;await me.delete(`/auth/users/${$.id}`),re.success("User deleted successfully"),Y(!1),ce(null),W()}catch(Me){console.error("Delete user error:",Me),Me.response?.data?.message?re.error(Me.response.data.message):re.error("Failed to delete user")}},et=()=>{Y(!1),ce(null)},Ne=Me=>{J(Me),de(!0)},We=()=>{de(!1),J(null)},Ye=()=>{re.success("Apartments assigned successfully!")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vs,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Users Management"})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>V("users"),className:`px-4 py-2 font-semibold 
                      ${z==="users"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Info"}),e.jsx("button",{onClick:()=>V("roles"),className:`px-4 py-2 font-semibold 
                      ${z==="roles"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Roles"})]}),z==="users"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("button",{onClick:le,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Add User"})]})}),G?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Users..."})]}):P?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[P,e.jsx("button",{onClick:W,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Cr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No users found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding your first user"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"First Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Country"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((Me,Je)=>{const Ee=Me.email===F?.user?.email||Me.id===F?.user?.id;return e.jsxs("tr",{className:`transition-colors ${Me.is_active?Ee?"opacity-60 cursor-not-allowed bg-gray-50 dark:bg-gray-800":"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-800"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Me.firstname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Me.lastname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:Me.email}),!Me.is_verified&&e.jsx("button",{onClick:()=>Ie(Me),disabled:Ee||!Me.is_active||Ve,className:`ml-2 p-1 rounded ${Ee||!Me.is_active||Ve?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"}`,title:"Send verification email",children:Ve?e.jsx(At,{size:14,className:"animate-spin"}):e.jsx(d1,{size:14})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Me.country||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Me.mobile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Me.role||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Me.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:Me.is_verified?"Verified":"Pending"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Me.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:Me.is_active?"Active":"Inactive"})]})}),e.jsx("td",{className:"whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:be=>{be.stopPropagation(),Ne(Me)},disabled:Ee||!Me.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${Ee||!Me.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300"}`,title:Ee?"You can't assign to your own account":Me.is_active?"Assign Apartments":"Cannot assign to inactive user",children:e.jsx(nr,{size:20})}),e.jsx("button",{onClick:()=>xe(Me),disabled:Ee||!Me.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${Ee||!Me.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:Ee?"You can't edit your own account":Me.is_active?"Edit":"Cannot edit inactive user",children:e.jsx(kr,{size:20})}),e.jsx("button",{onClick:()=>ye(Me),disabled:Ee,className:`flex items-center justify-center w-8 h-8 rounded ${Ee?"text-gray-400 cursor-not-allowed bg-transparent":Me.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:Ee?"You can't modify your own account":Me.is_active?"Deactivate":"Activate",children:Me.is_active?e.jsx(Ld,{size:20}):e.jsx(Bd,{size:20})}),e.jsx("button",{onClick:be=>{be.stopPropagation(),rt(Me)},disabled:Ee||!Me.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${Ee||!Me.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}`,title:Ee?"You can't delete your own account":Me.is_active?"Delete":"Cannot delete inactive user",children:e.jsx(ja,{size:20})})]})})]},Me.id??Je)})})]})})]}),z==="roles"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:e.jsx(b1,{})})]})})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:K,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create New User"}),e.jsx(U4,{onClose:K,onCreated:Re,roles:g,rolesLoading:L})]})}),C&&_&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:Le,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit User"}),e.jsx(H4,{user:_,onClose:Le,onUpdated:oe,roles:g,rolesLoading:L})]})}),S&&I&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:I.is_active?"Confirm Deactivation":"Confirm Activation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:I.is_active?`Are you sure you want to deactivate ${I.firstname||"this user"}? They will lose access to the system.`:`Are you sure you want to activate ${I.firstname||"this user"}? They will regain access to the system.`}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ie,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:$e,className:`px-4 py-2 rounded-md text-white transition-colors ${I.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:I.is_active?"Deactivate":"Activate"})]})]})}),q&&$&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete user "',$.firstname||$.email,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:et,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Ke,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),he&&ne&&e.jsx(q4,{user:ne,onClose:We,onAssignSuccess:Ye}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function Z4({onClose:n,apartment_id:c}){const[d,h]=N.useState(1),[g,m]=N.useState([]),[w,j]=N.useState(!1),[C,b]=N.useState(0),[S,E]=N.useState(!0);N.useEffect(()=>{(async()=>{try{const G=await me.get(`/floors/apartment/${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log("Existing floors from backend:",G.data),G.data&&G.data.length>0){const R=Math.max(...G.data.map(L=>{const O=L.floor_id.match(/\d+/);return O?parseInt(O[0]):0}));console.log("Detected last floor number:",R),b(R)}}catch(G){console.error("Error fetching existing floors:",G)}finally{E(!1)}})()},[c]);const _=()=>{const D=Array.from({length:d},(G,R)=>({floor_id:`F${C+R+1}`}));console.log("Generated floors:",D),m(D)},M=(D,G,R)=>{const L=[...g];L[D][G]=R,m(L)},I=async D=>{D.preventDefault(),j(!0);try{const G=await me.post("/floors/batch",{apartment_id:c,floors:g},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Created floors:",G.data),n()}catch(G){console.error("Error creating floors:",G)}finally{j(!1)}};return S?e.jsx("p",{children:"Loading existing floors..."}):e.jsxs("form",{onSubmit:I,className:"flex flex-col gap-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("label",{className:" text-black dark:text-white",children:["How many floors do you want to add?",e.jsx("input",{type:"number",value:d,min:"1",onChange:D=>h(parseInt(D.target.value)),className:"border rounded p-2 text-black dark:text-white border-purple-600"})]}),e.jsx("button",{type:"button",onClick:_,className:"bg-purple-500 text-white px-3 py-1 rounded",children:"Generate Floors"}),e.jsx("div",{className:"flex-1 overflow-y-auto border rounded p-2 max-h-64",children:g.map((D,G)=>e.jsxs("div",{className:"border rounded p-2 text-black dark:text-white border-purple-600",children:[e.jsxs("p",{children:["Floor ",C+G+1]}),e.jsx("input",{type:"text",value:D.floor_id,onChange:R=>M(G,"floor_id",R.target.value),className:"border rounded p-1 mr-2"})]},G))}),e.jsxs("div",{className:"flex justify-end gap-2 sticky bottom-0 p-2 border-t",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-400 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 rounded bg-purple-600 text-white",children:w?"Saving...":"Save All"})]})]})}function Q4({floor:n,onClose:c,onUpdated:d}){const[h,g]=N.useState({floor_id:n.floor_id||"",status:n.status||"active"}),m=C=>{const{name:b,value:S}=C.target;g({...h,[b]:S})},w=localStorage.getItem("token"),j=async C=>{C.preventDefault();try{(await me.put(`/floors/${n.id}`,h,{headers:{Authorization:`Bearer ${w}`}})).data.success?d():re.error("Failed to update floor")}catch(b){console.error("Error updating floor:",b),re.error("Error updating floor")}};return e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Floor Name/Number"}),e.jsx("input",{type:"text",name:"floor_id",value:h.floor_id,onChange:m,className:"border rounded p-2 text-black dark:text-white border-purple-600",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{name:"status",value:h.status,onChange:m,className:`mt-1 block w-full px-3 py-2 border rounded-lg shadow-sm \r
                     focus:ring-purple-500 border-purple-500 sm:text-sm  dark:bg-gray-700 dark:text-white text-black bg-white`,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"partial",children:"Partial"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700",children:"Save Changes"})]})]})}function W4({floor:n,apartment:c,onClose:d,onUploadSuccess:h}){const[g,m]=N.useState(!1),[w,j]=N.useState([]),[C,b]=N.useState([]),[S,E]=N.useState(!0),_=N.useRef(null);N.useEffect(()=>{G()},[n.id]);const M=P=>{const Q=Array.from(P.target.files);b(F=>[...F,...Q])},I=P=>{b(Q=>Q.filter((F,q)=>q!==P))},D=async()=>{if(C.length===0){re.error("Please select at least one file");return}try{m(!0);const P=new FormData;C.forEach(F=>{P.append("documents",F)}),P.append("apartmentId",c.id),P.append("floorId",n.id),(await me.post("/floor-documents/upload",P,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(b([]),h?.(),G(),_.current&&(_.current.value=""))}catch(P){console.error("Upload error:",P);const Q=P.response?.data?.message||"Failed to upload floor documents";re.error(Q)}finally{m(!1)}},G=async()=>{try{E(!0);const P=await me.get(`/floor-documents/${n.id}/documents`);P.data.success&&j(P.data.data)}catch(P){console.error("Error loading floor documents:",P);const Q=P.response?.data?.message||"Failed to load floor documents";re.error(Q)}finally{E(!1)}},R=async P=>{if(window.confirm("Are you sure you want to delete this document?"))try{await me.delete(`/floor-documents/documents/${P}`),re.success("Floor document deleted successfully"),G()}catch(Q){console.error("Delete error:",Q);const F=Q.response?.data?.message||"Failed to delete floor document";re.error(F)}},L=async P=>{try{const Q=await me.get(`/floor-documents/documents/${P.id}/download`,{responseType:"blob"}),F=window.URL.createObjectURL(new Blob([Q.data])),q=document.createElement("a");q.href=F,q.setAttribute("download",P.original_name||P.file_name),document.body.appendChild(q),q.click(),q.remove(),window.URL.revokeObjectURL(F)}catch(Q){console.error("Download error:",Q);const F=Q.response?.data?.message||"Failed to download floor document";re.error(F)}},O=P=>{if(P===0)return"0 Bytes";const Q=1024,F=["Bytes","KB","MB","GB"],q=Math.floor(Math.log(P)/Math.log(Q));return parseFloat((P/Math.pow(Q,q)).toFixed(2))+" "+F[q]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Floor Documents - ",n.floor_id]}),e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),c&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",c.name," |",e.jsx("strong",{children:" Floor:"})," ",n.floor_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Floor Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:_,onChange:M,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>_.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ps,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),C.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:C.map((P,Q)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qt,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:P.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:O(P.size)})]})]}),e.jsx("button",{onClick:()=>I(Q),className:"text-red-500 hover:text-red-700",children:e.jsx($t,{size:16})})]},Q))})]}),C.length>0&&e.jsx("button",{onClick:D,disabled:g,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ps,{size:20}),"Upload ",C.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Floor Documents"}),S?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading floor documents..."})]}):w.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(qt,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No floor documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:w.map(P=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(qt,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:P.original_name||P.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[O(P.file_size),"  Uploaded on ",new Date(P.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>L(P),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Ii,{size:18})}),e.jsx("button",{onClick:()=>R(P.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:18})})]})]},P.id))})]})]})}function K4(){const[n,c]=N.useState(!1),{id:d}=ys();console.log("Apartment ID:",d);const[h,g]=N.useState(null),m=Gt(),[w,j]=N.useState([]),[C,b]=N.useState(null),[S,E]=N.useState(!0),[_,M]=N.useState(!1),[I,D]=N.useState(!1),[G,R]=N.useState(null),[L,O]=N.useState(!1),[P,Q]=N.useState(null),[F,q]=N.useState(!1),[Y,$]=N.useState(null),[ce,he]=N.useState(!1),[de,ne]=N.useState(null);N.useEffect(()=>{d&&(async()=>{try{const et=await me.get(`/apartments/${d}`);et.data.success&&g(et.data.data)}catch(et){console.error("Error fetching apartment:",et)}})()},[d]);const J=()=>{m("/apartmentview")},z=async()=>{try{E(!0),b(null);const Ke=await me.get(`/floors?apartment_id=${d}`);console.log("API Response:",Ke.data),Ke.data.success&&Array.isArray(Ke.data.data)?j(Ke.data.data):j([])}catch(Ke){console.error("Error loading floors:",Ke),b("Failed to load floors. Please try again.")}finally{E(!1)}};N.useEffect(()=>{z()},[d]);const V=Ke=>{m(`/houses/${d}/${Ke.id}`)},W=Ke=>{Q(Ke),O(!0)},se=()=>{O(!1),Q(null)},le=async Ke=>{try{const et=await me.patch(`/floors/${Ke.id}/toggle`);re.success(et.data.message),z()}catch(et){console.error("Error toggling floor:",et),re.error("Failed to toggle floor status")}},K=()=>{M(!0)},xe=()=>{M(!1)},Le=()=>{z(),M(!1),re.success("Floor created successfully!")},ye=Ke=>{R(Ke),D(!0)},ie=()=>{D(!1),R(null)},Re=()=>{z(),D(!1),re.success("Floor updated successfully!")},oe=Ke=>{$(Ke),q(!0)},Ve=async()=>{try{if(!Y)return;await me.delete(`/floors/${Y.id}`),re.success("Floor deleted successfully"),q(!1),$(null),z()}catch(Ke){console.error("Delete floor error:",Ke),re.error("Failed to delete floor")}},te=()=>{q(!1),$(null)},Ie=Ke=>{ne(Ke),he(!0)},$e=()=>{he(!1),ne(null)},rt=()=>{re.success("Floor documents uploaded successfully!")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:J,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Hs,{size:25})}),e.jsx(Id,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Floors"})]}),h&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",h.name]})]}),e.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Add New"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:S?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading floors..."})]}):C?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[C,e.jsx("button",{onClick:z,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):w.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ms,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No floors found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding floors"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House Count"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map((Ke,et)=>e.jsxs("tr",{onClick:()=>Ke.is_active&&V(Ke),className:`transition-colors cursor-pointer ${Ke.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ke.floor_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ke.house_count}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full 
                                                                ${Ke.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":Ke.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":Ke.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:Ke.status.charAt(0).toUpperCase()+Ke.status.slice(1)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),Ie(Ke)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(qt,{size:20})}),e.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),ye(Ke)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(kr,{size:20})}),e.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),W(Ke)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:Ke.is_active?"Deactivate":"Activate",children:Ke.is_active?e.jsx(Ld,{size:25}):e.jsx(Bd,{size:25})}),e.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),oe(Ke)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:20})})]})})]},Ke.id||et))})]})})})]})})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:xe,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create Floors"}),e.jsx(Z4,{onClose:xe,onCreated:Le,apartment_id:d})]})}),I&&G&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:ie,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit Floor"}),e.jsx(Q4,{onClose:ie,onUpdated:Re,floor:G})]})}),L&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:P?.is_active?"Confirm Deactivation of Floor":"Confirm Activation of Floor"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:P?.is_active?"Are you sure you want to deactivate this floor?":"Are you sure you want to activate this floor?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:se,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:()=>{P&&(le(P),O(!1),Q(null))},className:`px-4 py-2 rounded-md text-white transition-colors duration-200 ${P?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:P?.is_active?"Deactivate":"Activate"})]})]})}),F&&Y&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',Y.floor_id,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:te,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Ve,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),ce&&de&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-4xl relative max-h-[90vh] overflow-y-auto",children:e.jsx(W4,{floor:de,apartment:h,onClose:$e,onUploadSuccess:rt})})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function J4({onClose:n,apartment_id:c,onCreated:d}){const[h,g]=N.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[m,w]=N.useState(!1),[j,C]=N.useState(""),b=_=>{const{name:M,value:I}=_.target;g(D=>({...D,[M]:I}))},S=async()=>{try{const M=(await me.get(`/housetype?apartment_id=${c}`)).data.data||[],I=M.length>0?M[M.length-1]:null,D=I?parseInt(I.name.replace("Type","")):0,G=`Type ${String(D+1).padStart(2,"0")}`;g(R=>({...R,name:G}))}catch(_){console.error("Error fetching last type:",_),C("Failed to generate Type ID")}};N.useEffect(()=>{S()},[]);const E=async _=>{_.preventDefault(),w(!0),C("");try{const M=await me.post("/housetype",{...h,apartment_id:c},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});M.data.success?(d?.(M.data.data),n()):C("Failed to save house type")}catch(M){console.error("Error saving house type:",M),C("Error saving house type")}finally{w(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[j&&e.jsx("p",{className:"text-red-500",children:j}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:h.sqrfeet,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:h.rooms,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:h.bathrooms,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:m?"Saving...":"Save"})]})]})}function e3({housetype:n,onClose:c,onUpdated:d}){const[h,g]=N.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[m,w]=N.useState(!1),[j,C]=N.useState(""),b=localStorage.getItem("token");N.useEffect(()=>{n&&g({name:n.name||"",sqrfeet:n.sqrfeet||"",rooms:n.rooms||"",bathrooms:n.bathrooms||""})},[n]);const S=_=>{const{name:M,value:I}=_.target;g(D=>({...D,[M]:I}))},E=async _=>{_.preventDefault(),w(!0),C("");try{const M=await me.put(`/housetype/${n.id}`,h,{headers:{Authorization:`Bearer ${b}`}});M.data.success?(d&&d(M.data.data),c&&c()):C(M.data.message||"Failed to update house type")}catch(M){console.error("Update error:",M),C("Error updating house type")}finally{w(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[j&&e.jsx("p",{className:"text-red-500",children:j}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:h.sqrfeet,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:h.rooms,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:h.bathrooms,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:m?"Saving...":"Save"})]})]})}function w1(){const{apartment_id:n}=ys();console.log("Apartment ID:",n);const[c,d]=N.useState(!1),[h,g]=N.useState(null),[m,w]=N.useState([]),[j,C]=N.useState(!1),[b,S]=N.useState(!1),[E,_]=N.useState(null),[M,I]=N.useState(!1),[D,G]=N.useState(null),R=async()=>{try{d(!0),g(null);const he=await me.get(`/housetype?apartment_id=${n}`);he.data.success&&Array.isArray(he.data.data)?w(he.data.data):w([])}catch(he){console.error("Error loading houses:",he),g("Failed to load houses. Please try again.")}finally{d(!1)}};N.useEffect(()=>{R()},[n]);const L=()=>{C(!0)},O=()=>{C(!1)},P=()=>{R(),C(!1),re.success("House Type Created Successfully")},Q=he=>{_(he),S(!0)},F=()=>{S(!1),_(null)},q=()=>{R(),S(!1),re.success("House Type updated successfully!")},Y=he=>{G(he),I(!0)},$=async()=>{try{if(!D)return;await me.delete(`/houseType/${D.id}`),re.success("House type deleted successfully"),I(!1),G(null),R()}catch(he){console.error("Delete house type error:",he),re.error("Failed to delete house type")}},ce=()=>{I(!1),G(null)};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:L,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"New House Type"})]}),c?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading House types..."})]}):h?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[h,e.jsx("button",{onClick:R,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):m.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ms,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No house types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding house types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SQR Feet"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Rooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Bathrooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map(he=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:he.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:he.sqrfeet}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:he.rooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:he.bathrooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:de=>{de.stopPropagation(),Q(he)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(kr,{size:20})}),e.jsx("button",{onClick:de=>{de.stopPropagation(),Y(he)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:20})})]})})]},he.id))})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:O,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New House Types"}),e.jsx(J4,{onClose:O,onCreated:P,apartment_id:n})]})}),b&&E&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:F,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the House Type"}),e.jsx(e3,{onClose:F,onUpdated:q,housetype:E})]})}),M&&D&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',D.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ce,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:$,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function t3({houseowner:n,onClose:c,onUpdated:d}){const[h,g]=N.useState(!1),[m,w]=N.useState(!1),[j,C]=N.useState(null),[b,S]=N.useState(null),[E,_]=N.useState([]),[M,I]=N.useState({name:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:""});N.useEffect(()=>{n&&(I({name:n.name||"",occupation:n.occupation||"",country:n.country||"",mobile:n.mobile||"",email:n.email||"",occupied_way:n.occupied_way||"own",proof:n.proof||""}),n.proof&&S(n.proof))},[n]),N.useEffect(()=>{(async()=>{try{const q=await me.get("/countries");_(q.data.data||[])}catch(q){console.error("Error fetching countries:",q)}})()},[]);const D=F=>{const{name:q,value:Y}=F.target;I($=>({...$,[q]:Y}))},G=F=>{const q=F.target.files[0];if(q)if(C(q),q.type.startsWith("image/")){const Y=new FileReader;Y.onloadend=()=>{S(Y.result)},Y.readAsDataURL(q)}else S(null)},R=F=>{const q=F.target.value,Y=E.find($=>$.id.toString()===q);I(Y?$=>({...$,country:Y.country_name,mobile:Y.phone_code+" "+$.mobile.replace(/^\+\d+\s?/,"")}):$=>({...$,country:"",mobile:$.mobile.replace(/^\+\d+\s?/,"")}))},L=F=>{const q=F.target.value;if(M.mobile&&M.mobile.includes("+")){const Y=M.mobile.match(/^(\+\d+)(?:\s|$)/);if(Y){const $=Y[1];q.startsWith($)?I(ce=>({...ce,mobile:q})):I(ce=>({...ce,mobile:$+" "+q.replace(/^\+\d+\s?/,"")}));return}}I(Y=>({...Y,mobile:q}))},O=async F=>{F.preventDefault(),w(!0);try{const q=new FormData;Object.keys(M).forEach($=>{$!=="proof"&&q.append($,M[$])}),j&&q.append("proof",j);const Y=await me.put(`/houseowner/${n.id}`,q,{headers:{"Content-Type":"multipart/form-data"}});Y.data.success&&(d(Y.data.data),c())}catch(q){console.error("Error updating house owner:",q),alert("Error updating house owner. Please try again.")}finally{w(!1)}},Q=E.find(F=>F.country_name===M.country)?.phone_code||"";return h?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(At,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):n?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cr,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit House Owner"})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx($t,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:O,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Cr,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:M.name,onChange:D,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ch,{size:16,className:"inline mr-2"}),"Occupation *"]}),e.jsx("input",{type:"text",name:"occupation",value:M.occupation,onChange:D,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(i1,{size:16,className:"inline mr-2"}),"Country *"]}),e.jsxs("select",{name:"country",value:E.find(F=>F.country_name===M.country)?.id||"",onChange:R,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Country"}),E.map(F=>e.jsxs("option",{value:F.id,children:[F.country_name," (",F.phone_code,")"]},F.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Zo,{size:16,className:"inline mr-2"}),"Mobile Number *"]}),e.jsxs("div",{className:"flex",children:[Q&&e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-3 rounded-l-lg border border-gray-300  dark:text-white text-gray-700 dark:border-gray-600 border-r-0",children:Q}),e.jsx("input",{type:"tel",name:"mobile",value:M.mobile.replace(/^\+\d+\s?/,""),onChange:L,placeholder:"Enter phone number",className:`w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${Q?"rounded-l-none":""}`,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Il,{size:16,className:"inline mr-2"}),"Email Address *"]}),e.jsx("input",{type:"email",name:"email",value:M.email,onChange:D,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:M.occupied_way,onChange:D,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(ps,{size:16,className:"inline mr-2"}),"Proof Document"]}),b&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Current Document:"}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx(qt,{size:20,className:"text-gray-500 mr-3"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:M.proof.split("/").pop()})}),e.jsx("a",{href:`${me.defaults.baseURL}/houseowner/view-proof/${n.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"View"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-purple-500 transition-colors",children:[e.jsx("input",{type:"file",id:"proof",onChange:G,accept:"image/*",className:"hidden"}),e.jsxs("label",{htmlFor:"proof",className:"cursor-pointer block",children:[e.jsx(ps,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Click to upload new document"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"PNG, JPG, JPEG up to 5MB"})]}),j&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["New file selected: ",j.name]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx(At,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):"Save Changes"})]})]})]})}):null}function a3({houseownerId:n,onClose:c,onSuccess:d}){const[h,g]=N.useState(!1),[m,w]=N.useState(!1),[j,C]=N.useState({name:"",nic:"",email:"",phone:"",houseowner_id:n}),[b,S]=N.useState({});N.useEffect(()=>{C({name:"",nic:"",email:"",phone:"",houseowner_id:n}),S({})},[n]);const E=()=>{const D={};return j.name.trim()||(D.name="Name is required"),j.nic.trim()||(D.nic="NIC is required"),j.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email)&&(D.email="Invalid email address"),j.phone&&!/^[0-9+\-\s()]{10,}$/.test(j.phone.replace(/\s/g,""))&&(D.phone="Invalid phone number"),S(D),Object.keys(D).length===0},_=D=>{const{name:G,value:R}=D.target;C(L=>({...L,[G]:R})),b[G]&&S(L=>({...L,[G]:""}))},M=async D=>{if(D.preventDefault(),!!E()){w(!0);try{const G=await me.post("/family",{...j,houseowner_id:n});G.data.success&&(d(G.data.data),c())}catch(G){console.error("Error adding family member:",G),G.response?.data?.error?S(R=>({...R,general:G.response.data.message||"Failed to add family member"})):S(R=>({...R,general:"Failed to add family member. Please try again."}))}finally{w(!1)}}},I=D=>{const R=D.target.value.replace(/[^\d+\-\s]/g,"");C(L=>({...L,phone:R})),b.phone&&S(L=>({...L,phone:""}))};return h?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(At,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(zo,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Add New Family Member"})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:m,children:e.jsx($t,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:M,className:"p-6",children:[b.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:b.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Cr,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:j.name,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter full name",required:!0,disabled:m}),b.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(o1,{size:16,className:"inline mr-2"}),"NIC Number *"]}),e.jsx("input",{type:"text",name:"nic",value:j.nic,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.nic?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter NIC number",required:!0,disabled:m}),b.nic&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.nic})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Il,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:j.email,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter email address (optional)",disabled:m}),b.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Zo,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:j.phone,onChange:I,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter phone number (optional)",disabled:m}),b.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.phone}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Format: +94 77 123 4567 or 0771234567"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx(At,{size:18,className:"animate-spin mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(zo,{size:18,className:"mr-2"}),"Add Member"]})})]})]})]})})}function r3({member:n,onClose:c,onUpdated:d}){const[h,g]=N.useState(!1),[m,w]=N.useState(!1),[j,C]=N.useState({}),[b,S]=N.useState({name:"",email:"",phone:""});N.useEffect(()=>{n&&S({name:n.name||"",email:n.email||"",phone:n.phone||""})},[n]);const E=()=>{const I={};return b.name.trim()||(I.name="Name is required"),b.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)&&(I.email="Invalid email address"),b.phone&&!/^[0-9+\-\s()]{10,}$/.test(b.phone.replace(/\s/g,""))&&(I.phone="Invalid phone number"),C(I),Object.keys(I).length===0},_=I=>{const{name:D,value:G}=I.target;S(R=>({...R,[D]:G})),j[D]&&C(R=>({...R,[D]:""}))},M=async I=>{if(I.preventDefault(),!!E()){w(!0);try{const D=await me.put(`/family/${n.id}`,b);D.data.success&&(d(D.data.data),c())}catch(D){console.error("Error updating family member:",D),C(G=>({...G,general:D.response?.data?.message||"Failed to update family member"}))}finally{w(!1)}}};return n?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cr,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Family Member"})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:m,children:e.jsx($t,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:M,className:"p-6",children:[j.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:j.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Cr,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:b.name,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,required:!0,disabled:m}),j.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Il,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:b.email,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:m}),j.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Zo,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:b.phone,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:m}),j.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.phone})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx(At,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qh,{size:18,className:"mr-2"}),"Save Changes"]})})]})]})]})}):null}function s3(){const[n,c]=N.useState(!1),[d,h]=N.useState("type"),{apartment_id:g,floor_id:m,id:w}=ys();console.log("Apartment Id:",g),console.log("Floor ID: ",m),console.log("House ID: ",w);const[j,C]=N.useState(null),[b,S]=N.useState(null),[E,_]=N.useState(null),[M,I]=N.useState(null),[D,G]=N.useState(null),[R,L]=N.useState([]),[O,P]=N.useState(!1),[Q,F]=N.useState([]),[q,Y]=N.useState(!1),[$,ce]=N.useState(!1),[he,de]=N.useState(!1),[ne,J]=N.useState(!1),[z,V]=N.useState(!1),[W,se]=N.useState(null),le=Gt();N.useEffect(()=>{g&&me.get(`/apartments/${g}`).then(te=>te.data.success&&C(te.data.data)).catch(te=>console.error("Error fetching apartment:",te))},[g]),N.useEffect(()=>{m&&me.get(`/floors/${m}`).then(te=>te.data.success&&S(te.data.data)).catch(te=>console.error("Error fetching floor:",te))},[m]),N.useEffect(()=>{w&&me.get(`/houses/${w}`).then(te=>te.data.success&&_(te.data.data)).catch(te=>console.error("Error fetching house:",te))},[w]),N.useEffect(()=>{E?.housetype_id&&me.get(`/housetype/${E.housetype_id}`).then(te=>te.data.success&&I(te.data.data)).catch(te=>console.error("Error fetching house type:",te))},[E]),N.useEffect(()=>{E?.houseowner_id&&me.get(`/houseowner/${E.houseowner_id}`).then(te=>te.data.success&&G(te.data.data)).catch(te=>console.error("Error fetching house owner: ",te))},[E]),N.useEffect(()=>{E?.houseowner_id&&K(E.houseowner_id)},[E]);const K=async te=>{try{P(!0);const Ie=await me.get(`/family/houseowner/${te}`);Ie.data.success&&L(Ie.data.data||[])}catch(Ie){console.error("Error fetching family members: ",Ie),L([])}finally{P(!1)}};N.useEffect(()=>{w&&xe()},[w]);const xe=async()=>{try{Y(!0);const te=await me.get(`/bill-assignments/house/${w}`);te.data.success&&F(te.data.data||[])}catch(te){console.error("Error fetching assigned bills:",te),F([])}finally{Y(!1)}},Le=()=>{le(`/houses/${g}/${m}`)},ye=te=>new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),ie=async()=>{if(!D?.id){alert("House owner information not available");return}try{ce(!0),console.log("Downloading proof for houseowner ID:",D.id),console.log("Proof path in database:",D.proof);try{const Ne=await me.head(`/houseowner/download-proof/${D.id}`);console.log("HEAD request successful:",Ne.status)}catch(Ne){console.error("HEAD request failed:",Ne.response?.status||Ne.message)}const te=await me.get(`/houseowner/download-proof/${D.id}`,{responseType:"blob"});if(console.log("Download response status:",te.status),console.log("Response headers:",te.headers),te.status!==200){const Ne=await te.data.text();console.error("Error response:",Ne);let We=`Download failed with status ${te.status}`;try{const Ye=JSON.parse(Ne);Ye.message&&(We=Ye.message)}catch{Ne&&(We=Ne)}throw new Error(We)}const Ie=new Blob([te.data]),$e=window.URL.createObjectURL(Ie),rt=document.createElement("a");rt.href=$e;const Ke=te.headers["content-disposition"];let et="owner_proof.jpg";if(Ke){const Ne=Ke.match(/filename="?([^"]+)"?/);Ne&&(et=Ne[1],console.log("Filename from header:",et))}else if(D.proof){const Ne=D.proof.split("/");et=Ne[Ne.length-1]||et}rt.download=et,document.body.appendChild(rt),rt.click(),document.body.removeChild(rt),setTimeout(()=>{window.URL.revokeObjectURL($e)},100),console.log("Download successful")}catch(te){console.error("Error downloading proof:",te),console.error("Error details:",{name:te.name,message:te.message,stack:te.stack,response:te.response?.data}),te.response?.status===404?alert("Proof document not found. Please check if the file exists on the server."):te.response?.status===500?alert("Server error occurred. Please check server logs."):te.message?alert(`Download failed: ${te.message}`):alert("Failed to download proof document. Please try again.")}finally{ce(!1)}},Re=()=>{E?.houseowner_id?J(!0):alert("House owner information is required before adding family members.")},oe=te=>{se(te),V(!0)},Ve=async te=>{if(window.confirm("Are you sure you want to delete this family member?"))try{await me.delete(`/family/${te}`),E?.houseowner_id&&K(E.houseowner_id)}catch(Ie){console.error("Error deleting family member:",Ie),alert("Failed to delete family member")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Le,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Hs,{size:25})}),e.jsx(xa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"House Details"})]}),j&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",j.name]}),b&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Floor: ",b.floor_id]}),E&&e.jsx("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:e.jsxs("p",{children:["House No: ",E.house_id]})})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>h("type"),className:`px-4 py-2 font-semibold 
                                    ${d==="type"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Type"}),e.jsx("button",{onClick:()=>h("owner"),className:`px-4 py-2 font-semibold 
                                    ${d==="owner"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Owner"}),e.jsxs("button",{onClick:()=>h("residents"),className:`px-4 py-2 font-semibold 
                                    ${d==="residents"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Residents (",R.length,")"]}),e.jsx("button",{onClick:()=>h("assignedBills"),className:`px-4 py-2 font-semibold 
                                    ${d==="assignedBills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assigned Bills"})]}),d==="type"&&M&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(xa,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Type Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Nd,{className:"text-blue-600 dark:text-blue-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type Name"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:M.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-6 rounded-xl border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Nd,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Square Feet"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[M.sqrfeet," sq ft"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-6 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(_v,{className:"text-green-600 dark:text-green-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:M.rooms})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 p-6 rounded-xl border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Av,{className:"text-orange-600 dark:text-orange-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bathrooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:M.bathrooms})]})]})})]})]}),d==="owner"&&D&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(Cr,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Owner Information"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30 p-6 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-start mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:D.name?.charAt(0)||"O"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:D.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Owner"})]}),D.houseowner_id&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-semibold",children:"Role:"})," House Owner"]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>de(!0),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(kr,{size:18})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Yh,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NIC Number"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:D.NIC})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ch,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:D.occupation})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-purple-700 dark:text-purple-300 text-sm font-medium",children:D.occupied_way})}),e.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-green-700 dark:text-green-300 text-sm font-medium",children:ye(E.occupied_at)})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(i1,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Country"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:D.country})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zo,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:D.mobile})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Il,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white break-all",children:D.email||"N/A"})]})]}),D.proof&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(qt,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Proof Document"}),e.jsx("button",{onClick:ie,disabled:$,className:"flex items-center font-medium text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:$?e.jsxs(e.Fragment,{children:[e.jsx(At,{size:16,className:"mr-2 animate-spin"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ii,{size:16,className:"mr-2"}),"Download Proof"]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:D.proof.split("/").pop()})]})]})]})]})]})]}),d==="residents"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(Vs,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"Family Members / Residents"]}),e.jsxs("button",{onClick:Re,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[e.jsx(zo,{size:18,className:"mr-2"}),"Add Family Member"]})]}),O?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:28,className:"animate-spin text-purple-600 mr-3"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading family members..."})]}):R.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(Vs,{size:64,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No Family Members Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"There are no family members or residents registered for this house owner."}),e.jsxs("button",{onClick:Re,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center mx-auto",children:[e.jsx(zo,{size:18,className:"mr-2"}),"Add First Family Member"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(te=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-lg font-bold mr-3",children:te.name?.charAt(0)||"F"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-white text-lg",children:te.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(o1,{size:14,className:"text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:te.nic})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>oe(te),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(kr,{size:18})}),e.jsx("button",{onClick:()=>Ve(te.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:e.jsx(ja,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3",children:[te.occupation&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Ch,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium",children:te.occupation})]})]}),te.email&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Il,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium truncate",children:te.email})]})]}),te.phone&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(NN,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"font-medium",children:te.phone})]})]}),te.moved_at&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Dl,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Added On"}),e.jsx("p",{className:"font-medium",children:ye(te.moved_at)})]})]})]})]},te.id))})]}),d==="assignedBills"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx(qt,{className:"mr-2",size:20}),"Assigned Bills"]}),q?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(At,{size:24,className:"animate-spin text-purple-600 mr-2"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading assigned bills..."})]}):Q.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(qt,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No bills assigned to this house"}),e.jsx("p",{className:"text-sm",children:"Bills will appear here once they are assigned to this house"})]}):e.jsx("div",{className:"space-y-4",children:Q.map(te=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx($r,{size:18,className:"text-green-600 mr-2"}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:te.bill?.bill_name||"Unknown Bill"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-2",children:"Type:"}),e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-1 rounded text-xs",children:te.bill?.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Dl,{size:14,className:"mr-2"}),e.jsx("span",{className:"font-medium mr-2",children:"Assigned:"}),e.jsx("span",{children:ye(te.assigned_date)})]})]})]}),e.jsx("div",{className:"flex flex-col items-end space-y-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${te.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:te.status||"active"})})]})},te.id))})]})]})})]}),he&&D&&e.jsx(t3,{houseowner:D,onClose:()=>de(!1),onUpdated:te=>{G(te),de(!1)}}),ne&&E?.houseowner_id&&e.jsx(a3,{houseownerId:E.houseowner_id,onClose:()=>J(!1),onSuccess:te=>{L(Ie=>[te,...Ie]),J(!1)}}),z&&W&&e.jsx(r3,{member:W,onClose:()=>{V(!1),se(null)},onUpdated:te=>{K(),L(Ie=>Ie.map($e=>$e.id===te.id?te:$e)),V(!1),se(null)}})]})}function n3({onClose:n,onCreated:c,apartment_id:d,floor_id:h}){const[g,m]=N.useState([{numHouses:1,housetype_id:""}]),[w,j]=N.useState(""),[C,b]=N.useState([]),[S,E]=N.useState([]),[_,M]=N.useState([]),[I,D]=N.useState(!1),[G,R]=N.useState(!0),[L,O]=N.useState("");N.useEffect(()=>{(async()=>{try{const J=await me.get(`/houses?apartment_id=${d}&floor_id=${h}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});J.data?.data?.length>0&&(M(J.data.data),console.log("Existing houses:",J.data.data))}catch(J){console.error("Error fetching existing houses:",J)}finally{R(!1)}})()},[d,h]),N.useEffect(()=>{(async()=>{try{const J=await me.get(`/housetype?apartment_id=${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});E(J.data.data||[])}catch(J){console.error("Error fetching house types:",J)}})()},[d]);const P=ne=>{if(!ne||_.length===0)return 0;const J=_.filter(V=>V.house_id&&V.house_id.startsWith(ne)).map(V=>{const se=V.house_id.slice(ne.length).match(/^\d+$/);return se?parseInt(se[0]):0}).filter(V=>V>0);if(console.log(`Houses with prefix "${ne}":`,J),J.length===0)return 0;const z=Math.max(...J);return console.log(`Last house number for prefix "${ne}":`,z),z},Q=()=>{m(ne=>[...ne,{numHouses:1,housetype_id:""}])},F=ne=>{if(g.length===1){O("At least one house type row is required");return}m(J=>J.filter((z,V)=>V!==ne))},q=(ne,J,z)=>{m(V=>V.map((W,se)=>se===ne?{...W,[J]:z}:W))},Y=()=>{if(!w.trim()){O("Please enter a key letter/prefix");return}if(g.filter(se=>!se.housetype_id||se.numHouses<1).length>0){O("Please select house type and ensure number of houses is at least 1 for all rows");return}O("");const J=w.trim().toUpperCase();let V=P(J)+1;const W=[];g.forEach(se=>{const le=S.find(K=>K.id===se.housetype_id);for(let K=0;K<se.numHouses;K++)W.push({house_id:`${J}${V}`,housetype_id:se.housetype_id,house_type_name:le?.name||""}),V++}),console.log(`Generated ${W.length} houses:`,W),b(W)},$=(ne,J)=>{const z=[...C];z[ne].housetype_id=J;const V=S.find(W=>W.id===J);z[ne].house_type_name=V?.name||"",b(z)},ce=async ne=>{if(ne.preventDefault(),O(""),D(!0),C.filter(z=>!z.housetype_id).length>0){O("Please select house type for all houses"),D(!1);return}try{const z={apartment_id:d,floor_id:h,houses:C.map(W=>({house_id:W.house_id,housetype_id:W.housetype_id}))},V=await me.post("/houses/batch",z,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});c&&c(),n&&n()}catch(z){console.error("Error creating houses:",z),O(z.response?.data?.message||"Server error while creating houses.")}finally{D(!1)}},he=ne=>{j(ne.target.value),b([])},de=g.reduce((ne,J)=>ne+(J.numHouses||0),0);return e.jsxs("div",{className:"p-4 text-white",children:[L&&e.jsx("div",{className:"mb-3 p-2 bg-red-100 border border-red-400 text-red-700 rounded",children:L}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"1"}),"Configure Houses"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white mb-2",children:"Key Letter/Prefix:"}),e.jsx("input",{type:"text",value:w,onChange:he,placeholder:"Enter prefix (e.g., H, E, EH, A)",className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-700",maxLength:10}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter letters that will prefix your house numbers (e.g., H for H1, H2... or EH for EH1, EH2...)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white",children:"House Type Configuration:"}),e.jsxs("button",{type:"button",onClick:Q,className:"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:[e.jsx(qa,{size:16}),"Add Row"]})]}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto border border-purple-300 rounded p-3 bg-gray-50 dark:bg-gray-700",children:g.map((ne,J)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Number:"}),e.jsx("input",{type:"number",value:ne.numHouses,onChange:z=>q(J,"numHouses",parseInt(z.target.value)||1),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",min:"1",max:"50"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Type:"}),e.jsxs("select",{value:ne.housetype_id,onChange:z=>q(J,"housetype_id",z.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",children:[e.jsx("option",{value:"",children:"Select Type"}),S.map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]})]}),e.jsx("div",{className:"flex items-end pt-2",children:e.jsx("button",{type:"button",onClick:()=>F(J),disabled:g.length===1,className:"p-1 text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Remove row",children:e.jsx(ja,{size:16})})})]},J))}),e.jsx("div",{className:"mt-3 p-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total houses to generate:"}),e.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:de})]})})]}),w.trim()&&_.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-blue-100 border border-blue-400 text-blue-700 rounded text-sm",children:[e.jsxs("strong",{children:['Prefix "',w.toUpperCase(),'":']})," Found ",P(w.trim().toUpperCase())," existing houses.",P(w.trim().toUpperCase())===0?" Will start from 1.":` Will continue from ${P(w.trim().toUpperCase())+1}.`]}),e.jsx("button",{type:"button",onClick:Y,disabled:!w.trim()||G||de===0,className:"w-full px-4 py-3 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold",children:G?"Loading...":e.jsxs(e.Fragment,{children:["Generate ",de," House",de!==1?"s":"",e.jsx(Nv,{size:18})]})})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4 h-full",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"2"}),"Review & Save"]}),C.length>0?e.jsxs("form",{onSubmit:ce,className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1 border border-purple-300 rounded p-3 overflow-y-auto max-h-96",children:[e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Generated ",C.length," house",C.length!==1?"s":"",' with prefix "',w.toUpperCase(),'"']}),C.map((ne,J)=>e.jsxs("div",{className:"border border-purple-200 rounded p-3 mb-3 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House ID:"}),e.jsx("input",{type:"text",value:ne.house_id,disabled:!0,className:"border rounded p-2 text-black dark:text-white border-purple-600 bg-gray-100 dark:bg-gray-600 w-full text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House Type:"}),e.jsxs("select",{value:ne.housetype_id,onChange:z=>$(J,z.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-600 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),S.map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]})]})]}),ne.house_type_name&&e.jsxs("div",{className:"mt-2 text-xs text-green-600 dark:text-green-400 font-medium",children:["Type: ",ne.house_type_name]})]},J))]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:n,disabled:I,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white disabled:bg-gray-300 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-purple-400 flex items-center gap-2 text-sm",children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):`Save ${C.length} House${C.length>1?"s":""}`})]})]}):e.jsxs("div",{className:"h-48 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-center",children:"Houses will appear here"}),e.jsx("p",{className:"text-center text-sm",children:"Configure and generate houses on the left"})]})]})})]})]})}function l3({house:n,onClose:c,onUpdated:d,apartment_id:h,floor_id:g}){const[m,w]=N.useState({house_id:n.house_id,status:n.status,housetype_id:n.housetype_id,houseowner_id:n.houseowner_id}),[j,C]=N.useState({name:"",nic:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:null}),[b,S]=N.useState([]),[E,_]=N.useState(!1),[M,I]=N.useState(!1),[D,G]=N.useState(null),[R,L]=N.useState([]),[O,P]=N.useState(!0);N.useEffect(()=>{(async()=>{try{const J=await me.get("/countries");L(J.data.data)}catch(J){console.error("Error fetching countries:",J)}})()},[]);const Q=ne=>{const J=ne.target.value,z=R.find(V=>V.id.toString()===J);C(z?V=>({...V,country:z.country_name,mobile:z.phone_code+" "}):V=>({...V,country:"",mobile:""}))},F=ne=>{const J=ne.target.value;if(j.mobile&&j.mobile.includes("+")){const z=j.mobile.match(/^(\+\d+)(?:\s|$)/);if(z){const V=z[1];J.startsWith(V)?C(W=>({...W,mobile:J})):C(W=>({...W,mobile:V+" "+J.replace(/^\+\d+\s?/,"")}));return}}C(z=>({...z,mobile:J}))};N.useEffect(()=>{(async()=>{try{const J=await me.get(`/housetype?apartment_id=${h}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});S(J.data.data||[])}catch(J){console.error("Error fetching house types:",J)}})()},[h]),N.useEffect(()=>{m.status==="occupied"&&n.status!=="occupied"?(I(!0),P(!0)):m.status!=="occupied"&&I(!1)},[m.status,n.status]);const q=ne=>{w({...m,[ne.target.name]:ne.target.value})},Y=ne=>{C({...j,[ne.target.name]:ne.target.value})},$=ne=>{G(ne.target.files[0])},ce=async ne=>{ne.preventDefault(),_(!0);try{let J=m.houseowner_id,z=!1;if(m.status==="occupied"&&!J){const se=new FormData;se.append("name",j.name),se.append("nic",j.nic),se.append("occupation",j.occupation),se.append("country",j.country),se.append("mobile",j.mobile),se.append("email",j.email),se.append("occupied_way",j.occupied_way),se.append("apartment_id",h),D&&se.append("proof",D);const le=await me.post("/houseowner",se,{headers:{"Content-Type":"multipart/form-data"}});le.data.success&&(J=le.data.data.id,z=!0,w(K=>({...K,houseowner_id:J})))}const V={...m,house_owner_id:J||J};if((await me.put(`/houses/${n.id}`,V)).data.success)return z?(d(),alert(" House owner saved successfully! You can now setup login.")):d(),J}catch(J){console.error("Error updating house:",J),alert("Error updating house. Please try again.")}finally{_(!1)}},he=R.find(ne=>ne.country_name===j.country),de=async()=>{try{_(!0);const ne=m.houseowner_id;if(!ne){alert("House owner ID not found. Please save the house owner first.");return}const J=j.email;if(!J||!J.includes("@")){alert("Please enter a valid email address for the house owner");return}if(!window.confirm(`Send verification email to ${J}?

The house owner will receive an email with verification link.`)){_(!1);return}const V=await me.post("/houseowner-auth/admin/setup",{houseowner_id:ne,send_email:!0});V.data.success?(alert(` Setup successful!

Verification email sent to: ${J}

${V.data.message}`),d()):alert(V.data.message||"Failed to set up house owner")}catch(ne){console.error("Error setting up house owner:",ne),alert("Error setting up house owner. Please try again.")}finally{_(!1)}};return e.jsxs("form",{onSubmit:ce,className:"flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 pl-1",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House ID"}),e.jsx("input",{type:"text",name:"house_id",value:m.house_id,onChange:q,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House Type"}),e.jsxs("select",{name:"housetype_id",value:m.housetype_id,onChange:q,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),b&&b.length>0?b.map(ne=>e.jsx("option",{value:ne.id,children:ne.name||ne.type_name||"Unnamed Type"},ne.id)):e.jsx("option",{value:"",disabled:!0,children:"No house types available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:m.status,onChange:q,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"vacant",children:"Vacant"}),e.jsx("option",{value:"occupied",children:"Occupied"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),M&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("button",{type:"button",onClick:()=>P(!O),className:"flex items-center justify-between w-full mb-3 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Owner Information"}),O?e.jsx(Ei,{size:20,className:"text-gray-500"}):e.jsx(Si,{size:20,className:"text-gray-500"})]}),O&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:j.name,onChange:Y,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"NIC *"}),e.jsx("input",{type:"text",name:"nic",value:j.nic,onChange:Y,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation *"}),e.jsx("input",{type:"text",name:"occupation",value:j.occupation,onChange:Y,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Country *"}),e.jsxs("select",{name:"country",value:R.find(ne=>ne.country_name===j.country)?.id||"",onChange:Q,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select country *"}),R.map(ne=>e.jsxs("option",{value:ne.id,children:[ne.country_name," (",ne.phone_code,")"]},ne.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Mobile *"}),e.jsxs("div",{className:"flex items-center",children:[he&&e.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 px-3 py-2 rounded-l-md border border-r-0 border-gray-300 dark:border-gray-600 whitespace-nowrap",children:he.phone_code}),e.jsx("input",{name:"mobile",value:j.mobile,onChange:F,placeholder:he?"Enter phone number":"Select country first",className:`w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white ${he?"rounded-l-none":""}`,required:!0,disabled:!he})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",he?.phone_code||"+XX"," XXXXXXXXX"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Email *"}),e.jsx("input",{name:"email",type:"email",value:j.email,onChange:Y,placeholder:"Email *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:j.occupied_way,onChange:Y,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Proof Document"}),e.jsx("input",{type:"file",onChange:$,accept:"image/*",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white"})]})]})]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 pt-4 mt-4 sticky bottom-0 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center gap-2 transition-colors disabled:opacity-50",children:[E&&e.jsx(At,{size:16,className:"animate-spin"}),M?"Save House & Owner":"Save Changes"]}),(m.houseowner_id||M&&j.email)&&e.jsx("button",{type:"button",onClick:de,disabled:E||!j.email,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50",title:j.email?"Setup login for house owner":"Enter email first",children:"Setup Login for Owner"})]})})]})}function i3({onClose:n,onCreated:c}){const[d,h]=N.useState({bill_name:"",billtype:""}),[g,m]=N.useState(!1),[w,j]=N.useState(""),[C,b]=N.useState([]),S=_=>{const{name:M,value:I}=_.target;h(D=>({...D,[M]:I})),M==="bill_name"&&w&&j("")},E=async _=>{if(_.preventDefault(),m(!0),j(""),!d.bill_name.trim()||!d.billtype){j("Please fill in all required fields"),m(!1);return}try{const M=await me.post("/bills",{bill_name:d.bill_name.trim(),billtype:d.billtype},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});M.data.success?(c?.(M.data.data),re.success("Bill type created successfully"),n()):j(M.data.message||"Failed to save bill type")}catch(M){console.error("Error saving bill type:",M);const I=M.response?.data?.message||"Error saving bill type. Please try again.";j(I),M.response?.status===409&&re.error(I)}finally{m(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[w&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:w}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:d.billtype,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Name *"}),e.jsx("input",{type:"text",name:"bill_name",value:d.bill_name,onChange:S,placeholder:"Enter unique bill name (e.g., Electricity, Water, Maintenance)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||!d.bill_name.trim()||!d.billtype,className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${g||!d.bill_name.trim()||!d.billtype?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Bill Type"})]})]})}function v1({bills:n,onClose:c,onUpdated:d}){const[h,g]=N.useState({bill_name:"",billtype:""}),[m,w]=N.useState(!1),[j,C]=N.useState(""),b=localStorage.getItem("token");N.useEffect(()=>{n&&g({bill_name:n.bill_name||"",billtype:n.billtype||""})},[n]);const S=_=>{const{name:M,value:I}=_.target;g(D=>({...D,[M]:I}))},E=async _=>{_.preventDefault(),w(!0),C("");try{const M=await me.put(`/bills/${n.id}`,h,{headers:{Authorization:`Bearer ${b}`}});M.data.success?(d&&d(M.data.data),c&&c()):C(M.data.message||"Failed to update bill type")}catch(M){console.error("Update error:",M),C("Error updating bill type")}finally{w(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[j&&e.jsx("p",{className:"text-red-500",children:j}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:h.billtype,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsx("input",{type:"text",name:"bill_name",value:h.bill_name,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:m?"Saving...":"Save"})]})]})}function N1({isOpen:n,onClose:c,selectedBill:d,onAssignSuccess:h}){const[g,m]=N.useState([]),[w,j]=N.useState({}),[C,b]=N.useState({}),[S,E]=N.useState(""),[_,M]=N.useState(""),[I,D]=N.useState([]),[G,R]=N.useState({}),[L,O]=N.useState({}),[P,Q]=N.useState(!1),[F,q]=N.useState({}),[Y,$]=N.useState({}),[ce,he]=N.useState(!1),de=async()=>{try{Q(!0);const ye=await me.get("/apartments");ye.data.success&&m(ye.data.data||[])}catch(ye){console.error("Error loading apartments:",ye),re.error("Failed to load apartments")}finally{Q(!1)}},ne=async ye=>{if(ye)try{q(Re=>({...Re,[ye]:!0}));const ie=await me.get(`/floors?apartment_id=${ye}`);if(ie.data.success){const Re=ie.data.data||[];j(oe=>({...oe,[ye]:Re}))}}catch(ie){console.error("Error loading floors:",ie),re.error("Failed to load floors")}finally{q(ie=>({...ie,[ye]:!1}))}},J=async(ye,ie)=>{if(!(!ye||!ie))try{$(oe=>({...oe,[ie]:!0}));const Re=await me.get(`/houses?apartment_id=${ye}&floor_id=${ie}`);if(Re.data.success){const oe=Re.data.data||[];b(Ve=>({...Ve,[ie]:oe}))}}catch(Re){console.error("Error loading houses:",Re),re.error("Failed to load houses")}finally{$(Re=>({...Re,[ie]:!1}))}},z=async ye=>{const ie=G[ye.id];!ie&&!w[ye.id]&&await ne(ye.id),R(Re=>({...Re,[ye.id]:!ie})),ie||(E(ye.id),M(""),D([]))},V=async(ye,ie)=>{const Re=`${ye}-${ie.id}`,oe=L[Re];!oe&&!C[ie.id]&&await J(ye,ie.id),O(Ve=>({...Ve,[Re]:!oe})),oe||(M(ie.id),D([]))},W=ye=>{D(ie=>ie.includes(ye)?ie.filter(Re=>Re!==ye):[...ie,ye])},se=()=>{if(!_)return;const ie=(C[_]||[]).map(oe=>oe.id),Re=ie.every(oe=>I.includes(oe));D(Re?oe=>oe.filter(Ve=>!ie.includes(Ve)):oe=>{const Ve=[...oe];return ie.forEach(te=>{Ve.includes(te)||Ve.push(te)}),Ve})},le=()=>{if(!_)return!1;const ye=C[_]||[];return ye.length===0?!1:ye.every(ie=>I.includes(ie.id))},K=()=>{if(!_)return!1;const ye=C[_]||[];return ye.length===0?!1:ye.some(ie=>I.includes(ie.id))&&!le()},xe=async()=>{if(!S||!_||I.length===0){re.error("Please select apartment, floor, and at least one house");return}he(!0);try{const ye={bill_id:d.id,apartment_id:S,floor_id:_,house_ids:I};await me.post("/bill-assignments/assign",ye),re.success("Bill assign successfully"),h(),Le()}catch(ye){console.error("Error assigning bill:",ye),re.error(ye.response?.data?.message||"Failed to assign bill")}finally{he(!1)}},Le=()=>{E(""),M(""),j({}),b({}),D([]),R({}),O({}),c()};return N.useEffect(()=>{n&&de()},[n]),n?e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:Le,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Assign Bill: ",e.jsx("span",{className:"text-purple-600",children:d?.bill_name})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Apartment *"}),P?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(At,{size:24,className:"animate-spin mr-3 text-purple-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):e.jsx("div",{className:"space-y-3",children:g.map(ye=>e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-colors ${S===ye.id?"bg-purple-50 dark:bg-purple-900/20 border-l-4 border-l-purple-600":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,onClick:()=>z(ye),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:ye.name}),e.jsx("button",{onClick:ie=>{ie.stopPropagation(),z(ye)},className:"p-2 dark:hover:bg-white hover:bg-gray-200 rounded-md",children:G[ye.id]?e.jsx(Ei,{size:20,className:" transition-colors duration-200 text-purple-700"}):e.jsx(Si,{size:20,className:"transition-colors duration-200 text-purple-700"})})]}),G[ye.id]&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:F[ye.id]?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx(At,{size:16,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading floors..."})]}):e.jsx("div",{className:"space-y-2 p-3",children:(w[ye.id]||[]).map(ie=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer transition-colors ${_===ie.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500":"bg-white dark:bg-gray-600 hover:bg-gray-50 dark:hover:bg-gray-500"}`,onClick:()=>V(ye.id,ie),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:ie.floor_id}),e.jsx("button",{onClick:Re=>{Re.stopPropagation(),V(ye.id,ie)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-400 rounded-lg transition-colors",children:L[`${ye.id}-${ie.id}`]?e.jsx(Ei,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"}):e.jsx(Si,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"})})]}),L[`${ye.id}-${ie.id}`]&&e.jsx("div",{className:"bg-white dark:bg-gray-500 border-t border-gray-200 dark:border-gray-400",children:Y[ie.id]?e.jsxs("div",{className:"flex items-center justify-center p-3",children:[e.jsx(At,{size:14,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Loading houses..."})]}):e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 dark:bg-gray-400 rounded",children:[e.jsx("input",{type:"checkbox",checked:le(),ref:Re=>{Re&&(Re.indeterminate=K())},onChange:se,className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-800",children:"Select All Houses"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:(C[ie.id]||[]).map(Re=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-400 rounded border hover:bg-gray-100 dark:hover:bg-gray-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:I.includes(Re.id),onChange:()=>W(Re.id),className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-800",children:Re.house_id}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-700 capitalize",children:["(",Re.status,")"]})]})]},Re.id))})]})})]},ie.id))})})]},ye.id))})]}),I.length>0&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:I.length})," house",I.length!==1?"s":""," selected for assignment"]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:Le,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:xe,disabled:!S||!_||I.length===0||ce,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:ce?e.jsxs(e.Fragment,{children:[e.jsx(At,{size:16,className:"animate-spin"}),"Assigning..."]}):`Assign to ${I.length} House${I.length!==1?"s":""}`})]})]})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]}):null}function o3(){const[n,c]=N.useState(!1),[d,h]=N.useState(null),[g,m]=N.useState([]),[w,j]=N.useState(!1),[C,b]=N.useState(!1),[S,E]=N.useState(!1),[_,M]=N.useState(null),[I,D]=N.useState(null),[G,R]=N.useState(!1),[L,O]=N.useState(null);Gt();const P=async()=>{try{c(!0),h(null);const z=await me.get("/bills");z.data.success&&Array.isArray(z.data.data)?m(z.data.data):m([])}catch(z){console.error("Error loading bills:",z),h("Failed to load bills. Please try again.")}finally{c(!1)}};N.useEffect(()=>{P()},[]);const Q=g.filter(z=>z.billtype==="Shared"),F=z=>{D(z),E(!0)},q=()=>{E(!1),D(null)},Y=()=>{re.success("Bill assigned successfully!")},$=z=>{M(z),b(!0)},ce=()=>{b(!1),M(null)},he=()=>{P(),b(!1),re.success("Bill Type updated successfully!")},de=z=>{O(z),R(!0)},ne=async()=>{try{if(!L)return;await me.delete(`/bills/${L.id}`),re.success("Bill type deleted successfully"),R(!1),O(null),P()}catch(z){console.error("Delete bill type error:",z),re.error("Failed to delete bill type")}},J=()=>{R(!1),O(null)};return e.jsxs("div",{children:[n?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Bill types..."})]}):d?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[d,e.jsx("button",{onClick:P,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):Q.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ms,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No shared value bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding shared value bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Q.map((z,V)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:V+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:z.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:W=>{W.stopPropagation(),F(z)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(qa,{size:20})}),e.jsx("span",{children:z.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:W=>{W.stopPropagation(),$(z)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(kr,{size:20})}),e.jsx("button",{onClick:W=>{W.stopPropagation(),de(z)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:20})})]})})]},z.id))})]})}),C&&_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:ce,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(v1,{onClose:ce,onUpdated:he,bills:_})]})}),e.jsx(N1,{isOpen:S,onClose:q,selectedBill:I,onAssignSuccess:Y}),G&&L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',L.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:J,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:ne,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function j1(){const[n,c]=N.useState(!1),[d,h]=N.useState(null),[g,m]=N.useState([]),[w,j]=N.useState(!1),[C,b]=N.useState(!1),[S,E]=N.useState(!1),[_,M]=N.useState(null),[I,D]=N.useState(null),[G,R]=N.useState(!1),[L,O]=N.useState(null),[P,Q]=N.useState("bills"),F=Gt(),q=async()=>{try{c(!0),h(null);const xe=await me.get("/bills");xe.data.success&&Array.isArray(xe.data.data)?m(xe.data.data):m([])}catch(xe){console.error("Error loading bills:",xe),h("Failed to load bills. Please try again.")}finally{c(!1)}};N.useEffect(()=>{q()},[]);const Y=g.filter(xe=>xe.billtype==="Measurable"),$=xe=>{D(xe),E(!0)},ce=()=>{E(!1),D(null)},he=()=>{re.success("Bill assigned successfully!")},de=()=>{j(!0)},ne=()=>{j(!1)},J=()=>{q(),j(!1)},z=xe=>{M(xe),b(!0)},V=()=>{b(!1),M(null)},W=()=>{q(),b(!1),re.success("Bill Type updated successfully!")},se=xe=>{O(xe),R(!0)},le=async()=>{try{if(!L)return;await me.delete(`/bills/${L.id}`),re.success("Bill type deleted successfully"),R(!1),O(null),q()}catch(xe){console.error("Delete bill type error:",xe),re.error("Failed to delete bill type")}},K=()=>{R(!1),O(null)};return e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("button",{onClick:de,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"New Bill Type"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsxs("button",{onClick:()=>Q("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                            ${P==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Measurable Bills (",Y.length,")"]}),e.jsx("button",{onClick:()=>Q("sharedValueBills"),className:`px-4 py-2 font-semibold transition-colors duration-200
                            ${P==="sharedValueBills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Shared Value Bills"})]}),P==="bills"&&e.jsx(e.Fragment,{children:n?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill types..."})]}):d?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[d,e.jsx("button",{onClick:q,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):Y.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ms,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No measurable bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding measurable bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Y.map((xe,Le)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>F(`/billranges/${xe.id}`),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:Le+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:xe.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:ye=>{ye.stopPropagation(),$(xe)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(qa,{size:20})}),e.jsx("span",{children:xe.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:ye=>{ye.stopPropagation(),z(xe)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(kr,{size:20})}),e.jsx("button",{onClick:ye=>{ye.stopPropagation(),se(xe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:20})})]})})]},xe.id))})]})})}),P==="sharedValueBills"&&e.jsx(o3,{}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:ne,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(i3,{onClose:ne,onCreated:J})]})}),C&&_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:V,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(v1,{onClose:V,onUpdated:W,bills:_})]})}),e.jsx(N1,{isOpen:S,onClose:ce,selectedBill:I,onAssignSuccess:he}),G&&L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',L.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:K,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:le,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function c3({house:n,apartment:c,floor:d,onClose:h,onUploadSuccess:g}){const[m,w]=N.useState(!1),[j,C]=N.useState([]),[b,S]=N.useState([]),[E,_]=N.useState(!0),M=N.useRef(null);N.useEffect(()=>{R()},[n.id]);const I=Q=>{const F=Array.from(Q.target.files);S(q=>[...q,...F])},D=Q=>{S(F=>F.filter((q,Y)=>Y!==Q))},G=async()=>{if(b.length===0){re.error("Please select at least one file");return}try{w(!0);const Q=new FormData;b.forEach(q=>{Q.append("documents",q)}),Q.append("apartmentId",c.id),Q.append("floorId",d.id),Q.append("houseId",n.id),(await me.post("/house-documents/upload",Q,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(re.success("House documents uploaded successfully!"),S([]),g?.(),R(),M.current&&(M.current.value=""))}catch(Q){console.error("Upload error:",Q);const F=Q.response?.data?.message||"Failed to upload house documents";re.error(F)}finally{w(!1)}},R=async()=>{try{_(!0),console.log("Loading documents for house ID:",n.id);const Q=await me.get(`/house-documents/${n.id}/documents`);console.log("Documents response:",Q.data),Q.data.success?(C(Q.data.data),console.log("Documents loaded:",Q.data.data)):console.error("API response not successful:",Q.data)}catch(Q){console.error("Error loading house documents:",Q);const F=Q.response?.data?.message||"Failed to load house documents";re.error(F),Q.response&&(console.error("Error response:",Q.response.data),console.error("Error status:",Q.response.status))}finally{_(!1)}},L=async Q=>{if(window.confirm("Are you sure you want to delete this document?"))try{await me.delete(`/house-documents/documents/${Q}`),re.success("House document deleted successfully"),R()}catch(F){console.error("Delete error:",F);const q=F.response?.data?.message||"Failed to delete house document";re.error(q)}},O=async Q=>{try{const F=await me.get(`/house-documents/documents/${Q.id}/download`,{responseType:"blob"}),q=window.URL.createObjectURL(new Blob([F.data])),Y=document.createElement("a");Y.href=q,Y.setAttribute("download",Q.original_name||Q.file_name),document.body.appendChild(Y),Y.click(),Y.remove(),window.URL.revokeObjectURL(q)}catch(F){console.error("Download error:",F);const q=F.response?.data?.message||"Failed to download house document";re.error(q)}},P=Q=>{if(Q===0)return"0 Bytes";const F=1024,q=["Bytes","KB","MB","GB"],Y=Math.floor(Math.log(Q)/Math.log(F));return parseFloat((Q/Math.pow(F,Y)).toFixed(2))+" "+q[Y]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["House Documents - ",n.house_id]}),e.jsx("button",{onClick:h,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),c&&d&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",c.name," |",e.jsx("strong",{children:" Floor:"})," ",d.floor_id," |",e.jsx("strong",{children:" House:"})," ",n.house_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New House Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:M,onChange:I,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>M.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ps,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),b.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:b.map((Q,F)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qt,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:Q.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:P(Q.size)})]})]}),e.jsx("button",{onClick:()=>D(F),className:"text-red-500 hover:text-red-700",children:e.jsx($t,{size:16})})]},F))})]}),b.length>0&&e.jsx("button",{onClick:G,disabled:m,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ps,{size:20}),"Upload ",b.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing House Documents"}),E?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading house documents..."})]}):j.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(qt,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No house documents uploaded yet"}),e.jsx("button",{onClick:R,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry Loading"})]}):e.jsx("div",{className:"space-y-3",children:j.map(Q=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(qt,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Q.original_name||Q.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[P(Q.file_size),"  Uploaded on ",new Date(Q.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(Q),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Ii,{size:18})}),e.jsx("button",{onClick:()=>L(Q.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:18})})]})]},Q.id))})]})]})}const d3="modulepreload",u3=function(n){return"/"+n},Am={},h3=function(c,d,h){let g=Promise.resolve();if(d&&d.length>0){let C=function(b){return Promise.all(b.map(S=>Promise.resolve(S).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),j=w?.nonce||w?.getAttribute("nonce");g=C(d.map(b=>{if(b=u3(b),b in Am)return;Am[b]=!0;const S=b.endsWith(".css"),E=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${E}`))return;const _=document.createElement("link");if(_.rel=S?"stylesheet":d3,S||(_.as="script"),_.crossOrigin="",_.href=b,j&&_.setAttribute("nonce",j),document.head.appendChild(_),S)return new Promise((M,I)=>{_.addEventListener("load",M),_.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${b}`)))})}))}function m(w){const j=new Event("vite:preloadError",{cancelable:!0});if(j.payload=w,window.dispatchEvent(j),!j.defaultPrevented)throw w}return g.then(w=>{for(const j of w||[])j.status==="rejected"&&m(j.reason);return c().catch(m)})};var ki={},Y0,Em;function f3(){return Em||(Em=1,Y0=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Y0}var X0={},Wn={},_m;function Bl(){if(_m)return Wn;_m=1;let n;const c=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Wn.getSymbolSize=function(h){if(!h)throw new Error('"version" cannot be null or undefined');if(h<1||h>40)throw new Error('"version" should be in range from 1 to 40');return h*4+17},Wn.getSymbolTotalCodewords=function(h){return c[h]},Wn.getBCHDigit=function(d){let h=0;for(;d!==0;)h++,d>>>=1;return h},Wn.setToSJISFunction=function(h){if(typeof h!="function")throw new Error('"toSJISFunc" is not a valid function.');n=h},Wn.isKanjiModeEnabled=function(){return typeof n<"u"},Wn.toSJIS=function(h){return n(h)},Wn}var $0={},Tm;function Wh(){return Tm||(Tm=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function c(d){if(typeof d!="string")throw new Error("Param is not a string");switch(d.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+d)}}n.isValid=function(h){return h&&typeof h.bit<"u"&&h.bit>=0&&h.bit<4},n.from=function(h,g){if(n.isValid(h))return h;try{return c(h)}catch{return g}}}($0)),$0}var Z0,Mm;function x3(){if(Mm)return Z0;Mm=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(c){const d=Math.floor(c/8);return(this.buffer[d]>>>7-c%8&1)===1},put:function(c,d){for(let h=0;h<d;h++)this.putBit((c>>>d-h-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(c){const d=Math.floor(this.length/8);this.buffer.length<=d&&this.buffer.push(0),c&&(this.buffer[d]|=128>>>this.length%8),this.length++}},Z0=n,Z0}var Q0,Dm;function g3(){if(Dm)return Q0;Dm=1;function n(c){if(!c||c<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=c,this.data=new Uint8Array(c*c),this.reservedBit=new Uint8Array(c*c)}return n.prototype.set=function(c,d,h,g){const m=c*this.size+d;this.data[m]=h,g&&(this.reservedBit[m]=!0)},n.prototype.get=function(c,d){return this.data[c*this.size+d]},n.prototype.xor=function(c,d,h){this.data[c*this.size+d]^=h},n.prototype.isReserved=function(c,d){return this.reservedBit[c*this.size+d]},Q0=n,Q0}var W0={},Rm;function m3(){return Rm||(Rm=1,function(n){const c=Bl().getSymbolSize;n.getRowColCoords=function(h){if(h===1)return[];const g=Math.floor(h/7)+2,m=c(h),w=m===145?26:Math.ceil((m-13)/(2*g-2))*2,j=[m-7];for(let C=1;C<g-1;C++)j[C]=j[C-1]-w;return j.push(6),j.reverse()},n.getPositions=function(h){const g=[],m=n.getRowColCoords(h),w=m.length;for(let j=0;j<w;j++)for(let C=0;C<w;C++)j===0&&C===0||j===0&&C===w-1||j===w-1&&C===0||g.push([m[j],m[C]]);return g}}(W0)),W0}var K0={},Im;function p3(){if(Im)return K0;Im=1;const n=Bl().getSymbolSize,c=7;return K0.getPositions=function(h){const g=n(h);return[[0,0],[g-c,0],[0,g-c]]},K0}var J0={},Om;function y3(){return Om||(Om=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const c={N1:3,N2:3,N3:40,N4:10};n.isValid=function(g){return g!=null&&g!==""&&!isNaN(g)&&g>=0&&g<=7},n.from=function(g){return n.isValid(g)?parseInt(g,10):void 0},n.getPenaltyN1=function(g){const m=g.size;let w=0,j=0,C=0,b=null,S=null;for(let E=0;E<m;E++){j=C=0,b=S=null;for(let _=0;_<m;_++){let M=g.get(E,_);M===b?j++:(j>=5&&(w+=c.N1+(j-5)),b=M,j=1),M=g.get(_,E),M===S?C++:(C>=5&&(w+=c.N1+(C-5)),S=M,C=1)}j>=5&&(w+=c.N1+(j-5)),C>=5&&(w+=c.N1+(C-5))}return w},n.getPenaltyN2=function(g){const m=g.size;let w=0;for(let j=0;j<m-1;j++)for(let C=0;C<m-1;C++){const b=g.get(j,C)+g.get(j,C+1)+g.get(j+1,C)+g.get(j+1,C+1);(b===4||b===0)&&w++}return w*c.N2},n.getPenaltyN3=function(g){const m=g.size;let w=0,j=0,C=0;for(let b=0;b<m;b++){j=C=0;for(let S=0;S<m;S++)j=j<<1&2047|g.get(b,S),S>=10&&(j===1488||j===93)&&w++,C=C<<1&2047|g.get(S,b),S>=10&&(C===1488||C===93)&&w++}return w*c.N3},n.getPenaltyN4=function(g){let m=0;const w=g.data.length;for(let C=0;C<w;C++)m+=g.data[C];return Math.abs(Math.ceil(m*100/w/5)-10)*c.N4};function d(h,g,m){switch(h){case n.Patterns.PATTERN000:return(g+m)%2===0;case n.Patterns.PATTERN001:return g%2===0;case n.Patterns.PATTERN010:return m%3===0;case n.Patterns.PATTERN011:return(g+m)%3===0;case n.Patterns.PATTERN100:return(Math.floor(g/2)+Math.floor(m/3))%2===0;case n.Patterns.PATTERN101:return g*m%2+g*m%3===0;case n.Patterns.PATTERN110:return(g*m%2+g*m%3)%2===0;case n.Patterns.PATTERN111:return(g*m%3+(g+m)%2)%2===0;default:throw new Error("bad maskPattern:"+h)}}n.applyMask=function(g,m){const w=m.size;for(let j=0;j<w;j++)for(let C=0;C<w;C++)m.isReserved(C,j)||m.xor(C,j,d(g,C,j))},n.getBestMask=function(g,m){const w=Object.keys(n.Patterns).length;let j=0,C=1/0;for(let b=0;b<w;b++){m(b),n.applyMask(b,g);const S=n.getPenaltyN1(g)+n.getPenaltyN2(g)+n.getPenaltyN3(g)+n.getPenaltyN4(g);n.applyMask(b,g),S<C&&(C=S,j=b)}return j}}(J0)),J0}var dd={},Bm;function k1(){if(Bm)return dd;Bm=1;const n=Wh(),c=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],d=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return dd.getBlocksCount=function(g,m){switch(m){case n.L:return c[(g-1)*4+0];case n.M:return c[(g-1)*4+1];case n.Q:return c[(g-1)*4+2];case n.H:return c[(g-1)*4+3];default:return}},dd.getTotalCodewordsCount=function(g,m){switch(m){case n.L:return d[(g-1)*4+0];case n.M:return d[(g-1)*4+1];case n.Q:return d[(g-1)*4+2];case n.H:return d[(g-1)*4+3];default:return}},dd}var eh={},Io={},Lm;function b3(){if(Lm)return Io;Lm=1;const n=new Uint8Array(512),c=new Uint8Array(256);return function(){let h=1;for(let g=0;g<255;g++)n[g]=h,c[h]=g,h<<=1,h&256&&(h^=285);for(let g=255;g<512;g++)n[g]=n[g-255]}(),Io.log=function(h){if(h<1)throw new Error("log("+h+")");return c[h]},Io.exp=function(h){return n[h]},Io.mul=function(h,g){return h===0||g===0?0:n[c[h]+c[g]]},Io}var Pm;function w3(){return Pm||(Pm=1,function(n){const c=b3();n.mul=function(h,g){const m=new Uint8Array(h.length+g.length-1);for(let w=0;w<h.length;w++)for(let j=0;j<g.length;j++)m[w+j]^=c.mul(h[w],g[j]);return m},n.mod=function(h,g){let m=new Uint8Array(h);for(;m.length-g.length>=0;){const w=m[0];for(let C=0;C<g.length;C++)m[C]^=c.mul(g[C],w);let j=0;for(;j<m.length&&m[j]===0;)j++;m=m.slice(j)}return m},n.generateECPolynomial=function(h){let g=new Uint8Array([1]);for(let m=0;m<h;m++)g=n.mul(g,new Uint8Array([1,c.exp(m)]));return g}}(eh)),eh}var th,zm;function v3(){if(zm)return th;zm=1;const n=w3();function c(d){this.genPoly=void 0,this.degree=d,this.degree&&this.initialize(this.degree)}return c.prototype.initialize=function(h){this.degree=h,this.genPoly=n.generateECPolynomial(this.degree)},c.prototype.encode=function(h){if(!this.genPoly)throw new Error("Encoder not initialized");const g=new Uint8Array(h.length+this.degree);g.set(h);const m=n.mod(g,this.genPoly),w=this.degree-m.length;if(w>0){const j=new Uint8Array(this.degree);return j.set(m,w),j}return m},th=c,th}var ah={},rh={},sh={},Fm;function C1(){return Fm||(Fm=1,sh.isValid=function(c){return!isNaN(c)&&c>=1&&c<=40}),sh}var Fs={},Um;function S1(){if(Um)return Fs;Um=1;const n="[0-9]+",c="[A-Z $%*+\\-./:]+";let d="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";d=d.replace(/u/g,"\\u");const h="(?:(?![A-Z0-9 $%*+\\-./:]|"+d+`)(?:.|[\r
]))+`;Fs.KANJI=new RegExp(d,"g"),Fs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Fs.BYTE=new RegExp(h,"g"),Fs.NUMERIC=new RegExp(n,"g"),Fs.ALPHANUMERIC=new RegExp(c,"g");const g=new RegExp("^"+d+"$"),m=new RegExp("^"+n+"$"),w=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Fs.testKanji=function(C){return g.test(C)},Fs.testNumeric=function(C){return m.test(C)},Fs.testAlphanumeric=function(C){return w.test(C)},Fs}var Hm;function Ll(){return Hm||(Hm=1,function(n){const c=C1(),d=S1();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(m,w){if(!m.ccBits)throw new Error("Invalid mode: "+m);if(!c.isValid(w))throw new Error("Invalid version: "+w);return w>=1&&w<10?m.ccBits[0]:w<27?m.ccBits[1]:m.ccBits[2]},n.getBestModeForData=function(m){return d.testNumeric(m)?n.NUMERIC:d.testAlphanumeric(m)?n.ALPHANUMERIC:d.testKanji(m)?n.KANJI:n.BYTE},n.toString=function(m){if(m&&m.id)return m.id;throw new Error("Invalid mode")},n.isValid=function(m){return m&&m.bit&&m.ccBits};function h(g){if(typeof g!="string")throw new Error("Param is not a string");switch(g.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+g)}}n.from=function(m,w){if(n.isValid(m))return m;try{return h(m)}catch{return w}}}(rh)),rh}var Vm;function N3(){return Vm||(Vm=1,function(n){const c=Bl(),d=k1(),h=Wh(),g=Ll(),m=C1(),w=7973,j=c.getBCHDigit(w);function C(_,M,I){for(let D=1;D<=40;D++)if(M<=n.getCapacity(D,I,_))return D}function b(_,M){return g.getCharCountIndicator(_,M)+4}function S(_,M){let I=0;return _.forEach(function(D){const G=b(D.mode,M);I+=G+D.getBitsLength()}),I}function E(_,M){for(let I=1;I<=40;I++)if(S(_,I)<=n.getCapacity(I,M,g.MIXED))return I}n.from=function(M,I){return m.isValid(M)?parseInt(M,10):I},n.getCapacity=function(M,I,D){if(!m.isValid(M))throw new Error("Invalid QR Code version");typeof D>"u"&&(D=g.BYTE);const G=c.getSymbolTotalCodewords(M),R=d.getTotalCodewordsCount(M,I),L=(G-R)*8;if(D===g.MIXED)return L;const O=L-b(D,M);switch(D){case g.NUMERIC:return Math.floor(O/10*3);case g.ALPHANUMERIC:return Math.floor(O/11*2);case g.KANJI:return Math.floor(O/13);case g.BYTE:default:return Math.floor(O/8)}},n.getBestVersionForData=function(M,I){let D;const G=h.from(I,h.M);if(Array.isArray(M)){if(M.length>1)return E(M,G);if(M.length===0)return 1;D=M[0]}else D=M;return C(D.mode,D.getLength(),G)},n.getEncodedBits=function(M){if(!m.isValid(M)||M<7)throw new Error("Invalid QR Code version");let I=M<<12;for(;c.getBCHDigit(I)-j>=0;)I^=w<<c.getBCHDigit(I)-j;return M<<12|I}}(ah)),ah}var nh={},qm;function j3(){if(qm)return nh;qm=1;const n=Bl(),c=1335,d=21522,h=n.getBCHDigit(c);return nh.getEncodedBits=function(m,w){const j=m.bit<<3|w;let C=j<<10;for(;n.getBCHDigit(C)-h>=0;)C^=c<<n.getBCHDigit(C)-h;return(j<<10|C)^d},nh}var lh={},ih,Gm;function k3(){if(Gm)return ih;Gm=1;const n=Ll();function c(d){this.mode=n.NUMERIC,this.data=d.toString()}return c.getBitsLength=function(h){return 10*Math.floor(h/3)+(h%3?h%3*3+1:0)},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(h){let g,m,w;for(g=0;g+3<=this.data.length;g+=3)m=this.data.substr(g,3),w=parseInt(m,10),h.put(w,10);const j=this.data.length-g;j>0&&(m=this.data.substr(g),w=parseInt(m,10),h.put(w,j*3+1))},ih=c,ih}var oh,Ym;function C3(){if(Ym)return oh;Ym=1;const n=Ll(),c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function d(h){this.mode=n.ALPHANUMERIC,this.data=h}return d.getBitsLength=function(g){return 11*Math.floor(g/2)+6*(g%2)},d.prototype.getLength=function(){return this.data.length},d.prototype.getBitsLength=function(){return d.getBitsLength(this.data.length)},d.prototype.write=function(g){let m;for(m=0;m+2<=this.data.length;m+=2){let w=c.indexOf(this.data[m])*45;w+=c.indexOf(this.data[m+1]),g.put(w,11)}this.data.length%2&&g.put(c.indexOf(this.data[m]),6)},oh=d,oh}var ch,Xm;function S3(){if(Xm)return ch;Xm=1;const n=Ll();function c(d){this.mode=n.BYTE,typeof d=="string"?this.data=new TextEncoder().encode(d):this.data=new Uint8Array(d)}return c.getBitsLength=function(h){return h*8},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(d){for(let h=0,g=this.data.length;h<g;h++)d.put(this.data[h],8)},ch=c,ch}var dh,$m;function A3(){if($m)return dh;$m=1;const n=Ll(),c=Bl();function d(h){this.mode=n.KANJI,this.data=h}return d.getBitsLength=function(g){return g*13},d.prototype.getLength=function(){return this.data.length},d.prototype.getBitsLength=function(){return d.getBitsLength(this.data.length)},d.prototype.write=function(h){let g;for(g=0;g<this.data.length;g++){let m=c.toSJIS(this.data[g]);if(m>=33088&&m<=40956)m-=33088;else if(m>=57408&&m<=60351)m-=49472;else throw new Error("Invalid SJIS character: "+this.data[g]+`
Make sure your charset is UTF-8`);m=(m>>>8&255)*192+(m&255),h.put(m,13)}},dh=d,dh}var uh={exports:{}},Zm;function E3(){return Zm||(Zm=1,function(n){var c={single_source_shortest_paths:function(d,h,g){var m={},w={};w[h]=0;var j=c.PriorityQueue.make();j.push(h,0);for(var C,b,S,E,_,M,I,D,G;!j.empty();){C=j.pop(),b=C.value,E=C.cost,_=d[b]||{};for(S in _)_.hasOwnProperty(S)&&(M=_[S],I=E+M,D=w[S],G=typeof w[S]>"u",(G||D>I)&&(w[S]=I,j.push(S,I),m[S]=b))}if(typeof g<"u"&&typeof w[g]>"u"){var R=["Could not find a path from ",h," to ",g,"."].join("");throw new Error(R)}return m},extract_shortest_path_from_predecessor_list:function(d,h){for(var g=[],m=h;m;)g.push(m),d[m],m=d[m];return g.reverse(),g},find_path:function(d,h,g){var m=c.single_source_shortest_paths(d,h,g);return c.extract_shortest_path_from_predecessor_list(m,g)},PriorityQueue:{make:function(d){var h=c.PriorityQueue,g={},m;d=d||{};for(m in h)h.hasOwnProperty(m)&&(g[m]=h[m]);return g.queue=[],g.sorter=d.sorter||h.default_sorter,g},default_sorter:function(d,h){return d.cost-h.cost},push:function(d,h){var g={value:d,cost:h};this.queue.push(g),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=c}(uh)),uh.exports}var Qm;function _3(){return Qm||(Qm=1,function(n){const c=Ll(),d=k3(),h=C3(),g=S3(),m=A3(),w=S1(),j=Bl(),C=E3();function b(R){return unescape(encodeURIComponent(R)).length}function S(R,L,O){const P=[];let Q;for(;(Q=R.exec(O))!==null;)P.push({data:Q[0],index:Q.index,mode:L,length:Q[0].length});return P}function E(R){const L=S(w.NUMERIC,c.NUMERIC,R),O=S(w.ALPHANUMERIC,c.ALPHANUMERIC,R);let P,Q;return j.isKanjiModeEnabled()?(P=S(w.BYTE,c.BYTE,R),Q=S(w.KANJI,c.KANJI,R)):(P=S(w.BYTE_KANJI,c.BYTE,R),Q=[]),L.concat(O,P,Q).sort(function(q,Y){return q.index-Y.index}).map(function(q){return{data:q.data,mode:q.mode,length:q.length}})}function _(R,L){switch(L){case c.NUMERIC:return d.getBitsLength(R);case c.ALPHANUMERIC:return h.getBitsLength(R);case c.KANJI:return m.getBitsLength(R);case c.BYTE:return g.getBitsLength(R)}}function M(R){return R.reduce(function(L,O){const P=L.length-1>=0?L[L.length-1]:null;return P&&P.mode===O.mode?(L[L.length-1].data+=O.data,L):(L.push(O),L)},[])}function I(R){const L=[];for(let O=0;O<R.length;O++){const P=R[O];switch(P.mode){case c.NUMERIC:L.push([P,{data:P.data,mode:c.ALPHANUMERIC,length:P.length},{data:P.data,mode:c.BYTE,length:P.length}]);break;case c.ALPHANUMERIC:L.push([P,{data:P.data,mode:c.BYTE,length:P.length}]);break;case c.KANJI:L.push([P,{data:P.data,mode:c.BYTE,length:b(P.data)}]);break;case c.BYTE:L.push([{data:P.data,mode:c.BYTE,length:b(P.data)}])}}return L}function D(R,L){const O={},P={start:{}};let Q=["start"];for(let F=0;F<R.length;F++){const q=R[F],Y=[];for(let $=0;$<q.length;$++){const ce=q[$],he=""+F+$;Y.push(he),O[he]={node:ce,lastCount:0},P[he]={};for(let de=0;de<Q.length;de++){const ne=Q[de];O[ne]&&O[ne].node.mode===ce.mode?(P[ne][he]=_(O[ne].lastCount+ce.length,ce.mode)-_(O[ne].lastCount,ce.mode),O[ne].lastCount+=ce.length):(O[ne]&&(O[ne].lastCount=ce.length),P[ne][he]=_(ce.length,ce.mode)+4+c.getCharCountIndicator(ce.mode,L))}}Q=Y}for(let F=0;F<Q.length;F++)P[Q[F]].end=0;return{map:P,table:O}}function G(R,L){let O;const P=c.getBestModeForData(R);if(O=c.from(L,P),O!==c.BYTE&&O.bit<P.bit)throw new Error('"'+R+'" cannot be encoded with mode '+c.toString(O)+`.
 Suggested mode is: `+c.toString(P));switch(O===c.KANJI&&!j.isKanjiModeEnabled()&&(O=c.BYTE),O){case c.NUMERIC:return new d(R);case c.ALPHANUMERIC:return new h(R);case c.KANJI:return new m(R);case c.BYTE:return new g(R)}}n.fromArray=function(L){return L.reduce(function(O,P){return typeof P=="string"?O.push(G(P,null)):P.data&&O.push(G(P.data,P.mode)),O},[])},n.fromString=function(L,O){const P=E(L,j.isKanjiModeEnabled()),Q=I(P),F=D(Q,O),q=C.find_path(F.map,"start","end"),Y=[];for(let $=1;$<q.length-1;$++)Y.push(F.table[q[$]].node);return n.fromArray(M(Y))},n.rawSplit=function(L){return n.fromArray(E(L,j.isKanjiModeEnabled()))}}(lh)),lh}var Wm;function T3(){if(Wm)return X0;Wm=1;const n=Bl(),c=Wh(),d=x3(),h=g3(),g=m3(),m=p3(),w=y3(),j=k1(),C=v3(),b=N3(),S=j3(),E=Ll(),_=_3();function M(F,q){const Y=F.size,$=m.getPositions(q);for(let ce=0;ce<$.length;ce++){const he=$[ce][0],de=$[ce][1];for(let ne=-1;ne<=7;ne++)if(!(he+ne<=-1||Y<=he+ne))for(let J=-1;J<=7;J++)de+J<=-1||Y<=de+J||(ne>=0&&ne<=6&&(J===0||J===6)||J>=0&&J<=6&&(ne===0||ne===6)||ne>=2&&ne<=4&&J>=2&&J<=4?F.set(he+ne,de+J,!0,!0):F.set(he+ne,de+J,!1,!0))}}function I(F){const q=F.size;for(let Y=8;Y<q-8;Y++){const $=Y%2===0;F.set(Y,6,$,!0),F.set(6,Y,$,!0)}}function D(F,q){const Y=g.getPositions(q);for(let $=0;$<Y.length;$++){const ce=Y[$][0],he=Y[$][1];for(let de=-2;de<=2;de++)for(let ne=-2;ne<=2;ne++)de===-2||de===2||ne===-2||ne===2||de===0&&ne===0?F.set(ce+de,he+ne,!0,!0):F.set(ce+de,he+ne,!1,!0)}}function G(F,q){const Y=F.size,$=b.getEncodedBits(q);let ce,he,de;for(let ne=0;ne<18;ne++)ce=Math.floor(ne/3),he=ne%3+Y-8-3,de=($>>ne&1)===1,F.set(ce,he,de,!0),F.set(he,ce,de,!0)}function R(F,q,Y){const $=F.size,ce=S.getEncodedBits(q,Y);let he,de;for(he=0;he<15;he++)de=(ce>>he&1)===1,he<6?F.set(he,8,de,!0):he<8?F.set(he+1,8,de,!0):F.set($-15+he,8,de,!0),he<8?F.set(8,$-he-1,de,!0):he<9?F.set(8,15-he-1+1,de,!0):F.set(8,15-he-1,de,!0);F.set($-8,8,1,!0)}function L(F,q){const Y=F.size;let $=-1,ce=Y-1,he=7,de=0;for(let ne=Y-1;ne>0;ne-=2)for(ne===6&&ne--;;){for(let J=0;J<2;J++)if(!F.isReserved(ce,ne-J)){let z=!1;de<q.length&&(z=(q[de]>>>he&1)===1),F.set(ce,ne-J,z),he--,he===-1&&(de++,he=7)}if(ce+=$,ce<0||Y<=ce){ce-=$,$=-$;break}}}function O(F,q,Y){const $=new d;Y.forEach(function(J){$.put(J.mode.bit,4),$.put(J.getLength(),E.getCharCountIndicator(J.mode,F)),J.write($)});const ce=n.getSymbolTotalCodewords(F),he=j.getTotalCodewordsCount(F,q),de=(ce-he)*8;for($.getLengthInBits()+4<=de&&$.put(0,4);$.getLengthInBits()%8!==0;)$.putBit(0);const ne=(de-$.getLengthInBits())/8;for(let J=0;J<ne;J++)$.put(J%2?17:236,8);return P($,F,q)}function P(F,q,Y){const $=n.getSymbolTotalCodewords(q),ce=j.getTotalCodewordsCount(q,Y),he=$-ce,de=j.getBlocksCount(q,Y),ne=$%de,J=de-ne,z=Math.floor($/de),V=Math.floor(he/de),W=V+1,se=z-V,le=new C(se);let K=0;const xe=new Array(de),Le=new Array(de);let ye=0;const ie=new Uint8Array(F.buffer);for(let Ie=0;Ie<de;Ie++){const $e=Ie<J?V:W;xe[Ie]=ie.slice(K,K+$e),Le[Ie]=le.encode(xe[Ie]),K+=$e,ye=Math.max(ye,$e)}const Re=new Uint8Array($);let oe=0,Ve,te;for(Ve=0;Ve<ye;Ve++)for(te=0;te<de;te++)Ve<xe[te].length&&(Re[oe++]=xe[te][Ve]);for(Ve=0;Ve<se;Ve++)for(te=0;te<de;te++)Re[oe++]=Le[te][Ve];return Re}function Q(F,q,Y,$){let ce;if(Array.isArray(F))ce=_.fromArray(F);else if(typeof F=="string"){let z=q;if(!z){const V=_.rawSplit(F);z=b.getBestVersionForData(V,Y)}ce=_.fromString(F,z||40)}else throw new Error("Invalid data");const he=b.getBestVersionForData(ce,Y);if(!he)throw new Error("The amount of data is too big to be stored in a QR Code");if(!q)q=he;else if(q<he)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+he+`.
`);const de=O(q,Y,ce),ne=n.getSymbolSize(q),J=new h(ne);return M(J,q),I(J),D(J,q),R(J,Y,0),q>=7&&G(J,q),L(J,de),isNaN($)&&($=w.getBestMask(J,R.bind(null,J,Y))),w.applyMask($,J),R(J,Y,$),{modules:J,version:q,errorCorrectionLevel:Y,maskPattern:$,segments:ce}}return X0.create=function(q,Y){if(typeof q>"u"||q==="")throw new Error("No input text");let $=c.M,ce,he;return typeof Y<"u"&&($=c.from(Y.errorCorrectionLevel,c.M),ce=b.from(Y.version),he=w.from(Y.maskPattern),Y.toSJISFunc&&n.setToSJISFunction(Y.toSJISFunc)),Q(q,ce,$,he)},X0}var hh={},fh={},Km;function A1(){return Km||(Km=1,function(n){function c(d){if(typeof d=="number"&&(d=d.toString()),typeof d!="string")throw new Error("Color should be defined as hex string");let h=d.slice().replace("#","").split("");if(h.length<3||h.length===5||h.length>8)throw new Error("Invalid hex color: "+d);(h.length===3||h.length===4)&&(h=Array.prototype.concat.apply([],h.map(function(m){return[m,m]}))),h.length===6&&h.push("F","F");const g=parseInt(h.join(""),16);return{r:g>>24&255,g:g>>16&255,b:g>>8&255,a:g&255,hex:"#"+h.slice(0,6).join("")}}n.getOptions=function(h){h||(h={}),h.color||(h.color={});const g=typeof h.margin>"u"||h.margin===null||h.margin<0?4:h.margin,m=h.width&&h.width>=21?h.width:void 0,w=h.scale||4;return{width:m,scale:m?4:w,margin:g,color:{dark:c(h.color.dark||"#000000ff"),light:c(h.color.light||"#ffffffff")},type:h.type,rendererOpts:h.rendererOpts||{}}},n.getScale=function(h,g){return g.width&&g.width>=h+g.margin*2?g.width/(h+g.margin*2):g.scale},n.getImageWidth=function(h,g){const m=n.getScale(h,g);return Math.floor((h+g.margin*2)*m)},n.qrToImageData=function(h,g,m){const w=g.modules.size,j=g.modules.data,C=n.getScale(w,m),b=Math.floor((w+m.margin*2)*C),S=m.margin*C,E=[m.color.light,m.color.dark];for(let _=0;_<b;_++)for(let M=0;M<b;M++){let I=(_*b+M)*4,D=m.color.light;if(_>=S&&M>=S&&_<b-S&&M<b-S){const G=Math.floor((_-S)/C),R=Math.floor((M-S)/C);D=E[j[G*w+R]?1:0]}h[I++]=D.r,h[I++]=D.g,h[I++]=D.b,h[I]=D.a}}}(fh)),fh}var Jm;function M3(){return Jm||(Jm=1,function(n){const c=A1();function d(g,m,w){g.clearRect(0,0,m.width,m.height),m.style||(m.style={}),m.height=w,m.width=w,m.style.height=w+"px",m.style.width=w+"px"}function h(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(m,w,j){let C=j,b=w;typeof C>"u"&&(!w||!w.getContext)&&(C=w,w=void 0),w||(b=h()),C=c.getOptions(C);const S=c.getImageWidth(m.modules.size,C),E=b.getContext("2d"),_=E.createImageData(S,S);return c.qrToImageData(_.data,m,C),d(E,b,S),E.putImageData(_,0,0),b},n.renderToDataURL=function(m,w,j){let C=j;typeof C>"u"&&(!w||!w.getContext)&&(C=w,w=void 0),C||(C={});const b=n.render(m,w,C),S=C.type||"image/png",E=C.rendererOpts||{};return b.toDataURL(S,E.quality)}}(hh)),hh}var xh={},ep;function D3(){if(ep)return xh;ep=1;const n=A1();function c(g,m){const w=g.a/255,j=m+'="'+g.hex+'"';return w<1?j+" "+m+'-opacity="'+w.toFixed(2).slice(1)+'"':j}function d(g,m,w){let j=g+m;return typeof w<"u"&&(j+=" "+w),j}function h(g,m,w){let j="",C=0,b=!1,S=0;for(let E=0;E<g.length;E++){const _=Math.floor(E%m),M=Math.floor(E/m);!_&&!b&&(b=!0),g[E]?(S++,E>0&&_>0&&g[E-1]||(j+=b?d("M",_+w,.5+M+w):d("m",C,0),C=0,b=!1),_+1<m&&g[E+1]||(j+=d("h",S),S=0)):C++}return j}return xh.render=function(m,w,j){const C=n.getOptions(w),b=m.modules.size,S=m.modules.data,E=b+C.margin*2,_=C.color.light.a?"<path "+c(C.color.light,"fill")+' d="M0 0h'+E+"v"+E+'H0z"/>':"",M="<path "+c(C.color.dark,"stroke")+' d="'+h(S,b,C.margin)+'"/>',I='viewBox="0 0 '+E+" "+E+'"',G='<svg xmlns="http://www.w3.org/2000/svg" '+(C.width?'width="'+C.width+'" height="'+C.width+'" ':"")+I+' shape-rendering="crispEdges">'+_+M+`</svg>
`;return typeof j=="function"&&j(null,G),G},xh}var tp;function R3(){if(tp)return ki;tp=1;const n=f3(),c=T3(),d=M3(),h=D3();function g(m,w,j,C,b){const S=[].slice.call(arguments,1),E=S.length,_=typeof S[E-1]=="function";if(!_&&!n())throw new Error("Callback required as last argument");if(_){if(E<2)throw new Error("Too few arguments provided");E===2?(b=j,j=w,w=C=void 0):E===3&&(w.getContext&&typeof b>"u"?(b=C,C=void 0):(b=C,C=j,j=w,w=void 0))}else{if(E<1)throw new Error("Too few arguments provided");return E===1?(j=w,w=C=void 0):E===2&&!w.getContext&&(C=j,j=w,w=void 0),new Promise(function(M,I){try{const D=c.create(j,C);M(m(D,w,C))}catch(D){I(D)}})}try{const M=c.create(j,C);b(null,m(M,w,C))}catch(M){b(M)}}return ki.create=c.create,ki.toCanvas=g.bind(null,d.render),ki.toDataURL=g.bind(null,d.renderToDataURL),ki.toString=g.bind(null,function(m,w,j){return h.render(m,j)}),ki}var I3=R3();const O3=Cd(I3);function B3({houses:n,apartment:c,floor:d,onClose:h}){const[g,m]=N.useState(!1),[w,j]=N.useState(!1),[C,b]=N.useState({}),S=D=>`${D.id}`,E=D=>D.split("|")[0];N.useEffect(()=>{(async()=>{if(n.length){m(!0);try{const G={};for(const R of n){const L=S(R);console.log(`QR Data for House ${R.house_id}:`,L),console.log("House ID only:",E(L));try{G[R.id]=await O3.toDataURL(L,{width:400,margin:4,errorCorrectionLevel:"H",color:{dark:"#000000",light:"#FFFFFF"}})}catch(O){console.error("QR Generation Error:",O),G[R.id]="",re.error(`Failed to generate QR for house ${R.house_id}`)}}b(G)}catch(G){console.error("Error generating QR codes",G),re.error("Failed to generate QR codes")}m(!1)}})()},[n,c,d]);const _=async()=>{j(!0);try{const{jsPDF:D}=await h3(async()=>{const{jsPDF:he}=await import("./jspdf.es.min-DcHtwrtM.js").then(de=>de.j);return{jsPDF:he}},[]),G=new D("p","mm","a4"),R=85,L=70,O=12,P=40,Q=G.internal.pageSize.getWidth(),F=G.internal.pageSize.getHeight();let q=O,Y=2,$=0;for(let he=0;he<n.length;he++){const de=n[he],ne=he%Y,J=O+ne*(R+O);q+L>F-O&&(G.addPage(),q=O,$=0),G.setDrawColor(200,200,200),G.rect(J,q,R,L),G.setFontSize(8),G.setFont(void 0,"bold"),G.text(c.name,J+R/2,q+5,{align:"center"}),G.setFontSize(7),G.setTextColor(100,100,100),G.text(`Floor: ${d.floor_id}`,J+R/2,q+9,{align:"center"}),G.setFontSize(14),G.setFont(void 0,"bold"),G.setTextColor(0,0,0),G.text(`${de.house_id}`,J+R/2,q+15,{align:"center"}),G.setFontSize(7),G.setFont(void 0,"bold"),G.setTextColor(0,0,0),G.text(`${de.id}`,J+R/2,q+18,{align:"center"}),C[de.id]&&G.addImage(C[de.id],"PNG",J+(R-P)/2,q+20,P,P),$++,$===Y&&(q+=L+O,$=0),he===n.length-1&&$>0&&(q+=L+O)}const ce=`QR_Codes_${c.name.replace(/\s+/g,"_")}_Floor_${d.floor_id}.pdf`;G.save(ce),re.success("PDF Generated Successfully!")}catch(D){console.error("PDF Generation Error:",D),re.error("Failed to generate PDF")}j(!1)},M=({house:D})=>{const G=C[D.id];return S(D),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-gray-800 dark:text-white text-lg mb-1",children:["House ",D.house_id]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[c.name,"  Floor ",d.floor_id]}),G?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:G,className:"mx-auto mb-2 rounded border-2 border-gray-300",style:{width:"150px",height:"150px"},alt:`QR Code for House ${D.house_id}`}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Scan to get account number: ",e.jsx("strong",{children:D.house_id})]})]}):e.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center",children:e.jsx(At,{size:24,className:"animate-spin text-gray-400"})})]})})},I=D=>{const G=C[D];if(G){const R=n.find(P=>P.id===D);if(!R)return;const L=S(R);E(L),window.open().document.write(`
                <html>
                    <head>
                        <title>QR Code Test</title>
                        <style>
                            body { 
                                font-family: Arial, sans-serif; 
                                padding: 20px; 
                                text-align: center; 
                                background: #f5f5f5;
                            }
                            .qr-container {
                                background: white;
                                padding: 20px;
                                border-radius: 10px;
                                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                                display: inline-block;
                                margin: 20px 0;
                            }
                            .info {
                                background: #e8f4ff;
                                padding: 15px;
                                border-radius: 8px;
                                margin: 20px auto;
                                max-width: 500px;
                                text-align: left;
                            }
                            .data-box {
                                background: #f0f0f0;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                                word-break: break-all;
                                font-family: monospace;
                                font-size: 12px;
                            }
                            .warning {
                                background: #fff3cd;
                                border: 1px solid #ffc107;
                                color: #856404;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                            }
                            .success {
                                background: #d4edda;
                                border: 1px solid #c3e6cb;
                                color: #155724;
                                padding: 15px;
                                border-radius: 5px;
                                margin: 15px 0;
                                font-size: 18px;
                                font-weight: bold;
                            }
                        </style>
                    </head>
                    <body>
                        <h2>QR Code Test - House ${R.house_id}</h2>
                        
                        <div class="qr-container">
                            <img src="${G}" style="width: 250px; height: 250px;" />
                        </div>                    
                        
                        <div style="margin: 20px;">
                            <button onclick="window.close()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Close
                            </button>
                        </div>
                    </body>
                </html>
            `)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(c1,{className:"text-purple-600 dark:text-purple-400",size:20})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Generate QR Codes"})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.name,"  Floor ",d.floor_id]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(vd,{size:12}),e.jsx("span",{children:"Scans show: House ID as Account No"})]})})]}),e.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("span",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Preview for ",n.length," house",n.length!==1?"s":""]}),g?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Generating QR codes..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(D=>e.jsxs("div",{className:"relative",children:[e.jsx(M,{house:D}),e.jsx("button",{onClick:()=>I(D.id),className:"absolute top-2 right-2 bg-blue-500 hover:bg-blue-600 text-white p-1.5 rounded text-xs transition-colors",title:"Test QR code",children:"Test QR"})]},D.id))})]})}),e.jsx("div",{className:"border-t dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Object.keys(C).length," QR code",Object.keys(C).length!==1?"s":""," ready",e.jsx("div",{className:"text-xs mt-1",children:"Scans show house ID as account number"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{disabled:g||w||!Object.keys(C).length,onClick:_,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx(At,{size:16,className:"animate-spin"}),"Generating PDF..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zh,{size:16}),"Download PDF"]})})]})]})})]})})}function L3(){const[n,c]=N.useState(!1),{apartment_id:d,floor_id:h}=ys();console.log("Apartment ID:",d),console.log("Floor Id: ",h);const[g,m]=N.useState(null),[w,j]=N.useState(null),[C,b]=N.useState([]),[S,E]=N.useState([]),[_,M]=N.useState(null),I=Gt(),[D,G]=N.useState(!1),[R,L]=N.useState(!1),[O,P]=N.useState(!1),[Q,F]=N.useState(!1),[q,Y]=N.useState(!1),[$,ce]=N.useState(null),[he,de]=N.useState(!1),[ne,J]=N.useState(null),[z,V]=N.useState("houses"),[W,se]=N.useState(null),[le,K]=N.useState(!1),[xe,Le]=N.useState(null),[ye,ie]=N.useState([]),[Re,oe]=N.useState(!1),[Ve,te]=N.useState(!1);N.useEffect(()=>{d&&(async()=>{try{const at=await me.get(`/apartments/${d}`);at.data.success&&m(at.data.data)}catch(at){console.error("Error fetching apartment:",at)}})()},[d]),N.useEffect(()=>{h&&(async()=>{try{const at=await me.get(`/floors/${h}`);at.data.success&&j(at.data.data)}catch(at){console.error("Error fetching floors:",at)}})()},[h]);const Ie=async()=>{try{L(!0),M(null);const lt=await me.get(`/housetype?apartment_id=${d}`);lt.data.success&&Array.isArray(lt.data.data)?E(lt.data.data):E([])}catch(lt){console.error("Error loading houses:",lt),M("Failed to load houses. Please try again.")}finally{L(!1)}};N.useEffect(()=>{Ie()},[d]);const $e=()=>{I(`/floors/${g.id}`)},rt=async lt=>{try{G(!0),M(null);const at=await me.get(`/houses?apartment_id=${d}&floor_id=${lt}`);at.data.success&&Array.isArray(at.data.data)?(b(at.data.data),ie([]),oe(!1)):b([])}catch(at){console.error("Error loading houses:",at),M("Failed to load houses. Please try again.")}finally{G(!1)}};N.useEffect(()=>{h&&d&&rt(h)},[h,d]);const Ke=lt=>{I(`/viewhouse/${d}/${h}/${lt.id}`)},et=()=>{P(!0)},Ne=()=>{P(!1)},We=()=>{rt(h),P(!1),re.success("House created successfully!")},Ye=lt=>{se(lt),F(!0)},Me=()=>{F(!1),se(null)},Je=()=>{rt(h),re.success("House updated successfully!")},Ee=lt=>{ce(lt),Y(!0)},be=()=>{Y(!1),ce(null)},Pe=async lt=>{try{const at=await me.patch(`/houses/${lt.id}/toggle`);re.success(at.data.message),rt(h)}catch(at){console.error("Error toggling house:",at),re.error("Failed to toggle house status")}},Bt=lt=>{J(lt),de(!0)},mt=async()=>{try{if(!ne)return;await me.delete(`/houses/${ne.id}`),re.success("House deleted successfully"),de(!1),J(null),rt(h)}catch(lt){console.error("Delete house error:",lt),re.error("Failed to delete house")}},Be=()=>{de(!1),J(null)},ot=lt=>{Le(lt),K(!0)},we=()=>{K(!1),Le(null)},Ze=()=>{re.success("House documents uploaded successfully!")},Et=lt=>{ie(at=>at.includes(lt)?at.filter(Qe=>Qe!==lt):[...at,lt])},xt=()=>{if(Re)ie([]);else{const lt=C.map(at=>at.id);ie(lt)}oe(!Re)};N.useEffect(()=>{C.length>0&&ye.length===C.length?oe(!0):oe(!1)},[ye,C]),ye.length;const Zt=()=>{if(ye.length===0){re.error("Please select at least one house to generate QR codes");return}C.filter(lt=>ye.includes(lt.id)),te(!0)},Mt=lt=>{try{return new Date(lt).toLocaleDateString()}catch{return"N/A"}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:$e,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Hs,{size:25})}),e.jsx(xa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Houses"})]}),g&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",g.name]}),w&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Floor: ",w.floor_id]})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>V("houses"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                    ${z==="houses"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Houses"}),e.jsx("button",{onClick:()=>V("houseTypes"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                    ${z==="houseTypes"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Types"})]}),z==="houses"?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:et,className:"flex items-center gap-2 mb-4 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"New House"})]}),e.jsxs("button",{onClick:Zt,disabled:ye.length===0,className:"flex items-center ml-190 gap-2 px-4 py-2 mb-4 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[e.jsx(Zh,{size:20}),e.jsxs("span",{children:["Generate QR Code (",ye.length,")"]})]})]}),ye.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[ye.length," house",ye.length!==1?"s":""," selected for QR code generation"]})}),D?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Houses..."})]}):_?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[_,e.jsx("button",{onClick:rt,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):C.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ms,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No houses found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding houses"})]}):e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"overflow-auto max-h-[500px]",children:[" ",e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:Re,onChange:xt,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created_at"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:C.map(lt=>e.jsxs("tr",{onClick:()=>lt.is_active&&Ke(lt),className:`transition-colors cursor-pointer ${lt.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsx("input",{type:"checkbox",checked:ye.includes(lt.id),onChange:at=>{at.stopPropagation(),Et(lt.id)},onClick:at=>at.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:lt.house_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:S.find(at=>at.id===lt.housetype_id)?.name||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:lt.status}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Mt(lt.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:at=>{at.stopPropagation(),ot(lt)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(qt,{size:20})}),e.jsx("button",{onClick:at=>{at.stopPropagation(),Ye(lt)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(kr,{size:20})}),e.jsx("button",{onClick:at=>{at.stopPropagation(),Ee(lt)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:lt.is_active?"Deactivate":"Activate",children:lt.is_active?e.jsx(Ld,{size:25}):e.jsx(Bd,{size:25})}),e.jsx("button",{onClick:at=>{at.stopPropagation(),Bt(lt)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:20})})]})})]},lt.id))})]})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-2 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Total: ",C.length," house",C.length!==1?"s":""]})})]})]}):e.jsx(w1,{})]})})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-5xl relative",children:[e.jsx("button",{onClick:Ne,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create Houses"}),e.jsx(n3,{onClose:Ne,onCreated:We,apartment_id:d,floor_id:h})]})}),Q&&W&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:Me,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit House"}),e.jsx(l3,{onClose:Me,onUpdated:Je,house:W,apartment_id:d,floor_id:h})]})}),q&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:$?.is_active?"Confirm Deactivation of House":"Confirm Activation of House"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:$?.is_active?"Are you sure you want to deactivate this house?":"Are you sure you want to activate this house?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:be,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:()=>{$&&(Pe($),Y(!1),ce(null))},className:`px-4 py-2 rounded-md text-white transition-colors duration-200 ${$?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:$?.is_active?"Deactivate":"Activate"})]})]})}),he&&ne&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',ne.house_id,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Be,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:mt,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),le&&xe&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:e.jsx(c3,{house:xe,apartment:g,floor:w,onClose:we,onUploadSuccess:Ze})})}),Ve&&g&&w&&e.jsx(B3,{houses:C.filter(lt=>ye.includes(lt.id)),apartment:g,floor:w,onClose:()=>te(!1)}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function P3(){const[n,c]=N.useState(""),[d,h]=N.useState(!1),g=Gt(),m=async j=>{if(j.preventDefault(),!n){re.error("Please enter your email address");return}h(!0);try{await me.post("/auth/forgot-password-unified",{email:n}),re.success(" Password reset link sent! Check your inbox."),c("")}catch(C){const b=C.response?.data?.message||"Something went wrong";re.error(b)}finally{h(!1)}},w=()=>{g("/login")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex items-center gap-3 mt-5",children:[e.jsx("button",{onClick:w,className:"flex items-center gap-2 text-white hover:text-gray-300 transition-colors",title:"Back to Login",children:e.jsx(Po,{size:20})}),e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-10 h-10"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-12 h-12"})}),e.jsx("h1",{className:"font-bold text-xl text-center mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm text-center",children:"Enter your email address and we'll send you a password reset link."}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"Enter your email address",className:"loginInput w-full",value:n,onChange:j=>c(j.target.value),required:!0,autoComplete:"email",disabled:d}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll check if you're an admin, employee, or house owner automatically."})]}),e.jsx("button",{type:"submit",className:"loginButton loginButton--submit w-full flex items-center justify-center py-3",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending Reset Link..."]}):"Send Password Reset Link"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:w,className:"text-purple-700 dark:text-purple-400 hover:underline text-center font-medium py-2",children:" Back to Login"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs text-center",children:"Don't have an account? Contact your apartment administrator."})]})})]})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function z3(){const[n,c]=N.useState(""),[d,h]=N.useState(""),[g,m]=N.useState(!1),[w,j]=N.useState(!1),[C,b]=N.useState(!1),[S]=qo(),E=Gt(),[_,M]=N.useState(null),[I,D]=N.useState(null),[G,R]=N.useState(null),[L,O]=N.useState(!0),[P,Q]=N.useState(!0),[F,q]=N.useState(""),[Y,$]=N.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1,match:!1});N.useEffect(()=>{const z=S.get("token"),V=S.get("id"),W=S.get("user_type");if(!z||!V){O(!1),Q(!1),re.error("Invalid or missing reset link parameters");return}M(z),D(V),R(W||"user"),(async()=>{try{const le=await me.post("/auth/check-reset-token",{token:z,id:V});le.data.success?(R(le.data.user_type),q(le.data.email||""),O(!0)):(O(!1),re.error(le.data.message||"Invalid reset token"))}catch(le){console.error("Error verifying token:",le),O(!1),re.error("Unable to verify reset token")}finally{Q(!1)}})()},[S]),N.useEffect(()=>{if(n){const z=/[A-Z]/.test(n),V=/[a-z]/.test(n),W=/\d/.test(n),se=/[!@#$%^&*(),.?":{}|<>]/.test(n),le=n.length>=6;$(K=>({...K,length:le,uppercase:z,lowercase:V,number:W,special:se}))}},[n]),N.useEffect(()=>{$(z=>({...z,match:n===d&&d.length>0}))},[n,d]);const ce=()=>{E("/login")},de=(()=>{if(!n)return{strength:0,label:"Very Weak",color:"bg-red-500"};let z=0;n.length>=8&&z++,/(?=.*[a-z])/.test(n)&&z++,/(?=.*[A-Z])/.test(n)&&z++,/(?=.*\d)/.test(n)&&z++,/(?=.*[@$!%*?&])/.test(n)&&z++;const V=["Very Weak","Weak","Fair","Good","Strong","Very Strong"],W=["bg-red-500","bg-red-400","bg-yellow-500","bg-green-400","bg-green-500","bg-green-600"];return{strength:z,label:V[z]||"Very Weak",color:W[z]||"bg-red-500"}})(),ne=({isValid:z,text:V})=>e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[z?e.jsx(Nr,{size:12,className:"text-green-500 flex-shrink-0"}):e.jsx(Sh,{size:12,className:"text-red-500 flex-shrink-0"}),e.jsx("span",{className:`truncate ${z?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:V})]}),J=async z=>{if(z.preventDefault(),!Object.values(Y).every(W=>W===!0)){re.error("Please meet all password requirements");return}if(!G){re.error("Unable to determine account type. Please request a new reset link.");return}b(!0);try{await me.post("/auth/reset-password-unified",{token:_,id:I,password:n,user_type:G}),re.success(" Password reset successful! Redirecting to login..."),setTimeout(()=>E("/login"),2e3)}catch(W){const se=W.response?.data?.message||"Reset failed. The link may have expired.";W.response?.status===400?se.includes("expired")?re.error("Reset link has expired. Please request a new one."):se.includes("Invalid")||se.includes("invalid")?re.error("Invalid reset link. Please request a new one."):se.includes("already used")?re.error("This reset link has already been used. Please request a new one."):re.error(se):W.response?.status===404?re.error("Account not found. The link may be invalid."):re.error(se)}finally{b(!1)}};return P?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Verifying Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm",children:"Please wait while we verify your reset link..."})]})})})}):L?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsxs("button",{onClick:ce,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(Po,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/apartment.png",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"AptSync"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fadeIn max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-5 sm:p-8",children:[G&&e.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm ${G==="houseowner"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}`,children:[e.jsx(Cm,{size:14,className:"flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate",children:G==="houseowner"?"House Owner Account":"Admin/Employee Account"}),F&&e.jsxs("span",{className:"hidden sm:inline text-xs opacity-75 ml-1 truncate",children:["(",F,")"]})]})}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Create a strong password for your account"})]}),e.jsxs("form",{onSubmit:J,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:g?"text":"password",placeholder:"Enter new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:n,onChange:z=>c(z.target.value),required:!0,autoComplete:"new-password",disabled:C}),e.jsx("button",{type:"button",onClick:()=>m(!g),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":g?"Hide password":"Show password",children:g?e.jsx(pn,{size:20}):e.jsx(gs,{size:20})})]}),n&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strength:"}),e.jsx("span",{className:`text-xs sm:text-sm font-semibold ${de.strength<2?"text-red-500":de.strength<4?"text-yellow-500":"text-green-500"}`,children:de.label})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-1.5 sm:h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${de.color}`,style:{width:`${de.strength/5*100}%`}})})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-3 text-sm",children:"Password Requirements:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 sm:gap-2",children:[e.jsx(ne,{isValid:Y.length,text:"Min 6 characters"}),e.jsx(ne,{isValid:Y.uppercase,text:"Uppercase letter"}),e.jsx(ne,{isValid:Y.lowercase,text:"Lowercase letter"}),e.jsx(ne,{isValid:Y.number,text:"Number"}),e.jsx(ne,{isValid:Y.special,text:"Special character"}),e.jsx(ne,{isValid:Y.match,text:"Passwords match"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w?"text":"password",placeholder:"Confirm new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:d,onChange:z=>h(z.target.value),required:!0,autoComplete:"new-password",disabled:C}),e.jsx("button",{type:"button",onClick:()=>j(!w),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":w?"Hide password":"Show password",children:w?e.jsx(pn,{size:20}):e.jsx(gs,{size:20})})]})]}),e.jsx("button",{type:"submit",className:"w-full px-4 py-3.5 sm:py-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium text-sm sm:text-base transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:C||!Object.values(Y).every(z=>z===!0),children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2 sm:mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Resetting Password..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Cm,{size:18,className:"mr-2 sm:mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Reset Password"})]})})]}),e.jsx("div",{className:"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:ce,className:"text-purple-600 dark:text-purple-400 hover:underline text-center text-sm py-2",children:" Back to Login"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Having trouble?"," ",e.jsx("button",{type:"button",onClick:()=>E("/forgot-password"),className:"text-blue-600 dark:text-blue-400 hover:underline font-medium text-xs",children:"Request a new reset link"})]})})]})})]})}),e.jsx("div",{className:"text-center mt-4 sm:mt-6",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," AptSync. All rights reserved."]})})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3,toastClassName:"!text-sm"})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs("button",{onClick:ce,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(Po,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx(Sh,{size:64,className:"text-red-500"}),e.jsx("h2",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:"Invalid Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm sm:text-base",children:"This password reset link is invalid or has expired."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full mt-4",children:[e.jsx("button",{onClick:()=>E("/forgot-password"),className:"px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors flex-1",children:"Request New Reset Link"}),e.jsx("button",{onClick:ce,className:"px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors flex-1",children:"Back to Login"})]})]})})]})})}function F3(){const[n]=qo(),c=Gt(),[d,h]=N.useState(""),[g,m]=N.useState(""),[w,j]=N.useState(""),[C,b]=N.useState(!0),[S,E]=N.useState(!0),[_,M]=N.useState(!1),[I,D]=N.useState(!1),[G,R]=N.useState(!1),[L,O]=N.useState({firstname:"",lastname:"",country:"",mobile:"",password:"",confirmPassword:""});N.useEffect(()=>{const F=n.get("token"),q=n.get("id");if(console.log("URL Parameters:",{token:F,id:q}),!F||!q){b(!1),E(!1),re.error("Invalid registration link - missing parameters");return}h(F),m(q),(async()=>{try{const $=await me.post("/auth/verify-invite-link",{token:F,id:q});console.log("Link verification response:",$.data),$.data.success&&(j($.data.email),b(!0))}catch($){console.error("Link verification failed:",$),b(!1),re.error($.response?.data?.message||"This invitation link is invalid or expired.")}finally{E(!1)}})()},[n]);const P=F=>{const{name:q,value:Y}=F.target;O($=>({...$,[q]:Y}))},Q=async F=>{if(F.preventDefault(),L.password!==L.confirmPassword){re.error("Passwords do not match");return}if(L.password.length<8){re.error("Password must be at least 8 characters long");return}R(!0);try{const q=await me.post("/auth/verify",{token:d,id:g});console.log("Verification response:",q.data),await me.post("/auth/complete-registration",{email:w,firstname:L.firstname,lastname:L.lastname,country:L.country,mobile:L.mobile,password:L.password}),re.success("Registration completed successfully! Redirecting to login..."),setTimeout(()=>c("/login"),2e3)}catch(q){console.error("Registration error:",q),re.error(q.response?.data?.message||"Failed to complete registration")}finally{R(!1)}};return S?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying invitation link..."})]})}):C?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-8 px-4",children:[e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>c("/login"),className:"flex items-center text-purple-600 hover:text-purple-700 transition-colors",children:[e.jsx(Po,{size:20,className:"mr-1"}),e.jsx("span",{children:"Back"})]}),e.jsx("h2",{className:"text-xl font-bold text-center flex-1 text-gray-800 dark:text-white",children:"Complete Your Registration"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Email:"})," ",w]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Please complete your profile information below."})]}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:L.firstname,onChange:P,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:L.lastname,onChange:P,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})})]}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"country",placeholder:"Country",value:L.country,onChange:P,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"tel",name:"mobile",placeholder:"Mobile Number",value:L.mobile,onChange:P,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:_?"text":"password",name:"password",placeholder:"Password (min. 8 characters)",value:L.password,onChange:P,required:!0,minLength:"8",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>M(!_),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:_?e.jsx(pn,{size:18}):e.jsx(gs,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:I?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",value:L.confirmPassword,onChange:P,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>D(!I),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:I?e.jsx(pn,{size:18}):e.jsx(gs,{size:18})})]}),e.jsx("button",{type:"submit",disabled:G,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing Registration..."]}):"Complete Registration"})]})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 text-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please contact your administrator for a new invitation."}),e.jsx("button",{onClick:()=>c("/login"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Back to Login"})]})})}function U3(){const{auth:n}=N.useContext(Ma),c=Gt(),[d,h]=N.useState([]),[g,m]=N.useState(!0),[w,j]=N.useState(null),[C,b]=N.useState(!1),[S,E]=N.useState(!1),[_,M]=N.useState(null),[I,D]=N.useState(!1),[G,R]=N.useState(null),L=P=>{c(`/bills-and-calculations/${P.id}`)},O=async()=>{try{m(!0),j(null);const P=await me.get("/apartments");console.log("API Response:",P.data),P.data.success&&Array.isArray(P.data.data)?h(P.data.data):Array.isArray(P.data)?h(P.data):(console.warn("Unexpected response format:",P.data),h([]))}catch(P){console.error("Error loading apartments:",P),P.response?.status===401?(j("Unauthorized. Please login again."),c("/login")):P.response?.status===400?j("Company information missing. Please contact support."):j("Failed to load apartments. Please try again.")}finally{m(!1)}};return N.useEffect(()=>{O()},[]),e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:setIsSidebarCollapsed}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${isSidebarCollapsed?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:g?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):w?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[w,e.jsx("button",{onClick:O,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ms,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No apartments found"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("p",{className:"mb-4 text-2xl  text-gray-600 dark:text-gray-300",children:"Select Apartment Below"}),e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((P,Q)=>e.jsxs("tr",{onClick:()=>P.is_active&&L(P),className:`transition-colors cursor-pointer ${P.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:P.picture?e.jsx("img",{src:`http://localhost:2500${P.picture}`,alt:P.name,className:"w-12 h-12 object-cover rounded-lg",onError:F=>{console.error("Image failed to load:",P.picture),F.target.style.display="none";const q=F.target.parentNode.querySelector(".image-fallback");q&&(q.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(ms,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:P.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:P.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:P.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:P.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:P.houses})]},P.id||Q))})]})]})})]})})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}const ap=(n,c=2,d="standard")=>{if(d==="ten")return Math.ceil(n/10)*10;if(d==="hundred")return Math.ceil(n/100)*100;{const h=Math.pow(10,c);return Math.ceil(n*h)/h}};function H3({onClose:n,onCreated:c,apartment_id:d}){const[h,g]=N.useState(!1),[m,w]=N.useState(!1),[j,C]=N.useState(null),[b,S]=N.useState([]),[E,_]=N.useState(""),[M,I]=N.useState(""),[D,G]=N.useState(new Date().getFullYear()),[R,L]=N.useState(new Date().toLocaleString("default",{month:"long"})),[O,P]=N.useState(0),[Q,F]=N.useState(0),[q,Y]=N.useState(!1),[$,ce]=N.useState([]),[he,de]=N.useState(!1),[ne,J]=N.useState(""),[z,V]=N.useState([]),[W,se]=N.useState(""),[le,K]=N.useState([]),[xe,Le]=N.useState([]),[ye,ie]=N.useState([]),[Re,oe]=N.useState([]),[Ve,te]=N.useState("apartment"),[Ie,$e]=N.useState("house_count"),rt=async()=>{try{g(!0),C(null);const Be=await me.get("/bills");if(Be.data.success&&Array.isArray(Be.data.data)){const ot=Be.data.data.filter(we=>we.billtype==="Shared");S(ot)}else S([])}catch(Be){console.error("Error loading bills:",Be),C("Failed to load bills. Please try again.")}finally{g(!1)}},Ke=async()=>{try{de(!0);const Be=await me.get("/apartments");Be.data.success&&ce(Be.data.data||[])}catch(Be){console.error("Error loading apartments:",Be)}finally{de(!1)}},et=async(Be,ot)=>{if(!Be||!ot){ie([]),oe([]),P(0);return}try{Y(!0);const we=await me.get(`/generate-bills/assigned-houses/details?bill_id=${Be}&apartment_id=${ot}`);if(we.data.success)if(ie(we.data.data.houses||[]),oe(we.data.data.floors||[]),P(we.data.data.houses.length),M&&we.data.data.houses.length>0){const Ze=parseFloat(M)/we.data.data.houses.length;F(Ze)}else F(0)}catch(we){console.error("Error fetching assigned houses details:",we),ie([]),oe([]),P(0)}finally{Y(!1)}};N.useEffect(()=>{rt(),Ke()},[]);const Ne=Be=>{se(Be),K([]),Le([]),Be&&E?et(E,Be):(ie([]),oe([]),P(0))},We=Be=>{_(Be),Be&&W?et(Be,W):(ie([]),oe([]),P(0))},Ye=Be=>{K(ot=>ot.includes(Be)?ot.filter(we=>we!==Be):[...ot,Be])},Me=Be=>{Le(ot=>ot.includes(Be)?ot.filter(we=>we!==Be):[...ot,Be])},Je=Be=>{const we=ye.filter(Ze=>Ze.floor_id===Be).map(Ze=>Ze.house_id);Le(Ze=>we.every(xt=>Ze.includes(xt))?Ze.filter(xt=>!we.includes(xt)):[...new Set([...Ze,...we])])},Ee=Be=>{I(Be);let ot=[];if(Ve==="apartment"?ot=ye:Ve==="floor"&&le.length>0?ot=ye.filter(we=>le.includes(we.floor_id)):Ve==="house"&&xe.length>0&&(ot=ye.filter(we=>xe.includes(we.house_id))),Be&&ot.length>0)if(Ie==="square_footage"){const we=parseFloat(Be)/ot.length,Ze=ap(we,2,"ten");F(Ze)}else{const we=parseFloat(Be)/ot.length,Ze=ap(we,2,"ten");F(Ze)}else F(0)},be=Be=>{te(Be),K([]),Le([])},Pe=async()=>{if(!E){C("Please select a bill.");return}if(!W){C("Please select an apartment.");return}if(!M||parseFloat(M)<=0){C("Please enter a valid total amount.");return}let Be=0;if(Ve==="apartment"?Be=O:Ve==="floor"?Be=le.length>0?ye.filter(we=>le.includes(we.floor_id)).length:0:Ve==="house"&&(Be=xe.length),Be===0){C("No houses selected for bill generation.");return}const ot={bill_id:E,year:D,month:R,totalAmount:parseFloat(M),apartment_id:W,selected_floors:Ve==="floor"?le:[],selected_houses:Ve==="house"?xe:[],calculation_method:Ie,due_date:ne||null};try{w(!0),C(null);let we;if(Ve==="apartment"&&Ie==="house_count"){const Ze={bill_id:E,year:D,month:R,totalAmount:parseFloat(M),assignedHouses:O,unitPrice:Q,apartment_id:W,due_date:ne||null};we=await me.post("/generate-bills",Ze)}else we=await me.post("/generate-bills/multiple",ot);if(we.data.success){if(c(we.data.data),we.data.summary&&Ie==="square_footage"){const Ze=we.data.summary;re.success("Bills generated successfully!")}}else C(we.data.message||"Failed to generate bill")}catch(we){console.error("Error generating bill:",we);const Ze=we.response?.data?.message||we.message||"Failed to generate bill. Please try again.";C(Ie==="square_footage"?`${Ze}

Please check:
1. Houses are assigned to this bill
2. Houses have house types linked
3. House types have square footage defined`:Ze)}finally{w(!1)}},Bt=()=>{const Be=b.find(ot=>ot.id===E);return Be?Be.bill_name:""},mt=()=>Ve==="apartment"?O:Ve==="floor"?ye.filter(Be=>le.includes(Be.floor_id)).length:Ve==="house"?xe.length:0;return N.useEffect(()=>{(async()=>{try{const ot=await me.get(`/housetype?apartment_id=${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});V(ot.data.data||[])}catch(ot){console.error("Error fetching house types:",ot)}})()},[d]),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2 pl-1",children:[j&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm",children:j}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Year *"}),e.jsx("select",{value:D,onChange:Be=>G(parseInt(Be.target.value)),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:[2023,2024,2025].map(Be=>e.jsx("option",{value:Be,children:Be},Be))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Month *"}),e.jsx("select",{value:R,onChange:Be=>L(Be.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(Be=>e.jsx("option",{value:Be,children:Be},Be))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:ne,onChange:Be=>J(Be.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Shared Bill *"}),e.jsxs("select",{value:E,onChange:Be=>We(Be.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:h,children:[e.jsx("option",{value:"",children:"Select a Shared Bill"}),b.map(Be=>e.jsx("option",{value:Be.id,children:Be.bill_name},Be.id))]}),h&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading bills..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Apartment *"}),e.jsxs("select",{value:W,onChange:Be=>Ne(Be.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:he,children:[e.jsx("option",{value:"",children:"Select an Apartment"}),$.map(Be=>e.jsx("option",{value:Be.id,children:Be.name},Be.id))]}),he&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Calculation Method *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"house_count",name:"calculation_method",value:"house_count",checked:Ie==="house_count",onChange:Be=>$e(Be.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"house_count",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by House Count (Equal division)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"square_footage",name:"calculation_method",value:"square_footage",checked:Ie==="square_footage",onChange:Be=>$e(Be.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"square_footage",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by Square Footage (Proportional)"})]})]}),Ie==="square_footage"&&e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Total amount will be divided proportionally based on each house's square footage"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Generation Scope"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>be("apartment"),className:`px-3 py-2 text-sm rounded-md border transition-colors ${Ve==="apartment"?"bg-purple-100 border-purple-500 text-purple-700 dark:bg-purple-900 dark:border-purple-400 dark:text-purple-300":"bg-gray-100 border-gray-300 text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:"Entire Apartment"}),e.jsx("button",{type:"button",onClick:()=>be("floor"),className:`px-3 py-2 text-sm rounded-md border transition-colors ${Ve==="floor"?"bg-blue-100 border-blue-500 text-blue-700 dark:bg-blue-900 dark:border-blue-400 dark:text-blue-300":"bg-gray-100 border-gray-300 text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:"Select Floors"}),e.jsx("button",{type:"button",onClick:()=>be("house"),className:`px-3 py-2 text-sm rounded-md border transition-colors ${Ve==="house"?"bg-green-100 border-green-500 text-green-700 dark:bg-green-900 dark:border-green-400 dark:text-green-300":"bg-gray-100 border-gray-300 text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:"Select Houses"})]})]}),Ve==="floor"&&W&&E&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Select Floors (",le.length," selected)"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-gray-50 dark:bg-gray-700",children:q?e.jsx("p",{className:"text-xs text-gray-500",children:"Loading floors..."}):Re.length===0?e.jsx("p",{className:"text-xs text-gray-500",children:"No floors found"}):Re.map(Be=>e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx("input",{type:"checkbox",id:`floor-${Be.id}`,checked:le.includes(Be.id),onChange:()=>Ye(Be.id),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsxs("label",{htmlFor:`floor-${Be.id}`,className:"text-sm text-gray-700 dark:text-gray-300",children:["Floor ",Be.floor_id," (",Be.assigned_houses_count," houses)"]})]},Be.id))})]}),Ve==="house"&&W&&E&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Select Houses (",xe.length," selected)"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-gray-50 dark:bg-gray-700",children:q?e.jsx("p",{className:"text-xs text-gray-500",children:"Loading houses..."}):ye.length===0?e.jsx("p",{className:"text-xs text-gray-500",children:"No houses found"}):Re.map(Be=>{const ot=ye.filter(we=>we.floor_id===Be.id);return ot.length===0?null:e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 py-1 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("input",{type:"checkbox",id:`floor-all-${Be.id}`,checked:ot.every(we=>xe.includes(we.house_id)),onChange:()=>Je(Be.id),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsxs("label",{htmlFor:`floor-all-${Be.id}`,className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Floor ",Be.floor_id," (",ot.length," houses)"]})]}),e.jsx("div",{className:"ml-4 mt-1 grid grid-cols-2 gap-1",children:ot.map(we=>e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx("input",{type:"checkbox",id:`house-${we.house_id}`,checked:xe.includes(we.house_id),onChange:()=>Me(we.house_id),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsxs("label",{htmlFor:`house-${we.house_id}`,className:"text-xs text-gray-600 dark:text-gray-400",children:["House ",we.house_number]})]},we.house_id))})]},Be.id)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Amount ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:M,onChange:Be=>Ee(Be.target.value),placeholder:"Enter total amount",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]}),E&&W&&mt()>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Calculation Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Calculation Method:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Ie==="house_count"?"House Count (Equal)":"Square Footage (Proportional)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Selected Bill:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Bt()})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 text-sm",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:Ve==="apartment"?"Total Houses:":Ve==="floor"?"Selected Floors:":"Selected Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:q?e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."}):Ve==="floor"?`${le.length} floors (${mt()} houses)`:mt()})]})}),M&&mt()>0&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[Ie==="house_count"?e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("p",{className:"font-medium text-green-600 dark:text-green-400",children:["$",parseFloat(M).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unit Price:"}),e.jsxs("p",{className:"font-medium text-purple-600 dark:text-purple-400",children:["$",Q.toFixed(2)]})]})]}):e.jsx("div",{children:e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amounts will be calculated proportionally based on each house's square footage"})}),Ie==="house_count"&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Calculation: $",M,"  ",mt()," houses = $",Q.toFixed(2)," per house"]})]})]}),E&&W&&!q&&mt()===0&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:Ve==="apartment"?" No houses are assigned to this bill for the selected apartment.":Ve==="floor"?" Please select at least one floor.":" Please select at least one house."})}),e.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 pt-4 pb-2 -mx-2 px-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{onClick:Pe,disabled:!E||!W||!M||mt()===0||m,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsx("span",{children:Ve==="apartment"?"Generate Bill":`Generate ${mt()} Bills`})})]})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function V3({bill:n,onClose:c,getApartmentName:d,getFloorName:h,getHouseName:g,getLocationScope:m,getLocationDisplay:w}){if(!n)return null;const j=b=>{if(!b)return"0.00";const S=typeof b=="string"?parseFloat(b):b;return isNaN(S)?"0.00":S.toFixed(2)},C=b=>{switch(b){case"House":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Floor":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Apartment":return"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Va,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bill Details"})]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx($t,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(Va,{size:16,className:"mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:n.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(Dl,{size:14,className:"inline mr-1"}),"Period"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[n.month," ",n.year]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Scope"}),e.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${C(m(n))}`,children:[m(n)," Level"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(_i,{size:16,className:"mr-2"}),"Location Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Id,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:d(n.apartment_id)})]})]}),n.floor_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xh,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Floor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:h(n.floor_id)})]})]}),n.house_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xa,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"House"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:g(n.house_id)})]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Full Location Path"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:w(n)})]})]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx($r,{size:16,className:"mr-2"}),"Financial Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.totalAmount&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["$",j(n.totalAmount)]})]}),n.unitPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Unit Price"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",j(n.unitPrice)]})]}),n.assignedHouses&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(Vs,{size:12,className:"inline mr-1"}),"Assigned Houses"]}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:n.assignedHouses})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Date"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(n.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Time"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(n.created_at).toLocaleTimeString()})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${n.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:n.totalAmount?"Calculated":"Generated"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})]})})}function q3(){const[n,c]=N.useState(!1),[d,h]=N.useState([]),[g,m]=N.useState(!1),[w,j]=N.useState(""),[C,b]=N.useState(""),[S,E]=N.useState([]),[_,M]=N.useState({}),[I,D]=N.useState({}),[G,R]=N.useState(!1),[L,O]=N.useState({}),[P,Q]=N.useState({}),[F,q]=N.useState({}),[Y,$]=N.useState({}),[ce,he]=N.useState({}),[de,ne]=N.useState(!1),[J,z]=N.useState(null),[V,W]=N.useState(!1),[se,le]=N.useState(!1),[K,xe]=N.useState(null),Le=async()=>{try{m(!0);const Ee=await me.get("/generate-bills");Ee.data.success&&(h(Ee.data.data),ye(Ee.data.data))}catch(Ee){console.error("Error loading generated bills:",Ee),re.error("Failed to load generated bills")}finally{m(!1)}},ye=async Ee=>{const be=[...new Set(Ee.map(mt=>mt.apartment_id).filter(Boolean))],Pe=[...new Set(Ee.map(mt=>mt.floor_id).filter(Boolean))],Bt=[...new Set(Ee.map(mt=>mt.house_id).filter(Boolean))];if(be.length>0)try{const mt=await me.get("/apartments");if(mt.data.success){const Be={};mt.data.data.forEach(ot=>{Be[ot.id]=ot.name}),q(Be)}}catch(mt){console.error("Error loading apartments:",mt)}for(const mt of Pe)if(mt&&!Y[mt])try{const Be=await me.get(`/floors/${mt}`);Be.data.success&&$(ot=>({...ot,[mt]:Be.data.data.floor_id}))}catch(Be){console.error("Error loading floor:",Be)}for(const mt of Bt)if(mt&&!ce[mt])try{const Be=await me.get(`/houses/${mt}`);Be.data.success&&he(ot=>({...ot,[mt]:Be.data.data.house_id}))}catch(Be){console.error("Error loading house:",Be)}},ie=Ee=>F[Ee]||Ee||"All Apartments",Re=Ee=>Y[Ee]||Ee||"All Floors",oe=Ee=>ce[Ee]||Ee||"All Houses",Ve=Ee=>Ee.house_id?"House":Ee.floor_id?"Floor":Ee.apartment_id?"Apartment":"Global",te=Ee=>{switch(Ve(Ee)){case"House":return`${ie(Ee.apartment_id)}  ${Re(Ee.floor_id)}  ${oe(Ee.house_id)}`;case"Floor":return`${ie(Ee.apartment_id)}  ${Re(Ee.floor_id)}`;case"Apartment":return ie(Ee.apartment_id);default:return"All Locations"}};N.useEffect(()=>{Le(),Me()},[]);const Ie=()=>{c(!0)},$e=()=>{c(!1)},rt=Ee=>{Ee&&Ee.length>0&&(h(be=>[...Ee,...be]),ye(Ee)),Le(),c(!1)},Ke=Ee=>{xe(Ee),le(!0)},et=()=>{le(!1),xe(null)},Ne=Ee=>{z(Ee),ne(!0)},We=async()=>{if(J)try{W(!0),(await me.delete(`/generate-bills/${J.id}`)).data.success&&(re.success("Generated bill deleted successfully"),h(be=>be.filter(Pe=>Pe.id!==J.id)))}catch(Ee){console.error("Error deleting generated bill:",Ee),re.error(Ee.response?.data?.message||"Failed to delete generated bill")}finally{W(!1),ne(!1),z(null)}},Ye=()=>{ne(!1),z(null)},Me=async()=>{try{R(!0);const Ee=await me.get("/apartments");if(Ee.data.success){E(Ee.data.data||[]);const be={};Ee.data.data.forEach(Pe=>{be[Pe.id]=Pe.name}),q(be)}}catch(Ee){console.error("Error loading apartments:",Ee),re.error("Failed to load apartments")}finally{R(!1)}},Je=d.filter(Ee=>{const be=Ee.bill_name?.toLowerCase().includes(w.toLowerCase())||Ee.month?.toLowerCase().includes(w.toLowerCase())||Ee.year?.toString().includes(w)||ie(Ee.apartment_id)?.toLowerCase().includes(w.toLowerCase())||Re(Ee.floor_id)?.toLowerCase().includes(w.toLowerCase())||oe(Ee.house_id)?.toLowerCase().includes(w.toLowerCase()),Pe=!C||Ee.billtype===C;return be&&Pe});return[...new Set(d.map(Ee=>Ee.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:w,onChange:Ee=>j(Ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]}),e.jsxs("button",{onClick:Ie,className:"flex items-center gap-2 px-4 py-2 ml-4 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Generate Bills"})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Generated Bills (",Je.length,")"]}),g?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading generated bills..."})]}):Je.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qa,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No generated bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:d.length===0?"No bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:Je.map(Ee=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:Ee.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:Ee.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[Ee.month," ",Ee.year]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${Ee.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:Ee.totalAmount?"Calculated":"Generated"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(Ee.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Ke(Ee),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(gs,{size:16})}),e.jsx("button",{onClick:()=>Ne(Ee),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",children:e.jsx(ja,{size:16})})]})]})]})})},Ee.id))})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative",children:[e.jsx("button",{onClick:$e,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Generate New Bills"}),e.jsx(H3,{onClose:$e,onCreated:rt})]})}),se&&K&&e.jsx(V3,{bill:K,onClose:et,getApartmentName:ie,getFloorName:Re,getHouseName:oe,getLocationScope:Ve,getLocationDisplay:te}),de&&J&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(ja,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Generated Bill"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete this generated bill? This action cannot be undone.",J.assignedHouses>0&&e.jsxs("span",{className:"block mt-2 text-red-600 dark:text-red-400 text-sm",children:["Warning: This bill is assigned to ",J.assignedHouses," house(s). Deleting it may affect related payments."]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium",children:J.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:J.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[J.month," ",J.year]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Ye,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:V,children:"Cancel"}),e.jsx("button",{onClick:We,disabled:V,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:V?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function G3(){const[n,c]=N.useState([]),[d,h]=N.useState(!1),[g,m]=N.useState(""),[w,j]=N.useState(""),[C,b]=N.useState([]),[S,E]=N.useState({}),[_,M]=N.useState({}),[I,D]=N.useState({}),[G,R]=N.useState({}),[L,O]=N.useState({}),[P,Q]=N.useState(!1),[F,q]=N.useState(null),[Y,$]=N.useState(!1),[ce,he]=N.useState(null),[de,ne]=N.useState(!1),J=async()=>{try{h(!0);const oe=await me.get("/generate-measurable-bills");oe.data.success&&(c(oe.data.data),z(oe.data.data))}catch(oe){console.error("Error loading measurable bills:",oe),re.error("Failed to load measurable bills")}finally{h(!1)}},z=async oe=>{const Ve=[...new Set(oe.map($e=>$e.apartment_id).filter(Boolean))],te=[...new Set(oe.map($e=>$e.floor_id).filter(Boolean))],Ie=[...new Set(oe.map($e=>$e.house_id).filter(Boolean))];if(Ve.length>0)try{const $e=await me.get("/apartments");if($e.data.success){const rt={};$e.data.data.forEach(Ke=>{rt[Ke.id]=Ke.name}),D(rt)}}catch($e){console.error("Error loading apartments:",$e)}for(const $e of te)if($e&&!G[$e])try{const rt=await me.get(`/floors/${$e}`);rt.data.success&&R(Ke=>({...Ke,[$e]:rt.data.data.floor_id}))}catch(rt){console.error("Error loading floor:",rt)}for(const $e of Ie)if($e&&!L[$e])try{const rt=await me.get(`/houses/${$e}`);rt.data.success&&O(Ke=>({...Ke,[$e]:rt.data.data.house_id}))}catch(rt){console.error("Error loading house:",rt)}},V=oe=>I[oe]||oe||"N/A",W=oe=>G[oe]||oe||"N/A",se=oe=>L[oe]||oe||"N/A",le=oe=>oe.house_id?`${V(oe.apartment_id)}  ${W(oe.floor_id)}  ${se(oe.house_id)}`:oe.floor_id?`${V(oe.apartment_id)}  ${W(oe.floor_id)}`:oe.apartment_id?V(oe.apartment_id):"Global";N.useEffect(()=>{J()},[]);const K=oe=>{he(oe),ne(!0)},xe=()=>{ne(!1),he(null)},Le=oe=>{q(oe),Q(!0)},ye=async()=>{if(F)try{$(!0),(await me.delete(`/generate-measurable-bills/${F.id}`)).data.success&&(re.success("Measurable bill deleted successfully"),c(Ve=>Ve.filter(te=>te.id!==F.id)))}catch(oe){console.error("Error deleting measurable bill:",oe),re.error(oe.response?.data?.message||"Failed to delete measurable bill")}finally{$(!1),Q(!1),q(null)}},ie=()=>{Q(!1),q(null)},Re=n.filter(oe=>{const Ve=oe.bill_name?.toLowerCase().includes(g.toLowerCase())||oe.month?.toLowerCase().includes(g.toLowerCase())||oe.year?.toString().includes(g)||V(oe.apartment_id)?.toLowerCase().includes(g.toLowerCase())||W(oe.floor_id)?.toLowerCase().includes(g.toLowerCase())||se(oe.house_id)?.toLowerCase().includes(g.toLowerCase()),te=!w||oe.billtype===w;return Ve&&te});return[...new Set(n.map(oe=>oe.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("div",{className:"flex flex-1",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:g,onChange:oe=>m(oe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]})})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:["Measurable Bills (",Re.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",Re.length," of ",n.length," bills"]})]}),d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading measurable bills..."})]}):Re.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Or,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No measurable bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n.length===0?"No measurable bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:Re.map(oe=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:oe.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type: "}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:oe.billtype||"N/A"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period: "}),e.jsxs("span",{className:"font-medium",children:[oe.month," ",oe.year]})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(oe.created_at).toLocaleDateString()," at ",new Date(oe.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>K(oe),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(gs,{size:16})}),e.jsx("button",{onClick:()=>Le(oe),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",disabled:oe.payment_status==="Paid",children:e.jsx(ja,{size:16})})]})]})]})})},oe.id))})]})]}),de&&ce&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bill Details"}),e.jsx("button",{onClick:xe,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:ce.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:ce.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Period"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[ce.month," ",ce.year]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:le(ce)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Reading Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Previous Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:ce.previous_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Current Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:ce.current_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Used Units"}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400 font-bold text-xl",children:[ce.used_units," units"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 dark:text-green-300 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-green-700 dark:text-green-300 font-bold text-2xl",children:["$",ce.totalAmount?.toFixed(2)||"0.00"]})]})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bill Reference:"}),e.jsx("span",{className:"font-mono",children:ce.id})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Generated Date:"}),e.jsx("span",{children:new Date(ce.created_at).toLocaleString()})]}),ce.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Last Updated:"}),e.jsx("span",{children:new Date(ce.updated_at).toLocaleString()})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:xe,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})})}),P&&F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(ja,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Measurable Bill"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this measurable bill? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:F.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:F.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[F.month," ",F.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["$",F.totalAmount?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ie,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:Y,children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:Y,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:Y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function Y3(){const[n,c]=N.useState(!1),[d,h]=N.useState("bills");Gt();const{apartment_id:g}=ys(),[m,w]=N.useState(null);return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Va,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>h("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                ${d==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Bill Type"}),e.jsx("button",{onClick:()=>h("generateBill"),className:`px-4 py-2 font-semibold 
                                ${d==="generateBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generate Shared Bills"}),e.jsx("button",{onClick:()=>h("measurableBill"),className:`px-4 py-2 font-semibold 
                                ${d==="measurableBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generated Measurable Bills"})]}),d==="bills"&&e.jsx(j1,{}),d==="generateBill"&&e.jsx(q3,{}),d==="measurableBill"&&e.jsx(G3,{})]})})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function X3({show:n,onClose:c,onSave:d}){const[h,g]=N.useState({fromRange:"",toRange:""});if(!n)return null;const m=j=>{const{name:C,value:b}=j.target;g(S=>({...S,[C]:b}))},w=()=>{if(!h.fromRange||!h.toRange){alert("Please fill all fields.");return}d(h)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Add Bill Range"}),e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx($t,{size:22})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",placeholder:"From Range",value:h.fromRange,onChange:m,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"}),e.jsx("input",{type:"number",name:"toRange",placeholder:"To Range",value:h.toRange,onChange:m,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 rounded-md bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{onClick:w,className:"px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"Save"})]})]})})}function $3({range:n,onClose:c,onUpdated:d}){const[h,g]=N.useState({fromRange:"",toRange:"",unitPrice:""}),[m,w]=N.useState(!1),[j,C]=N.useState(""),b=localStorage.getItem("token");N.useEffect(()=>{n&&g({fromRange:n.fromRange??"",toRange:n.toRange??"",unitPrice:n.unitPrice??""})},[n]);const S=_=>{const{name:M,value:I}=_.target;g(D=>({...D,[M]:I}))},E=async _=>{_.preventDefault(),w(!0),C("");try{const M=await me.put(`/billranges/${n.id}`,h,{headers:{Authorization:`Bearer ${b}`}});M.data.success?(d&&d(M.data.data),c&&c()):C(M.data.message||"Failed to update bill range")}catch(M){console.error("Update error:",M),C("Error updating bill range")}finally{w(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Edit Bill Range"}),j&&e.jsx("p",{className:"text-red-500",children:j}),e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",value:h.fromRange,onChange:S,placeholder:"From Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"toRange",value:h.toRange,onChange:S,placeholder:"To Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:m?"Saving...":"Save"})]})]})]})})}function Z3(){const{bill_id:n}=ys();console.log("Bill ID:",n);const[c,d]=N.useState(!1),[h,g]=N.useState(null),[m,w]=N.useState([]),[j,C]=N.useState(!1),b=Gt(),[S,E]=N.useState([]),[_,M]=N.useState(!1),[I,D]=N.useState(!1),[G,R]=N.useState(!1),[L,O]=N.useState(null),[P,Q]=N.useState(null),[F,q]=N.useState(!1),Y=async()=>{try{d(!0),g(null);const J=await me.get(`/billranges?bill_id=${n}`);if(J.data.success&&Array.isArray(J.data.data)){const z=J.data.data.filter(V=>V.bill_id===n);w(z)}else w([])}catch(J){console.error("Error loading bill ranges:",J),g("Failed to load bill ranges. Please try again.")}finally{d(!1)}};N.useEffect(()=>{Y()},[n]);const $=()=>{b("/bills-and-calculations")},ce=async()=>{try{M(!0),g(null);const J=await me.get("/bills");J.data.success&&Array.isArray(J.data.data)?E(J.data.data):E([])}catch(J){console.error("Error loading bills:",J),g("Failed to load bills. Please try again.")}finally{M(!1)}};N.useEffect(()=>{ce()},[]);const he=J=>{Q(J),q(!0)},de=async()=>{try{if(!P)return;await me.delete(`/billranges/${P.id}`),re.success("Bill range deleted successfully"),q(!1),Q(null),Y()}catch(J){console.error("Delete bill range error:",J),re.error("Failed to delete bill range")}},ne=()=>{q(!1),Q(null)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:C}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${j?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:$,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Hs,{size:25})}),e.jsx(Va,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Bill Ranges for "," ",(()=>{const J=S.find(z=>z.id===n);return J?J.bill_name:"Loading..."})()]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Set Bill Range"})]}),c?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Ranges..."})]}):h?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[h,e.jsx("button",{onClick:Y,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):m.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ms,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No bill ranges found"}),e.jsx("p",{className:"text-sm",children:"Add new ranges for this bill type"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"From Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"To Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map((J,z)=>e.jsxs("tr",{onClick:()=>b(`/billprice/${n}/${J.id}`),className:"cursor-pointer hover:bg-purple-100 dark:hover:bg-gray-700 transition",children:[e.jsx("td",{className:"px-4 py-4",children:z+1}),e.jsx("td",{className:"px-4 py-4",children:J.fromRange}),e.jsx("td",{className:"px-4 py-4",children:J.toRange}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:V=>{V.stopPropagation(),O(J),R(!0)},className:"text-green-600 hover:text-green-900",title:"Edit",children:e.jsx(kr,{size:20})}),e.jsx("button",{onClick:V=>{V.stopPropagation(),he(J)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:20})})]})})]},J.id))})]})})]})]})})]}),e.jsx(X3,{show:I,onClose:()=>D(!1),onSave:async J=>{try{(await me.post("/billranges",{...J,bill_id:n})).data.success?(re.success("Bill range added successfully!"),D(!1),Y()):re.error("Failed to add bill range.")}catch(z){console.error("Error adding bill range:",z),re.error("Error adding bill range.")}}}),G&&e.jsx($3,{range:L,onClose:()=>R(!1),onUpdated:()=>{re.success("Bill range updated!"),Y()}}),F&&P&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this bill range?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ne,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:de,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function Q3({bill_id:n,billrange_id:c,onClose:d,onCreated:h}){const[g,m]=N.useState({year:"",month:"",unitprice:"",fixedamount:""}),[w,j]=N.useState(!1),[C,b]=N.useState("");na.useEffect(()=>{console.log("CreateBillPrice props:",{bill_id:n,billrange_id:c})},[n,c]);const S=_=>{const{name:M,value:I}=_.target;m(D=>({...D,[M]:I}))},E=async _=>{_.preventDefault(),j(!0),b("");const M={...g,bill_id:n,billrange_id:c};console.log("Submitting bill price data:",M);try{const I=await me.post("/billprice",M,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});I.data.success?(h?.(I.data.data),m({year:"",month:"",unitprice:"",fixedamount:""}),d()):b(I.data.message||"Failed to save bill price")}catch(I){console.error("Error saving bill price:",I),console.error("Error response:",I.response?.data),I.response?.status===400?b(I.response.data?.message||"Bad request. Please check all required fields."):I.response?.status===403?b("Access denied. Please check your login or permissions."):b("Error saving bill price. Please try again.")}finally{j(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Create Bill Price"}),e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx($t,{size:20})})]}),C&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:C}),e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:g.year,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2000",max:"2100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:g.month,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(_=>e.jsx("option",{value:_,children:_},_))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:g.unitprice,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:g.fixedamount,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w||!n||!c,className:`px-4 py-2 rounded-lg text-white transition ${w||!n||!c?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:w?"Saving...":"Save"})]})]})]})})}function W3({bill_id:n,billrange_id:c,billPrice:d,onClose:h,onUpdated:g}){const[m,w]=N.useState({year:"",month:"",unitprice:"",fixedamount:""}),[j,C]=N.useState(!1),[b,S]=N.useState("");N.useEffect(()=>{d&&w({year:d.year||"",month:d.month||"",unitprice:d.unitprice||"",fixedamount:d.fixedamount||""})},[d]),N.useEffect(()=>{console.log("EditBillPrice props:",{bill_id:n,billrange_id:c,billPrice:d,formData:m})},[n,c,d,m]);const E=M=>{const{name:I,value:D}=M.target;w(G=>({...G,[I]:D}))},_=async M=>{if(M.preventDefault(),C(!0),S(""),!d||!d.id){S("No bill price selected for editing"),C(!1);return}const I={...m,bill_id:n,billrange_id:c,id:d.id};console.log("Updating bill price data:",I);try{const D=await me.put(`/billprice/${d.id}`,I,{headers:{"Content-Type":"application/json"}});D.data.success?(g?.(D.data.data),h()):S(D.data.message||"Failed to update bill price")}catch(D){console.error("Error updating bill price:",D),console.error("Error response:",D.response?.data),D.response?.status===400?S(D.response.data?.message||"Bad request. Please check all required fields."):D.response?.status===403?S("Access denied. Please check your login or permissions."):D.response?.status===404?S("Bill price not found. It may have been deleted."):S("Error updating bill price. Please try again.")}finally{C(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Bill Price"}),e.jsx("button",{onClick:h,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx($t,{size:20})})]}),b&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:_,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:m.year,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2000",max:"2100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:m.month,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(M=>e.jsx("option",{value:M,children:M},M))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:m.unitprice,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:m.fixedamount,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j||!n||!c||!d,className:`px-4 py-2 rounded-lg text-white transition ${j||!n||!c||!d?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:j?"Updating...":"Update"})]})]})]})})}function K3(){const{bill_id:n,billrange_id:c}=ys(),d=Gt(),[h,g]=N.useState([]),[m,w]=N.useState(!1),[j,C]=N.useState(null),[b,S]=N.useState(!1),[E,_]=N.useState(!1),[M,I]=N.useState(!1),[D,G]=N.useState(null);na.useEffect(()=>{console.log("Route parameters:",{bill_id:n,billrange_id:c})},[n,c]);const R=async()=>{try{w(!0),C(null),console.log("Loading bill prices with:",{bill_id:n,billrange_id:c});const Y=await me.get(`/billprice?bill_id=${n}&billrange_id=${c}`);console.log("API Response:",Y.data),Y.data.success?g(Y.data.data||[]):(g([]),C(Y.data.message||"Failed to load bill prices"))}catch(Y){console.error("Error loading bill prices:",Y),C(Y.response?.data?.message||"Failed to load bill prices. Please try again.")}finally{w(!1)}};N.useEffect(()=>{n&&c?R():C("Missing bill_id or billrange_id in URL parameters")},[n,c]);const L=()=>{d(-1)},O=()=>{R(),_(!1),re.success("Bill price created successfully!")},P=Y=>{G(Y),I(!0)},Q=()=>{R(),I(!1),G(null),re.success("Updated!")},F=()=>{I(!1),G(null)},q=async Y=>{if(window.confirm("Are you sure you want to delete this bill price?"))try{await me.delete(`/billprice/${Y}`),re.success("Bill price deleted successfully"),R()}catch($){console.error("Error deleting bill price:",$),re.error("Failed to delete bill price")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(ua,{onCollapse:S}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${b?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:L,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition",children:e.jsx(Hs,{size:25})}),e.jsx(qt,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Prices"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>_(!0),disabled:!n||!c,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${!n||!c?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 hover:scale-105"}`,children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Set Bill Price"})]}),m?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Prices..."})]}):j?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[j,e.jsx("button",{onClick:R,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):h.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(qt,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Bill Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new prices for this bill range."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unit Price (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fixed Amount (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.map((Y,$)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4",children:$+1}),e.jsx("td",{className:"px-4 py-4",children:Y.year}),e.jsx("td",{className:"px-4 py-4",children:Y.month}),e.jsx("td",{className:"px-4 py-4",children:Y.unitprice}),e.jsx("td",{className:"px-4 py-4",children:Y.fixedamount}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>P(Y),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(kr,{size:20})}),e.jsx("button",{onClick:()=>q(Y.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ja,{size:20})})]})})]},Y.id))})]})})]})]})})]}),E&&e.jsx(Q3,{onClose:()=>_(!1),onCreated:O,billrange_id:c,bill_id:n}),M&&D&&e.jsx(W3,{onClose:F,onUpdated:Q,billrange_id:c,bill_id:n,billPrice:D}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function J3(){const[n,c]=N.useState(!1),[d,h]=N.useState(0),[g,m]=N.useState(!0),[w,j]=N.useState({assignedApartments:0,pendingTasks:0,completedTasks:0,maintenanceRequests:0}),{auth:C}=N.useContext(Ma);N.useEffect(()=>{C?.user?.id&&(b(),S())},[C?.user?.id]);const b=async()=>{try{m(!0);const _=await me.get(`/user-apartments/users/${C.user.id}/apartments`);if(_.data.success){const M=_.data.data||[];h(M.length),j(I=>({...I,assignedApartments:M.length}))}else re.error("Failed to load assigned apartments")}catch(_){console.error("Error fetching assigned apartments:",_),re.error("Error loading assigned apartments")}finally{m(!1)}},S=async()=>{try{const _={pendingTasks:12,completedTasks:45,maintenanceRequests:8};j(M=>({...M,..._}))}catch(_){console.error("Error fetching dashboard stats:",_)}},E=_=>_.toLocaleString();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xa,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Welcome back! Here's your overview for today."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Active Apartments"}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Nr,{size:20,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white",children:E(d)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"All apartments are active"})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx(El,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs lg:text-sm text-green-500",children:"All well maintained"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assigned Apartments Summary"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View Details"})]}),d===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(nr,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Apartments Assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You haven't been assigned to any apartments yet."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:E(d)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Apartments"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:E(d)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Status"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:E(w.pendingTasks)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Tasks"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:E(w.maintenanceRequests)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Maintenance"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg p-4 mt-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Quick Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(Nr,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:["You are responsible for ",d," apartments"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Nr,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Regular inspections ensure tenant satisfaction"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Nr,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Keep track of pending tasks and maintenance requests"})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 lg:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Activity"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:d===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent activity. Start by getting assigned to apartments."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Nr,{size:16,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:["Assigned to ",d," apartments"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today  All apartments active"})]})]}),e.jsx(El,{size:16,className:"text-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(ns,{size:16,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[w.pendingTasks," pending tasks"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Requires your attention"})]})]}),e.jsx(El,{size:16,className:"text-yellow-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(Vs,{size:16,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[w.maintenanceRequests," maintenance requests"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Scheduled for this week"})]})]}),e.jsx(El,{size:16,className:"text-blue-500"})]})]})})]})]})})]}),e.jsx(Yt,{position:"top-right",autoClose:3e3})]})}function ej(){const[n,c]=N.useState(!1),[d,h]=N.useState(null),[g,m]=N.useState(!0),[w,j]=N.useState(!1),[C,b]=N.useState({firstname:"",lastname:"",country:"",mobile:""}),{auth:S}=N.useContext(Ma);N.useEffect(()=>{E()},[]);const E=async()=>{try{m(!0);const R=await me.get("/auth/me");if(R.data.success&&R.data.data&&R.data.data.length>0){const L=R.data.data[0];h(L),b({firstname:L.firstname||"",lastname:L.lastname||"",country:L.country||"",mobile:L.mobile||""})}else re.error("No profile data found")}catch(R){console.error("Error fetching profile:",R),re.error("Failed to load profile")}finally{m(!1)}},_=()=>{j(!0)},M=()=>{j(!1),d&&b({firstname:d.firstname||"",lastname:d.lastname||"",country:d.country||"",mobile:d.mobile||""})},I=async()=>{try{const R=await me.put(`/auth/users/${d.id}`,C);R.data.success&&(h(L=>({...L,...R.data.data})),j(!1),re.success("Profile updated successfully"),E())}catch(R){console.error("Error updating profile:",R),re.error(R.response?.data?.message||"Failed to update profile")}},D=R=>{const{name:L,value:O}=R.target;b(P=>({...P,[L]:O}))},G=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return g?e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):d?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(ua,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${n?"md:ml-20":"md:ml-64"}`,children:[e.jsx(ka,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cr,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Profile"})]}),w?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:M,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx($t,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:I,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(Qh,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save"})]})]}):e.jsxs("button",{onClick:_,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(kr,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsxs("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:[d.firstname?.charAt(0)?.toUpperCase(),d.lastname?.charAt(0)?.toUpperCase()]})}),e.jsxs("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:[d.firstname," ",d.lastname]}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:d.role}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Dl,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",G(d.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${d.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:d.is_verified?"Verified":"Pending Verification"})]})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"First Name"}),w?e.jsx("input",{type:"text",name:"firstname",value:C.firstname,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:d.firstname||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Name"}),w?e.jsx("input",{type:"text",name:"lastname",value:C.lastname,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:d.lastname||"Not set"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(_i,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),w?e.jsx("input",{type:"text",name:"country",value:C.country,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:d.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Zo,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),w?e.jsx("input",{type:"tel",name:"mobile",value:C.mobile,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:d.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Il,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:d.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(vd,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Role"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:d.role})]})]})]})})]})]})})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]}):e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Cr,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"})]})})}function tj(){const[n,c]=N.useState([]),[d,h]=N.useState(!0),[g,m]=N.useState(""),[w,j]=N.useState(!1),[C,b]=N.useState(!1),{auth:S}=N.useContext(Ma),E=Gt(),_=async()=>{try{h(!0);const R=await me.get(`/user-apartments/users/${S.user.id}/apartments`);R.data.success?c(R.data.data||[]):(re.error("Failed to load apartments"),c([]))}catch(R){console.error("Error fetching apartments:",R),re.error("Error loading your apartments"),c([])}finally{h(!1)}};N.useEffect(()=>{S?.user?.id&&_()},[S?.user?.id]);const M=n.filter(R=>R.name?.toLowerCase().includes(g.toLowerCase())||R.address?.toLowerCase().includes(g.toLowerCase())||R.city?.toLowerCase().includes(g.toLowerCase())),I=R=>{try{return new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},D=R=>R?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",G=R=>{E(`/floors/${R}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(ua,{onCollapse:j})}),C&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>b(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${C?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(ua,{onCollapse:j})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${w?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all apartments assigned to you"})]})})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:n.length})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(nr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all apartments assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:n.length})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Or,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:g,onChange:R=>m(R.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):M.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(nr,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:g?"No matching apartments found":"No apartments assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:g?"Try adjusting your search terms":"You have not been assigned to any apartments yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:M.map(R=>e.jsxs("div",{onClick:()=>G(R.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700 active:bg-gray-50 dark:active:bg-gray-600 cursor-pointer",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(xa,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:R.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D(R.is_active)}`,children:R.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-start space-x-2 text-gray-600 dark:text-gray-300 mb-3",children:[e.jsx(_i,{size:14,className:"mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-sm line-clamp-2",children:[R.address,", ",R.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(Vs,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:R.houses||0})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(nr,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:R.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",I(R.assigned_at)]})})]},R.id))}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(R=>e.jsxs("div",{onClick:()=>G(R.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700 cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(xa,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:R.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D(R.is_active)}`,children:R.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 mb-4",children:[e.jsx(_i,{size:16}),e.jsxs("span",{className:"text-sm",children:[R.address,", ",R.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(Vs,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:R.houses||0})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(nr,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:R.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",I(R.assigned_at)]})})]},R.id))})]})}),M.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(Or,{size:20})})})]})})]}),e.jsx(Yt,{position:"top-right",autoClose:3e3})]})}function aj({bill_id:n,onClose:c,onSuccess:d}){const[h,g]=N.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,amount:""}),[m,w]=N.useState(!1),[j,C]=N.useState({}),b=M=>{const{name:I,value:D}=M.target;g(G=>({...G,[I]:D})),j[I]&&C(G=>({...G,[I]:""}))},S=()=>{const M={};return(!h.year||h.year<2e3||h.year>2100)&&(M.year="Please enter a valid year (2000-2100)"),(!h.month||h.month<1||h.month>12)&&(M.month="Please select a valid month (1-12)"),(!h.amount||parseFloat(h.amount)<=0)&&(M.amount="Please enter a valid amount"),C(M),Object.keys(M).length===0},E=async M=>{if(M.preventDefault(),!!S())try{w(!0);const I=await me.post("/shared-value-prices",{bill_id:n,year:parseInt(h.year),month:parseInt(h.month),amount:parseFloat(h.amount)});I.data.success?d():re.error(I.data.message||"Failed to create shared value price")}catch(I){console.error("Error creating shared value price:",I),I.response?.data?.message?re.error(I.response.data.message):re.error("Failed to create shared value price")}finally{w(!1)}},_=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Set Shared Value Price"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:h.year,onChange:b,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.year?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,min:"2000",max:"2100"}),j.year&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month *"}),e.jsx("select",{name:"month",value:h.month,onChange:b,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.month?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:_.map(M=>e.jsx("option",{value:M.value,children:M.label},M.value))}),j.month&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.month})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount (LKR) *"}),e.jsx("input",{type:"number",name:"amount",value:h.amount,onChange:b,step:"0.01",min:"0",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.amount?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"0.00"}),j.amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.amount})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center space-x-2",children:[m&&e.jsx(At,{size:16,className:"animate-spin"}),e.jsx("span",{children:m?"Creating...":"Create"})]})]})]})]})})}function rj(){const{bill_id:n}=ys(),c=Gt(),[d,h]=N.useState([]),[g,m]=N.useState(null),[w,j]=N.useState(!1),[C,b]=N.useState(!1),[S,E]=N.useState(null),[_,M]=N.useState(!1),[I,D]=N.useState(!1),[G,R]=N.useState(!1),[L,O]=N.useState(null),[P,Q]=N.useState(!1),[F,q]=N.useState(null),Y=async()=>{try{b(!0);const se=await me.get(`/bills/${n}`);se.data.success&&m(se.data.data)}catch(se){console.error("Error loading bill info:",se)}finally{b(!1)}},$=async()=>{try{if(j(!0),E(null),!n){E("Bill ID is required");return}const se=await me.get(`/shared-value-prices/bill/${n}`);se.data.success?h(se.data.data||[]):(E("Failed to load shared value prices"),h([]))}catch(se){console.error("Error loading shared value prices:",se),E("Failed to load shared value prices. Please try again."),h([])}finally{j(!1)}};N.useEffect(()=>{n&&(Y(),$())},[n]);const ce=()=>{c(-1)},he=()=>{console.log("handleCreateSuccess called"),D(!1),re.success("Shared value price created successfully"),$()};N.useEffect(()=>{console.log("bill_id changed:",n),n&&(Y(),$())},[n]);const de=()=>{$(),R(!1),O(null),re.success("Shared value price updated successfully")},ne=se=>{O(se),R(!0)},J=se=>{q(se),Q(!0)},z=async()=>{try{if(!F)return;await me.delete(`/shared-value-prices/${F.id}`),re.success("Shared value price deleted successfully"),Q(!1),q(null),$()}catch(se){console.error("Delete shared value price error:",se),re.error("Failed to delete shared value price")}},V=()=>{Q(!1),q(null)},W=se=>["January","February","March","April","May","June","July","August","September","October","November","December"][se-1]||se;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(ua,{onCollapse:M}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${_?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:ce,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition mr-3",children:e.jsx(Hs,{size:25})}),e.jsx(qt,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Shared Value Bill Amounts"}),g&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[g.bill_name," - ",g.billtype]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>D(!0),disabled:!n,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${n?"bg-purple-600 hover:bg-purple-700 hover:scale-105":"bg-purple-400 cursor-not-allowed"}`,children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Set Shared Value Price"})]}),w?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Prices..."})]}):S?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[S,e.jsx("button",{onClick:$,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(qt,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Shared Value Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new shared value prices for this bill."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((se,le)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:le+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:se.year}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:W(se.month)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 dark:text-green-400",children:se.amount}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(se.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ne(se),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 transition-colors",title:"Edit",children:e.jsx(kr,{size:18})}),e.jsx("button",{onClick:()=>J(se),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete",children:e.jsx(ja,{size:18})})]})})]},se.id))})]})})]})]})})]}),I&&e.jsx(aj,{bill_id:n,onClose:()=>D(!1),onSuccess:he}),G&&L&&e.jsx(EditSharedValuePriceModal,{price:L,onClose:()=>{R(!1),O(null)},onSuccess:de}),P&&F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete the shared value price for ",W(F.month)," ",F.year,"?"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:V,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:z,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function E1({payment:n,onClose:c,onUpdate:d}){const[h,g]=N.useState({additionalAmount:0,payment_status:"Pending",paid_at:""}),[m,w]=N.useState(!1),j=!!n?.generateMeasurable_bills_id;if(N.useEffect(()=>{n&&g({additionalAmount:0,payment_status:n.payment_status||"Pending",paid_at:n.paid_at?new Date(n.paid_at).toISOString().split("T")[0]:""})},[n,j]),!n)return null;const b=j?parseFloat(n.generated_total_amount)||parseFloat(n.unitPrice)||0:parseFloat(n.unitPrice)||0,S=parseFloat(n.paidAmount)||0,E=parseFloat(n.pendingAmount)||0,_=S+parseFloat(h.additionalAmount||0),M=b-_,I=L=>{const O=typeof L=="string"?parseFloat(L):L;return isNaN(O)?"0.00":O.toFixed(2)},D=async L=>{L.preventDefault();const O=parseFloat(h.additionalAmount||0);if(O<0){re.error("Payment amount cannot be negative");return}if(O>E){re.error(`Payment amount cannot exceed pending amount of $${I(E)}`);return}let P=h.payment_status;_>=b?P="Paid":_>0?P="Partial":P="Pending";try{w(!0);const Q={payment_status:P,paidAmount:_};P==="Paid"&&h.paid_at?Q.paid_at=h.paid_at:P==="Paid"&&!h.paid_at&&(Q.paid_at=new Date().toISOString().split("T")[0]),console.log("Sending update data:",Q),console.log("Current paid:",S),console.log("Additional:",O),console.log("New total paid:",_);const F=await me.patch(`/bill-payments/${n.id}/status`,Q);F.data.success&&(re.success("Payment updated successfully"),d(F.data.data))}catch(Q){console.error("Error updating payment:",Q),console.error("Error details:",Q.response?.data),re.error(`Failed to update payment: ${Q.response?.data?.message||Q.message}`)}finally{w(!1)}},G=L=>{const O=parseFloat(L)||0,Q=Math.min(O,E),F=S+Q;let q="Pending";F>=b?q="Paid":F>0&&(q="Partial"),g(Y=>({...Y,additionalAmount:Q,payment_status:q}))},R=M<=.01;return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Va,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Update Payment"}),j&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full",children:"Measurable"})]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx($t,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[n.bill_name," (",n.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[n.apartment_name," - Floor ",n.floor_id," - House ",n.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[n.month," ",n.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Type:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:j?"Measurable Bill":"Shared Bill"})]})]})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"Current Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",I(S)]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-red-800 dark:text-red-300 text-sm font-medium",children:"Current Pending"}),e.jsxs("div",{className:"text-red-600 dark:text-red-400 text-lg font-bold",children:["$",I(E)]})]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${j?"bg-blue-50 dark:bg-blue-900/20":"bg-purple-50 dark:bg-purple-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${j?"text-blue-800 dark:text-blue-300":"text-purple-800 dark:text-purple-300"}`,children:j?"Total Amount":"Unit Price"}),e.jsxs("div",{className:`text-lg font-bold ${j?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"}`,children:["$",I(b)]}),j&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Measurable Bill - Based on consumption"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx($r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:E,value:h.additionalAmount,onChange:L=>G(L.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700 bg-gray-100",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",I(E)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["$",I(h.additionalAmount)," being paid now"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"New Total Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",I(_)]}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["(+$",I(h.additionalAmount),")"]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${M>0&&M<E?"bg-orange-50 dark:bg-orange-900/20":R?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${M>0&&M<E?"text-orange-800 dark:text-orange-300":R?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"New Pending Amount"}),e.jsxs("div",{className:`text-lg font-bold ${M>0&&M<E?"text-orange-600 dark:text-orange-400":R?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",I(M)]}),R?e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Bill will be fully paid! "}):M<E?e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:["$",I(E-M)," will be paid"]}):null]})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-50 dark:bg-gray-700",children:[e.jsx("div",{className:"text-gray-800 dark:text-gray-300 text-sm font-medium",children:"New Payment Status"}),e.jsx("div",{className:`text-lg font-bold ${h.payment_status==="Paid"?"text-green-600 dark:text-green-400":h.payment_status==="Partial"?"text-blue-600 dark:text-blue-400":"text-yellow-600 dark:text-yellow-400"}`,children:h.payment_status}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This will update automatically based on payment amount"})]}),(h.payment_status==="Paid"||R)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:h.paid_at,onChange:L=>g(O=>({...O,paid_at:L.target.value})),className:"w-full pl-10 pr-4 py-3 border  text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700",required:h.payment_status==="Paid"||R})]}),!h.paid_at&&e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"If no date is selected, current date will be used"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||h.additionalAmount<=0,className:"px-6 py-3 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($r,{size:16}),e.jsxs("span",{children:["Pay $",I(h.additionalAmount)]})]})})]})]})]})]})})}function sj(){const[n,c]=N.useState([]),[d,h]=N.useState(!1),[g,m]=N.useState({}),[w,j]=N.useState({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),[C,b]=N.useState([]),[S,E]=N.useState([]),[_,M]=N.useState([]),[I,D]=N.useState([]),[G,R]=N.useState(""),[L,O]=N.useState(!1),[P,Q]=N.useState(!1),[F,q]=N.useState(!1),[Y,$]=N.useState(!1),[ce,he]=N.useState(null),[de,ne]=N.useState(!1),[J,z]=N.useState(null),[V,W]=N.useState(!1),[se,le]=N.useState(null),K=async()=>{try{const be=await me.get("/bills");be.data.success&&D(be.data.data||[])}catch(be){console.error("Error loading bills:",be),re.error("Failed to load bills")}},xe=async()=>{try{Q(!0);const be=await me.get("/apartments");be.data.success?b(be.data.data||[]):b([])}catch(be){console.error("Error loading apartments:",be),re.error("Failed to load apartments"),b([])}finally{Q(!1)}},Le=async be=>{if(!be){E([]),M([]);return}try{q(!0);const Pe=await me.get(`/floors?apartment_id=${be}`);Pe.data.success?E(Pe.data.data||[]):E([])}catch(Pe){console.error("Error loading floors:",Pe),re.error("Failed to load floors"),E([])}finally{q(!1)}},ye=async be=>{if(!be||!w.apartment_id){M([]);return}try{$(!0);const Pe=await me.get(`/houses?floor_id=${be}&apartment_id=${w.apartment_id}`);Pe.data.success?M(Pe.data.data||[]):M([])}catch(Pe){console.error("Error loading houses:",Pe),re.error("Failed to load houses"),M([])}finally{$(!1)}},ie=async()=>{try{h(!0);const be=new URLSearchParams;Object.entries(w).forEach(([Bt,mt])=>{mt&&be.append(Bt,mt)}),console.log("Loading payments with filters:",Object.fromEntries(be));const Pe=await me.get(`/bill-payments?${be}`);Pe.data.success&&(c(Pe.data.data),console.log("Payments loaded:",Pe.data.data.length))}catch(be){console.error("Error loading payments:",be),console.error("Payment loading error details:",be.response?.data),re.error("Failed to load payments. Check console for details.")}finally{h(!1)}},Re=async()=>{try{const be=await me.get("/bill-payments/summary");if(be.data.success){const Pe={};be.data.data.forEach(Bt=>{Pe[Bt.payment_status]=Bt}),m(Pe)}}catch(be){console.error("Error loading summary:",be)}};N.useEffect(()=>{K(),xe(),Re(),ie()},[]),N.useEffect(()=>{ie()},[w]);const oe=be=>{j({billtype:be,apartment_id:"",floor_id:"",house_id:"",payment_status:w.payment_status,month:w.month,year:w.year})},Ve=be=>{j(Pe=>({...Pe,apartment_id:be,floor_id:"",house_id:""})),Le(be)},te=be=>{j(Pe=>({...Pe,floor_id:be,house_id:""})),ye(be)},Ie=be=>{j(Pe=>({...Pe,house_id:be}))},$e=(be,Pe)=>{j(Bt=>({...Bt,[be]:Pe}))},rt=be=>{le(be),W(!0)},Ke=async()=>{if(se)try{z(se.id),(await me.delete(`/bill-payments/${se.id}`)).data.success&&(re.success("Payment deleted successfully"),c(Pe=>Pe.filter(Bt=>Bt.id!==se.id)),Re())}catch(be){console.error("Error deleting payment:",be),re.error(be.response?.data?.message||"Failed to delete payment")}finally{z(null),W(!1),le(null)}},et=()=>{j({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),R(""),E([]),M([])},Ne=n.filter(be=>{const Pe=G.toLowerCase();return be.bill_name?.toLowerCase().includes(Pe)||be.apartment_name?.toLowerCase().includes(Pe)||be.house_number?.toString().includes(G)||be.month?.toLowerCase().includes(Pe)}),We=be=>{switch(be){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},Ye=["January","February","March","April","May","June","July","August","September","October","November","December"],Me=[...new Set(I.map(be=>be.billtype))].filter(be=>be),Je=()=>{ne(!1),he(null)},Ee=be=>{c(Pe=>Pe.map(Bt=>Bt.id===be.id?be:Bt)),Je(),Re()};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:O}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${L?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Va,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Review"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4 mb-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search payments...",value:G,onChange:be=>R(be.target.value),className:"w-full text-gray-700 pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsx("div",{children:e.jsxs("select",{value:w.billtype,onChange:be=>oe(be.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Bill Types"}),Me.map(be=>e.jsx("option",{value:be,children:be},be))]})}),e.jsxs("div",{children:[e.jsxs("select",{value:w.apartment_id,onChange:be=>Ve(be.target.value),disabled:P,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Apartments"}),C.map(be=>e.jsx("option",{value:be.id,children:be.name},be.id))]}),P&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:w.floor_id,onChange:be=>te(be.target.value),disabled:!w.apartment_id||F,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Floors"}),S.map(be=>e.jsxs("option",{value:be.id,children:["Floor ",be.floor_id]},be.id))]}),F&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading floors..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:w.house_id,onChange:be=>Ie(be.target.value),disabled:!w.floor_id||Y,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Houses"}),_.map(be=>e.jsxs("option",{value:be.id,children:["House ",be.house_id]},be.id))]}),Y&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading houses..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("select",{value:w.payment_status,onChange:be=>$e("payment_status",be.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Failed",children:"Failed"}),e.jsx("option",{value:"Refunded",children:"Refunded"})]})}),e.jsx("div",{children:e.jsxs("select",{value:w.month,onChange:be=>$e("month",be.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months"}),Ye.map(be=>e.jsx("option",{value:be,children:be},be))]})}),e.jsx("div",{children:e.jsx("input",{type:"number",value:w.year,onChange:be=>$e("year",be.target.value),min:"2000",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})}),e.jsx("div",{children:e.jsx("button",{onClick:et,className:"w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All Filters"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",Ne.length," of ",n.length," payments"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Od,{size:16}),e.jsxs("span",{children:[Ne.length," payments found"]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading payments..."})]}):Ne.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx($r,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No payments found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n.length===0?"No payments have been recorded yet.":"No payments match your search criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill & Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amounts"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Ne.map(be=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[be.bill_name," (",be.billtype,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Id,{size:12,className:"inline mr-1"}),be.apartment_name,e.jsx(xa,{size:12,className:"inline mx-1"}),"Floor ",be.floor_id," - House ",be.house_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[be.month," ",be.year]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",be.paidAmount]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",be.pendingAmount]}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Unit Price: $",be.unitPrice]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${We(be.payment_status)}`,children:be.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:be.paid_at?new Date(be.paid_at).toLocaleDateString():new Date(be.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("div",{className:"flex space-x-1",children:e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>rt(be),disabled:J===be.id,className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Payment",children:J===be.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(ja,{size:18})}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:["Delete Payment",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800 dark:border-t-gray-700"})]})]})})})]},be.id))})]})})})]})})]}),de&&e.jsx(E1,{payment:ce,onClose:Je,onUpdate:Ee}),V&&se&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(ja,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Payment"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this payment record? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Payment Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium",children:[se.bill_name," (",se.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium",children:[se.apartment_name," - House ",se.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["$",se.paidAmount," paid"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e.jsx("span",{className:`font-medium ${se.payment_status==="Paid"?"text-green-600":"text-yellow-600"}`,children:se.payment_status})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{W(!1),le(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:J===se.id,children:"Cancel"}),e.jsx("button",{onClick:Ke,disabled:J===se.id,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:J===se.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Payment"})]})]})})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}var nt;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nt||(nt={}));var rp=new Map([[nt.QR_CODE,"QR_CODE"],[nt.AZTEC,"AZTEC"],[nt.CODABAR,"CODABAR"],[nt.CODE_39,"CODE_39"],[nt.CODE_93,"CODE_93"],[nt.CODE_128,"CODE_128"],[nt.DATA_MATRIX,"DATA_MATRIX"],[nt.MAXICODE,"MAXICODE"],[nt.ITF,"ITF"],[nt.EAN_13,"EAN_13"],[nt.EAN_8,"EAN_8"],[nt.PDF_417,"PDF_417"],[nt.RSS_14,"RSS_14"],[nt.RSS_EXPANDED,"RSS_EXPANDED"],[nt.UPC_A,"UPC_A"],[nt.UPC_E,"UPC_E"],[nt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),sp;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(sp||(sp={}));function nj(n){return Object.values(nt).includes(n)}var Jn;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Jn||(Jn={}));var fs=function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[Jn.SCAN_TYPE_CAMERA,Jn.SCAN_TYPE_FILE],n}(),_1=function(){function n(c,d){this.format=c,this.formatName=d}return n.prototype.toString=function(){return this.formatName},n.create=function(c){if(!rp.has(c))throw"".concat(c," not in html5QrcodeSupportedFormatsTextMap");return new n(c,rp.get(c))},n}(),np=function(){function n(){}return n.createFromText=function(c){var d={text:c};return{decodedText:c,result:d}},n.createFromQrcodeResult=function(c){return{decodedText:c.text,result:c}},n}(),Bh;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Bh||(Bh={}));var T1=function(){function n(){}return n.createFrom=function(c){return{errorMessage:c,type:Bh.UNKWOWN_ERROR}},n}(),M1=function(){function n(c){this.verbose=c}return n.prototype.log=function(c){this.verbose&&console.log(c)},n.prototype.warn=function(c){this.verbose&&console.warn(c)},n.prototype.logError=function(c,d){(this.verbose||d===!0)&&console.error(c)},n.prototype.logErrors=function(c){if(c.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(c)},n}();function Us(n){return typeof n>"u"||n===null}function lj(n,c,d){return n>d?d:n<c?c:n}var Ci=function(){function n(){}return n.codeParseError=function(c){return"QR code parse error, error = ".concat(c)},n.errorGettingUserMedia=function(c){return"Error getting userMedia, error = ".concat(c)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n}(),sa=function(){function n(){}return n.scanningStatus=function(){return"Scanning"},n.idleStatus=function(){return"Idle"},n.errorStatus=function(){return"Error"},n.permissionStatus=function(){return"Permission"},n.noCameraFoundErrorStatus=function(){return"No Cameras"},n.lastMatch=function(c){return"Last Match: ".concat(c)},n.codeScannerTitle=function(){return"Code Scanner"},n.cameraPermissionTitle=function(){return"Request Camera Permissions"},n.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},n.noCameraFound=function(){return"No camera found"},n.scanButtonStopScanningText=function(){return"Stop Scanning"},n.scanButtonStartScanningText=function(){return"Start Scanning"},n.torchOnButton=function(){return"Switch On Torch"},n.torchOffButton=function(){return"Switch Off Torch"},n.torchOnFailedMessage=function(){return"Failed to turn on torch"},n.torchOffFailedMessage=function(){return"Failed to turn off torch"},n.scanButtonScanningStarting=function(){return"Launching Camera..."},n.textIfCameraScanSelected=function(){return"Scan an Image File"},n.textIfFileScanSelected=function(){return"Scan using camera directly"},n.selectCamera=function(){return"Select Camera"},n.fileSelectionChooseImage=function(){return"Choose Image"},n.fileSelectionChooseAnother=function(){return"Choose Another"},n.fileSelectionNoImageSelected=function(){return"No image choosen"},n.anonymousCameraPrefix=function(){return"Anonymous Camera"},n.dragAndDropMessage=function(){return"Or drop an image to scan"},n.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},n.zoom=function(){return"zoom"},n.loadingImage=function(){return"Loading image..."},n.cameraScanAltText=function(){return"Camera based scan"},n.fileScanAltText=function(){return"Fule based scan"},n}(),lp=function(){function n(){}return n.poweredBy=function(){return"Powered by "},n.reportIssues=function(){return"Report issues"},n}(),D1=function(){function n(){}return n.isMediaStreamConstraintsValid=function(c,d){if(typeof c!="object"){var h=typeof c;return d.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(h,"."),!0),!1}for(var g=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(g),w=Object.keys(c),j=0,C=w;j<C.length;j++){var b=C[j];if(m.has(b))return d.logError("".concat(b," is not supported videoConstaints."),!0),!1}return!0},n}(),Oo={exports:{}},ij=Oo.exports,ip;function oj(){return ip||(ip=1,function(n,c){(function(d,h){h(c)})(ij,function(d){function h(U){return U==null}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,a){U.__proto__=a}||function(U,a){for(var s in a)a.hasOwnProperty(s)&&(U[s]=a[s])};function m(U,a){g(U,a);function s(){this.constructor=U}U.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}function w(U,a){var s=Object.setPrototypeOf;s?s(U,a):U.__proto__=a}function j(U,a){a===void 0&&(a=U.constructor);var s=Error.captureStackTrace;s&&s(U,a)}var C=function(U){m(a,U);function a(s){var l=this.constructor,o=U.call(this,s)||this;return Object.defineProperty(o,"name",{value:l.name,enumerable:!1}),w(o,l.prototype),j(o),o}return a}(Error);class b extends C{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}b.kind="Exception";class S extends b{}S.kind="ArgumentException";class E extends b{}E.kind="IllegalArgumentException";class _{constructor(a){if(this.binarizer=a,a===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,s){return this.binarizer.getBlackRow(a,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,s,l,o){const u=this.binarizer.getLuminanceSource().crop(a,s,l,o);return new _(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class M extends b{static getChecksumInstance(){return new M}}M.kind="ChecksumException";class I{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(a,s,l,o,u){for(;u--;)l[o++]=a[s++]}static currentTimeMillis(){return Date.now()}}class G extends b{}G.kind="IndexOutOfBoundsException";class R extends G{constructor(a=void 0,s=void 0){super(s),this.index=a,this.message=s}}R.kind="ArrayIndexOutOfBoundsException";class L{static fill(a,s){for(let l=0,o=a.length;l<o;l++)a[l]=s}static fillWithin(a,s,l,o){L.rangeCheck(a.length,s,l);for(let u=s;u<l;u++)a[u]=o}static rangeCheck(a,s,l){if(s>l)throw new E("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new R(s);if(l>a)throw new R(l)}static asList(...a){return a}static create(a,s,l){return Array.from({length:a}).map(u=>Array.from({length:s}).fill(l))}static createInt32Array(a,s,l){return Array.from({length:a}).map(u=>Int32Array.from({length:s}).fill(l))}static equals(a,s){if(!a||!s||!a.length||!s.length||a.length!==s.length)return!1;for(let l=0,o=a.length;l<o;l++)if(a[l]!==s[l])return!1;return!0}static hashCode(a){if(a===null)return 0;let s=1;for(const l of a)s=31*s+l;return s}static fillUint8Array(a,s){for(let l=0;l!==a.length;l++)a[l]=s}static copyOf(a,s){return a.slice(0,s)}static copyOfUint8Array(a,s){if(a.length<=s){const l=new Uint8Array(s);return l.set(a),l}return a.slice(0,s)}static copyOfRange(a,s,l){const o=l-s,u=new Int32Array(o);return D.arraycopy(a,s,u,0,o),u}static binarySearch(a,s,l){l===void 0&&(l=L.numberComparator);let o=0,u=a.length-1;for(;o<=u;){const x=u+o>>1,p=l(s,a[x]);if(p>0)o=x+1;else if(p<0)u=x-1;else return x}return-o-1}static numberComparator(a,s){return a-s}}class O{static numberOfTrailingZeros(a){let s;if(a===0)return 32;let l=31;return s=a<<16,s!==0&&(l-=16,a=s),s=a<<8,s!==0&&(l-=8,a=s),s=a<<4,s!==0&&(l-=4,a=s),s=a<<2,s!==0&&(l-=2,a=s),l-(a<<1>>>31)}static numberOfLeadingZeros(a){if(a===0)return 32;let s=1;return a>>>16||(s+=16,a<<=16),a>>>24||(s+=8,a<<=8),a>>>28||(s+=4,a<<=4),a>>>30||(s+=2,a<<=2),s-=a>>>31,s}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),a=a+(a>>>4)&252645135,a=a+(a>>>8),a=a+(a>>>16),a&63}static truncDivision(a,s){return Math.trunc(a/s)}static parseInt(a,s=void 0){return parseInt(a,s)}}O.MIN_VALUE_32_BITS=-2147483648,O.MAX_VALUE=Number.MAX_SAFE_INTEGER;class P{constructor(a,s){a===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,s==null?this.bits=P.makeArray(a):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>this.bits.length*32){const s=P.makeArray(a);D.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(a){return(this.bits[Math.floor(a/32)]&1<<(a&31))!==0}set(a){this.bits[Math.floor(a/32)]|=1<<(a&31)}flip(a){this.bits[Math.floor(a/32)]^=1<<(a&31)}getNextSet(a){const s=this.size;if(a>=s)return s;const l=this.bits;let o=Math.floor(a/32),u=l[o];u&=~((1<<(a&31))-1);const x=l.length;for(;u===0;){if(++o===x)return s;u=l[o]}const p=o*32+O.numberOfTrailingZeros(u);return p>s?s:p}getNextUnset(a){const s=this.size;if(a>=s)return s;const l=this.bits;let o=Math.floor(a/32),u=~l[o];u&=~((1<<(a&31))-1);const x=l.length;for(;u===0;){if(++o===x)return s;u=~l[o]}const p=o*32+O.numberOfTrailingZeros(u);return p>s?s:p}setBulk(a,s){this.bits[Math.floor(a/32)]=s}setRange(a,s){if(s<a||a<0||s>this.size)throw new E;if(s===a)return;s--;const l=Math.floor(a/32),o=Math.floor(s/32),u=this.bits;for(let x=l;x<=o;x++){const p=x>l?0:a&31,A=(2<<(x<o?31:s&31))-(1<<p);u[x]|=A}}clear(){const a=this.bits.length,s=this.bits;for(let l=0;l<a;l++)s[l]=0}isRange(a,s,l){if(s<a||a<0||s>this.size)throw new E;if(s===a)return!0;s--;const o=Math.floor(a/32),u=Math.floor(s/32),x=this.bits;for(let p=o;p<=u;p++){const v=p>o?0:a&31,T=(2<<(p<u?31:s&31))-(1<<v)&4294967295;if((x[p]&T)!==(l?T:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(a,s){if(s<0||s>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((a>>l-1&1)===1)}appendBitArray(a){const s=a.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(a.get(l))}xor(a){if(this.size!==a.size)throw new E("Sizes don't match");const s=this.bits;for(let l=0,o=s.length;l<o;l++)s[l]^=a.bits[l]}toBytes(a,s,l,o){for(let u=0;u<o;u++){let x=0;for(let p=0;p<8;p++)this.get(a)&&(x|=1<<7-p),a++;s[l+u]=x}}getBitArray(){return this.bits}reverse(){const a=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,o=this.bits;for(let u=0;u<l;u++){let x=o[u];x=x>>1&1431655765|(x&1431655765)<<1,x=x>>2&858993459|(x&858993459)<<2,x=x>>4&252645135|(x&252645135)<<4,x=x>>8&16711935|(x&16711935)<<8,x=x>>16&65535|(x&65535)<<16,a[s-u]=x}if(this.size!==l*32){const u=l*32-this.size;let x=a[0]>>>u;for(let p=1;p<l;p++){const v=a[p];x|=v<<32-u,a[p-1]=x,x=v>>>u}a[l-1]=x}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){if(!(a instanceof P))return!1;const s=a;return this.size===s.size&&L.equals(this.bits,s.bits)}hashCode(){return 31*this.size+L.hashCode(this.bits)}toString(){let a="";for(let s=0,l=this.size;s<l;s++)(s&7)===0&&(a+=" "),a+=this.get(s)?"X":".";return a}clone(){return new P(this.size,this.bits.slice())}}var Q;(function(U){U[U.OTHER=0]="OTHER",U[U.PURE_BARCODE=1]="PURE_BARCODE",U[U.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",U[U.TRY_HARDER=3]="TRY_HARDER",U[U.CHARACTER_SET=4]="CHARACTER_SET",U[U.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",U[U.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",U[U.ASSUME_GS1=7]="ASSUME_GS1",U[U.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",U[U.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",U[U.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Q||(Q={}));var F=Q;class q extends b{static getFormatInstance(){return new q}}q.kind="FormatException";var Y;(function(U){U[U.Cp437=0]="Cp437",U[U.ISO8859_1=1]="ISO8859_1",U[U.ISO8859_2=2]="ISO8859_2",U[U.ISO8859_3=3]="ISO8859_3",U[U.ISO8859_4=4]="ISO8859_4",U[U.ISO8859_5=5]="ISO8859_5",U[U.ISO8859_6=6]="ISO8859_6",U[U.ISO8859_7=7]="ISO8859_7",U[U.ISO8859_8=8]="ISO8859_8",U[U.ISO8859_9=9]="ISO8859_9",U[U.ISO8859_10=10]="ISO8859_10",U[U.ISO8859_11=11]="ISO8859_11",U[U.ISO8859_13=12]="ISO8859_13",U[U.ISO8859_14=13]="ISO8859_14",U[U.ISO8859_15=14]="ISO8859_15",U[U.ISO8859_16=15]="ISO8859_16",U[U.SJIS=16]="SJIS",U[U.Cp1250=17]="Cp1250",U[U.Cp1251=18]="Cp1251",U[U.Cp1252=19]="Cp1252",U[U.Cp1256=20]="Cp1256",U[U.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",U[U.UTF8=22]="UTF8",U[U.ASCII=23]="ASCII",U[U.Big5=24]="Big5",U[U.GB18030=25]="GB18030",U[U.EUC_KR=26]="EUC_KR"})(Y||(Y={}));class ${constructor(a,s,l,...o){this.valueIdentifier=a,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=o,$.VALUE_IDENTIFIER_TO_ECI.set(a,this),$.NAME_TO_ECI.set(l,this);const u=this.values;for(let x=0,p=u.length;x!==p;x++){const v=u[x];$.VALUES_TO_ECI.set(v,this)}for(const x of o)$.NAME_TO_ECI.set(x,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new q("incorect value");const s=$.VALUES_TO_ECI.get(a);if(s===void 0)throw new q("incorect value");return s}static getCharacterSetECIByName(a){const s=$.NAME_TO_ECI.get(a);if(s===void 0)throw new q("incorect value");return s}equals(a){if(!(a instanceof $))return!1;const s=a;return this.getName()===s.getName()}}$.VALUE_IDENTIFIER_TO_ECI=new Map,$.VALUES_TO_ECI=new Map,$.NAME_TO_ECI=new Map,$.Cp437=new $(Y.Cp437,Int32Array.from([0,2]),"Cp437"),$.ISO8859_1=new $(Y.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),$.ISO8859_2=new $(Y.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),$.ISO8859_3=new $(Y.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),$.ISO8859_4=new $(Y.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),$.ISO8859_5=new $(Y.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),$.ISO8859_6=new $(Y.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),$.ISO8859_7=new $(Y.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),$.ISO8859_8=new $(Y.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),$.ISO8859_9=new $(Y.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),$.ISO8859_10=new $(Y.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),$.ISO8859_11=new $(Y.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),$.ISO8859_13=new $(Y.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),$.ISO8859_14=new $(Y.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),$.ISO8859_15=new $(Y.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),$.ISO8859_16=new $(Y.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),$.SJIS=new $(Y.SJIS,20,"SJIS","Shift_JIS"),$.Cp1250=new $(Y.Cp1250,21,"Cp1250","windows-1250"),$.Cp1251=new $(Y.Cp1251,22,"Cp1251","windows-1251"),$.Cp1252=new $(Y.Cp1252,23,"Cp1252","windows-1252"),$.Cp1256=new $(Y.Cp1256,24,"Cp1256","windows-1256"),$.UnicodeBigUnmarked=new $(Y.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),$.UTF8=new $(Y.UTF8,26,"UTF8","UTF-8"),$.ASCII=new $(Y.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),$.Big5=new $(Y.Big5,28,"Big5"),$.GB18030=new $(Y.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),$.EUC_KR=new $(Y.EUC_KR,30,"EUC_KR","EUC-KR");class ce extends b{}ce.kind="UnsupportedOperationException";class he{static decode(a,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(a,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(a,l):new TextDecoder(l).decode(a)}static shouldDecodeOnFallback(a){return!he.isBrowser()&&a==="ISO-8859-1"}static encode(a,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(a,l):typeof TextEncoder>"u"?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(a){return typeof a=="string"?a:a.getName()}static encodingCharacterSet(a){return a instanceof $?a:$.getCharacterSetECIByName(a)}static decodeFallback(a,s){const l=this.encodingCharacterSet(s);if(he.isDecodeFallbackSupported(l)){let o="";for(let u=0,x=a.length;u<x;u++){let p=a[u].toString(16);p.length<2&&(p="0"+p),o+="%"+p}return decodeURIComponent(o)}if(l.equals($.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new ce(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals($.UTF8)||a.equals($.ISO8859_1)||a.equals($.ASCII)}static encodeFallback(a){const l=btoa(unescape(encodeURIComponent(a))).split(""),o=[];for(let u=0;u<l.length;u++)o.push(l[u].charCodeAt(0));return new Uint8Array(o)}}class de{static castAsNonUtf8Char(a,s=null){const l=s?s.getName():this.ISO88591;return he.decode(new Uint8Array([a]),l)}static guessEncoding(a,s){if(s!=null&&s.get(F.CHARACTER_SET)!==void 0)return s.get(F.CHARACTER_SET).toString();const l=a.length;let o=!0,u=!0,x=!0,p=0,v=0,A=0,T=0,H=0,X=0,ae=0,fe=0,ge=0,je=0,_e=0;const Ge=a.length>3&&a[0]===239&&a[1]===187&&a[2]===191;for(let Xe=0;Xe<l&&(o||u||x);Xe++){const qe=a[Xe]&255;x&&(p>0?(qe&128)===0?x=!1:p--:(qe&128)!==0&&((qe&64)===0?x=!1:(p++,(qe&32)===0?v++:(p++,(qe&16)===0?A++:(p++,(qe&8)===0?T++:x=!1))))),o&&(qe>127&&qe<160?o=!1:qe>159&&(qe<192||qe===215||qe===247)&&_e++),u&&(H>0?qe<64||qe===127||qe>252?u=!1:H--:qe===128||qe===160||qe>239?u=!1:qe>160&&qe<224?(X++,fe=0,ae++,ae>ge&&(ge=ae)):qe>127?(H++,ae=0,fe++,fe>je&&(je=fe)):(ae=0,fe=0))}return x&&p>0&&(x=!1),u&&H>0&&(u=!1),x&&(Ge||v+A+T>0)?de.UTF8:u&&(de.ASSUME_SHIFT_JIS||ge>=3||je>=3)?de.SHIFT_JIS:o&&u?ge===2&&X===2||_e*10>=l?de.SHIFT_JIS:de.ISO88591:o?de.ISO88591:u?de.SHIFT_JIS:x?de.UTF8:de.PLATFORM_DEFAULT_ENCODING}static format(a,...s){let l=-1;function o(x,p,v,A,T,H){if(x==="%%")return"%";if(s[++l]===void 0)return;x=A?parseInt(A.substr(1)):void 0;let X=T?parseInt(T.substr(1)):void 0,ae;switch(H){case"s":ae=s[l];break;case"c":ae=s[l][0];break;case"f":ae=parseFloat(s[l]).toFixed(x);break;case"p":ae=parseFloat(s[l]).toPrecision(x);break;case"e":ae=parseFloat(s[l]).toExponential(x);break;case"x":ae=parseInt(s[l]).toString(X||16);break;case"d":ae=parseFloat(parseInt(s[l],X||10).toPrecision(x)).toFixed(0);break}ae=typeof ae=="object"?JSON.stringify(ae):(+ae).toString(X);let fe=parseInt(v),ge=v&&v[0]+""=="0"?"0":" ";for(;ae.length<fe;)ae=p!==void 0?ae+ge:ge+ae;return ae}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(u,o)}static getBytes(a,s){return he.encode(a,s)}static getCharCode(a,s=0){return a.charCodeAt(s)}static getCharAt(a){return String.fromCharCode(a)}}de.SHIFT_JIS=$.SJIS.getName(),de.GB2312="GB2312",de.ISO88591=$.ISO8859_1.getName(),de.EUC_JP="EUC_JP",de.UTF8=$.UTF8.getName(),de.PLATFORM_DEFAULT_ENCODING=de.UTF8,de.ASSUME_SHIFT_JIS=!1;class ne{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return typeof a=="string"?this.value+=a.toString():this.encoding?this.value+=de.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,s,l){for(let o=s;s<s+l;o++)this.append(a[o]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,s){this.value=this.value.substr(0,a)+s+this.value.substr(a+1)}substring(a,s){return this.value.substring(a,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,s){this.value=this.value.substr(0,a)+s+this.value.substr(a+s.length)}}class J{constructor(a,s,l,o){if(this.width=a,this.height=s,this.rowSize=l,this.bits=o,s==null&&(s=a),this.height=s,a<1||s<1)throw new E("Both dimensions must be greater than 0");l==null&&(l=Math.floor((a+31)/32)),this.rowSize=l,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){const s=a.length,l=a[0].length,o=new J(l,s);for(let u=0;u<s;u++){const x=a[u];for(let p=0;p<l;p++)x[p]&&o.set(p,u)}return o}static parseFromString(a,s,l){if(a===null)throw new E("stringRepresentation cannot be null");const o=new Array(a.length);let u=0,x=0,p=-1,v=0,A=0;for(;A<a.length;)if(a.charAt(A)===`
`||a.charAt(A)==="\r"){if(u>x){if(p===-1)p=u-x;else if(u-x!==p)throw new E("row lengths do not match");x=u,v++}A++}else if(a.substring(A,A+s.length)===s)A+=s.length,o[u]=!0,u++;else if(a.substring(A,A+l.length)===l)A+=l.length,o[u]=!1,u++;else throw new E("illegal character encountered: "+a.substring(A));if(u>x){if(p===-1)p=u-x;else if(u-x!==p)throw new E("row lengths do not match");v++}const T=new J(p,v);for(let H=0;H<u;H++)o[H]&&T.set(Math.floor(H%p),Math.floor(H/p));return T}get(a,s){const l=s*this.rowSize+Math.floor(a/32);return(this.bits[l]>>>(a&31)&1)!==0}set(a,s){const l=s*this.rowSize+Math.floor(a/32);this.bits[l]|=1<<(a&31)&4294967295}unset(a,s){const l=s*this.rowSize+Math.floor(a/32);this.bits[l]&=~(1<<(a&31)&4294967295)}flip(a,s){const l=s*this.rowSize+Math.floor(a/32);this.bits[l]^=1<<(a&31)&4294967295}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new E("input matrix dimensions do not match");const s=new P(Math.floor(this.width/32)+1),l=this.rowSize,o=this.bits;for(let u=0,x=this.height;u<x;u++){const p=u*l,v=a.getRow(u,s).getBitArray();for(let A=0;A<l;A++)o[p+A]^=v[A]}}clear(){const a=this.bits,s=a.length;for(let l=0;l<s;l++)a[l]=0}setRegion(a,s,l,o){if(s<0||a<0)throw new E("Left and top must be nonnegative");if(o<1||l<1)throw new E("Height and width must be at least 1");const u=a+l,x=s+o;if(x>this.height||u>this.width)throw new E("The region must fit inside the matrix");const p=this.rowSize,v=this.bits;for(let A=s;A<x;A++){const T=A*p;for(let H=a;H<u;H++)v[T+Math.floor(H/32)]|=1<<(H&31)&4294967295}}getRow(a,s){s==null||s.getSize()<this.width?s=new P(this.width):s.clear();const l=this.rowSize,o=this.bits,u=a*l;for(let x=0;x<l;x++)s.setBulk(x*32,o[u+x]);return s}setRow(a,s){D.arraycopy(s.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){const a=this.getWidth(),s=this.getHeight();let l=new P(a),o=new P(a);for(let u=0,x=Math.floor((s+1)/2);u<x;u++)l=this.getRow(u,l),o=this.getRow(s-1-u,o),l.reverse(),o.reverse(),this.setRow(u,o),this.setRow(s-1-u,l)}getEnclosingRectangle(){const a=this.width,s=this.height,l=this.rowSize,o=this.bits;let u=a,x=s,p=-1,v=-1;for(let A=0;A<s;A++)for(let T=0;T<l;T++){const H=o[A*l+T];if(H!==0){if(A<x&&(x=A),A>v&&(v=A),T*32<u){let X=0;for(;(H<<31-X&4294967295)===0;)X++;T*32+X<u&&(u=T*32+X)}if(T*32+31>p){let X=31;for(;!(H>>>X);)X--;T*32+X>p&&(p=T*32+X)}}}return p<u||v<x?null:Int32Array.from([u,x,p-u+1,v-x+1])}getTopLeftOnBit(){const a=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const o=l/a;let u=l%a*32;const x=s[l];let p=0;for(;(x<<31-p&4294967295)===0;)p++;return u+=p,Int32Array.from([u,o])}getBottomRightOnBit(){const a=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const o=Math.floor(l/a);let u=Math.floor(l%a)*32;const x=s[l];let p=31;for(;!(x>>>p);)p--;return u+=p,Int32Array.from([u,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){if(!(a instanceof J))return!1;const s=a;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&L.equals(this.bits,s.bits)}hashCode(){let a=this.width;return a=31*a+this.width,a=31*a+this.height,a=31*a+this.rowSize,a=31*a+L.hashCode(this.bits),a}toString(a="X ",s="  ",l=`
`){return this.buildToString(a,s,l)}buildToString(a,s,l){let o=new ne;for(let u=0,x=this.height;u<x;u++){for(let p=0,v=this.width;p<v;p++)o.append(this.get(p,u)?a:s);o.append(l)}return o.toString()}clone(){return new J(this.width,this.height,this.rowSize,this.bits.slice())}}class z extends b{static getNotFoundInstance(){return new z}}z.kind="NotFoundException";class V extends I{constructor(a){super(a),this.luminances=V.EMPTY,this.buckets=new Int32Array(V.LUMINANCE_BUCKETS)}getBlackRow(a,s){const l=this.getLuminanceSource(),o=l.getWidth();s==null||s.getSize()<o?s=new P(o):s.clear(),this.initArrays(o);const u=l.getRow(a,this.luminances),x=this.buckets;for(let v=0;v<o;v++)x[(u[v]&255)>>V.LUMINANCE_SHIFT]++;const p=V.estimateBlackPoint(x);if(o<3)for(let v=0;v<o;v++)(u[v]&255)<p&&s.set(v);else{let v=u[0]&255,A=u[1]&255;for(let T=1;T<o-1;T++){const H=u[T+1]&255;(A*4-v-H)/2<p&&s.set(T),v=A,A=H}}return s}getBlackMatrix(){const a=this.getLuminanceSource(),s=a.getWidth(),l=a.getHeight(),o=new J(s,l);this.initArrays(s);const u=this.buckets;for(let v=1;v<5;v++){const A=Math.floor(l*v/5),T=a.getRow(A,this.luminances),H=Math.floor(s*4/5);for(let X=Math.floor(s/5);X<H;X++){const ae=T[X]&255;u[ae>>V.LUMINANCE_SHIFT]++}}const x=V.estimateBlackPoint(u),p=a.getMatrix();for(let v=0;v<l;v++){const A=v*s;for(let T=0;T<s;T++)(p[A+T]&255)<x&&o.set(T,v)}return o}createBinarizer(a){return new V(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));const s=this.buckets;for(let l=0;l<V.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(a){const s=a.length;let l=0,o=0,u=0;for(let T=0;T<s;T++)a[T]>u&&(o=T,u=a[T]),a[T]>l&&(l=a[T]);let x=0,p=0;for(let T=0;T<s;T++){const H=T-o,X=a[T]*H*H;X>p&&(x=T,p=X)}if(o>x){const T=o;o=x,x=T}if(x-o<=s/16)throw new z;let v=x-1,A=-1;for(let T=x-1;T>o;T--){const H=T-o,X=H*H*(x-T)*(l-a[T]);X>A&&(v=T,A=X)}return v<<V.LUMINANCE_SHIFT}}V.LUMINANCE_BITS=5,V.LUMINANCE_SHIFT=8-V.LUMINANCE_BITS,V.LUMINANCE_BUCKETS=1<<V.LUMINANCE_BITS,V.EMPTY=Uint8ClampedArray.from([0]);class W extends V{constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const a=this.getLuminanceSource(),s=a.getWidth(),l=a.getHeight();if(s>=W.MINIMUM_DIMENSION&&l>=W.MINIMUM_DIMENSION){const o=a.getMatrix();let u=s>>W.BLOCK_SIZE_POWER;(s&W.BLOCK_SIZE_MASK)!==0&&u++;let x=l>>W.BLOCK_SIZE_POWER;(l&W.BLOCK_SIZE_MASK)!==0&&x++;const p=W.calculateBlackPoints(o,u,x,s,l),v=new J(s,l);W.calculateThresholdForBlock(o,u,x,s,l,p,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new W(a)}static calculateThresholdForBlock(a,s,l,o,u,x,p){const v=u-W.BLOCK_SIZE,A=o-W.BLOCK_SIZE;for(let T=0;T<l;T++){let H=T<<W.BLOCK_SIZE_POWER;H>v&&(H=v);const X=W.cap(T,2,l-3);for(let ae=0;ae<s;ae++){let fe=ae<<W.BLOCK_SIZE_POWER;fe>A&&(fe=A);const ge=W.cap(ae,2,s-3);let je=0;for(let Ge=-2;Ge<=2;Ge++){const Xe=x[X+Ge];je+=Xe[ge-2]+Xe[ge-1]+Xe[ge]+Xe[ge+1]+Xe[ge+2]}const _e=je/25;W.thresholdBlock(a,fe,H,_e,o,p)}}}static cap(a,s,l){return a<s?s:a>l?l:a}static thresholdBlock(a,s,l,o,u,x){for(let p=0,v=l*u+s;p<W.BLOCK_SIZE;p++,v+=u)for(let A=0;A<W.BLOCK_SIZE;A++)(a[v+A]&255)<=o&&x.set(s+A,l+p)}static calculateBlackPoints(a,s,l,o,u){const x=u-W.BLOCK_SIZE,p=o-W.BLOCK_SIZE,v=new Array(l);for(let A=0;A<l;A++){v[A]=new Int32Array(s);let T=A<<W.BLOCK_SIZE_POWER;T>x&&(T=x);for(let H=0;H<s;H++){let X=H<<W.BLOCK_SIZE_POWER;X>p&&(X=p);let ae=0,fe=255,ge=0;for(let _e=0,Ge=T*o+X;_e<W.BLOCK_SIZE;_e++,Ge+=o){for(let Xe=0;Xe<W.BLOCK_SIZE;Xe++){const qe=a[Ge+Xe]&255;ae+=qe,qe<fe&&(fe=qe),qe>ge&&(ge=qe)}if(ge-fe>W.MIN_DYNAMIC_RANGE)for(_e++,Ge+=o;_e<W.BLOCK_SIZE;_e++,Ge+=o)for(let Xe=0;Xe<W.BLOCK_SIZE;Xe++)ae+=a[Ge+Xe]&255}let je=ae>>W.BLOCK_SIZE_POWER*2;if(ge-fe<=W.MIN_DYNAMIC_RANGE&&(je=fe/2,A>0&&H>0)){const _e=(v[A-1][H]+2*v[A][H-1]+v[A-1][H-1])/4;fe<_e&&(je=_e)}v[A][H]=je}}return v}}W.BLOCK_SIZE_POWER=3,W.BLOCK_SIZE=1<<W.BLOCK_SIZE_POWER,W.BLOCK_SIZE_MASK=W.BLOCK_SIZE-1,W.MINIMUM_DIMENSION=W.BLOCK_SIZE*5,W.MIN_DYNAMIC_RANGE=24;class se{constructor(a,s){this.width=a,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,s,l,o){throw new ce("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ce("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ce("This luminance source does not support rotation by 45 degrees.")}toString(){const a=new Uint8ClampedArray(this.width);let s=new ne;for(let l=0;l<this.height;l++){const o=this.getRow(l,a);for(let u=0;u<this.width;u++){const x=o[u]&255;let p;x<64?p="#":x<128?p="+":x<192?p=".":p=" ",s.append(p)}s.append(`
`)}return s.toString()}}class le extends se{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,s){const l=this.delegate.getRow(a,s),o=this.getWidth();for(let u=0;u<o;u++)l[u]=255-(l[u]&255);return l}getMatrix(){const a=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let o=0;o<s;o++)l[o]=255-(a[o]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(a,s,l,o){return new le(this.delegate.crop(a,s,l,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new le(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new le(this.delegate.rotateCounterClockwise45())}}class K extends se{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=K.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){const s=a.getContext("2d").getImageData(0,0,a.width,a.height);return K.toGrayscaleBuffer(s.data,a.width,a.height)}static toGrayscaleBuffer(a,s,l){const o=new Uint8ClampedArray(s*l);for(let u=0,x=0,p=a.length;u<p;u+=4,x++){let v;if(a[u+3]===0)v=255;else{const T=a[u],H=a[u+1],X=a[u+2];v=306*T+601*H+117*X+512>>10}o[x]=v}return o}getRow(a,s){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const l=this.getWidth(),o=a*l;return s===null?s=this.buffer.slice(o,o+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(o,o+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,s,l,o){return super.crop(a,s,l,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){const s=this.getTempCanvasElement(),l=s.getContext("2d"),o=a*K.DEGREE_TO_RADIANS,u=this.canvas.width,x=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(o))*u+Math.abs(Math.sin(o))*x),v=Math.ceil(Math.abs(Math.sin(o))*u+Math.abs(Math.cos(o))*x);return s.width=p,s.height=v,l.translate(p/2,v/2),l.rotate(o),l.drawImage(this.canvas,u/-2,x/-2),this.buffer=K.makeBufferFromCanvasImageData(s),this}invert(){return new le(this)}}K.DEGREE_TO_RADIANS=Math.PI/180;class xe{constructor(a,s,l){this.deviceId=a,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Le=(globalThis||od||self||window||void 0)&&(globalThis||od||self||window||void 0).__awaiter||function(U,a,s,l){function o(u){return u instanceof s?u:new s(function(x){x(u)})}return new(s||(s=Promise))(function(u,x){function p(T){try{A(l.next(T))}catch(H){x(H)}}function v(T){try{A(l.throw(T))}catch(H){x(H)}}function A(T){T.done?u(T.value):o(T.value).then(p,v)}A((l=l.apply(U,a||[])).next())})};class ye{constructor(a,s=500,l){this.reader=a,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return Le(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const a=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of a){const o=l.kind==="video"?"videoinput":l.kind;if(o!=="videoinput")continue;const u=l.deviceId||l.id,x=l.label||`Video device ${s.length+1}`,p=l.groupId,v={deviceId:u,label:x,kind:o,groupId:p};s.push(v)}return s})}getVideoInputDevices(){return Le(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new xe(s.deviceId,s.label))})}findDeviceById(a){return Le(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===a):null})}decodeFromInputVideoDevice(a,s){return Le(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,s)})}decodeOnceFromVideoDevice(a,s){return Le(this,void 0,void 0,function*(){this.reset();let l;a?l={deviceId:{exact:a}}:l={facingMode:"environment"};const o={video:l};return yield this.decodeOnceFromConstraints(o,s)})}decodeOnceFromConstraints(a,s){return Le(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(a,s){return Le(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(a,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(a,s,l){return Le(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,s,l)})}decodeFromVideoDevice(a,s,l){return Le(this,void 0,void 0,function*(){let o;a?o={deviceId:{exact:a}}:o={facingMode:"environment"};const u={video:o};return yield this.decodeFromConstraints(u,s,l)})}decodeFromConstraints(a,s,l){return Le(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(o,s,l)})}decodeFromStream(a,s,l){return Le(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(a,s);return yield this.decodeContinuously(o,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,s){return Le(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,a),this.videoElement=l,this.stream=a,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(a){return new Promise((s,l)=>this.playVideoOnLoad(a,()=>s()))}playVideoOnLoad(a,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",s),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return Le(this,void 0,void 0,function*(){if(this.isVideoPlaying(a)){console.warn("Trying to play video that is already playing.");return}try{yield a.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(a,s){const l=document.getElementById(a);if(!l)throw new S(`element with id '${a}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new S(`element with id '${a}' must be an ${s} element`);return l}decodeFromImage(a,s){if(!a&&!s)throw new S("either imageElement with a src set or an url must be provided");return s&&!a?this.decodeFromImageUrl(s):this.decodeFromImageElement(a)}decodeFromVideo(a,s){if(!a&&!s)throw new S("Either an element with a src set or an URL must be provided");return s&&!a?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,s,l){if(a===void 0&&s===void 0)throw new S("Either an element with a src set or an URL must be provided");return s&&!a?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(a,l)}decodeFromImageElement(a){if(!a)throw new S("An image element must be provided.");this.reset();const s=this.prepareImageElement(a);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(a){const s=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(a,s){const l=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(a){if(!a)throw new S("A video element must be provided.");this.reset();const s=this.prepareVideoElement(a);return this.videoElement=s,s}decodeFromImageUrl(a){if(!a)throw new S("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=a,l}decodeFromVideoUrl(a){if(!a)throw new S("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=a,l}decodeFromVideoUrlContinuously(a,s){if(!a)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(l,s);return l.src=a,o}_decodeOnLoadImage(a){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(s,l),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return Le(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,s){return Le(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,s)})}isImageLoaded(a){return!(!a.complete||a.naturalWidth===0)}prepareImageElement(a){let s;return typeof a>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof a=="string"&&(s=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(s=a),s}prepareVideoElement(a){let s;return!a&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof a=="string"&&(s=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(s=a),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(a,s=!0,l=!0){this._stopAsyncDecode=!1;const o=(u,x)=>{if(this._stopAsyncDecode){x(new z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(a);u(p)}catch(p){const v=s&&p instanceof z,T=(p instanceof M||p instanceof q)&&l;if(v||T)return setTimeout(o,this._timeBetweenDecodingAttempts,u,x);x(p)}};return new Promise((u,x)=>o(u,x))}decodeContinuously(a,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(a);s(o,null),setTimeout(l,this.timeBetweenScansMillis)}catch(o){s(null,o);const u=o instanceof M||o instanceof q,x=o instanceof z;(u||x)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(a){const s=this.createBinaryBitmap(a);return this.decodeBitmap(s)}_isHTMLVideoElement(a){return a.videoWidth!==0}drawFrameOnCanvas(a,s,l){s||(s={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(a,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(a,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(a,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(a){this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a);const s=this.getCaptureCanvas(a),l=new K(s),o=new W(l);return new _(o)}getCaptureCanvasContext(a){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){const s=this.createCaptureCanvas(a);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,o;return typeof a<"u"&&(a instanceof HTMLVideoElement?(l=a.videoWidth,o=a.videoHeight):a instanceof HTMLImageElement&&(l=a.naturalWidth||a.width,o=a.naturalHeight||a.height)),s.style.width=l+"px",s.style.height=o+"px",s.width=l,s.height=o,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,s){try{a.srcObject=s}catch{a.src=URL.createObjectURL(s)}}cleanVideoSource(a){try{a.srcObject=null}catch{a.src=""}this.videoElement.removeAttribute("src")}}class ie{constructor(a,s,l=s==null?0:8*s.length,o,u,x=D.currentTimeMillis()){this.text=a,this.rawBytes=s,this.numBits=l,this.resultPoints=o,this.format=u,this.timestamp=x,this.text=a,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=o,this.format=u,this.resultMetadata=null,x==null?this.timestamp=D.currentTimeMillis():this.timestamp=x}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(a,s)}putAllMetadata(a){a!==null&&(this.resultMetadata===null?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){const s=this.resultPoints;if(s===null)this.resultPoints=a;else if(a!==null&&a.length>0){const l=new Array(s.length+a.length);D.arraycopy(s,0,l,0,s.length),D.arraycopy(a,0,l,s.length,a.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Re;(function(U){U[U.AZTEC=0]="AZTEC",U[U.CODABAR=1]="CODABAR",U[U.CODE_39=2]="CODE_39",U[U.CODE_93=3]="CODE_93",U[U.CODE_128=4]="CODE_128",U[U.DATA_MATRIX=5]="DATA_MATRIX",U[U.EAN_8=6]="EAN_8",U[U.EAN_13=7]="EAN_13",U[U.ITF=8]="ITF",U[U.MAXICODE=9]="MAXICODE",U[U.PDF_417=10]="PDF_417",U[U.QR_CODE=11]="QR_CODE",U[U.RSS_14=12]="RSS_14",U[U.RSS_EXPANDED=13]="RSS_EXPANDED",U[U.UPC_A=14]="UPC_A",U[U.UPC_E=15]="UPC_E",U[U.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Re||(Re={}));var oe=Re,Ve;(function(U){U[U.OTHER=0]="OTHER",U[U.ORIENTATION=1]="ORIENTATION",U[U.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",U[U.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",U[U.ISSUE_NUMBER=4]="ISSUE_NUMBER",U[U.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",U[U.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",U[U.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",U[U.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",U[U.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",U[U.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ve||(Ve={}));var te=Ve;class Ie{constructor(a,s,l,o,u=-1,x=-1){this.rawBytes=a,this.text=s,this.byteSegments=l,this.ecLevel=o,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=x,this.numBits=a==null?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class $e{exp(a){return this.expTable[a]}log(a){if(a===0)throw new E;return this.logTable[a]}static addOrSubtract(a,s){return a^s}}class rt{constructor(a,s){if(s.length===0)throw new E;this.field=a;const l=s.length;if(l>1&&s[0]===0){let o=1;for(;o<l&&s[o]===0;)o++;o===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-o),D.arraycopy(s,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(a===1){l=0;for(let x=0,p=s.length;x!==p;x++){const v=s[x];l=$e.addOrSubtract(l,v)}return l}l=s[0];const o=s.length,u=this.field;for(let x=1;x<o;x++)l=$e.addOrSubtract(u.multiply(a,l),s[x]);return l}addOrSubtract(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let s=this.coefficients,l=a.coefficients;if(s.length>l.length){const x=s;s=l,l=x}let o=new Int32Array(l.length);const u=l.length-s.length;D.arraycopy(l,0,o,0,u);for(let x=u;x<l.length;x++)o[x]=$e.addOrSubtract(s[x-u],l[x]);return new rt(this.field,o)}multiply(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,o=a.coefficients,u=o.length,x=new Int32Array(l+u-1),p=this.field;for(let v=0;v<l;v++){const A=s[v];for(let T=0;T<u;T++)x[v+T]=$e.addOrSubtract(x[v+T],p.multiply(A,o[T]))}return new rt(p,x)}multiplyScalar(a){if(a===0)return this.field.getZero();if(a===1)return this;const s=this.coefficients.length,l=this.field,o=new Int32Array(s),u=this.coefficients;for(let x=0;x<s;x++)o[x]=l.multiply(u[x],a);return new rt(l,o)}multiplyByMonomial(a,s){if(a<0)throw new E;if(s===0)return this.field.getZero();const l=this.coefficients,o=l.length,u=new Int32Array(o+a),x=this.field;for(let p=0;p<o;p++)u[p]=x.multiply(l[p],s);return new rt(x,u)}divide(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new E("Divide by 0");const s=this.field;let l=s.getZero(),o=this;const u=a.getCoefficient(a.getDegree()),x=s.inverse(u);for(;o.getDegree()>=a.getDegree()&&!o.isZero();){const p=o.getDegree()-a.getDegree(),v=s.multiply(o.getCoefficient(o.getDegree()),x),A=a.multiplyByMonomial(p,v),T=s.buildMonomial(p,v);l=l.addOrSubtract(T),o=o.addOrSubtract(A)}return[l,o]}toString(){let a="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(a+=" - ",l=-l):a.length>0&&(a+=" + "),s===0||l!==1){const o=this.field.log(l);o===0?a+="1":o===1?a+="a":(a+="a^",a+=o)}s!==0&&(s===1?a+="x":(a+="x^",a+=s))}}return a}}class Ke extends b{}Ke.kind="ArithmeticException";class et extends $e{constructor(a,s,l){super(),this.primitive=a,this.size=s,this.generatorBase=l;const o=new Int32Array(s);let u=1;for(let p=0;p<s;p++)o[p]=u,u*=2,u>=s&&(u^=a,u&=s-1);this.expTable=o;const x=new Int32Array(s);for(let p=0;p<s-1;p++)x[o[p]]=p;this.logTable=x,this.zero=new rt(this,Int32Array.from([0])),this.one=new rt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,s){if(a<0)throw new E;if(s===0)return this.zero;const l=new Int32Array(a+1);return l[0]=s,new rt(this,l)}inverse(a){if(a===0)throw new Ke;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,s){return a===0||s===0?0:this.expTable[(this.logTable[a]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+O.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}et.AZTEC_DATA_12=new et(4201,4096,1),et.AZTEC_DATA_10=new et(1033,1024,1),et.AZTEC_DATA_6=new et(67,64,1),et.AZTEC_PARAM=new et(19,16,1),et.QR_CODE_FIELD_256=new et(285,256,0),et.DATA_MATRIX_FIELD_256=new et(301,256,1),et.AZTEC_DATA_8=et.DATA_MATRIX_FIELD_256,et.MAXICODE_FIELD_64=et.AZTEC_DATA_6;class Ne extends b{}Ne.kind="ReedSolomonException";class We extends b{}We.kind="IllegalStateException";class Ye{constructor(a){this.field=a}decode(a,s){const l=this.field,o=new rt(l,a),u=new Int32Array(s);let x=!0;for(let ae=0;ae<s;ae++){const fe=o.evaluateAt(l.exp(ae+l.getGeneratorBase()));u[u.length-1-ae]=fe,fe!==0&&(x=!1)}if(x)return;const p=new rt(l,u),v=this.runEuclideanAlgorithm(l.buildMonomial(s,1),p,s),A=v[0],T=v[1],H=this.findErrorLocations(A),X=this.findErrorMagnitudes(T,H);for(let ae=0;ae<H.length;ae++){const fe=a.length-1-l.log(H[ae]);if(fe<0)throw new Ne("Bad error location");a[fe]=et.addOrSubtract(a[fe],X[ae])}}runEuclideanAlgorithm(a,s,l){if(a.getDegree()<s.getDegree()){const ae=a;a=s,s=ae}const o=this.field;let u=a,x=s,p=o.getZero(),v=o.getOne();for(;x.getDegree()>=(l/2|0);){let ae=u,fe=p;if(u=x,p=v,u.isZero())throw new Ne("r_{i-1} was zero");x=ae;let ge=o.getZero();const je=u.getCoefficient(u.getDegree()),_e=o.inverse(je);for(;x.getDegree()>=u.getDegree()&&!x.isZero();){const Ge=x.getDegree()-u.getDegree(),Xe=o.multiply(x.getCoefficient(x.getDegree()),_e);ge=ge.addOrSubtract(o.buildMonomial(Ge,Xe)),x=x.addOrSubtract(u.multiplyByMonomial(Ge,Xe))}if(v=ge.multiply(p).addOrSubtract(fe),x.getDegree()>=u.getDegree())throw new We("Division algorithm failed to reduce polynomial?")}const A=v.getCoefficient(0);if(A===0)throw new Ne("sigmaTilde(0) was zero");const T=o.inverse(A),H=v.multiplyScalar(T),X=x.multiplyScalar(T);return[H,X]}findErrorLocations(a){const s=a.getDegree();if(s===1)return Int32Array.from([a.getCoefficient(1)]);const l=new Int32Array(s);let o=0;const u=this.field;for(let x=1;x<u.getSize()&&o<s;x++)a.evaluateAt(x)===0&&(l[o]=u.inverse(x),o++);if(o!==s)throw new Ne("Error locator degree does not match number of roots");return l}findErrorMagnitudes(a,s){const l=s.length,o=new Int32Array(l),u=this.field;for(let x=0;x<l;x++){const p=u.inverse(s[x]);let v=1;for(let A=0;A<l;A++)if(x!==A){const T=u.multiply(s[A],p),H=(T&1)===0?T|1:T&-2;v=u.multiply(v,H)}o[x]=u.multiply(a.evaluateAt(p),u.inverse(v)),u.getGeneratorBase()!==0&&(o[x]=u.multiply(o[x],p))}return o}}var Me;(function(U){U[U.UPPER=0]="UPPER",U[U.LOWER=1]="LOWER",U[U.MIXED=2]="MIXED",U[U.DIGIT=3]="DIGIT",U[U.PUNCT=4]="PUNCT",U[U.BINARY=5]="BINARY"})(Me||(Me={}));class Je{decode(a){this.ddata=a;let s=a.getBits(),l=this.extractBits(s),o=this.correctBits(l),u=Je.convertBoolArrayToByteArray(o),x=Je.getEncodedData(o),p=new Ie(u,x,null,null);return p.setNumBits(o.length),p}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let s=a.length,l=Me.UPPER,o=Me.UPPER,u="",x=0;for(;x<s;)if(o===Me.BINARY){if(s-x<5)break;let p=Je.readCode(a,x,5);if(x+=5,p===0){if(s-x<11)break;p=Je.readCode(a,x,11)+31,x+=11}for(let v=0;v<p;v++){if(s-x<8){x=s;break}const A=Je.readCode(a,x,8);u+=de.castAsNonUtf8Char(A),x+=8}o=l}else{let p=o===Me.DIGIT?4:5;if(s-x<p)break;let v=Je.readCode(a,x,p);x+=p;let A=Je.getCharacter(o,v);A.startsWith("CTRL_")?(l=o,o=Je.getTable(A.charAt(5)),A.charAt(6)==="L"&&(l=o)):(u+=A,o=l)}return u}static getTable(a){switch(a){case"L":return Me.LOWER;case"P":return Me.PUNCT;case"M":return Me.MIXED;case"D":return Me.DIGIT;case"B":return Me.BINARY;case"U":default:return Me.UPPER}}static getCharacter(a,s){switch(a){case Me.UPPER:return Je.UPPER_TABLE[s];case Me.LOWER:return Je.LOWER_TABLE[s];case Me.MIXED:return Je.MIXED_TABLE[s];case Me.PUNCT:return Je.PUNCT_TABLE[s];case Me.DIGIT:return Je.DIGIT_TABLE[s];default:throw new We("Bad table")}}correctBits(a){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=et.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=et.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=et.AZTEC_DATA_10):(l=12,s=et.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),u=a.length/l;if(u<o)throw new q;let x=a.length%l,p=new Int32Array(u);for(let X=0;X<u;X++,x+=l)p[X]=Je.readCode(a,x,l);try{new Ye(s).decode(p,u-o)}catch(X){throw new q(X)}let v=(1<<l)-1,A=0;for(let X=0;X<o;X++){let ae=p[X];if(ae===0||ae===v)throw new q;(ae===1||ae===v-1)&&A++}let T=new Array(o*l-A),H=0;for(let X=0;X<o;X++){let ae=p[X];if(ae===1||ae===v-1)T.fill(ae>1,H,H+l-1),H+=l-1;else for(let fe=l-1;fe>=0;--fe)T[H++]=(ae&1<<fe)!==0}return T}extractBits(a){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),o=(s?11:14)+l*4,u=new Int32Array(o),x=new Array(this.totalBitsInLayer(l,s));if(s)for(let p=0;p<u.length;p++)u[p]=p;else{let p=o+1+2*O.truncDivision(O.truncDivision(o,2)-1,15),v=o/2,A=O.truncDivision(p,2);for(let T=0;T<v;T++){let H=T+O.truncDivision(T,15);u[v-T-1]=A-H-1,u[v+T]=A+H+1}}for(let p=0,v=0;p<l;p++){let A=(l-p)*4+(s?9:12),T=p*2,H=o-1-T;for(let X=0;X<A;X++){let ae=X*2;for(let fe=0;fe<2;fe++)x[v+ae+fe]=a.get(u[T+fe],u[T+X]),x[v+2*A+ae+fe]=a.get(u[T+X],u[H-fe]),x[v+4*A+ae+fe]=a.get(u[H-fe],u[H-X]),x[v+6*A+ae+fe]=a.get(u[H-X],u[T+fe])}v+=A*8}return x}static readCode(a,s,l){let o=0;for(let u=s;u<s+l;u++)o<<=1,a[u]&&(o|=1);return o}static readByte(a,s){let l=a.length-s;return l>=8?Je.readCode(a,s,8):Je.readCode(a,s,l)<<8-l}static convertBoolArrayToByteArray(a){let s=new Uint8Array((a.length+7)/8);for(let l=0;l<s.length;l++)s[l]=Je.readByte(a,8*l);return s}totalBitsInLayer(a,s){return((s?88:112)+16*a)*a}}Je.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Je.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Je.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Je.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Je.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ee{constructor(){}static round(a){return a===NaN?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,s,l,o){const u=a-l,x=s-o;return Math.sqrt(u*u+x*x)}static sum(a){let s=0;for(let l=0,o=a.length;l!==o;l++){const u=a[l];s+=u}return s}}class be{static floatToIntBits(a){return a}}be.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(a,s){this.x=a,this.y=s}getX(){return this.x}getY(){return this.y}equals(a){if(a instanceof Pe){const s=a;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*be.floatToIntBits(this.x)+be.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){const s=this.distance(a[0],a[1]),l=this.distance(a[1],a[2]),o=this.distance(a[0],a[2]);let u,x,p;if(l>=s&&l>=o?(x=a[0],u=a[1],p=a[2]):o>=l&&o>=s?(x=a[1],u=a[0],p=a[2]):(x=a[2],u=a[0],p=a[1]),this.crossProductZ(u,x,p)<0){const v=u;u=p,p=v}a[0]=u,a[1]=x,a[2]=p}static distance(a,s){return Ee.distance(a.x,a.y,s.x,s.y)}static crossProductZ(a,s,l){const o=s.x,u=s.y;return(l.x-o)*(a.y-u)-(l.y-u)*(a.x-o)}}class Bt{constructor(a,s){this.bits=a,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class mt extends Bt{constructor(a,s,l,o,u){super(a,s),this.compact=l,this.nbDatablocks=o,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Be{constructor(a,s,l,o){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),s==null&&(s=Be.INIT_SIZE),l==null&&(l=a.getWidth()/2|0),o==null&&(o=a.getHeight()/2|0);const u=s/2|0;if(this.leftInit=l-u,this.rightInit=l+u,this.upInit=o-u,this.downInit=o+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new z}detect(){let a=this.leftInit,s=this.rightInit,l=this.upInit,o=this.downInit,u=!1,x=!0,p=!1,v=!1,A=!1,T=!1,H=!1;const X=this.width,ae=this.height;for(;x;){x=!1;let fe=!0;for(;(fe||!v)&&s<X;)fe=this.containsBlackPoint(l,o,s,!1),fe?(s++,x=!0,v=!0):v||s++;if(s>=X){u=!0;break}let ge=!0;for(;(ge||!A)&&o<ae;)ge=this.containsBlackPoint(a,s,o,!0),ge?(o++,x=!0,A=!0):A||o++;if(o>=ae){u=!0;break}let je=!0;for(;(je||!T)&&a>=0;)je=this.containsBlackPoint(l,o,a,!1),je?(a--,x=!0,T=!0):T||a--;if(a<0){u=!0;break}let _e=!0;for(;(_e||!H)&&l>=0;)_e=this.containsBlackPoint(a,s,l,!0),_e?(l--,x=!0,H=!0):H||l--;if(l<0){u=!0;break}x&&(p=!0)}if(!u&&p){const fe=s-a;let ge=null;for(let Xe=1;ge===null&&Xe<fe;Xe++)ge=this.getBlackPointOnSegment(a,o-Xe,a+Xe,o);if(ge==null)throw new z;let je=null;for(let Xe=1;je===null&&Xe<fe;Xe++)je=this.getBlackPointOnSegment(a,l+Xe,a+Xe,l);if(je==null)throw new z;let _e=null;for(let Xe=1;_e===null&&Xe<fe;Xe++)_e=this.getBlackPointOnSegment(s,l+Xe,s-Xe,l);if(_e==null)throw new z;let Ge=null;for(let Xe=1;Ge===null&&Xe<fe;Xe++)Ge=this.getBlackPointOnSegment(s,o-Xe,s-Xe,o);if(Ge==null)throw new z;return this.centerEdges(Ge,ge,_e,je)}else throw new z}getBlackPointOnSegment(a,s,l,o){const u=Ee.round(Ee.distance(a,s,l,o)),x=(l-a)/u,p=(o-s)/u,v=this.image;for(let A=0;A<u;A++){const T=Ee.round(a+A*x),H=Ee.round(s+A*p);if(v.get(T,H))return new Pe(T,H)}return null}centerEdges(a,s,l,o){const u=a.getX(),x=a.getY(),p=s.getX(),v=s.getY(),A=l.getX(),T=l.getY(),H=o.getX(),X=o.getY(),ae=Be.CORR;return u<this.width/2?[new Pe(H-ae,X+ae),new Pe(p+ae,v+ae),new Pe(A-ae,T-ae),new Pe(u+ae,x-ae)]:[new Pe(H+ae,X+ae),new Pe(p+ae,v-ae),new Pe(A-ae,T+ae),new Pe(u-ae,x-ae)]}containsBlackPoint(a,s,l,o){const u=this.image;if(o){for(let x=a;x<=s;x++)if(u.get(x,l))return!0}else for(let x=a;x<=s;x++)if(u.get(l,x))return!0;return!1}}Be.INIT_SIZE=10,Be.CORR=1;class ot{static checkAndNudgePoints(a,s){const l=a.getWidth(),o=a.getHeight();let u=!0;for(let x=0;x<s.length&&u;x+=2){const p=Math.floor(s[x]),v=Math.floor(s[x+1]);if(p<-1||p>l||v<-1||v>o)throw new z;u=!1,p===-1?(s[x]=0,u=!0):p===l&&(s[x]=l-1,u=!0),v===-1?(s[x+1]=0,u=!0):v===o&&(s[x+1]=o-1,u=!0)}u=!0;for(let x=s.length-2;x>=0&&u;x-=2){const p=Math.floor(s[x]),v=Math.floor(s[x+1]);if(p<-1||p>l||v<-1||v>o)throw new z;u=!1,p===-1?(s[x]=0,u=!0):p===l&&(s[x]=l-1,u=!0),v===-1?(s[x+1]=0,u=!0):v===o&&(s[x+1]=o-1,u=!0)}}}class we{constructor(a,s,l,o,u,x,p,v,A){this.a11=a,this.a21=s,this.a31=l,this.a12=o,this.a22=u,this.a32=x,this.a13=p,this.a23=v,this.a33=A}static quadrilateralToQuadrilateral(a,s,l,o,u,x,p,v,A,T,H,X,ae,fe,ge,je){const _e=we.quadrilateralToSquare(a,s,l,o,u,x,p,v);return we.squareToQuadrilateral(A,T,H,X,ae,fe,ge,je).times(_e)}transformPoints(a){const s=a.length,l=this.a11,o=this.a12,u=this.a13,x=this.a21,p=this.a22,v=this.a23,A=this.a31,T=this.a32,H=this.a33;for(let X=0;X<s;X+=2){const ae=a[X],fe=a[X+1],ge=u*ae+v*fe+H;a[X]=(l*ae+x*fe+A)/ge,a[X+1]=(o*ae+p*fe+T)/ge}}transformPointsWithValues(a,s){const l=this.a11,o=this.a12,u=this.a13,x=this.a21,p=this.a22,v=this.a23,A=this.a31,T=this.a32,H=this.a33,X=a.length;for(let ae=0;ae<X;ae++){const fe=a[ae],ge=s[ae],je=u*fe+v*ge+H;a[ae]=(l*fe+x*ge+A)/je,s[ae]=(o*fe+p*ge+T)/je}}static squareToQuadrilateral(a,s,l,o,u,x,p,v){const A=a-l+u-p,T=s-o+x-v;if(A===0&&T===0)return new we(l-a,u-l,a,o-s,x-o,s,0,0,1);{const H=l-u,X=p-u,ae=o-x,fe=v-x,ge=H*fe-X*ae,je=(A*fe-X*T)/ge,_e=(H*T-A*ae)/ge;return new we(l-a+je*l,p-a+_e*p,a,o-s+je*o,v-s+_e*v,s,je,_e,1)}}static quadrilateralToSquare(a,s,l,o,u,x,p,v){return we.squareToQuadrilateral(a,s,l,o,u,x,p,v).buildAdjoint()}buildAdjoint(){return new we(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new we(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class Ze extends ot{sampleGrid(a,s,l,o,u,x,p,v,A,T,H,X,ae,fe,ge,je,_e,Ge,Xe){const qe=we.quadrilateralToQuadrilateral(o,u,x,p,v,A,T,H,X,ae,fe,ge,je,_e,Ge,Xe);return this.sampleGridWithTransform(a,s,l,qe)}sampleGridWithTransform(a,s,l,o){if(s<=0||l<=0)throw new z;const u=new J(s,l),x=new Float32Array(2*s);for(let p=0;p<l;p++){const v=x.length,A=p+.5;for(let T=0;T<v;T+=2)x[T]=T/2+.5,x[T+1]=A;o.transformPoints(x),ot.checkAndNudgePoints(a,x);try{for(let T=0;T<v;T+=2)a.get(Math.floor(x[T]),Math.floor(x[T+1]))&&u.set(T/2,p)}catch{throw new z}}return u}}class Et{static setGridSampler(a){Et.gridSampler=a}static getInstance(){return Et.gridSampler}}Et.gridSampler=new Ze;class xt{constructor(a,s){this.x=a,this.y=s}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Zt{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(a){let x=l[0];l[0]=l[2],l[2]=x}this.extractParameters(l);let o=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),u=this.getMatrixCornerPoints(l);return new mt(o,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new z;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(a[0],a[1],s),this.sampleLine(a[1],a[2],s),this.sampleLine(a[2],a[3],s),this.sampleLine(a[3],a[0],s)]);this.shift=this.getRotation(l,s);let o=0;for(let x=0;x<4;x++){let p=l[(this.shift+x)%4];this.compact?(o<<=7,o+=p>>1&127):(o<<=10,o+=(p>>2&992)+(p>>1&31))}let u=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(a,s){let l=0;a.forEach((o,u,x)=>{let p=(o>>s-2<<1)+(o&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let o=0;o<4;o++)if(O.bitCount(l^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new z}getCorrectedParameterData(a,s){let l,o;s?(l=7,o=2):(l=10,o=4);let u=l-o,x=new Int32Array(l);for(let v=l-1;v>=0;--v)x[v]=a&15,a>>=4;try{new Ye(et.AZTEC_PARAM).decode(x,u)}catch{throw new z}let p=0;for(let v=0;v<o;v++)p=(p<<4)+x[v];return p}getBullsEyeCorners(a){let s=a,l=a,o=a,u=a,x=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let H=this.getFirstDifferent(s,x,1,-1),X=this.getFirstDifferent(l,x,1,1),ae=this.getFirstDifferent(o,x,-1,1),fe=this.getFirstDifferent(u,x,-1,-1);if(this.nbCenterLayers>2){let ge=this.distancePoint(fe,H)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(ge<.75||ge>1.25||!this.isWhiteOrBlackRectangle(H,X,ae,fe))break}s=H,l=X,o=ae,u=fe,x=!x}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new z;this.compact=this.nbCenterLayers===5;let p=new Pe(s.getX()+.5,s.getY()-.5),v=new Pe(l.getX()+.5,l.getY()+.5),A=new Pe(o.getX()-.5,o.getY()+.5),T=new Pe(u.getX()-.5,u.getY()-.5);return this.expandSquare([p,v,A,T],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,s,l,o;try{let p=new Be(this.image).detect();a=p[0],s=p[1],l=p[2],o=p[3]}catch{let v=this.image.getWidth()/2,A=this.image.getHeight()/2;a=this.getFirstDifferent(new xt(v+7,A-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new xt(v+7,A+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new xt(v-7,A+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new xt(v-7,A-7),!1,-1,-1).toResultPoint()}let u=Ee.round((a.getX()+o.getX()+s.getX()+l.getX())/4),x=Ee.round((a.getY()+o.getY()+s.getY()+l.getY())/4);try{let p=new Be(this.image,15,u,x).detect();a=p[0],s=p[1],l=p[2],o=p[3]}catch{a=this.getFirstDifferent(new xt(u+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new xt(u+7,x+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new xt(u-7,x+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new xt(u-7,x-7),!1,-1,-1).toResultPoint()}return u=Ee.round((a.getX()+o.getX()+s.getX()+l.getX())/4),x=Ee.round((a.getY()+o.getY()+s.getY()+l.getY())/4),new xt(u,x)}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,s,l,o,u){let x=Et.getInstance(),p=this.getDimension(),v=p/2-this.nbCenterLayers,A=p/2+this.nbCenterLayers;return x.sampleGrid(a,p,p,v,v,A,v,A,A,v,A,s.getX(),s.getY(),l.getX(),l.getY(),o.getX(),o.getY(),u.getX(),u.getY())}sampleLine(a,s,l){let o=0,u=this.distanceResultPoint(a,s),x=u/l,p=a.getX(),v=a.getY(),A=x*(s.getX()-a.getX())/u,T=x*(s.getY()-a.getY())/u;for(let H=0;H<l;H++)this.image.get(Ee.round(p+H*A),Ee.round(v+H*T))&&(o|=1<<l-H-1);return o}isWhiteOrBlackRectangle(a,s,l,o){let u=3;a=new xt(a.getX()-u,a.getY()+u),s=new xt(s.getX()-u,s.getY()-u),l=new xt(l.getX()+u,l.getY()-u),o=new xt(o.getX()+u,o.getY()+u);let x=this.getColor(o,a);if(x===0)return!1;let p=this.getColor(a,s);return p!==x||(p=this.getColor(s,l),p!==x)?!1:(p=this.getColor(l,o),p===x)}getColor(a,s){let l=this.distancePoint(a,s),o=(s.getX()-a.getX())/l,u=(s.getY()-a.getY())/l,x=0,p=a.getX(),v=a.getY(),A=this.image.get(a.getX(),a.getY()),T=Math.ceil(l);for(let X=0;X<T;X++)p+=o,v+=u,this.image.get(Ee.round(p),Ee.round(v))!==A&&x++;let H=x/l;return H>.1&&H<.9?0:H<=.1===A?1:-1}getFirstDifferent(a,s,l,o){let u=a.getX()+l,x=a.getY()+o;for(;this.isValid(u,x)&&this.image.get(u,x)===s;)u+=l,x+=o;for(u-=l,x-=o;this.isValid(u,x)&&this.image.get(u,x)===s;)u+=l;for(u-=l;this.isValid(u,x)&&this.image.get(u,x)===s;)x+=o;return x-=o,new xt(u,x)}expandSquare(a,s,l){let o=l/(2*s),u=a[0].getX()-a[2].getX(),x=a[0].getY()-a[2].getY(),p=(a[0].getX()+a[2].getX())/2,v=(a[0].getY()+a[2].getY())/2,A=new Pe(p+o*u,v+o*x),T=new Pe(p-o*u,v-o*x);u=a[1].getX()-a[3].getX(),x=a[1].getY()-a[3].getY(),p=(a[1].getX()+a[3].getX())/2,v=(a[1].getY()+a[3].getY())/2;let H=new Pe(p+o*u,v+o*x),X=new Pe(p-o*u,v-o*x);return[A,H,T,X]}isValid(a,s){return a>=0&&a<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(a){let s=Ee.round(a.getX()),l=Ee.round(a.getY());return this.isValid(s,l)}distancePoint(a,s){return Ee.distance(a.getX(),a.getY(),s.getX(),s.getY())}distanceResultPoint(a,s){return Ee.distance(a.getX(),a.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(O.truncDivision(this.nbLayers-4,8)+1)+15}}class Mt{decode(a,s=null){let l=null,o=new Zt(a.getBlackMatrix()),u=null,x=null;try{let T=o.detectMirror(!1);u=T.getPoints(),this.reportFoundResultPoints(s,u),x=new Je().decode(T)}catch(T){l=T}if(x==null)try{let T=o.detectMirror(!0);u=T.getPoints(),this.reportFoundResultPoints(s,u),x=new Je().decode(T)}catch(T){throw l??T}let p=new ie(x.getText(),x.getRawBytes(),x.getNumBits(),u,oe.AZTEC,D.currentTimeMillis()),v=x.getByteSegments();v!=null&&p.putMetadata(te.BYTE_SEGMENTS,v);let A=x.getECLevel();return A!=null&&p.putMetadata(te.ERROR_CORRECTION_LEVEL,A),p}reportFoundResultPoints(a,s){if(a!=null){let l=a.get(F.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((o,u,x)=>{l.foundPossibleResultPoint(o)})}}reset(){}}class lt extends ye{constructor(a=500){super(new Mt,a)}}class at{decode(a,s){try{return this.doDecode(a,s)}catch{if(s&&s.get(F.TRY_HARDER)===!0&&a.isRotateSupported()){const u=a.rotateCounterClockwise(),x=this.doDecode(u,s),p=x.getResultMetadata();let v=270;p!==null&&p.get(te.ORIENTATION)===!0&&(v=v+p.get(te.ORIENTATION)%360),x.putMetadata(te.ORIENTATION,v);const A=x.getResultPoints();if(A!==null){const T=u.getHeight();for(let H=0;H<A.length;H++)A[H]=new Pe(T-A[H].getY()-1,A[H].getX())}return x}else throw new z}}reset(){}doDecode(a,s){const l=a.getWidth(),o=a.getHeight();let u=new P(l);const x=s&&s.get(F.TRY_HARDER)===!0,p=Math.max(1,o>>(x?8:5));let v;x?v=o:v=15;const A=Math.trunc(o/2);for(let T=0;T<v;T++){const H=Math.trunc((T+1)/2),X=(T&1)===0,ae=A+p*(X?H:-H);if(ae<0||ae>=o)break;try{u=a.getBlackRow(ae,u)}catch{continue}for(let fe=0;fe<2;fe++){if(fe===1&&(u.reverse(),s&&s.get(F.NEED_RESULT_POINT_CALLBACK)===!0)){const ge=new Map;s.forEach((je,_e)=>ge.set(_e,je)),ge.delete(F.NEED_RESULT_POINT_CALLBACK),s=ge}try{const ge=this.decodeRow(ae,u,s);if(fe===1){ge.putMetadata(te.ORIENTATION,180);const je=ge.getResultPoints();je!==null&&(je[0]=new Pe(l-je[0].getX()-1,je[0].getY()),je[1]=new Pe(l-je[1].getX()-1,je[1].getY()))}return ge}catch{}}}throw new z}static recordPattern(a,s,l){const o=l.length;for(let A=0;A<o;A++)l[A]=0;const u=a.getSize();if(s>=u)throw new z;let x=!a.get(s),p=0,v=s;for(;v<u;){if(a.get(v)!==x)l[p]++;else{if(++p===o)break;l[p]=1,x=!x}v++}if(!(p===o||p===o-1&&v===u))throw new z}static recordPatternInReverse(a,s,l){let o=l.length,u=a.get(s);for(;s>0&&o>=0;)a.get(--s)!==u&&(o--,u=!u);if(o>=0)throw new z;at.recordPattern(a,s+1,l)}static patternMatchVariance(a,s,l){const o=a.length;let u=0,x=0;for(let A=0;A<o;A++)u+=a[A],x+=s[A];if(u<x)return Number.POSITIVE_INFINITY;const p=u/x;l*=p;let v=0;for(let A=0;A<o;A++){const T=a[A],H=s[A]*p,X=T>H?T-H:H-T;if(X>l)return Number.POSITIVE_INFINITY;v+=X}return v/u}}class Qe extends at{static findStartPattern(a){const s=a.getSize(),l=a.getNextSet(0);let o=0,u=Int32Array.from([0,0,0,0,0,0]),x=l,p=!1;const v=6;for(let A=l;A<s;A++)if(a.get(A)!==p)u[o]++;else{if(o===v-1){let T=Qe.MAX_AVG_VARIANCE,H=-1;for(let X=Qe.CODE_START_A;X<=Qe.CODE_START_C;X++){const ae=at.patternMatchVariance(u,Qe.CODE_PATTERNS[X],Qe.MAX_INDIVIDUAL_VARIANCE);ae<T&&(T=ae,H=X)}if(H>=0&&a.isRange(Math.max(0,x-(A-x)/2),x,!1))return Int32Array.from([x,A,H]);x+=u[0]+u[1],u=u.slice(2,u.length-1),u[o-1]=0,u[o]=0,o--}else o++;u[o]=1,p=!p}throw new z}static decodeCode(a,s,l){at.recordPattern(a,l,s);let o=Qe.MAX_AVG_VARIANCE,u=-1;for(let x=0;x<Qe.CODE_PATTERNS.length;x++){const p=Qe.CODE_PATTERNS[x],v=this.patternMatchVariance(s,p,Qe.MAX_INDIVIDUAL_VARIANCE);v<o&&(o=v,u=x)}if(u>=0)return u;throw new z}decodeRow(a,s,l){const o=l&&l.get(F.ASSUME_GS1)===!0,u=Qe.findStartPattern(s),x=u[2];let p=0;const v=new Uint8Array(20);v[p++]=x;let A;switch(x){case Qe.CODE_START_A:A=Qe.CODE_CODE_A;break;case Qe.CODE_START_B:A=Qe.CODE_CODE_B;break;case Qe.CODE_START_C:A=Qe.CODE_CODE_C;break;default:throw new q}let T=!1,H=!1,X="",ae=u[0],fe=u[1];const ge=Int32Array.from([0,0,0,0,0,0]);let je=0,_e=0,Ge=x,Xe=0,qe=!0,Nt=!1,wt=!1;for(;!T;){const Rs=H;switch(H=!1,je=_e,_e=Qe.decodeCode(s,ge,fe),v[p++]=_e,_e!==Qe.CODE_STOP&&(qe=!0),_e!==Qe.CODE_STOP&&(Xe++,Ge+=Xe*_e),ae=fe,fe+=ge.reduce((zr,oc)=>zr+oc,0),_e){case Qe.CODE_START_A:case Qe.CODE_START_B:case Qe.CODE_START_C:throw new q}switch(A){case Qe.CODE_CODE_A:if(_e<64)wt===Nt?X+=String.fromCharCode(32+_e):X+=String.fromCharCode(32+_e+128),wt=!1;else if(_e<96)wt===Nt?X+=String.fromCharCode(_e-64):X+=String.fromCharCode(_e+64),wt=!1;else switch(_e!==Qe.CODE_STOP&&(qe=!1),_e){case Qe.CODE_FNC_1:o&&(X.length===0?X+="]C1":X+="");break;case Qe.CODE_FNC_2:case Qe.CODE_FNC_3:break;case Qe.CODE_FNC_4_A:!Nt&&wt?(Nt=!0,wt=!1):Nt&&wt?(Nt=!1,wt=!1):wt=!0;break;case Qe.CODE_SHIFT:H=!0,A=Qe.CODE_CODE_B;break;case Qe.CODE_CODE_B:A=Qe.CODE_CODE_B;break;case Qe.CODE_CODE_C:A=Qe.CODE_CODE_C;break;case Qe.CODE_STOP:T=!0;break}break;case Qe.CODE_CODE_B:if(_e<96)wt===Nt?X+=String.fromCharCode(32+_e):X+=String.fromCharCode(32+_e+128),wt=!1;else switch(_e!==Qe.CODE_STOP&&(qe=!1),_e){case Qe.CODE_FNC_1:o&&(X.length===0?X+="]C1":X+="");break;case Qe.CODE_FNC_2:case Qe.CODE_FNC_3:break;case Qe.CODE_FNC_4_B:!Nt&&wt?(Nt=!0,wt=!1):Nt&&wt?(Nt=!1,wt=!1):wt=!0;break;case Qe.CODE_SHIFT:H=!0,A=Qe.CODE_CODE_A;break;case Qe.CODE_CODE_A:A=Qe.CODE_CODE_A;break;case Qe.CODE_CODE_C:A=Qe.CODE_CODE_C;break;case Qe.CODE_STOP:T=!0;break}break;case Qe.CODE_CODE_C:if(_e<100)_e<10&&(X+="0"),X+=_e;else switch(_e!==Qe.CODE_STOP&&(qe=!1),_e){case Qe.CODE_FNC_1:o&&(X.length===0?X+="]C1":X+="");break;case Qe.CODE_CODE_A:A=Qe.CODE_CODE_A;break;case Qe.CODE_CODE_B:A=Qe.CODE_CODE_B;break;case Qe.CODE_STOP:T=!0;break}break}Rs&&(A=A===Qe.CODE_CODE_A?Qe.CODE_CODE_B:Qe.CODE_CODE_A)}const lr=fe-ae;if(fe=s.getNextUnset(fe),!s.isRange(fe,Math.min(s.getSize(),fe+(fe-ae)/2),!1))throw new z;if(Ge-=Xe*je,Ge%103!==je)throw new M;const _r=X.length;if(_r===0)throw new z;_r>0&&qe&&(A===Qe.CODE_CODE_C?X=X.substring(0,_r-2):X=X.substring(0,_r-1));const fr=(u[1]+u[0])/2,ta=ae+lr/2,Qa=v.length,xr=new Uint8Array(Qa);for(let Rs=0;Rs<Qa;Rs++)xr[Rs]=v[Rs];const Js=[new Pe(fr,a),new Pe(ta,a)];return new ie(X,xr,0,Js,oe.CODE_128,new Date().getTime())}}Qe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Qe.MAX_AVG_VARIANCE=.25,Qe.MAX_INDIVIDUAL_VARIANCE=.7,Qe.CODE_SHIFT=98,Qe.CODE_CODE_C=99,Qe.CODE_CODE_B=100,Qe.CODE_CODE_A=101,Qe.CODE_FNC_1=102,Qe.CODE_FNC_2=97,Qe.CODE_FNC_3=96,Qe.CODE_FNC_4_A=101,Qe.CODE_FNC_4_B=100,Qe.CODE_START_A=103,Qe.CODE_START_B=104,Qe.CODE_START_C=105,Qe.CODE_STOP=106;class Kt extends at{constructor(a=!1,s=!1){super(),this.usingCheckDigit=a,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,s,l){let o=this.counters;o.fill(0),this.decodeRowResult="";let u=Kt.findAsteriskPattern(s,o),x=s.getNextSet(u[1]),p=s.getSize(),v,A;do{Kt.recordPattern(s,x,o);let ge=Kt.toNarrowWidePattern(o);if(ge<0)throw new z;v=Kt.patternToChar(ge),this.decodeRowResult+=v,A=x;for(let je of o)x+=je;x=s.getNextSet(x)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let T=0;for(let ge of o)T+=ge;let H=x-A-T;if(x!==p&&H*2<T)throw new z;if(this.usingCheckDigit){let ge=this.decodeRowResult.length-1,je=0;for(let _e=0;_e<ge;_e++)je+=Kt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(_e));if(this.decodeRowResult.charAt(ge)!==Kt.ALPHABET_STRING.charAt(je%43))throw new M;this.decodeRowResult=this.decodeRowResult.substring(0,ge)}if(this.decodeRowResult.length===0)throw new z;let X;this.extendedMode?X=Kt.decodeExtended(this.decodeRowResult):X=this.decodeRowResult;let ae=(u[1]+u[0])/2,fe=A+T/2;return new ie(X,null,0,[new Pe(ae,a),new Pe(fe,a)],oe.CODE_39,new Date().getTime())}static findAsteriskPattern(a,s){let l=a.getSize(),o=a.getNextSet(0),u=0,x=o,p=!1,v=s.length;for(let A=o;A<l;A++)if(a.get(A)!==p)s[u]++;else{if(u===v-1){if(this.toNarrowWidePattern(s)===Kt.ASTERISK_ENCODING&&a.isRange(Math.max(0,x-Math.floor((A-x)/2)),x,!1))return[x,A];x+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,p=!p}throw new z}static toNarrowWidePattern(a){let s=a.length,l=0,o;do{let u=2147483647;for(let v of a)v<u&&v>l&&(u=v);l=u,o=0;let x=0,p=0;for(let v=0;v<s;v++){let A=a[v];A>l&&(p|=1<<s-1-v,o++,x+=A)}if(o===3){for(let v=0;v<s&&o>0;v++){let A=a[v];if(A>l&&(o--,A*2>=x))return-1}return p}}while(o>3);return-1}static patternToChar(a){for(let s=0;s<Kt.CHARACTER_ENCODINGS.length;s++)if(Kt.CHARACTER_ENCODINGS[s]===a)return Kt.ALPHABET_STRING.charAt(s);if(a===Kt.ASTERISK_ENCODING)return"*";throw new z}static decodeExtended(a){let s=a.length,l="";for(let o=0;o<s;o++){let u=a.charAt(o);if(u==="+"||u==="$"||u==="%"||u==="/"){let x=a.charAt(o+1),p="\0";switch(u){case"+":if(x>="A"&&x<="Z")p=String.fromCharCode(x.charCodeAt(0)+32);else throw new q;break;case"$":if(x>="A"&&x<="Z")p=String.fromCharCode(x.charCodeAt(0)-64);else throw new q;break;case"%":if(x>="A"&&x<="E")p=String.fromCharCode(x.charCodeAt(0)-38);else if(x>="F"&&x<="J")p=String.fromCharCode(x.charCodeAt(0)-11);else if(x>="K"&&x<="O")p=String.fromCharCode(x.charCodeAt(0)+16);else if(x>="P"&&x<="T")p=String.fromCharCode(x.charCodeAt(0)+43);else if(x==="U")p="\0";else if(x==="V")p="@";else if(x==="W")p="`";else if(x==="X"||x==="Y"||x==="Z")p="";else throw new q;break;case"/":if(x>="A"&&x<="O")p=String.fromCharCode(x.charCodeAt(0)-32);else if(x==="Z")p=":";else throw new q;break}l+=p,o++}else l+=u}return l}}Kt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Kt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Kt.ASTERISK_ENCODING=148;class ht extends at{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,s,l){let o=this.decodeStart(s),u=this.decodeEnd(s),x=new ne;ht.decodeMiddle(s,o[1],u[0],x);let p=x.toString(),v=null;l!=null&&(v=l.get(F.ALLOWED_LENGTHS)),v==null&&(v=ht.DEFAULT_ALLOWED_LENGTHS);let A=p.length,T=!1,H=0;for(let fe of v){if(A===fe){T=!0;break}fe>H&&(H=fe)}if(!T&&A>H&&(T=!0),!T)throw new q;const X=[new Pe(o[1],a),new Pe(u[0],a)];return new ie(p,null,0,X,oe.ITF,new Date().getTime())}static decodeMiddle(a,s,l,o){let u=new Int32Array(10),x=new Int32Array(5),p=new Int32Array(5);for(u.fill(0),x.fill(0),p.fill(0);s<l;){at.recordPattern(a,s,u);for(let A=0;A<5;A++){let T=2*A;x[A]=u[T],p[A]=u[T+1]}let v=ht.decodeDigit(x);o.append(v.toString()),v=this.decodeDigit(p),o.append(v.toString()),u.forEach(function(A){s+=A})}}decodeStart(a){let s=ht.skipWhiteSpace(a),l=ht.findGuardPattern(a,s,ht.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(a,l[0]),l}validateQuietZone(a,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let o=s-1;l>0&&o>=0&&!a.get(o);o--)l--;if(l!==0)throw new z}static skipWhiteSpace(a){const s=a.getSize(),l=a.getNextSet(0);if(l===s)throw new z;return l}decodeEnd(a){a.reverse();try{let s=ht.skipWhiteSpace(a),l;try{l=ht.findGuardPattern(a,s,ht.END_PATTERN_REVERSED[0])}catch(u){u instanceof z&&(l=ht.findGuardPattern(a,s,ht.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,l[0]);let o=l[0];return l[0]=a.getSize()-l[1],l[1]=a.getSize()-o,l}finally{a.reverse()}}static findGuardPattern(a,s,l){let o=l.length,u=new Int32Array(o),x=a.getSize(),p=!1,v=0,A=s;u.fill(0);for(let T=s;T<x;T++)if(a.get(T)!==p)u[v]++;else{if(v===o-1){if(at.patternMatchVariance(u,l,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return[A,T];A+=u[0]+u[1],D.arraycopy(u,2,u,0,v-1),u[v-1]=0,u[v]=0,v--}else v++;u[v]=1,p=!p}throw new z}static decodeDigit(a){let s=ht.MAX_AVG_VARIANCE,l=-1,o=ht.PATTERNS.length;for(let u=0;u<o;u++){let x=ht.PATTERNS[u],p=at.patternMatchVariance(a,x,ht.MAX_INDIVIDUAL_VARIANCE);p<s?(s=p,l=u):p===s&&(l=-1)}if(l>=0)return l%10;throw new z}}ht.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ht.MAX_AVG_VARIANCE=.38,ht.MAX_INDIVIDUAL_VARIANCE=.5,ht.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ht.START_PATTERN=Int32Array.from([1,1,1,1]),ht.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Pt extends at{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let s=!1,l,o=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),l=Pt.findGuardPattern(a,o,!1,this.START_END_PATTERN,u);let x=l[0];o=l[1];let p=x-(o-x);p>=0&&(s=a.isRange(p,x,!1))}return l}static checkChecksum(a){return Pt.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let s=a.length;if(s===0)return!1;let l=parseInt(a.charAt(s-1),10);return Pt.getStandardUPCEANChecksum(a.substring(0,s-1))===l}static getStandardUPCEANChecksum(a){let s=a.length,l=0;for(let o=s-1;o>=0;o-=2){let u=a.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new q;l+=u}l*=3;for(let o=s-2;o>=0;o-=2){let u=a.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new q;l+=u}return(1e3-l)%10}static decodeEnd(a,s){return Pt.findGuardPattern(a,s,!1,Pt.START_END_PATTERN,new Int32Array(Pt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,s,l,o){return this.findGuardPattern(a,s,l,o,new Int32Array(o.length))}static findGuardPattern(a,s,l,o,u){let x=a.getSize();s=l?a.getNextUnset(s):a.getNextSet(s);let p=0,v=s,A=o.length,T=l;for(let H=s;H<x;H++)if(a.get(H)!==T)u[p]++;else{if(p===A-1){if(at.patternMatchVariance(u,o,Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return Int32Array.from([v,H]);v+=u[0]+u[1];let X=u.slice(2,u.length-1);for(let ae=0;ae<p-1;ae++)u[ae]=X[ae];u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,T=!T}throw new z}static decodeDigit(a,s,l,o){this.recordPattern(a,l,s);let u=this.MAX_AVG_VARIANCE,x=-1,p=o.length;for(let v=0;v<p;v++){let A=o[v],T=at.patternMatchVariance(s,A,Pt.MAX_INDIVIDUAL_VARIANCE);T<u&&(u=T,x=v)}if(x>=0)return x;throw new z}}Pt.MAX_AVG_VARIANCE=.48,Pt.MAX_INDIVIDUAL_VARIANCE=.7,Pt.START_END_PATTERN=Int32Array.from([1,1,1]),Pt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Pt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ws{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,s,l){let o=this.decodeRowStringBuffer,u=this.decodeMiddle(s,l,o),x=o.toString(),p=ws.parseExtensionString(x),v=[new Pe((l[0]+l[1])/2,a),new Pe(u,a)],A=new ie(x,null,0,v,oe.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&A.putAllMetadata(p),A}decodeMiddle(a,s,l){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=a.getSize(),x=s[1],p=0;for(let A=0;A<5&&x<u;A++){let T=Pt.decodeDigit(a,o,x,Pt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let H of o)x+=H;T>=10&&(p|=1<<4-A),A!==4&&(x=a.getNextSet(x),x=a.getNextUnset(x))}if(l.length!==5)throw new z;let v=this.determineCheckDigit(p);if(ws.extensionChecksum(l.toString())!==v)throw new z;return x}static extensionChecksum(a){let s=a.length,l=0;for(let o=s-2;o>=0;o-=2)l+=a.charAt(o).charCodeAt(0)-48;l*=3;for(let o=s-1;o>=0;o-=2)l+=a.charAt(o).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(a){for(let s=0;s<10;s++)if(a===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new z}static parseExtensionString(a){if(a.length!==5)return null;let s=ws.parseExtension5String(a);return s==null?null:new Map([[te.SUGGESTED_PRICE,s]])}static parseExtension5String(a){let s;switch(a.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(a.substring(1)),o=(l/100).toString(),u=l%100,x=u<10?"0"+u:u.toString();return s+o+"."+x}}class Pl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,s,l){let o=this.decodeRowStringBuffer,u=this.decodeMiddle(s,l,o),x=o.toString(),p=Pl.parseExtensionString(x),v=[new Pe((l[0]+l[1])/2,a),new Pe(u,a)],A=new ie(x,null,0,v,oe.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&A.putAllMetadata(p),A}decodeMiddle(a,s,l){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=a.getSize(),x=s[1],p=0;for(let v=0;v<2&&x<u;v++){let A=Pt.decodeDigit(a,o,x,Pt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let T of o)x+=T;A>=10&&(p|=1<<1-v),v!==1&&(x=a.getNextSet(x),x=a.getNextUnset(x))}if(l.length!==2)throw new z;if(parseInt(l.toString())%4!==p)throw new z;return x}static parseExtensionString(a){return a.length!==2?null:new Map([[te.ISSUE_NUMBER,parseInt(a)]])}}class Oi{static decodeRow(a,s,l){let o=Pt.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ws().decodeRow(a,s,o)}catch{return new Pl().decodeRow(a,s,o)}}}Oi.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class zt extends Pt{constructor(){super(),this.decodeRowStringBuffer="",zt.L_AND_G_PATTERNS=zt.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let s=zt.L_PATTERNS[a-10],l=new Int32Array(s.length);for(let o=0;o<s.length;o++)l[o]=s[s.length-o-1];zt.L_AND_G_PATTERNS[a]=l}}decodeRow(a,s,l){let o=zt.findStartGuardPattern(s),u=l==null?null:l.get(F.NEED_RESULT_POINT_CALLBACK);if(u!=null){const qe=new Pe((o[0]+o[1])/2,a);u.foundPossibleResultPoint(qe)}let x=this.decodeMiddle(s,o,this.decodeRowStringBuffer),p=x.rowOffset,v=x.resultString;if(u!=null){const qe=new Pe(p,a);u.foundPossibleResultPoint(qe)}let A=this.decodeEnd(s,p);if(u!=null){const qe=new Pe((A[0]+A[1])/2,a);u.foundPossibleResultPoint(qe)}let T=A[1],H=T+(T-A[0]);if(H>=s.getSize()||!s.isRange(T,H,!1))throw new z;let X=v.toString();if(X.length<8)throw new q;if(!zt.checkChecksum(X))throw new M;let ae=(o[1]+o[0])/2,fe=(A[1]+A[0])/2,ge=this.getBarcodeFormat(),je=[new Pe(ae,a),new Pe(fe,a)],_e=new ie(X,null,0,je,ge,new Date().getTime()),Ge=0;try{let qe=Oi.decodeRow(a,s,A[1]);_e.putMetadata(te.UPC_EAN_EXTENSION,qe.getText()),_e.putAllMetadata(qe.getResultMetadata()),_e.addResultPoints(qe.getResultPoints()),Ge=qe.getText().length}catch{}let Xe=l==null?null:l.get(F.ALLOWED_EAN_EXTENSIONS);if(Xe!=null){let qe=!1;for(let Nt in Xe)if(Ge.toString()===Nt){qe=!0;break}if(!qe)throw new z}return _e}decodeEnd(a,s){return zt.findGuardPattern(a,s,!1,zt.START_END_PATTERN,new Int32Array(zt.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return zt.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let s=a.length;if(s===0)return!1;let l=parseInt(a.charAt(s-1),10);return zt.getStandardUPCEANChecksum(a.substring(0,s-1))===l}static getStandardUPCEANChecksum(a){let s=a.length,l=0;for(let o=s-1;o>=0;o-=2){let u=a.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new q;l+=u}l*=3;for(let o=s-2;o>=0;o-=2){let u=a.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new q;l+=u}return(1e3-l)%10}}class Br extends zt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,s,l){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=a.getSize(),x=s[1],p=0;for(let A=0;A<6&&x<u;A++){let T=zt.decodeDigit(a,o,x,zt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let H of o)x+=H;T>=10&&(p|=1<<5-A)}l=Br.determineFirstDigit(l,p),x=zt.findGuardPattern(a,x,!0,zt.MIDDLE_PATTERN,new Int32Array(zt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&x<u;A++){let T=zt.decodeDigit(a,o,x,zt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let H of o)x+=H}return{rowOffset:x,resultString:l}}getBarcodeFormat(){return oe.EAN_13}static determineFirstDigit(a,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return a=String.fromCharCode(48+l)+a,a;throw new z}}Br.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ko extends zt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,s,l){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=a.getSize(),x=s[1];for(let v=0;v<4&&x<u;v++){let A=zt.decodeDigit(a,o,x,zt.L_PATTERNS);l+=String.fromCharCode(48+A);for(let T of o)x+=T}x=zt.findGuardPattern(a,x,!0,zt.MIDDLE_PATTERN,new Int32Array(zt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&x<u;v++){let A=zt.decodeDigit(a,o,x,zt.L_PATTERNS);l+=String.fromCharCode(48+A);for(let T of o)x+=T}return{rowOffset:x,resultString:l}}getBarcodeFormat(){return oe.EAN_8}}class Bi extends zt{constructor(){super(...arguments),this.ean13Reader=new Br}getBarcodeFormat(){return oe.UPC_A}decode(a,s){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,s,l))}decodeMiddle(a,s,l){return this.ean13Reader.decodeMiddle(a,s,l)}maybeReturnResult(a){let s=a.getText();if(s.charAt(0)==="0"){let l=new ie(s.substring(1),null,null,a.getResultPoints(),oe.UPC_A);return a.getResultMetadata()!=null&&l.putAllMetadata(a.getResultMetadata()),l}else throw new z}reset(){this.ean13Reader.reset()}}class Sr extends zt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,s,l){const o=this.decodeMiddleCounters.map(A=>A);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const u=a.getSize();let x=s[1],p=0;for(let A=0;A<6&&x<u;A++){const T=Sr.decodeDigit(a,o,x,Sr.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let H of o)x+=H;T>=10&&(p|=1<<5-A)}let v=Sr.determineNumSysAndCheckDigit(l,p);return{rowOffset:x,resultString:v}}decodeEnd(a,s){return Sr.findGuardPatternWithoutCounters(a,s,!0,Sr.MIDDLE_END_PATTERN)}checkChecksum(a){return zt.checkChecksum(Sr.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,s){for(let l=0;l<=1;l++)for(let o=0;o<10;o++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][o]){let u=String.fromCharCode(48+l),x=String.fromCharCode(48+o);return u+a+x}throw z.getNotFoundInstance()}getBarcodeFormat(){return oe.UPC_E}static convertUPCEtoUPCA(a){const s=a.slice(1,7).split("").map(u=>u.charCodeAt(0)),l=new ne;l.append(a.charAt(0));let o=s[5];switch(o){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(o),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(o);break}return a.length>=8&&l.append(a.charAt(7)),l.toString()}}Sr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Sr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class al extends at{constructor(a){super();let s=a==null?null:a.get(F.POSSIBLE_FORMATS),l=[];h(s)?(l.push(new Br),l.push(new Bi),l.push(new Ko),l.push(new Sr)):(s.indexOf(oe.EAN_13)>-1&&l.push(new Br),s.indexOf(oe.UPC_A)>-1&&l.push(new Bi),s.indexOf(oe.EAN_8)>-1&&l.push(new Ko),s.indexOf(oe.UPC_E)>-1&&l.push(new Sr)),this.readers=l}decodeRow(a,s,l){for(let o of this.readers)try{const u=o.decodeRow(a,s,l),x=u.getBarcodeFormat()===oe.EAN_13&&u.getText().charAt(0)==="0",p=l==null?null:l.get(F.POSSIBLE_FORMATS),v=p==null||p.includes(oe.UPC_A);if(x&&v){const A=u.getRawBytes(),T=new ie(u.getText().substring(1),A,A?A.length:null,u.getResultPoints(),oe.UPC_A);return T.putAllMetadata(u.getResultMetadata()),T}return u}catch{}throw new z}reset(){for(let a of this.readers)a.reset()}}class za extends at{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,s){for(let l=0;l<s.length;l++)if(at.patternMatchVariance(a,s[l],za.MAX_INDIVIDUAL_VARIANCE)<za.MAX_AVG_VARIANCE)return l;throw new z}static count(a){return Ee.sum(new Int32Array(a))}static increment(a,s){let l=0,o=s[0];for(let u=1;u<a.length;u++)s[u]>o&&(o=s[u],l=u);a[l]++}static decrement(a,s){let l=0,o=s[0];for(let u=1;u<a.length;u++)s[u]<o&&(o=s[u],l=u);a[l]--}static isFinderPattern(a){let s=a[0]+a[1],l=s+a[2]+a[3],o=s/l;if(o>=za.MIN_FINDER_PATTERN_RATIO&&o<=za.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER;for(let p of a)p>x&&(x=p),p<u&&(u=p);return x<10*u}return!1}}za.MAX_AVG_VARIANCE=.2,za.MAX_INDIVIDUAL_VARIANCE=.45,za.MIN_FINDER_PATTERN_RATIO=9.5/12,za.MAX_FINDER_PATTERN_RATIO=12.5/14;class Xs{constructor(a,s){this.value=a,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){if(!(a instanceof Xs))return!1;const s=a;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class zl{constructor(a,s,l,o,u){this.value=a,this.startEnd=s,this.value=a,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Pe(l,u)),this.resultPoints.push(new Pe(o,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){if(!(a instanceof zl))return!1;const s=a;return this.value===s.value}hashCode(){return this.value}}class Ga{constructor(){}static getRSSvalue(a,s,l){let o=0;for(let v of a)o+=v;let u=0,x=0,p=a.length;for(let v=0;v<p-1;v++){let A;for(A=1,x|=1<<v;A<a[v];A++,x&=~(1<<v)){let T=Ga.combins(o-A-1,p-v-2);if(l&&x===0&&o-A-(p-v-1)>=p-v-1&&(T-=Ga.combins(o-A-(p-v),p-v-2)),p-v-1>1){let H=0;for(let X=o-A-(p-v-2);X>s;X--)H+=Ga.combins(o-A-X-1,p-v-3);T-=H*(p-1-v)}else o-A>s&&T--;u+=T}o-=A}return u}static combins(a,s){let l,o;a-s>s?(o=s,l=a-s):(o=a-s,l=s);let u=1,x=1;for(let p=a;p>l;p--)u*=p,x<=o&&(u/=x,x++);for(;x<=o;)u/=x,x++;return u}}class Ja{static buildBitArray(a){let s=a.length*2-1;a[a.length-1].getRightChar()==null&&(s-=1);let l=12*s,o=new P(l),u=0,p=a[0].getRightChar().getValue();for(let v=11;v>=0;--v)(p&1<<v)!=0&&o.set(u),u++;for(let v=1;v<a.length;++v){let A=a[v],T=A.getLeftChar().getValue();for(let H=11;H>=0;--H)(T&1<<H)!=0&&o.set(u),u++;if(A.getRightChar()!=null){let H=A.getRightChar().getValue();for(let X=11;X>=0;--X)(H&1<<X)!=0&&o.set(u),u++}}return o}}class Ca{constructor(a,s){s?this.decodedInformation=null:(this.finished=a,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class vs{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class er extends vs{constructor(a,s){super(a),this.value=s}getValue(){return this.value}isFNC1(){return this.value===er.FNC1}}er.FNC1="$";class $s extends vs{constructor(a,s,l){super(a),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ar extends vs{constructor(a,s,l){if(super(a),s<0||s>10||l<0||l>10)throw new q;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ar.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ar.FNC1}isAnyFNC1(){return this.firstDigit===Ar.FNC1||this.secondDigit===Ar.FNC1}}Ar.FNC1=10;class st{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new z;let s=a.substring(0,2);for(let u of st.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===st.VARIABLE_LENGTH?st.processVariableAI(2,u[2],a):st.processFixedAI(2,u[1],a);if(a.length<3)throw new z;let l=a.substring(0,3);for(let u of st.THREE_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===st.VARIABLE_LENGTH?st.processVariableAI(3,u[2],a):st.processFixedAI(3,u[1],a);for(let u of st.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===st.VARIABLE_LENGTH?st.processVariableAI(4,u[2],a):st.processFixedAI(4,u[1],a);if(a.length<4)throw new z;let o=a.substring(0,4);for(let u of st.FOUR_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===st.VARIABLE_LENGTH?st.processVariableAI(4,u[2],a):st.processFixedAI(4,u[1],a);throw new z}static processFixedAI(a,s,l){if(l.length<a)throw new z;let o=l.substring(0,a);if(l.length<a+s)throw new z;let u=l.substring(a,a+s),x=l.substring(a+s),p="("+o+")"+u,v=st.parseFieldsInGeneralPurpose(x);return v==null?p:p+v}static processVariableAI(a,s,l){let o=l.substring(0,a),u;l.length<a+s?u=l.length:u=a+s;let x=l.substring(a,u),p=l.substring(u),v="("+o+")"+x,A=st.parseFieldsInGeneralPurpose(p);return A==null?v:v+A}}st.VARIABLE_LENGTH=[],st.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",st.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",st.VARIABLE_LENGTH,20],["22",st.VARIABLE_LENGTH,29],["30",st.VARIABLE_LENGTH,8],["37",st.VARIABLE_LENGTH,8],["90",st.VARIABLE_LENGTH,30],["91",st.VARIABLE_LENGTH,30],["92",st.VARIABLE_LENGTH,30],["93",st.VARIABLE_LENGTH,30],["94",st.VARIABLE_LENGTH,30],["95",st.VARIABLE_LENGTH,30],["96",st.VARIABLE_LENGTH,30],["97",st.VARIABLE_LENGTH,3],["98",st.VARIABLE_LENGTH,30],["99",st.VARIABLE_LENGTH,30]],st.THREE_DIGIT_DATA_LENGTH=[["240",st.VARIABLE_LENGTH,30],["241",st.VARIABLE_LENGTH,30],["242",st.VARIABLE_LENGTH,6],["250",st.VARIABLE_LENGTH,30],["251",st.VARIABLE_LENGTH,30],["253",st.VARIABLE_LENGTH,17],["254",st.VARIABLE_LENGTH,20],["400",st.VARIABLE_LENGTH,30],["401",st.VARIABLE_LENGTH,30],["402",17],["403",st.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",st.VARIABLE_LENGTH,20],["421",st.VARIABLE_LENGTH,15],["422",3],["423",st.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],st.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",st.VARIABLE_LENGTH,15],["391",st.VARIABLE_LENGTH,18],["392",st.VARIABLE_LENGTH,15],["393",st.VARIABLE_LENGTH,18],["703",st.VARIABLE_LENGTH,30]],st.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",st.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",st.VARIABLE_LENGTH,20],["8003",st.VARIABLE_LENGTH,30],["8004",st.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",st.VARIABLE_LENGTH,30],["8008",st.VARIABLE_LENGTH,12],["8018",18],["8020",st.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",st.VARIABLE_LENGTH,70],["8200",st.VARIABLE_LENGTH,70]];class Qr{constructor(a){this.buffer=new ne,this.information=a}decodeAllCodes(a,s){let l=s,o=null;do{let u=this.decodeGeneralPurposeField(l,o),x=st.parseFieldsInGeneralPurpose(u.getNewString());if(x!=null&&a.append(x),u.isRemaining()?o=""+u.getRemainingValue():o=null,l===u.getNewPosition())break;l=u.getNewPosition()}while(!0);return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let s=a;s<a+3;++s)if(this.information.get(s))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(a,4);return u===0?new Ar(this.information.getSize(),Ar.FNC1,Ar.FNC1):new Ar(this.information.getSize(),u-1,Ar.FNC1)}let s=this.extractNumericValueFromBitArray(a,7),l=(s-8)/11,o=(s-8)%11;return new Ar(a+7,l,o)}extractNumericValueFromBitArray(a,s){return Qr.extractNumericValueFromBitArray(this.information,a,s)}static extractNumericValueFromBitArray(a,s,l){let o=0;for(let u=0;u<l;++u)a.get(s+u)&&(o|=1<<l-u-1);return o}decodeGeneralPurposeField(a,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(a);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new $s(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new $s(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),a=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),a=s.isFinished()):(s=this.parseNumericBlock(),a=s.isFinished()),!(l!==this.current.getPosition())&&!a)break}while(!a);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){let s;return a.isSecondDigitFNC1()?s=new $s(this.current.getPosition(),this.buffer.toString()):s=new $s(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()),new Ca(!0,s)}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){let s=new $s(this.current.getPosition(),this.buffer.toString());return new Ca(!0,s)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ca(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let s=new $s(this.current.getPosition(),this.buffer.toString());return new Ca(!0,s)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ca(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let s=new $s(this.current.getPosition(),this.buffer.toString());return new Ca(!0,s)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ca(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(a,5);if(s>=5&&s<16)return!0;if(a+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(a,7);if(l>=64&&l<116)return!0;if(a+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(a,8);return o>=232&&o<253}decodeIsoIec646(a){let s=this.extractNumericValueFromBitArray(a,5);if(s===15)return new er(a+5,er.FNC1);if(s>=5&&s<15)return new er(a+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(a,7);if(l>=64&&l<90)return new er(a+7,""+(l+1));if(l>=90&&l<116)return new er(a+7,""+(l+7));let o=this.extractNumericValueFromBitArray(a,8),u;switch(o){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new q}return new er(a+8,u)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(a,5);if(s>=5&&s<16)return!0;if(a+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(a,6);return l>=16&&l<63}decodeAlphanumeric(a){let s=this.extractNumericValueFromBitArray(a,5);if(s===15)return new er(a+5,er.FNC1);if(s>=5&&s<15)return new er(a+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(a,6);if(l>=32&&l<58)return new er(a+6,""+(l+33));let o;switch(l){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new We("Decoding invalid alphanumeric value: "+l)}return new er(a+6,o)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let s=0;s<5&&s+a<this.information.getSize();++s)if(s===2){if(!this.information.get(a+2))return!1}else if(this.information.get(a+s))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let s=a;s<a+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let s=0;s<4&&s+a<this.information.getSize();++s)if(this.information.get(a+s))return!1;return!0}}class rl{constructor(a){this.information=a,this.generalDecoder=new Qr(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Da extends rl{constructor(a){super(a)}encodeCompressedGtin(a,s){a.append("(01)");let l=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,s,l)}encodeCompressedGtinWithoutAI(a,s,l){for(let o=0;o<4;++o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*o,10);u/100===0&&a.append("0"),u/10===0&&a.append("0"),a.append(u)}Da.appendCheckDigit(a,l)}static appendCheckDigit(a,s){let l=0;for(let o=0;o<13;o++){let u=a.charAt(o+s).charCodeAt(0)-48;l+=(o&1)===0?3*u:u}l=10-l%10,l===10&&(l=0),a.append(l)}}Da.GTIN_SIZE=40;class Lr extends Da{constructor(a){super(a)}parseInformation(){let a=new ne;a.append("(01)");let s=a.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Lr.HEADER_SIZE,4);return a.append(l),this.encodeCompressedGtinWithoutAI(a,Lr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(a,Lr.HEADER_SIZE+44)}}Lr.HEADER_SIZE=4;class Ns extends rl{constructor(a){super(a)}parseInformation(){let a=new ne;return this.getGeneralDecoder().decodeAllCodes(a,Ns.HEADER_SIZE)}}Ns.HEADER_SIZE=5;class ls extends Da{constructor(a){super(a)}encodeCompressedWeight(a,s,l){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(a,o);let u=this.checkWeight(o),x=1e5;for(let p=0;p<5;++p)u/x===0&&a.append("0"),x/=10;a.append(u)}}class Jt extends ls{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=Jt.HEADER_SIZE+ls.GTIN_SIZE+Jt.WEIGHT_SIZE)throw new z;let a=new ne;return this.encodeCompressedGtin(a,Jt.HEADER_SIZE),this.encodeCompressedWeight(a,Jt.HEADER_SIZE+ls.GTIN_SIZE,Jt.WEIGHT_SIZE),a.toString()}}Jt.HEADER_SIZE=5,Jt.WEIGHT_SIZE=15;class Jo extends Jt{constructor(a){super(a)}addWeightCode(a,s){a.append("(3103)")}checkWeight(a){return a}}class ec extends Jt{constructor(a){super(a)}addWeightCode(a,s){s<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class tr extends Da{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<tr.HEADER_SIZE+Da.GTIN_SIZE)throw new z;let a=new ne;this.encodeCompressedGtin(a,tr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(tr.HEADER_SIZE+Da.GTIN_SIZE,tr.LAST_DIGIT_SIZE);a.append("(392"),a.append(s),a.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(tr.HEADER_SIZE+Da.GTIN_SIZE+tr.LAST_DIGIT_SIZE,null);return a.append(l.getNewString()),a.toString()}}tr.HEADER_SIZE=8,tr.LAST_DIGIT_SIZE=2;class Sa extends Da{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<Sa.HEADER_SIZE+Da.GTIN_SIZE)throw new z;let a=new ne;this.encodeCompressedGtin(a,Sa.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Sa.HEADER_SIZE+Da.GTIN_SIZE,Sa.LAST_DIGIT_SIZE);a.append("(393"),a.append(s),a.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Sa.HEADER_SIZE+Da.GTIN_SIZE+Sa.LAST_DIGIT_SIZE,Sa.FIRST_THREE_DIGITS_SIZE);l/100==0&&a.append("0"),l/10==0&&a.append("0"),a.append(l);let o=this.getGeneralDecoder().decodeGeneralPurposeField(Sa.HEADER_SIZE+Da.GTIN_SIZE+Sa.LAST_DIGIT_SIZE+Sa.FIRST_THREE_DIGITS_SIZE,null);return a.append(o.getNewString()),a.toString()}}Sa.HEADER_SIZE=8,Sa.LAST_DIGIT_SIZE=2,Sa.FIRST_THREE_DIGITS_SIZE=10;class ha extends ls{constructor(a,s,l){super(a),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=ha.HEADER_SIZE+ha.GTIN_SIZE+ha.WEIGHT_SIZE+ha.DATE_SIZE)throw new z;let a=new ne;return this.encodeCompressedGtin(a,ha.HEADER_SIZE),this.encodeCompressedWeight(a,ha.HEADER_SIZE+ha.GTIN_SIZE,ha.WEIGHT_SIZE),this.encodeCompressedDate(a,ha.HEADER_SIZE+ha.GTIN_SIZE+ha.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,ha.DATE_SIZE);if(l==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let o=l%32;l/=32;let u=l%12+1;l/=12;let x=l;x/10==0&&a.append("0"),a.append(x),u/10==0&&a.append("0"),a.append(u),o/10==0&&a.append("0"),a.append(o)}addWeightCode(a,s){a.append("("),a.append(this.firstAIdigits),a.append(s/1e5),a.append(")")}checkWeight(a){return a%1e5}}ha.HEADER_SIZE=8,ha.WEIGHT_SIZE=20,ha.DATE_SIZE=16;function Li(U){try{if(U.get(1))return new Lr(U);if(!U.get(2))return new Ns(U);switch(Qr.extractNumericValueFromBitArray(U,1,4)){case 4:return new Jo(U);case 5:return new ec(U)}switch(Qr.extractNumericValueFromBitArray(U,1,5)){case 12:return new tr(U);case 13:return new Sa(U)}switch(Qr.extractNumericValueFromBitArray(U,1,7)){case 56:return new ha(U,"310","11");case 57:return new ha(U,"320","11");case 58:return new ha(U,"310","13");case 59:return new ha(U,"320","13");case 60:return new ha(U,"310","15");case 61:return new ha(U,"320","15");case 62:return new ha(U,"310","17");case 63:return new ha(U,"320","17")}}catch(a){throw console.log(a),new We("unknown decoder: "+U)}}class is{constructor(a,s,l,o){this.leftchar=a,this.rightchar=s,this.finderpattern=l,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(a,s){return a instanceof is?is.equalsOrNull(a.leftchar,s.leftchar)&&is.equalsOrNull(a.rightchar,s.rightchar)&&is.equalsOrNull(a.finderpattern,s.finderpattern):!1}static equalsOrNull(a,s){return a===null?s===null:is.equals(a,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Pi{constructor(a,s,l){this.pairs=a,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,s){return a instanceof Pi?this.checkEqualitity(a,s)&&a.wasReversed===s.wasReversed:!1}checkEqualitity(a,s){if(!a||!s)return;let l;return a.forEach((o,u)=>{s.forEach(x=>{o.getLeftChar().getValue()===x.getLeftChar().getValue()&&o.getRightChar().getValue()===x.getRightChar().getValue()&&o.getFinderPatter().getValue()===x.getFinderPatter().getValue()&&(l=!0)})}),l}}class He extends za{constructor(a){super(...arguments),this.pairs=new Array(He.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=a===!0}decodeRow(a,s,l){this.pairs.length=0,this.startFromEven=!1;try{return He.constructResult(this.decodeRow2pairs(a,s))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,He.constructResult(this.decodeRow2pairs(a,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,a))}catch(u){if(u instanceof z){if(!this.pairs.length)throw new z;l=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(a,!1),o){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new z}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return a&&(this.rows=this.rows.reverse()),s}checkRows(a,s){for(let l=s;l<this.rows.length;l++){let o=this.rows[l];this.pairs.length=0;for(let x of a)this.pairs.push(x.getPairs());if(this.pairs.push(o.getPairs()),!He.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(a);u.push(o);try{return this.checkRows(u,l+1)}catch(x){this.verbose&&console.log(x)}}throw new z}static isValidSequence(a){for(let s of He.FINDER_PATTERN_SEQUENCES){if(a.length>s.length)continue;let l=!0;for(let o=0;o<a.length;o++)if(a[o].getFinderPattern().getValue()!=s[o]){l=!1;break}if(l)return!0}return!1}storeRow(a,s){let l=0,o=!1,u=!1;for(;l<this.rows.length;){let x=this.rows[l];if(x.getRowNumber()>a){u=x.isEquivalent(this.pairs);break}o=x.isEquivalent(this.pairs),l++}u||o||He.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Pi(this.pairs,a,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,s){for(let l of s)if(l.getPairs().length!==a.length){for(let o of l.getPairs())for(let u of a)if(is.equals(o,u))break}}static isPartialRow(a,s){for(let l of s){let o=!0;for(let u of a){let x=!1;for(let p of l.getPairs())if(u.equals(p)){x=!0;break}if(!x){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(a){let s=Ja.buildBitArray(a),o=Li(s).parseInformation(),u=a[0].getFinderPattern().getResultPoints(),x=a[a.length-1].getFinderPattern().getResultPoints(),p=[u[0],u[1],x[0],x[1]];return new ie(o,null,null,p,oe.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),s=a.getLeftChar(),l=a.getRightChar();if(l==null)return!1;let o=l.getChecksumPortion(),u=2;for(let p=1;p<this.pairs.size();++p){let v=this.pairs.get(p);o+=v.getLeftChar().getChecksumPortion(),u++;let A=v.getRightChar();A!=null&&(o+=A.getChecksumPortion(),u++)}return o%=211,211*(u-4)+o==s.getValue()}static getNextSecondBar(a,s){let l;return a.get(s)?(l=a.getNextUnset(s),l=a.getNextSet(l)):(l=a.getNextSet(s),l=a.getNextUnset(l)),l}retrieveNextPair(a,s,l){let o=s.length%2==0;this.startFromEven&&(o=!o);let u,x=!0,p=-1;do this.findNextPair(a,s,p),u=this.parseFoundFinderPattern(a,l,o),u==null?p=He.getNextSecondBar(a,this.startEnd[0]):x=!1;while(x);let v=this.decodeDataCharacter(a,u,o,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new z;let A;try{A=this.decodeDataCharacter(a,u,o,!1)}catch(T){A=null,this.verbose&&console.log(T)}return new is(v,A,u,!0)}isEmptyPair(a){return a.length===0}findNextPair(a,s,l){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=a.getSize(),x;l>=0?x=l:this.isEmptyPair(s)?x=0:x=s[s.length-1].getFinderPattern().getStartEnd()[1];let p=s.length%2!=0;this.startFromEven&&(p=!p);let v=!1;for(;x<u&&(v=!a.get(x),!!v);)x++;let A=0,T=x;for(let H=x;H<u;H++)if(a.get(H)!=v)o[A]++;else{if(A==3){if(p&&He.reverseCounters(o),He.isFinderPattern(o)){this.startEnd[0]=T,this.startEnd[1]=H;return}p&&He.reverseCounters(o),T+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,A--}else A++;o[A]=1,v=!v}throw new z}static reverseCounters(a){let s=a.length;for(let l=0;l<s/2;++l){let o=a[l];a[l]=a[s-l-1],a[s-l-1]=o}}parseFoundFinderPattern(a,s,l){let o,u,x;if(l){let A=this.startEnd[0]-1;for(;A>=0&&!a.get(A);)A--;A++,o=this.startEnd[0]-A,u=A,x=this.startEnd[1]}else u=this.startEnd[0],x=a.getNextUnset(this.startEnd[1]+1),o=x-this.startEnd[1];let p=this.getDecodeFinderCounters();D.arraycopy(p,0,p,1,p.length-1),p[0]=o;let v;try{v=this.parseFinderValue(p,He.FINDER_PATTERNS)}catch{return null}return new zl(v,[u,x],u,x,s)}decodeDataCharacter(a,s,l,o){let u=this.getDataCharacterCounters();for(let ta=0;ta<u.length;ta++)u[ta]=0;if(o)He.recordPatternInReverse(a,s.getStartEnd()[0],u);else{He.recordPattern(a,s.getStartEnd()[1],u);for(let ta=0,Qa=u.length-1;ta<Qa;ta++,Qa--){let xr=u[ta];u[ta]=u[Qa],u[Qa]=xr}}let x=17,p=Ee.sum(new Int32Array(u))/x,v=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(p-v)/v>.3)throw new z;let A=this.getOddCounts(),T=this.getEvenCounts(),H=this.getOddRoundingErrors(),X=this.getEvenRoundingErrors();for(let ta=0;ta<u.length;ta++){let Qa=1*u[ta]/p,xr=Qa+.5;if(xr<1){if(Qa<.3)throw new z;xr=1}else if(xr>8){if(Qa>8.7)throw new z;xr=8}let Js=ta/2;(ta&1)==0?(A[Js]=xr,H[Js]=Qa-xr):(T[Js]=xr,X[Js]=Qa-xr)}this.adjustOddEvenCounts(x);let ae=4*s.getValue()+(l?0:2)+(o?0:1)-1,fe=0,ge=0;for(let ta=A.length-1;ta>=0;ta--){if(He.isNotA1left(s,l,o)){let Qa=He.WEIGHTS[ae][2*ta];ge+=A[ta]*Qa}fe+=A[ta]}let je=0;for(let ta=T.length-1;ta>=0;ta--)if(He.isNotA1left(s,l,o)){let Qa=He.WEIGHTS[ae][2*ta+1];je+=T[ta]*Qa}let _e=ge+je;if((fe&1)!=0||fe>13||fe<4)throw new z;let Ge=(13-fe)/2,Xe=He.SYMBOL_WIDEST[Ge],qe=9-Xe,Nt=Ga.getRSSvalue(A,Xe,!0),wt=Ga.getRSSvalue(T,qe,!1),lr=He.EVEN_TOTAL_SUBSET[Ge],_r=He.GSUM[Ge],fr=Nt*lr+wt+_r;return new Xs(fr,_e)}static isNotA1left(a,s,l){return!(a.getValue()==0&&s&&l)}adjustOddEvenCounts(a){let s=Ee.sum(new Int32Array(this.getOddCounts())),l=Ee.sum(new Int32Array(this.getEvenCounts())),o=!1,u=!1;s>13?u=!0:s<4&&(o=!0);let x=!1,p=!1;l>13?p=!0:l<4&&(x=!0);let v=s+l-a,A=(s&1)==1,T=(l&1)==0;if(v==1)if(A){if(T)throw new z;u=!0}else{if(!T)throw new z;p=!0}else if(v==-1)if(A){if(T)throw new z;o=!0}else{if(!T)throw new z;x=!0}else if(v==0){if(A){if(!T)throw new z;s<l?(o=!0,p=!0):(u=!0,x=!0)}else if(T)throw new z}else throw new z;if(o){if(u)throw new z;He.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&He.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(p)throw new z;He.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&He.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}He.SYMBOL_WIDEST=[7,5,4,3,1],He.EVEN_TOTAL_SUBSET=[4,20,52,104,204],He.GSUM=[0,348,1388,2948,3988],He.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],He.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],He.FINDER_PAT_A=0,He.FINDER_PAT_B=1,He.FINDER_PAT_C=2,He.FINDER_PAT_D=3,He.FINDER_PAT_E=4,He.FINDER_PAT_F=5,He.FINDER_PATTERN_SEQUENCES=[[He.FINDER_PAT_A,He.FINDER_PAT_A],[He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B],[He.FINDER_PAT_A,He.FINDER_PAT_C,He.FINDER_PAT_B,He.FINDER_PAT_D],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_C],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_D,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_D],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_E],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F]],He.MAX_PAIRS=11;class Fl extends Xs{constructor(a,s,l){super(a,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ht extends za{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,s,l){const o=this.decodePair(s,!1,a,l);Ht.addOrTally(this.possibleLeftPairs,o),s.reverse();let u=this.decodePair(s,!0,a,l);Ht.addOrTally(this.possibleRightPairs,u),s.reverse();for(let x of this.possibleLeftPairs)if(x.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Ht.checkChecksum(x,p))return Ht.constructResult(x,p)}throw new z}static addOrTally(a,s){if(s==null)return;let l=!1;for(let o of a)if(o.getValue()===s.getValue()){o.incrementCount(),l=!0;break}l||a.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,s){let l=4537077*a.getValue()+s.getValue(),o=new String(l).toString(),u=new ne;for(let A=13-o.length;A>0;A--)u.append("0");u.append(o);let x=0;for(let A=0;A<13;A++){let T=u.charAt(A).charCodeAt(0)-48;x+=(A&1)===0?3*T:T}x=10-x%10,x===10&&(x=0),u.append(x.toString());let p=a.getFinderPattern().getResultPoints(),v=s.getFinderPattern().getResultPoints();return new ie(u.toString(),null,0,[p[0],p[1],v[0],v[1]],oe.RSS_14,new Date().getTime())}static checkChecksum(a,s){let l=(a.getChecksumPortion()+16*s.getChecksumPortion())%79,o=9*a.getFinderPattern().getValue()+s.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,l===o}decodePair(a,s,l,o){try{let u=this.findFinderPattern(a,s),x=this.parseFoundFinderPattern(a,l,s,u),p=o==null?null:o.get(F.NEED_RESULT_POINT_CALLBACK);if(p!=null){let T=(u[0]+u[1])/2;s&&(T=a.getSize()-1-T),p.foundPossibleResultPoint(new Pe(T,l))}let v=this.decodeDataCharacter(a,x,!0),A=this.decodeDataCharacter(a,x,!1);return new Fl(1597*v.getValue()+A.getValue(),v.getChecksumPortion()+4*A.getChecksumPortion(),x)}catch{return null}}decodeDataCharacter(a,s,l){let o=this.getDataCharacterCounters();for(let je=0;je<o.length;je++)o[je]=0;if(l)at.recordPatternInReverse(a,s.getStartEnd()[0],o);else{at.recordPattern(a,s.getStartEnd()[1]+1,o);for(let je=0,_e=o.length-1;je<_e;je++,_e--){let Ge=o[je];o[je]=o[_e],o[_e]=Ge}}let u=l?16:15,x=Ee.sum(new Int32Array(o))/u,p=this.getOddCounts(),v=this.getEvenCounts(),A=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors();for(let je=0;je<o.length;je++){let _e=o[je]/x,Ge=Math.floor(_e+.5);Ge<1?Ge=1:Ge>8&&(Ge=8);let Xe=Math.floor(je/2);(je&1)===0?(p[Xe]=Ge,A[Xe]=_e-Ge):(v[Xe]=Ge,T[Xe]=_e-Ge)}this.adjustOddEvenCounts(l,u);let H=0,X=0;for(let je=p.length-1;je>=0;je--)X*=9,X+=p[je],H+=p[je];let ae=0,fe=0;for(let je=v.length-1;je>=0;je--)ae*=9,ae+=v[je],fe+=v[je];let ge=X+3*ae;if(l){if((H&1)!==0||H>12||H<4)throw new z;let je=(12-H)/2,_e=Ht.OUTSIDE_ODD_WIDEST[je],Ge=9-_e,Xe=Ga.getRSSvalue(p,_e,!1),qe=Ga.getRSSvalue(v,Ge,!0),Nt=Ht.OUTSIDE_EVEN_TOTAL_SUBSET[je],wt=Ht.OUTSIDE_GSUM[je];return new Xs(Xe*Nt+qe+wt,ge)}else{if((fe&1)!==0||fe>10||fe<4)throw new z;let je=(10-fe)/2,_e=Ht.INSIDE_ODD_WIDEST[je],Ge=9-_e,Xe=Ga.getRSSvalue(p,_e,!0),qe=Ga.getRSSvalue(v,Ge,!1),Nt=Ht.INSIDE_ODD_TOTAL_SUBSET[je],wt=Ht.INSIDE_GSUM[je];return new Xs(qe*Nt+Xe+wt,ge)}}findFinderPattern(a,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let o=a.getSize(),u=!1,x=0;for(;x<o&&(u=!a.get(x),s!==u);)x++;let p=0,v=x;for(let A=x;A<o;A++)if(a.get(A)!==u)l[p]++;else{if(p===3){if(za.isFinderPattern(l))return[v,A];v+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,u=!u}throw new z}parseFoundFinderPattern(a,s,l,o){let u=a.get(o[0]),x=o[0]-1;for(;x>=0&&u!==a.get(x);)x--;x++;const p=o[0]-x,v=this.getDecodeFinderCounters(),A=new Int32Array(v.length);D.arraycopy(v,0,A,1,v.length-1),A[0]=p;const T=this.parseFinderValue(A,Ht.FINDER_PATTERNS);let H=x,X=o[1];return l&&(H=a.getSize()-1-H,X=a.getSize()-1-X),new zl(T,[x,o[1]],H,X,s)}adjustOddEvenCounts(a,s){let l=Ee.sum(new Int32Array(this.getOddCounts())),o=Ee.sum(new Int32Array(this.getEvenCounts())),u=!1,x=!1,p=!1,v=!1;a?(l>12?x=!0:l<4&&(u=!0),o>12?v=!0:o<4&&(p=!0)):(l>11?x=!0:l<5&&(u=!0),o>10?v=!0:o<4&&(p=!0));let A=l+o-s,T=(l&1)===(a?1:0),H=(o&1)===1;if(A===1)if(T){if(H)throw new z;x=!0}else{if(!H)throw new z;v=!0}else if(A===-1)if(T){if(H)throw new z;u=!0}else{if(!H)throw new z;p=!0}else if(A===0){if(T){if(!H)throw new z;l<o?(u=!0,v=!0):(x=!0,p=!0)}else if(H)throw new z}else throw new z;if(u){if(x)throw new z;za.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&za.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(v)throw new z;za.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&za.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ht.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ht.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ht.OUTSIDE_GSUM=[0,161,961,2015,2715],Ht.INSIDE_GSUM=[0,336,1036,1516],Ht.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ht.INSIDE_ODD_WIDEST=[2,4,6,8],Ht.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class js extends at{constructor(a,s){super(),this.readers=[],this.verbose=s===!0;const l=a?a.get(F.POSSIBLE_FORMATS):null,o=a&&a.get(F.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(oe.EAN_13)||l.includes(oe.UPC_A)||l.includes(oe.EAN_8)||l.includes(oe.UPC_E))&&this.readers.push(new al(a)),l.includes(oe.CODE_39)&&this.readers.push(new Kt(o)),l.includes(oe.CODE_128)&&this.readers.push(new Qe),l.includes(oe.ITF)&&this.readers.push(new ht),l.includes(oe.RSS_14)&&this.readers.push(new Ht),l.includes(oe.RSS_EXPANDED)&&this.readers.push(new He(this.verbose))):(this.readers.push(new al(a)),this.readers.push(new Kt),this.readers.push(new al(a)),this.readers.push(new Qe),this.readers.push(new ht),this.readers.push(new Ht),this.readers.push(new He(this.verbose)))}decodeRow(a,s,l){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(a,s,l)}catch{}throw new z}reset(){this.readers.forEach(a=>a.reset())}}class tc extends ye{constructor(a=500,s){super(new js(s),a,s)}}class Rt{constructor(a,s,l){this.ecCodewords=a,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ft{constructor(a,s){this.count=a,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _t{constructor(a,s,l,o,u,x){this.versionNumber=a,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=u,this.ecBlocks=x;let p=0;const v=x.getECCodewords(),A=x.getECBlocks();for(let T of A)p+=T.getCount()*(T.getDataCodewords()+v);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,s){if((a&1)!==0||(s&1)!==0)throw new q;for(let l of _t.VERSIONS)if(l.symbolSizeRows===a&&l.symbolSizeColumns===s)return l;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new _t(1,10,10,8,8,new Rt(5,new Ft(1,3))),new _t(2,12,12,10,10,new Rt(7,new Ft(1,5))),new _t(3,14,14,12,12,new Rt(10,new Ft(1,8))),new _t(4,16,16,14,14,new Rt(12,new Ft(1,12))),new _t(5,18,18,16,16,new Rt(14,new Ft(1,18))),new _t(6,20,20,18,18,new Rt(18,new Ft(1,22))),new _t(7,22,22,20,20,new Rt(20,new Ft(1,30))),new _t(8,24,24,22,22,new Rt(24,new Ft(1,36))),new _t(9,26,26,24,24,new Rt(28,new Ft(1,44))),new _t(10,32,32,14,14,new Rt(36,new Ft(1,62))),new _t(11,36,36,16,16,new Rt(42,new Ft(1,86))),new _t(12,40,40,18,18,new Rt(48,new Ft(1,114))),new _t(13,44,44,20,20,new Rt(56,new Ft(1,144))),new _t(14,48,48,22,22,new Rt(68,new Ft(1,174))),new _t(15,52,52,24,24,new Rt(42,new Ft(2,102))),new _t(16,64,64,14,14,new Rt(56,new Ft(2,140))),new _t(17,72,72,16,16,new Rt(36,new Ft(4,92))),new _t(18,80,80,18,18,new Rt(48,new Ft(4,114))),new _t(19,88,88,20,20,new Rt(56,new Ft(4,144))),new _t(20,96,96,22,22,new Rt(68,new Ft(4,174))),new _t(21,104,104,24,24,new Rt(56,new Ft(6,136))),new _t(22,120,120,18,18,new Rt(68,new Ft(6,175))),new _t(23,132,132,20,20,new Rt(62,new Ft(8,163))),new _t(24,144,144,22,22,new Rt(62,new Ft(8,156),new Ft(2,155))),new _t(25,8,18,6,16,new Rt(7,new Ft(1,5))),new _t(26,8,32,6,14,new Rt(11,new Ft(1,10))),new _t(27,12,26,10,24,new Rt(14,new Ft(1,16))),new _t(28,12,36,10,16,new Rt(18,new Ft(1,22))),new _t(29,16,36,14,16,new Rt(24,new Ft(1,32))),new _t(30,16,48,14,22,new Rt(28,new Ft(1,49)))]}}_t.VERSIONS=_t.buildVersions();class zi{constructor(a){const s=a.getHeight();if(s<8||s>144||(s&1)!==0)throw new q;this.version=zi.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new J(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){const s=a.getHeight(),l=a.getWidth();return _t.getVersionForDimensions(s,l)}readCodewords(){const a=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,o=0;const u=this.mappingBitMatrix.getHeight(),x=this.mappingBitMatrix.getWidth();let p=!1,v=!1,A=!1,T=!1;do if(l===u&&o===0&&!p)a[s++]=this.readCorner1(u,x)&255,l-=2,o+=2,p=!0;else if(l===u-2&&o===0&&(x&3)!==0&&!v)a[s++]=this.readCorner2(u,x)&255,l-=2,o+=2,v=!0;else if(l===u+4&&o===2&&(x&7)===0&&!A)a[s++]=this.readCorner3(u,x)&255,l-=2,o+=2,A=!0;else if(l===u-2&&o===0&&(x&7)===4&&!T)a[s++]=this.readCorner4(u,x)&255,l-=2,o+=2,T=!0;else{do l<u&&o>=0&&!this.readMappingMatrix.get(o,l)&&(a[s++]=this.readUtah(l,o,u,x)&255),l-=2,o+=2;while(l>=0&&o<x);l+=1,o+=3;do l>=0&&o<x&&!this.readMappingMatrix.get(o,l)&&(a[s++]=this.readUtah(l,o,u,x)&255),l+=2,o-=2;while(l<u&&o>=0);l+=3,o+=1}while(l<u||o<x);if(s!==this.version.getTotalCodewords())throw new q;return a}readModule(a,s,l,o){return a<0&&(a+=l,s+=4-(l+4&7)),s<0&&(s+=o,a+=4-(o+4&7)),this.readMappingMatrix.set(s,a),this.mappingBitMatrix.get(s,a)}readUtah(a,s,l,o){let u=0;return this.readModule(a-2,s-2,l,o)&&(u|=1),u<<=1,this.readModule(a-2,s-1,l,o)&&(u|=1),u<<=1,this.readModule(a-1,s-2,l,o)&&(u|=1),u<<=1,this.readModule(a-1,s-1,l,o)&&(u|=1),u<<=1,this.readModule(a-1,s,l,o)&&(u|=1),u<<=1,this.readModule(a,s-2,l,o)&&(u|=1),u<<=1,this.readModule(a,s-1,l,o)&&(u|=1),u<<=1,this.readModule(a,s,l,o)&&(u|=1),u}readCorner1(a,s){let l=0;return this.readModule(a-1,0,a,s)&&(l|=1),l<<=1,this.readModule(a-1,1,a,s)&&(l|=1),l<<=1,this.readModule(a-1,2,a,s)&&(l|=1),l<<=1,this.readModule(0,s-2,a,s)&&(l|=1),l<<=1,this.readModule(0,s-1,a,s)&&(l|=1),l<<=1,this.readModule(1,s-1,a,s)&&(l|=1),l<<=1,this.readModule(2,s-1,a,s)&&(l|=1),l<<=1,this.readModule(3,s-1,a,s)&&(l|=1),l}readCorner2(a,s){let l=0;return this.readModule(a-3,0,a,s)&&(l|=1),l<<=1,this.readModule(a-2,0,a,s)&&(l|=1),l<<=1,this.readModule(a-1,0,a,s)&&(l|=1),l<<=1,this.readModule(0,s-4,a,s)&&(l|=1),l<<=1,this.readModule(0,s-3,a,s)&&(l|=1),l<<=1,this.readModule(0,s-2,a,s)&&(l|=1),l<<=1,this.readModule(0,s-1,a,s)&&(l|=1),l<<=1,this.readModule(1,s-1,a,s)&&(l|=1),l}readCorner3(a,s){let l=0;return this.readModule(a-1,0,a,s)&&(l|=1),l<<=1,this.readModule(a-1,s-1,a,s)&&(l|=1),l<<=1,this.readModule(0,s-3,a,s)&&(l|=1),l<<=1,this.readModule(0,s-2,a,s)&&(l|=1),l<<=1,this.readModule(0,s-1,a,s)&&(l|=1),l<<=1,this.readModule(1,s-3,a,s)&&(l|=1),l<<=1,this.readModule(1,s-2,a,s)&&(l|=1),l<<=1,this.readModule(1,s-1,a,s)&&(l|=1),l}readCorner4(a,s){let l=0;return this.readModule(a-3,0,a,s)&&(l|=1),l<<=1,this.readModule(a-2,0,a,s)&&(l|=1),l<<=1,this.readModule(a-1,0,a,s)&&(l|=1),l<<=1,this.readModule(0,s-2,a,s)&&(l|=1),l<<=1,this.readModule(0,s-1,a,s)&&(l|=1),l<<=1,this.readModule(1,s-1,a,s)&&(l|=1),l<<=1,this.readModule(2,s-1,a,s)&&(l|=1),l<<=1,this.readModule(3,s-1,a,s)&&(l|=1),l}extractDataRegion(a){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(a.getHeight()!==s)throw new E("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),x=s/o|0,p=l/u|0,v=x*o,A=p*u,T=new J(A,v);for(let H=0;H<x;++H){const X=H*o;for(let ae=0;ae<p;++ae){const fe=ae*u;for(let ge=0;ge<o;++ge){const je=H*(o+2)+1+ge,_e=X+ge;for(let Ge=0;Ge<u;++Ge){const Xe=ae*(u+2)+1+Ge;if(a.get(Xe,je)){const qe=fe+Ge;T.set(qe,_e)}}}}}return T}}class Ul{constructor(a,s){this.numDataCodewords=a,this.codewords=s}static getDataBlocks(a,s){const l=s.getECBlocks();let o=0;const u=l.getECBlocks();for(let ge of u)o+=ge.getCount();const x=new Array(o);let p=0;for(let ge of u)for(let je=0;je<ge.getCount();je++){const _e=ge.getDataCodewords(),Ge=l.getECCodewords()+_e;x[p++]=new Ul(_e,new Uint8Array(Ge))}const A=x[0].codewords.length-l.getECCodewords(),T=A-1;let H=0;for(let ge=0;ge<T;ge++)for(let je=0;je<p;je++)x[je].codewords[ge]=a[H++];const X=s.getVersionNumber()===24,ae=X?8:p;for(let ge=0;ge<ae;ge++)x[ge].codewords[A-1]=a[H++];const fe=x[0].codewords.length;for(let ge=A;ge<fe;ge++)for(let je=0;je<p;je++){const _e=X?(je+8)%p:je,Ge=X&&_e>7?ge-1:ge;x[_e].codewords[Ge]=a[H++]}if(H!==a.length)throw new E;return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class dr{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new E(""+a);let s=0,l=this.bitOffset,o=this.byteOffset;const u=this.bytes;if(l>0){const x=8-l,p=a<x?a:x,v=x-p,A=255>>8-p<<v;s=(u[o]&A)>>v,a-=p,l+=p,l===8&&(l=0,o++)}if(a>0){for(;a>=8;)s=s<<8|u[o]&255,o++,a-=8;if(a>0){const x=8-a,p=255>>x<<x;s=s<<a|(u[o]&p)>>x,l+=a}}return this.bitOffset=l,this.byteOffset=o,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Aa;(function(U){U[U.PAD_ENCODE=0]="PAD_ENCODE",U[U.ASCII_ENCODE=1]="ASCII_ENCODE",U[U.C40_ENCODE=2]="C40_ENCODE",U[U.TEXT_ENCODE=3]="TEXT_ENCODE",U[U.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",U[U.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",U[U.BASE256_ENCODE=6]="BASE256_ENCODE"})(Aa||(Aa={}));class ks{static decode(a){const s=new dr(a),l=new ne,o=new ne,u=new Array;let x=Aa.ASCII_ENCODE;do if(x===Aa.ASCII_ENCODE)x=this.decodeAsciiSegment(s,l,o);else{switch(x){case Aa.C40_ENCODE:this.decodeC40Segment(s,l);break;case Aa.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case Aa.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case Aa.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case Aa.BASE256_ENCODE:this.decodeBase256Segment(s,l,u);break;default:throw new q}x=Aa.ASCII_ENCODE}while(x!==Aa.PAD_ENCODE&&s.available()>0);return o.length()>0&&l.append(o.toString()),new Ie(a,l.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(a,s,l){let o=!1;do{let u=a.readBits(8);if(u===0)throw new q;if(u<=128)return o&&(u+=128),s.append(String.fromCharCode(u-1)),Aa.ASCII_ENCODE;if(u===129)return Aa.PAD_ENCODE;if(u<=229){const x=u-130;x<10&&s.append("0"),s.append(""+x)}else switch(u){case 230:return Aa.C40_ENCODE;case 231:return Aa.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return Aa.ANSIX12_ENCODE;case 239:return Aa.TEXT_ENCODE;case 240:return Aa.EDIFACT_ENCODE;case 241:break;default:if(u!==254||a.available()!==0)throw new q;break}}while(a.available()>0);return Aa.ASCII_ENCODE}static decodeC40Segment(a,s){let l=!1;const o=[];let u=0;do{if(a.available()===8)return;const x=a.readBits(8);if(x===254)return;this.parseTwoBytes(x,a.readBits(8),o);for(let p=0;p<3;p++){const v=o[p];switch(u){case 0:if(v<3)u=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[v];l?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):s.append(A)}else throw new q;break;case 1:l?(s.append(String.fromCharCode(v+128)),l=!1):s.append(String.fromCharCode(v)),u=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[v];l?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):s.append(A)}else switch(v){case 27:s.append("");break;case 30:l=!0;break;default:throw new q}u=0;break;case 3:l?(s.append(String.fromCharCode(v+224)),l=!1):s.append(String.fromCharCode(v+96)),u=0;break;default:throw new q}}}while(a.available()>0)}static decodeTextSegment(a,s){let l=!1,o=[],u=0;do{if(a.available()===8)return;const x=a.readBits(8);if(x===254)return;this.parseTwoBytes(x,a.readBits(8),o);for(let p=0;p<3;p++){const v=o[p];switch(u){case 0:if(v<3)u=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[v];l?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):s.append(A)}else throw new q;break;case 1:l?(s.append(String.fromCharCode(v+128)),l=!1):s.append(String.fromCharCode(v)),u=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[v];l?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):s.append(A)}else switch(v){case 27:s.append("");break;case 30:l=!0;break;default:throw new q}u=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[v];l?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):s.append(A),u=0}else throw new q;break;default:throw new q}}}while(a.available()>0)}static decodeAnsiX12Segment(a,s){const l=[];do{if(a.available()===8)return;const o=a.readBits(8);if(o===254)return;this.parseTwoBytes(o,a.readBits(8),l);for(let u=0;u<3;u++){const x=l[u];switch(x){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(x<14)s.append(String.fromCharCode(x+44));else if(x<40)s.append(String.fromCharCode(x+51));else throw new q;break}}}while(a.available()>0)}static parseTwoBytes(a,s,l){let o=(a<<8)+s-1,u=Math.floor(o/1600);l[0]=u,o-=u*1600,u=Math.floor(o/40),l[1]=u,l[2]=o-u*40}static decodeEdifactSegment(a,s){do{if(a.available()<=16)return;for(let l=0;l<4;l++){let o=a.readBits(6);if(o===31){const u=8-a.getBitOffset();u!==8&&a.readBits(u);return}(o&32)===0&&(o|=64),s.append(String.fromCharCode(o))}}while(a.available()>0)}static decodeBase256Segment(a,s,l){let o=1+a.getByteOffset();const u=this.unrandomize255State(a.readBits(8),o++);let x;if(u===0?x=a.available()/8|0:u<250?x=u:x=250*(u-249)+this.unrandomize255State(a.readBits(8),o++),x<0)throw new q;const p=new Uint8Array(x);for(let v=0;v<x;v++){if(a.available()<8)throw new q;p[v]=this.unrandomize255State(a.readBits(8),o++)}l.push(p);try{s.append(he.decode(p,de.ISO88591))}catch(v){throw new We("Platform does not support required encoding: "+v.message)}}static unrandomize255State(a,s){const l=149*s%255+1,o=a-l;return o>=0?o:o+256}}ks.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ks.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ks.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ks.TEXT_SHIFT2_SET_CHARS=ks.C40_SHIFT2_SET_CHARS,ks.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Hl{constructor(){this.rsDecoder=new Ye(et.DATA_MATRIX_FIELD_256)}decode(a){const s=new zi(a),l=s.getVersion(),o=s.readCodewords(),u=Ul.getDataBlocks(o,l);let x=0;for(let A of u)x+=A.getNumDataCodewords();const p=new Uint8Array(x),v=u.length;for(let A=0;A<v;A++){const T=u[A],H=T.getCodewords(),X=T.getNumDataCodewords();this.correctErrors(H,X);for(let ae=0;ae<X;ae++)p[ae*v+A]=H[ae]}return ks.decode(p)}correctErrors(a,s){const l=new Int32Array(a);try{this.rsDecoder.decode(l,a.length-s)}catch{throw new M}for(let o=0;o<s;o++)a[o]=l[o]}}class pa{constructor(a){this.image=a,this.rectangleDetector=new Be(this.image)}detect(){const a=this.rectangleDetector.detect();let s=this.detectSolid1(a);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new z;s=this.shiftToModuleCenter(s);const l=s[0],o=s[1],u=s[2],x=s[3];let p=this.transitionsBetween(l,x)+1,v=this.transitionsBetween(u,x)+1;(p&1)===1&&(p+=1),(v&1)===1&&(v+=1),4*p<7*v&&4*v<7*p&&(p=v=Math.max(p,v));let A=pa.sampleGrid(this.image,l,o,u,x,p,v);return new Bt(A,[l,o,u,x])}static shiftPoint(a,s,l){let o=(s.getX()-a.getX())/(l+1),u=(s.getY()-a.getY())/(l+1);return new Pe(a.getX()+o,a.getY()+u)}static moveAway(a,s,l){let o=a.getX(),u=a.getY();return o<s?o-=1:o+=1,u<l?u-=1:u+=1,new Pe(o,u)}detectSolid1(a){let s=a[0],l=a[1],o=a[3],u=a[2],x=this.transitionsBetween(s,l),p=this.transitionsBetween(l,o),v=this.transitionsBetween(o,u),A=this.transitionsBetween(u,s),T=x,H=[u,s,l,o];return T>p&&(T=p,H[0]=s,H[1]=l,H[2]=o,H[3]=u),T>v&&(T=v,H[0]=l,H[1]=o,H[2]=u,H[3]=s),T>A&&(H[0]=o,H[1]=u,H[2]=s,H[3]=l),H}detectSolid2(a){let s=a[0],l=a[1],o=a[2],u=a[3],x=this.transitionsBetween(s,u),p=pa.shiftPoint(l,o,(x+1)*4),v=pa.shiftPoint(o,l,(x+1)*4),A=this.transitionsBetween(p,s),T=this.transitionsBetween(v,u);return A<T?(a[0]=s,a[1]=l,a[2]=o,a[3]=u):(a[0]=l,a[1]=o,a[2]=u,a[3]=s),a}correctTopRight(a){let s=a[0],l=a[1],o=a[2],u=a[3],x=this.transitionsBetween(s,u),p=this.transitionsBetween(l,u),v=pa.shiftPoint(s,l,(p+1)*4),A=pa.shiftPoint(o,l,(x+1)*4);x=this.transitionsBetween(v,u),p=this.transitionsBetween(A,u);let T=new Pe(u.getX()+(o.getX()-l.getX())/(x+1),u.getY()+(o.getY()-l.getY())/(x+1)),H=new Pe(u.getX()+(s.getX()-l.getX())/(p+1),u.getY()+(s.getY()-l.getY())/(p+1));if(!this.isValid(T))return this.isValid(H)?H:null;if(!this.isValid(H))return T;let X=this.transitionsBetween(v,T)+this.transitionsBetween(A,T),ae=this.transitionsBetween(v,H)+this.transitionsBetween(A,H);return X>ae?T:H}shiftToModuleCenter(a){let s=a[0],l=a[1],o=a[2],u=a[3],x=this.transitionsBetween(s,u)+1,p=this.transitionsBetween(o,u)+1,v=pa.shiftPoint(s,l,p*4),A=pa.shiftPoint(o,l,x*4);x=this.transitionsBetween(v,u)+1,p=this.transitionsBetween(A,u)+1,(x&1)===1&&(x+=1),(p&1)===1&&(p+=1);let T=(s.getX()+l.getX()+o.getX()+u.getX())/4,H=(s.getY()+l.getY()+o.getY()+u.getY())/4;s=pa.moveAway(s,T,H),l=pa.moveAway(l,T,H),o=pa.moveAway(o,T,H),u=pa.moveAway(u,T,H);let X,ae;return v=pa.shiftPoint(s,l,p*4),v=pa.shiftPoint(v,u,x*4),X=pa.shiftPoint(l,s,p*4),X=pa.shiftPoint(X,o,x*4),A=pa.shiftPoint(o,u,p*4),A=pa.shiftPoint(A,l,x*4),ae=pa.shiftPoint(u,o,p*4),ae=pa.shiftPoint(ae,s,x*4),[v,X,A,ae]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,s,l,o,u,x,p){return Et.getInstance().sampleGrid(a,x,p,.5,.5,x-.5,.5,x-.5,p-.5,.5,p-.5,s.getX(),s.getY(),u.getX(),u.getY(),o.getX(),o.getY(),l.getX(),l.getY())}transitionsBetween(a,s){let l=Math.trunc(a.getX()),o=Math.trunc(a.getY()),u=Math.trunc(s.getX()),x=Math.trunc(s.getY()),p=Math.abs(x-o)>Math.abs(u-l);if(p){let ge=l;l=o,o=ge,ge=u,u=x,x=ge}let v=Math.abs(u-l),A=Math.abs(x-o),T=-v/2,H=o<x?1:-1,X=l<u?1:-1,ae=0,fe=this.image.get(p?o:l,p?l:o);for(let ge=l,je=o;ge!==u;ge+=X){let _e=this.image.get(p?je:ge,p?ge:je);if(_e!==fe&&(ae++,fe=_e),T+=A,T>0){if(je===x)break;je+=H,T-=v}}return ae}}class Pr{constructor(){this.decoder=new Hl}decode(a,s=null){let l,o;if(s!=null&&s.has(F.PURE_BARCODE)){const A=Pr.extractPureBits(a.getBlackMatrix());l=this.decoder.decode(A),o=Pr.NO_POINTS}else{const A=new pa(a.getBlackMatrix()).detect();l=this.decoder.decode(A.getBits()),o=A.getPoints()}const u=l.getRawBytes(),x=new ie(l.getText(),u,8*u.length,o,oe.DATA_MATRIX,D.currentTimeMillis()),p=l.getByteSegments();p!=null&&x.putMetadata(te.BYTE_SEGMENTS,p);const v=l.getECLevel();return v!=null&&x.putMetadata(te.ERROR_CORRECTION_LEVEL,v),x}reset(){}static extractPureBits(a){const s=a.getTopLeftOnBit(),l=a.getBottomRightOnBit();if(s==null||l==null)throw new z;const o=this.moduleSize(s,a);let u=s[1];const x=l[1];let p=s[0];const A=(l[0]-p+1)/o,T=(x-u+1)/o;if(A<=0||T<=0)throw new z;const H=o/2;u+=H,p+=H;const X=new J(A,T);for(let ae=0;ae<T;ae++){const fe=u+ae*o;for(let ge=0;ge<A;ge++)a.get(p+ge*o,fe)&&X.set(ge,ae)}return X}static moduleSize(a,s){const l=s.getWidth();let o=a[0];const u=a[1];for(;o<l&&s.get(o,u);)o++;if(o===l)throw new z;const x=o-a[0];if(x===0)throw new z;return x}}Pr.NO_POINTS=[];class Ud extends ye{constructor(a=500){super(new Pr,a)}}var Ya;(function(U){U[U.L=0]="L",U[U.M=1]="M",U[U.Q=2]="Q",U[U.H=3]="H"})(Ya||(Ya={}));class Qt{constructor(a,s,l){this.value=a,this.stringValue=s,this.bits=l,Qt.FOR_BITS.set(l,this),Qt.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return Qt.L;case"M":return Qt.M;case"Q":return Qt.Q;case"H":return Qt.H;default:throw new S(a+"not available")}}toString(){return this.stringValue}equals(a){if(!(a instanceof Qt))return!1;const s=a;return this.value===s.value}static forBits(a){if(a<0||a>=Qt.FOR_BITS.size)throw new E;return Qt.FOR_BITS.get(a)}}Qt.FOR_BITS=new Map,Qt.FOR_VALUE=new Map,Qt.L=new Qt(Ya.L,"L",1),Qt.M=new Qt(Ya.M,"M",0),Qt.Q=new Qt(Ya.Q,"Q",3),Qt.H=new Qt(Ya.H,"H",2);class Xa{constructor(a){this.errorCorrectionLevel=Qt.forBits(a>>3&3),this.dataMask=a&7}static numBitsDiffering(a,s){return O.bitCount(a^s)}static decodeFormatInformation(a,s){const l=Xa.doDecodeFormatInformation(a,s);return l!==null?l:Xa.doDecodeFormatInformation(a^Xa.FORMAT_INFO_MASK_QR,s^Xa.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,s){let l=Number.MAX_SAFE_INTEGER,o=0;for(const u of Xa.FORMAT_INFO_DECODE_LOOKUP){const x=u[0];if(x===a||x===s)return new Xa(u[1]);let p=Xa.numBitsDiffering(a,x);p<l&&(o=u[1],l=p),a!==s&&(p=Xa.numBitsDiffering(s,x),p<l&&(o=u[1],l=p))}return l<=3?new Xa(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){if(!(a instanceof Xa))return!1;const s=a;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Xa.FORMAT_INFO_MASK_QR=21522,Xa.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ke{constructor(a,...s){this.ecCodewordsPerBlock=a,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;const s=this.ecBlocks;for(const l of s)a+=l.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ee{constructor(a,s){this.count=a,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ct{constructor(a,s,...l){this.versionNumber=a,this.alignmentPatternCenters=s,this.ecBlocks=l;let o=0;const u=l[0].getECCodewordsPerBlock(),x=l[0].getECBlocks();for(const p of x)o+=p.getCount()*(p.getDataCodewords()+u);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!==1)throw new q;try{return this.getVersionForNumber((a-17)/4)}catch{throw new q}}static getVersionForNumber(a){if(a<1||a>40)throw new E;return ct.VERSIONS[a-1]}static decodeVersionInformation(a){let s=Number.MAX_SAFE_INTEGER,l=0;for(let o=0;o<ct.VERSION_DECODE_INFO.length;o++){const u=ct.VERSION_DECODE_INFO[o];if(u===a)return ct.getVersionForNumber(o+7);const x=Xa.numBitsDiffering(a,u);x<s&&(l=o+7,s=x)}return s<=3?ct.getVersionForNumber(l):null}buildFunctionPattern(){const a=this.getDimensionForVersion(),s=new J(a);s.setRegion(0,0,9,9),s.setRegion(a-8,0,8,9),s.setRegion(0,a-8,9,8);const l=this.alignmentPatternCenters.length;for(let o=0;o<l;o++){const u=this.alignmentPatternCenters[o]-2;for(let x=0;x<l;x++)o===0&&(x===0||x===l-1)||o===l-1&&x===0||s.setRegion(this.alignmentPatternCenters[x]-2,u,5,5)}return s.setRegion(6,9,1,a-17),s.setRegion(9,6,a-17,1),this.versionNumber>6&&(s.setRegion(a-11,0,3,6),s.setRegion(0,a-11,6,3)),s}toString(){return""+this.versionNumber}}ct.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ct.VERSIONS=[new ct(1,new Int32Array(0),new ke(7,new ee(1,19)),new ke(10,new ee(1,16)),new ke(13,new ee(1,13)),new ke(17,new ee(1,9))),new ct(2,Int32Array.from([6,18]),new ke(10,new ee(1,34)),new ke(16,new ee(1,28)),new ke(22,new ee(1,22)),new ke(28,new ee(1,16))),new ct(3,Int32Array.from([6,22]),new ke(15,new ee(1,55)),new ke(26,new ee(1,44)),new ke(18,new ee(2,17)),new ke(22,new ee(2,13))),new ct(4,Int32Array.from([6,26]),new ke(20,new ee(1,80)),new ke(18,new ee(2,32)),new ke(26,new ee(2,24)),new ke(16,new ee(4,9))),new ct(5,Int32Array.from([6,30]),new ke(26,new ee(1,108)),new ke(24,new ee(2,43)),new ke(18,new ee(2,15),new ee(2,16)),new ke(22,new ee(2,11),new ee(2,12))),new ct(6,Int32Array.from([6,34]),new ke(18,new ee(2,68)),new ke(16,new ee(4,27)),new ke(24,new ee(4,19)),new ke(28,new ee(4,15))),new ct(7,Int32Array.from([6,22,38]),new ke(20,new ee(2,78)),new ke(18,new ee(4,31)),new ke(18,new ee(2,14),new ee(4,15)),new ke(26,new ee(4,13),new ee(1,14))),new ct(8,Int32Array.from([6,24,42]),new ke(24,new ee(2,97)),new ke(22,new ee(2,38),new ee(2,39)),new ke(22,new ee(4,18),new ee(2,19)),new ke(26,new ee(4,14),new ee(2,15))),new ct(9,Int32Array.from([6,26,46]),new ke(30,new ee(2,116)),new ke(22,new ee(3,36),new ee(2,37)),new ke(20,new ee(4,16),new ee(4,17)),new ke(24,new ee(4,12),new ee(4,13))),new ct(10,Int32Array.from([6,28,50]),new ke(18,new ee(2,68),new ee(2,69)),new ke(26,new ee(4,43),new ee(1,44)),new ke(24,new ee(6,19),new ee(2,20)),new ke(28,new ee(6,15),new ee(2,16))),new ct(11,Int32Array.from([6,30,54]),new ke(20,new ee(4,81)),new ke(30,new ee(1,50),new ee(4,51)),new ke(28,new ee(4,22),new ee(4,23)),new ke(24,new ee(3,12),new ee(8,13))),new ct(12,Int32Array.from([6,32,58]),new ke(24,new ee(2,92),new ee(2,93)),new ke(22,new ee(6,36),new ee(2,37)),new ke(26,new ee(4,20),new ee(6,21)),new ke(28,new ee(7,14),new ee(4,15))),new ct(13,Int32Array.from([6,34,62]),new ke(26,new ee(4,107)),new ke(22,new ee(8,37),new ee(1,38)),new ke(24,new ee(8,20),new ee(4,21)),new ke(22,new ee(12,11),new ee(4,12))),new ct(14,Int32Array.from([6,26,46,66]),new ke(30,new ee(3,115),new ee(1,116)),new ke(24,new ee(4,40),new ee(5,41)),new ke(20,new ee(11,16),new ee(5,17)),new ke(24,new ee(11,12),new ee(5,13))),new ct(15,Int32Array.from([6,26,48,70]),new ke(22,new ee(5,87),new ee(1,88)),new ke(24,new ee(5,41),new ee(5,42)),new ke(30,new ee(5,24),new ee(7,25)),new ke(24,new ee(11,12),new ee(7,13))),new ct(16,Int32Array.from([6,26,50,74]),new ke(24,new ee(5,98),new ee(1,99)),new ke(28,new ee(7,45),new ee(3,46)),new ke(24,new ee(15,19),new ee(2,20)),new ke(30,new ee(3,15),new ee(13,16))),new ct(17,Int32Array.from([6,30,54,78]),new ke(28,new ee(1,107),new ee(5,108)),new ke(28,new ee(10,46),new ee(1,47)),new ke(28,new ee(1,22),new ee(15,23)),new ke(28,new ee(2,14),new ee(17,15))),new ct(18,Int32Array.from([6,30,56,82]),new ke(30,new ee(5,120),new ee(1,121)),new ke(26,new ee(9,43),new ee(4,44)),new ke(28,new ee(17,22),new ee(1,23)),new ke(28,new ee(2,14),new ee(19,15))),new ct(19,Int32Array.from([6,30,58,86]),new ke(28,new ee(3,113),new ee(4,114)),new ke(26,new ee(3,44),new ee(11,45)),new ke(26,new ee(17,21),new ee(4,22)),new ke(26,new ee(9,13),new ee(16,14))),new ct(20,Int32Array.from([6,34,62,90]),new ke(28,new ee(3,107),new ee(5,108)),new ke(26,new ee(3,41),new ee(13,42)),new ke(30,new ee(15,24),new ee(5,25)),new ke(28,new ee(15,15),new ee(10,16))),new ct(21,Int32Array.from([6,28,50,72,94]),new ke(28,new ee(4,116),new ee(4,117)),new ke(26,new ee(17,42)),new ke(28,new ee(17,22),new ee(6,23)),new ke(30,new ee(19,16),new ee(6,17))),new ct(22,Int32Array.from([6,26,50,74,98]),new ke(28,new ee(2,111),new ee(7,112)),new ke(28,new ee(17,46)),new ke(30,new ee(7,24),new ee(16,25)),new ke(24,new ee(34,13))),new ct(23,Int32Array.from([6,30,54,78,102]),new ke(30,new ee(4,121),new ee(5,122)),new ke(28,new ee(4,47),new ee(14,48)),new ke(30,new ee(11,24),new ee(14,25)),new ke(30,new ee(16,15),new ee(14,16))),new ct(24,Int32Array.from([6,28,54,80,106]),new ke(30,new ee(6,117),new ee(4,118)),new ke(28,new ee(6,45),new ee(14,46)),new ke(30,new ee(11,24),new ee(16,25)),new ke(30,new ee(30,16),new ee(2,17))),new ct(25,Int32Array.from([6,32,58,84,110]),new ke(26,new ee(8,106),new ee(4,107)),new ke(28,new ee(8,47),new ee(13,48)),new ke(30,new ee(7,24),new ee(22,25)),new ke(30,new ee(22,15),new ee(13,16))),new ct(26,Int32Array.from([6,30,58,86,114]),new ke(28,new ee(10,114),new ee(2,115)),new ke(28,new ee(19,46),new ee(4,47)),new ke(28,new ee(28,22),new ee(6,23)),new ke(30,new ee(33,16),new ee(4,17))),new ct(27,Int32Array.from([6,34,62,90,118]),new ke(30,new ee(8,122),new ee(4,123)),new ke(28,new ee(22,45),new ee(3,46)),new ke(30,new ee(8,23),new ee(26,24)),new ke(30,new ee(12,15),new ee(28,16))),new ct(28,Int32Array.from([6,26,50,74,98,122]),new ke(30,new ee(3,117),new ee(10,118)),new ke(28,new ee(3,45),new ee(23,46)),new ke(30,new ee(4,24),new ee(31,25)),new ke(30,new ee(11,15),new ee(31,16))),new ct(29,Int32Array.from([6,30,54,78,102,126]),new ke(30,new ee(7,116),new ee(7,117)),new ke(28,new ee(21,45),new ee(7,46)),new ke(30,new ee(1,23),new ee(37,24)),new ke(30,new ee(19,15),new ee(26,16))),new ct(30,Int32Array.from([6,26,52,78,104,130]),new ke(30,new ee(5,115),new ee(10,116)),new ke(28,new ee(19,47),new ee(10,48)),new ke(30,new ee(15,24),new ee(25,25)),new ke(30,new ee(23,15),new ee(25,16))),new ct(31,Int32Array.from([6,30,56,82,108,134]),new ke(30,new ee(13,115),new ee(3,116)),new ke(28,new ee(2,46),new ee(29,47)),new ke(30,new ee(42,24),new ee(1,25)),new ke(30,new ee(23,15),new ee(28,16))),new ct(32,Int32Array.from([6,34,60,86,112,138]),new ke(30,new ee(17,115)),new ke(28,new ee(10,46),new ee(23,47)),new ke(30,new ee(10,24),new ee(35,25)),new ke(30,new ee(19,15),new ee(35,16))),new ct(33,Int32Array.from([6,30,58,86,114,142]),new ke(30,new ee(17,115),new ee(1,116)),new ke(28,new ee(14,46),new ee(21,47)),new ke(30,new ee(29,24),new ee(19,25)),new ke(30,new ee(11,15),new ee(46,16))),new ct(34,Int32Array.from([6,34,62,90,118,146]),new ke(30,new ee(13,115),new ee(6,116)),new ke(28,new ee(14,46),new ee(23,47)),new ke(30,new ee(44,24),new ee(7,25)),new ke(30,new ee(59,16),new ee(1,17))),new ct(35,Int32Array.from([6,30,54,78,102,126,150]),new ke(30,new ee(12,121),new ee(7,122)),new ke(28,new ee(12,47),new ee(26,48)),new ke(30,new ee(39,24),new ee(14,25)),new ke(30,new ee(22,15),new ee(41,16))),new ct(36,Int32Array.from([6,24,50,76,102,128,154]),new ke(30,new ee(6,121),new ee(14,122)),new ke(28,new ee(6,47),new ee(34,48)),new ke(30,new ee(46,24),new ee(10,25)),new ke(30,new ee(2,15),new ee(64,16))),new ct(37,Int32Array.from([6,28,54,80,106,132,158]),new ke(30,new ee(17,122),new ee(4,123)),new ke(28,new ee(29,46),new ee(14,47)),new ke(30,new ee(49,24),new ee(10,25)),new ke(30,new ee(24,15),new ee(46,16))),new ct(38,Int32Array.from([6,32,58,84,110,136,162]),new ke(30,new ee(4,122),new ee(18,123)),new ke(28,new ee(13,46),new ee(32,47)),new ke(30,new ee(48,24),new ee(14,25)),new ke(30,new ee(42,15),new ee(32,16))),new ct(39,Int32Array.from([6,26,54,82,110,138,166]),new ke(30,new ee(20,117),new ee(4,118)),new ke(28,new ee(40,47),new ee(7,48)),new ke(30,new ee(43,24),new ee(22,25)),new ke(30,new ee(10,15),new ee(67,16))),new ct(40,Int32Array.from([6,30,58,86,114,142,170]),new ke(30,new ee(19,118),new ee(6,119)),new ke(28,new ee(18,47),new ee(31,48)),new ke(30,new ee(34,24),new ee(34,25)),new ke(30,new ee(20,15),new ee(61,16)))];var Ra;(function(U){U[U.DATA_MASK_000=0]="DATA_MASK_000",U[U.DATA_MASK_001=1]="DATA_MASK_001",U[U.DATA_MASK_010=2]="DATA_MASK_010",U[U.DATA_MASK_011=3]="DATA_MASK_011",U[U.DATA_MASK_100=4]="DATA_MASK_100",U[U.DATA_MASK_101=5]="DATA_MASK_101",U[U.DATA_MASK_110=6]="DATA_MASK_110",U[U.DATA_MASK_111=7]="DATA_MASK_111"})(Ra||(Ra={}));class $a{constructor(a,s){this.value=a,this.isMasked=s}unmaskBitMatrix(a,s){for(let l=0;l<s;l++)for(let o=0;o<s;o++)this.isMasked(l,o)&&a.flip(o,l)}}$a.values=new Map([[Ra.DATA_MASK_000,new $a(Ra.DATA_MASK_000,(U,a)=>(U+a&1)===0)],[Ra.DATA_MASK_001,new $a(Ra.DATA_MASK_001,(U,a)=>(U&1)===0)],[Ra.DATA_MASK_010,new $a(Ra.DATA_MASK_010,(U,a)=>a%3===0)],[Ra.DATA_MASK_011,new $a(Ra.DATA_MASK_011,(U,a)=>(U+a)%3===0)],[Ra.DATA_MASK_100,new $a(Ra.DATA_MASK_100,(U,a)=>(Math.floor(U/2)+Math.floor(a/3)&1)===0)],[Ra.DATA_MASK_101,new $a(Ra.DATA_MASK_101,(U,a)=>U*a%6===0)],[Ra.DATA_MASK_110,new $a(Ra.DATA_MASK_110,(U,a)=>U*a%6<3)],[Ra.DATA_MASK_111,new $a(Ra.DATA_MASK_111,(U,a)=>(U+a+U*a%3&1)===0)]]);class Hd{constructor(a){const s=a.getHeight();if(s<21||(s&3)!==1)throw new q;this.bitMatrix=a}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let a=0;for(let u=0;u<6;u++)a=this.copyBit(u,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let u=5;u>=0;u--)a=this.copyBit(8,u,a);const s=this.bitMatrix.getHeight();let l=0;const o=s-7;for(let u=s-1;u>=o;u--)l=this.copyBit(8,u,l);for(let u=s-8;u<s;u++)l=this.copyBit(u,8,l);if(this.parsedFormatInfo=Xa.decodeFormatInformation(a,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const a=this.bitMatrix.getHeight(),s=Math.floor((a-17)/4);if(s<=6)return ct.getVersionForNumber(s);let l=0;const o=a-11;for(let x=5;x>=0;x--)for(let p=a-9;p>=o;p--)l=this.copyBit(p,x,l);let u=ct.decodeVersionInformation(l);if(u!==null&&u.getDimensionForVersion()===a)return this.parsedVersion=u,u;l=0;for(let x=5;x>=0;x--)for(let p=a-9;p>=o;p--)l=this.copyBit(x,p,l);if(u=ct.decodeVersionInformation(l),u!==null&&u.getDimensionForVersion()===a)return this.parsedVersion=u,u;throw new q}copyBit(a,s,l){return(this.isMirror?this.bitMatrix.get(s,a):this.bitMatrix.get(a,s))?l<<1|1:l<<1}readCodewords(){const a=this.readFormatInformation(),s=this.readVersion(),l=$a.values.get(a.getDataMask()),o=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,o);const u=s.buildFunctionPattern();let x=!0;const p=new Uint8Array(s.getTotalCodewords());let v=0,A=0,T=0;for(let H=o-1;H>0;H-=2){H===6&&H--;for(let X=0;X<o;X++){const ae=x?o-1-X:X;for(let fe=0;fe<2;fe++)u.get(H-fe,ae)||(T++,A<<=1,this.bitMatrix.get(H-fe,ae)&&(A|=1),T===8&&(p[v++]=A,T=0,A=0))}x=!x}if(v!==s.getTotalCodewords())throw new q;return p}remask(){if(this.parsedFormatInfo===null)return;const a=$a.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,s)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){const a=this.bitMatrix;for(let s=0,l=a.getWidth();s<l;s++)for(let o=s+1,u=a.getHeight();o<u;o++)a.get(s,o)!==a.get(o,s)&&(a.flip(o,s),a.flip(s,o))}}class Vl{constructor(a,s){this.numDataCodewords=a,this.codewords=s}static getDataBlocks(a,s,l){if(a.length!==s.getTotalCodewords())throw new E;const o=s.getECBlocksForLevel(l);let u=0;const x=o.getECBlocks();for(const fe of x)u+=fe.getCount();const p=new Array(u);let v=0;for(const fe of x)for(let ge=0;ge<fe.getCount();ge++){const je=fe.getDataCodewords(),_e=o.getECCodewordsPerBlock()+je;p[v++]=new Vl(je,new Uint8Array(_e))}const A=p[0].codewords.length;let T=p.length-1;for(;T>=0&&p[T].codewords.length!==A;)T--;T++;const H=A-o.getECCodewordsPerBlock();let X=0;for(let fe=0;fe<H;fe++)for(let ge=0;ge<v;ge++)p[ge].codewords[fe]=a[X++];for(let fe=T;fe<v;fe++)p[fe].codewords[H]=a[X++];const ae=p[0].codewords.length;for(let fe=H;fe<ae;fe++)for(let ge=0;ge<v;ge++){const je=ge<T?fe:fe+1;p[ge].codewords[je]=a[X++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var yr;(function(U){U[U.TERMINATOR=0]="TERMINATOR",U[U.NUMERIC=1]="NUMERIC",U[U.ALPHANUMERIC=2]="ALPHANUMERIC",U[U.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",U[U.BYTE=4]="BYTE",U[U.ECI=5]="ECI",U[U.KANJI=6]="KANJI",U[U.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",U[U.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",U[U.HANZI=9]="HANZI"})(yr||(yr={}));class dt{constructor(a,s,l,o){this.value=a,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=o,dt.FOR_BITS.set(o,this),dt.FOR_VALUE.set(a,this)}static forBits(a){const s=dt.FOR_BITS.get(a);if(s===void 0)throw new E;return s}getCharacterCountBits(a){const s=a.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(a){if(!(a instanceof dt))return!1;const s=a;return this.value===s.value}toString(){return this.stringValue}}dt.FOR_BITS=new Map,dt.FOR_VALUE=new Map,dt.TERMINATOR=new dt(yr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),dt.NUMERIC=new dt(yr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),dt.ALPHANUMERIC=new dt(yr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),dt.STRUCTURED_APPEND=new dt(yr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),dt.BYTE=new dt(yr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),dt.ECI=new dt(yr.ECI,"ECI",Int32Array.from([0,0,0]),7),dt.KANJI=new dt(yr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),dt.FNC1_FIRST_POSITION=new dt(yr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),dt.FNC1_SECOND_POSITION=new dt(yr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),dt.HANZI=new dt(yr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ga{static decode(a,s,l,o){const u=new dr(a);let x=new ne;const p=new Array;let v=-1,A=-1;try{let T=null,H=!1,X;do{if(u.available()<4)X=dt.TERMINATOR;else{const ae=u.readBits(4);X=dt.forBits(ae)}switch(X){case dt.TERMINATOR:break;case dt.FNC1_FIRST_POSITION:case dt.FNC1_SECOND_POSITION:H=!0;break;case dt.STRUCTURED_APPEND:if(u.available()<16)throw new q;v=u.readBits(8),A=u.readBits(8);break;case dt.ECI:const ae=ga.parseECIValue(u);if(T=$.getCharacterSetECIByValue(ae),T===null)throw new q;break;case dt.HANZI:const fe=u.readBits(4),ge=u.readBits(X.getCharacterCountBits(s));fe===ga.GB2312_SUBSET&&ga.decodeHanziSegment(u,x,ge);break;default:const je=u.readBits(X.getCharacterCountBits(s));switch(X){case dt.NUMERIC:ga.decodeNumericSegment(u,x,je);break;case dt.ALPHANUMERIC:ga.decodeAlphanumericSegment(u,x,je,H);break;case dt.BYTE:ga.decodeByteSegment(u,x,je,T,p,o);break;case dt.KANJI:ga.decodeKanjiSegment(u,x,je);break;default:throw new q}break}}while(X!==dt.TERMINATOR)}catch{throw new q}return new Ie(a,x.toString(),p.length===0?null:p,l===null?null:l.toString(),v,A)}static decodeHanziSegment(a,s,l){if(l*13>a.available())throw new q;const o=new Uint8Array(2*l);let u=0;for(;l>0;){const x=a.readBits(13);let p=x/96<<8&4294967295|x%96;p<959?p+=41377:p+=42657,o[u]=p>>8&255,o[u+1]=p&255,u+=2,l--}try{s.append(he.decode(o,de.GB2312))}catch(x){throw new q(x)}}static decodeKanjiSegment(a,s,l){if(l*13>a.available())throw new q;const o=new Uint8Array(2*l);let u=0;for(;l>0;){const x=a.readBits(13);let p=x/192<<8&4294967295|x%192;p<7936?p+=33088:p+=49472,o[u]=p>>8,o[u+1]=p,u+=2,l--}try{s.append(he.decode(o,de.SHIFT_JIS))}catch(x){throw new q(x)}}static decodeByteSegment(a,s,l,o,u,x){if(8*l>a.available())throw new q;const p=new Uint8Array(l);for(let A=0;A<l;A++)p[A]=a.readBits(8);let v;o===null?v=de.guessEncoding(p,x):v=o.getName();try{s.append(he.decode(p,v))}catch(A){throw new q(A)}u.push(p)}static toAlphaNumericChar(a){if(a>=ga.ALPHANUMERIC_CHARS.length)throw new q;return ga.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,s,l,o){const u=s.length();for(;l>1;){if(a.available()<11)throw new q;const x=a.readBits(11);s.append(ga.toAlphaNumericChar(Math.floor(x/45))),s.append(ga.toAlphaNumericChar(x%45)),l-=2}if(l===1){if(a.available()<6)throw new q;s.append(ga.toAlphaNumericChar(a.readBits(6)))}if(o)for(let x=u;x<s.length();x++)s.charAt(x)==="%"&&(x<s.length()-1&&s.charAt(x+1)==="%"?s.deleteCharAt(x+1):s.setCharAt(x,""))}static decodeNumericSegment(a,s,l){for(;l>=3;){if(a.available()<10)throw new q;const o=a.readBits(10);if(o>=1e3)throw new q;s.append(ga.toAlphaNumericChar(Math.floor(o/100))),s.append(ga.toAlphaNumericChar(Math.floor(o/10)%10)),s.append(ga.toAlphaNumericChar(o%10)),l-=3}if(l===2){if(a.available()<7)throw new q;const o=a.readBits(7);if(o>=100)throw new q;s.append(ga.toAlphaNumericChar(Math.floor(o/10))),s.append(ga.toAlphaNumericChar(o%10))}else if(l===1){if(a.available()<4)throw new q;const o=a.readBits(4);if(o>=10)throw new q;s.append(ga.toAlphaNumericChar(o))}}static parseECIValue(a){const s=a.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const l=a.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=a.readBits(16);return(s&31)<<16&4294967295|l}throw new q}}ga.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ga.GB2312_SUBSET=1;class ac{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||a===null||a.length<3)return;const s=a[0];a[0]=a[2],a[2]=s}}class ql{constructor(){this.rsDecoder=new Ye(et.QR_CODE_FIELD_256)}decodeBooleanArray(a,s){return this.decodeBitMatrix(J.parseFromBooleanArray(a),s)}decodeBitMatrix(a,s){const l=new Hd(a);let o=null;try{return this.decodeBitMatrixParser(l,s)}catch(u){o=u}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const u=this.decodeBitMatrixParser(l,s);return u.setOther(new ac(!0)),u}catch(u){throw o!==null?o:u}}decodeBitMatrixParser(a,s){const l=a.readVersion(),o=a.readFormatInformation().getErrorCorrectionLevel(),u=a.readCodewords(),x=Vl.getDataBlocks(u,l,o);let p=0;for(const T of x)p+=T.getNumDataCodewords();const v=new Uint8Array(p);let A=0;for(const T of x){const H=T.getCodewords(),X=T.getNumDataCodewords();this.correctErrors(H,X);for(let ae=0;ae<X;ae++)v[A++]=H[ae]}return ga.decode(v,l,o,s)}correctErrors(a,s){const l=new Int32Array(a);try{this.rsDecoder.decode(l,a.length-s)}catch{throw new M}for(let o=0;o<s;o++)a[o]=l[o]}}class sl extends Pe{constructor(a,s,l){super(a,s),this.estimatedModuleSize=l}aboutEquals(a,s,l){if(Math.abs(s-this.getY())<=a&&Math.abs(l-this.getX())<=a){const o=Math.abs(a-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(a,s,l){const o=(this.getX()+s)/2,u=(this.getY()+a)/2,x=(this.estimatedModuleSize+l)/2;return new sl(o,u,x)}}class bn{constructor(a,s,l,o,u,x,p){this.image=a,this.startX=s,this.startY=l,this.width=o,this.height=u,this.moduleSize=x,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const a=this.startX,s=this.height,l=this.width,o=a+l,u=this.startY+s/2,x=new Int32Array(3),p=this.image;for(let v=0;v<s;v++){const A=u+((v&1)===0?Math.floor((v+1)/2):-Math.floor((v+1)/2));x[0]=0,x[1]=0,x[2]=0;let T=a;for(;T<o&&!p.get(T,A);)T++;let H=0;for(;T<o;){if(p.get(T,A))if(H===1)x[1]++;else if(H===2){if(this.foundPatternCross(x)){const X=this.handlePossibleCenter(x,A,T);if(X!==null)return X}x[0]=x[2],x[1]=1,x[2]=0,H=1}else x[++H]++;else H===1&&H++,x[H]++;T++}if(this.foundPatternCross(x)){const X=this.handlePossibleCenter(x,A,o);if(X!==null)return X}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new z}static centerFromEnd(a,s){return s-a[2]-a[1]/2}foundPatternCross(a){const s=this.moduleSize,l=s/2;for(let o=0;o<3;o++)if(Math.abs(s-a[o])>=l)return!1;return!0}crossCheckVertical(a,s,l,o){const u=this.image,x=u.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let v=a;for(;v>=0&&u.get(s,v)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&!u.get(s,v)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=a+1;v<x&&u.get(s,v)&&p[1]<=l;)p[1]++,v++;if(v===x||p[1]>l)return NaN;for(;v<x&&!u.get(s,v)&&p[2]<=l;)p[2]++,v++;if(p[2]>l)return NaN;const A=p[0]+p[1]+p[2];return 5*Math.abs(A-o)>=2*o?NaN:this.foundPatternCross(p)?bn.centerFromEnd(p,v):NaN}handlePossibleCenter(a,s,l){const o=a[0]+a[1]+a[2],u=bn.centerFromEnd(a,l),x=this.crossCheckVertical(s,u,2*a[1],o);if(!isNaN(x)){const p=(a[0]+a[1]+a[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(p,x,u))return A.combineEstimate(x,u,p);const v=new sl(u,x,p);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class Cs extends Pe{constructor(a,s,l,o){super(a,s),this.estimatedModuleSize=l,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,s,l){if(Math.abs(s-this.getY())<=a&&Math.abs(l-this.getX())<=a){const o=Math.abs(a-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(a,s,l){const o=this.count+1,u=(this.count*this.getX()+s)/o,x=(this.count*this.getY()+a)/o,p=(this.count*this.estimatedModuleSize+l)/o;return new Cs(u,x,p,o)}}class wn{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ia{constructor(a,s){this.image=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){const s=a!=null&&a.get(F.TRY_HARDER)!==void 0,l=a!=null&&a.get(F.PURE_BARCODE)!==void 0,o=this.image,u=o.getHeight(),x=o.getWidth();let p=Math.floor(3*u/(4*Ia.MAX_MODULES));(p<Ia.MIN_SKIP||s)&&(p=Ia.MIN_SKIP);let v=!1;const A=new Int32Array(5);for(let H=p-1;H<u&&!v;H+=p){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let X=0;for(let ae=0;ae<x;ae++)if(o.get(ae,H))(X&1)===1&&X++,A[X]++;else if((X&1)===0)if(X===4)if(Ia.foundPatternCross(A)){if(this.handlePossibleCenter(A,H,ae,l)===!0)if(p=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const ge=this.findRowSkip();ge>A[2]&&(H+=ge-A[2]-p,ae=x-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,X=3;continue}X=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,X=3;else A[++X]++;else A[X]++;Ia.foundPatternCross(A)&&this.handlePossibleCenter(A,H,x,l)===!0&&(p=A[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const T=this.selectBestPatterns();return Pe.orderBestPatterns(T),new wn(T)}static centerFromEnd(a,s){return s-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let s=0;for(let u=0;u<5;u++){const x=a[u];if(x===0)return!1;s+=x}if(s<7)return!1;const l=s/7,o=l/2;return Math.abs(l-a[0])<o&&Math.abs(l-a[1])<o&&Math.abs(3*l-a[2])<3*o&&Math.abs(l-a[3])<o&&Math.abs(l-a[4])<o}getCrossCheckStateCount(){const a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,s,l,o){const u=this.getCrossCheckStateCount();let x=0;const p=this.image;for(;a>=x&&s>=x&&p.get(s-x,a-x);)u[2]++,x++;if(a<x||s<x)return!1;for(;a>=x&&s>=x&&!p.get(s-x,a-x)&&u[1]<=l;)u[1]++,x++;if(a<x||s<x||u[1]>l)return!1;for(;a>=x&&s>=x&&p.get(s-x,a-x)&&u[0]<=l;)u[0]++,x++;if(u[0]>l)return!1;const v=p.getHeight(),A=p.getWidth();for(x=1;a+x<v&&s+x<A&&p.get(s+x,a+x);)u[2]++,x++;if(a+x>=v||s+x>=A)return!1;for(;a+x<v&&s+x<A&&!p.get(s+x,a+x)&&u[3]<l;)u[3]++,x++;if(a+x>=v||s+x>=A||u[3]>=l)return!1;for(;a+x<v&&s+x<A&&p.get(s+x,a+x)&&u[4]<l;)u[4]++,x++;if(u[4]>=l)return!1;const T=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(T-o)<2*o&&Ia.foundPatternCross(u)}crossCheckVertical(a,s,l,o){const u=this.image,x=u.getHeight(),p=this.getCrossCheckStateCount();let v=a;for(;v>=0&&u.get(s,v);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!u.get(s,v)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&u.get(s,v)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=a+1;v<x&&u.get(s,v);)p[2]++,v++;if(v===x)return NaN;for(;v<x&&!u.get(s,v)&&p[3]<l;)p[3]++,v++;if(v===x||p[3]>=l)return NaN;for(;v<x&&u.get(s,v)&&p[4]<l;)p[4]++,v++;if(p[4]>=l)return NaN;const A=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(A-o)>=2*o?NaN:Ia.foundPatternCross(p)?Ia.centerFromEnd(p,v):NaN}crossCheckHorizontal(a,s,l,o){const u=this.image,x=u.getWidth(),p=this.getCrossCheckStateCount();let v=a;for(;v>=0&&u.get(v,s);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!u.get(v,s)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&u.get(v,s)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=a+1;v<x&&u.get(v,s);)p[2]++,v++;if(v===x)return NaN;for(;v<x&&!u.get(v,s)&&p[3]<l;)p[3]++,v++;if(v===x||p[3]>=l)return NaN;for(;v<x&&u.get(v,s)&&p[4]<l;)p[4]++,v++;if(p[4]>=l)return NaN;const A=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(A-o)>=o?NaN:Ia.foundPatternCross(p)?Ia.centerFromEnd(p,v):NaN}handlePossibleCenter(a,s,l,o){const u=a[0]+a[1]+a[2]+a[3]+a[4];let x=Ia.centerFromEnd(a,l),p=this.crossCheckVertical(s,Math.floor(x),a[2],u);if(!isNaN(p)&&(x=this.crossCheckHorizontal(Math.floor(x),Math.floor(p),a[2],u),!isNaN(x)&&(!o||this.crossCheckDiagonal(Math.floor(p),Math.floor(x),a[2],u)))){const v=u/7;let A=!1;const T=this.possibleCenters;for(let H=0,X=T.length;H<X;H++){const ae=T[H];if(ae.aboutEquals(v,p,x)){T[H]=ae.combineEstimate(p,x,v),A=!0;break}}if(!A){const H=new Cs(x,p,v);T.push(H),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(H)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=Ia.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,s=0;const l=this.possibleCenters.length;for(const x of this.possibleCenters)x.getCount()>=Ia.CENTER_QUORUM&&(a++,s+=x.getEstimatedModuleSize());if(a<3)return!1;const o=s/l;let u=0;for(const x of this.possibleCenters)u+=Math.abs(x.getEstimatedModuleSize()-o);return u<=.05*s}selectBestPatterns(){const a=this.possibleCenters.length;if(a<3)throw new z;const s=this.possibleCenters;let l;if(a>3){let o=0,u=0;for(const v of this.possibleCenters){const A=v.getEstimatedModuleSize();o+=A,u+=A*A}l=o/a;let x=Math.sqrt(u/a-l*l);s.sort((v,A)=>{const T=Math.abs(A.getEstimatedModuleSize()-l),H=Math.abs(v.getEstimatedModuleSize()-l);return T<H?-1:T>H?1:0});const p=Math.max(.2*l,x);for(let v=0;v<s.length&&s.length>3;v++){const A=s[v];Math.abs(A.getEstimatedModuleSize()-l)>p&&(s.splice(v,1),v--)}}if(s.length>3){let o=0;for(const u of s)o+=u.getEstimatedModuleSize();l=o/s.length,s.sort((u,x)=>{if(x.getCount()===u.getCount()){const p=Math.abs(x.getEstimatedModuleSize()-l),v=Math.abs(u.getEstimatedModuleSize()-l);return p<v?1:p>v?-1:0}else return x.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Ia.CENTER_QUORUM=2,Ia.MIN_SKIP=3,Ia.MAX_MODULES=57;class Zs{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=a==null?null:a.get(F.NEED_RESULT_POINT_CALLBACK);const l=new Ia(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(l)}processFinderPatternInfo(a){const s=a.getTopLeft(),l=a.getTopRight(),o=a.getBottomLeft(),u=this.calculateModuleSize(s,l,o);if(u<1)throw new z("No pattern found in proccess finder.");const x=Zs.computeDimension(s,l,o,u),p=ct.getProvisionalVersionForDimension(x),v=p.getDimensionForVersion()-7;let A=null;if(p.getAlignmentPatternCenters().length>0){const ae=l.getX()-s.getX()+o.getX(),fe=l.getY()-s.getY()+o.getY(),ge=1-3/v,je=Math.floor(s.getX()+ge*(ae-s.getX())),_e=Math.floor(s.getY()+ge*(fe-s.getY()));for(let Ge=4;Ge<=16;Ge<<=1)try{A=this.findAlignmentInRegion(u,je,_e,Ge);break}catch(Xe){if(!(Xe instanceof z))throw Xe}}const T=Zs.createTransform(s,l,o,A,x),H=Zs.sampleGrid(this.image,T,x);let X;return A===null?X=[o,s,l]:X=[o,s,l,A],new Bt(H,X)}static createTransform(a,s,l,o,u){const x=u-3.5;let p,v,A,T;return o!==null?(p=o.getX(),v=o.getY(),A=x-3,T=A):(p=s.getX()-a.getX()+l.getX(),v=s.getY()-a.getY()+l.getY(),A=x,T=x),we.quadrilateralToQuadrilateral(3.5,3.5,x,3.5,A,T,3.5,x,a.getX(),a.getY(),s.getX(),s.getY(),p,v,l.getX(),l.getY())}static sampleGrid(a,s,l){return Et.getInstance().sampleGridWithTransform(a,l,l,s)}static computeDimension(a,s,l,o){const u=Ee.round(Pe.distance(a,s)/o),x=Ee.round(Pe.distance(a,l)/o);let p=Math.floor((u+x)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new z("Dimensions could be not found.")}return p}calculateModuleSize(a,s,l){return(this.calculateModuleSizeOneWay(a,s)+this.calculateModuleSizeOneWay(a,l))/2}calculateModuleSizeOneWay(a,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(l)?o/7:isNaN(o)?l/7:(l+o)/14}sizeOfBlackWhiteBlackRunBothWays(a,s,l,o){let u=this.sizeOfBlackWhiteBlackRun(a,s,l,o),x=1,p=a-(l-a);p<0?(x=a/(a-p),p=0):p>=this.image.getWidth()&&(x=(this.image.getWidth()-1-a)/(p-a),p=this.image.getWidth()-1);let v=Math.floor(s-(o-s)*x);return x=1,v<0?(x=s/(s-v),v=0):v>=this.image.getHeight()&&(x=(this.image.getHeight()-1-s)/(v-s),v=this.image.getHeight()-1),p=Math.floor(a+(p-a)*x),u+=this.sizeOfBlackWhiteBlackRun(a,s,p,v),u-1}sizeOfBlackWhiteBlackRun(a,s,l,o){const u=Math.abs(o-s)>Math.abs(l-a);if(u){let ae=a;a=s,s=ae,ae=l,l=o,o=ae}const x=Math.abs(l-a),p=Math.abs(o-s);let v=-x/2;const A=a<l?1:-1,T=s<o?1:-1;let H=0;const X=l+A;for(let ae=a,fe=s;ae!==X;ae+=A){const ge=u?fe:ae,je=u?ae:fe;if(H===1===this.image.get(ge,je)){if(H===2)return Ee.distance(ae,fe,a,s);H++}if(v+=p,v>0){if(fe===o)break;fe+=T,v-=x}}return H===2?Ee.distance(l+A,o,a,s):NaN}findAlignmentInRegion(a,s,l,o){const u=Math.floor(o*a),x=Math.max(0,s-u),p=Math.min(this.image.getWidth()-1,s+u);if(p-x<a*3)throw new z("Alignment top exceeds estimated module size.");const v=Math.max(0,l-u),A=Math.min(this.image.getHeight()-1,l+u);if(A-v<a*3)throw new z("Alignment bottom exceeds estimated module size.");return new bn(this.image,x,v,p-x,A-v,a,this.resultPointCallback).find()}}class os{constructor(){this.decoder=new ql}getDecoder(){return this.decoder}decode(a,s){let l,o;if(s!=null&&s.get(F.PURE_BARCODE)!==void 0){const v=os.extractPureBits(a.getBlackMatrix());l=this.decoder.decodeBitMatrix(v,s),o=os.NO_POINTS}else{const v=new Zs(a.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(v.getBits(),s),o=v.getPoints()}l.getOther()instanceof ac&&l.getOther().applyMirroredCorrection(o);const u=new ie(l.getText(),l.getRawBytes(),void 0,o,oe.QR_CODE,void 0),x=l.getByteSegments();x!==null&&u.putMetadata(te.BYTE_SEGMENTS,x);const p=l.getECLevel();return p!==null&&u.putMetadata(te.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(u.putMetadata(te.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),u.putMetadata(te.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),u}reset(){}static extractPureBits(a){const s=a.getTopLeftOnBit(),l=a.getBottomRightOnBit();if(s===null||l===null)throw new z;const o=this.moduleSize(s,a);let u=s[1],x=l[1],p=s[0],v=l[0];if(p>=v||u>=x)throw new z;if(x-u!==v-p&&(v=p+(x-u),v>=a.getWidth()))throw new z;const A=Math.round((v-p+1)/o),T=Math.round((x-u+1)/o);if(A<=0||T<=0)throw new z;if(T!==A)throw new z;const H=Math.floor(o/2);u+=H,p+=H;const X=p+Math.floor((A-1)*o)-v;if(X>0){if(X>H)throw new z;p-=X}const ae=u+Math.floor((T-1)*o)-x;if(ae>0){if(ae>H)throw new z;u-=ae}const fe=new J(A,T);for(let ge=0;ge<T;ge++){const je=u+Math.floor(ge*o);for(let _e=0;_e<A;_e++)a.get(p+Math.floor(_e*o),je)&&fe.set(_e,ge)}return fe}static moduleSize(a,s){const l=s.getHeight(),o=s.getWidth();let u=a[0],x=a[1],p=!0,v=0;for(;u<o&&x<l;){if(p!==s.get(u,x)){if(++v===5)break;p=!p}u++,x++}if(u===o||x===l)throw new z;return(u-a[0])/7}}os.NO_POINTS=new Array;class ft{PDF417Common(){}static getBitCountSum(a){return Ee.sum(a)}static toIntArray(a){if(a==null||!a.length)return ft.EMPTY_INT_ARRAY;const s=new Int32Array(a.length);let l=0;for(const o of a)s[l++]=o;return s}static getCodeword(a){const s=L.binarySearch(ft.SYMBOL_TABLE,a&262143);return s<0?-1:(ft.CODEWORD_TABLE[s]-1)%ft.NUMBER_OF_CODEWORDS}}ft.NUMBER_OF_CODEWORDS=929,ft.MAX_CODEWORDS_IN_BARCODE=ft.NUMBER_OF_CODEWORDS-1,ft.MIN_ROWS_IN_BARCODE=3,ft.MAX_ROWS_IN_BARCODE=90,ft.MODULES_IN_CODEWORD=17,ft.MODULES_IN_STOP_PATTERN=18,ft.BARS_IN_MODULE=8,ft.EMPTY_INT_ARRAY=new Int32Array([]),ft.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ft.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class cs{constructor(a,s){this.bits=a,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class vt{static detectMultiple(a,s,l){let o=a.getBlackMatrix(),u=vt.detect(l,o);return u.length||(o=o.clone(),o.rotate180(),u=vt.detect(l,o)),new cs(o,u)}static detect(a,s){const l=new Array;let o=0,u=0,x=!1;for(;o<s.getHeight();){const p=vt.findVertices(s,o,u);if(p[0]==null&&p[3]==null){if(!x)break;x=!1,u=0;for(const v of l)v[1]!=null&&(o=Math.trunc(Math.max(o,v[1].getY()))),v[3]!=null&&(o=Math.max(o,Math.trunc(v[3].getY())));o+=vt.ROW_STEP;continue}if(x=!0,l.push(p),!a)break;p[2]!=null?(u=Math.trunc(p[2].getX()),o=Math.trunc(p[2].getY())):(u=Math.trunc(p[4].getX()),o=Math.trunc(p[4].getY()))}return l}static findVertices(a,s,l){const o=a.getHeight(),u=a.getWidth(),x=new Array(8);return vt.copyToResult(x,vt.findRowsWithPattern(a,o,u,s,l,vt.START_PATTERN),vt.INDEXES_START_PATTERN),x[4]!=null&&(l=Math.trunc(x[4].getX()),s=Math.trunc(x[4].getY())),vt.copyToResult(x,vt.findRowsWithPattern(a,o,u,s,l,vt.STOP_PATTERN),vt.INDEXES_STOP_PATTERN),x}static copyToResult(a,s,l){for(let o=0;o<l.length;o++)a[l[o]]=s[o]}static findRowsWithPattern(a,s,l,o,u,x){const p=new Array(4);let v=!1;const A=new Int32Array(x.length);for(;o<s;o+=vt.ROW_STEP){let H=vt.findGuardPattern(a,u,o,l,!1,x,A);if(H!=null){for(;o>0;){const X=vt.findGuardPattern(a,u,--o,l,!1,x,A);if(X!=null)H=X;else{o++;break}}p[0]=new Pe(H[0],o),p[1]=new Pe(H[1],o),v=!0;break}}let T=o+1;if(v){let H=0,X=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;T<s;T++){const ae=vt.findGuardPattern(a,X[0],T,l,!1,x,A);if(ae!=null&&Math.abs(X[0]-ae[0])<vt.MAX_PATTERN_DRIFT&&Math.abs(X[1]-ae[1])<vt.MAX_PATTERN_DRIFT)X=ae,H=0;else{if(H>vt.SKIPPED_ROW_COUNT_MAX)break;H++}}T-=H+1,p[2]=new Pe(X[0],T),p[3]=new Pe(X[1],T)}return T-o<vt.BARCODE_MIN_HEIGHT&&L.fill(p,null),p}static findGuardPattern(a,s,l,o,u,x,p){L.fillWithin(p,0,p.length,0);let v=s,A=0;for(;a.get(v,l)&&v>0&&A++<vt.MAX_PIXEL_DRIFT;)v--;let T=v,H=0,X=x.length;for(let ae=u;T<o;T++)if(a.get(T,l)!==ae)p[H]++;else{if(H===X-1){if(vt.patternMatchVariance(p,x,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return new Int32Array([v,T]);v+=p[0]+p[1],D.arraycopy(p,2,p,0,H-1),p[H-1]=0,p[H]=0,H--}else H++;p[H]=1,ae=!ae}return H===X-1&&vt.patternMatchVariance(p,x,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE?new Int32Array([v,T-1]):null}static patternMatchVariance(a,s,l){let o=a.length,u=0,x=0;for(let A=0;A<o;A++)u+=a[A],x+=s[A];if(u<x)return 1/0;let p=u/x;l*=p;let v=0;for(let A=0;A<o;A++){let T=a[A],H=s[A]*p,X=T>H?T-H:H-T;if(X>l)return 1/0;v+=X}return v/u}}vt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),vt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),vt.MAX_AVG_VARIANCE=.42,vt.MAX_INDIVIDUAL_VARIANCE=.8,vt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),vt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),vt.MAX_PIXEL_DRIFT=3,vt.MAX_PATTERN_DRIFT=5,vt.SKIPPED_ROW_COUNT_MAX=25,vt.ROW_STEP=5,vt.BARCODE_MIN_HEIGHT=10;class wa{constructor(a,s){if(s.length===0)throw new E;this.field=a;let l=s.length;if(l>1&&s[0]===0){let o=1;for(;o<l&&s[o]===0;)o++;o===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-o),D.arraycopy(s,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);if(a===1){let o=0;for(let u of this.coefficients)o=this.field.add(o,u);return o}let s=this.coefficients[0],l=this.coefficients.length;for(let o=1;o<l;o++)s=this.field.add(this.field.multiply(a,s),this.coefficients[o]);return s}add(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let s=this.coefficients,l=a.coefficients;if(s.length>l.length){let x=s;s=l,l=x}let o=new Int32Array(l.length),u=l.length-s.length;D.arraycopy(l,0,o,0,u);for(let x=u;x<l.length;x++)o[x]=this.field.add(s[x-u],l[x]);return new wa(this.field,o)}subtract(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof wa?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new wa(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,o=a.coefficients,u=o.length,x=new Int32Array(l+u-1);for(let p=0;p<l;p++){let v=s[p];for(let A=0;A<u;A++)x[p+A]=this.field.add(x[p+A],this.field.multiply(v,o[A]))}return new wa(this.field,x)}negative(){let a=this.coefficients.length,s=new Int32Array(a);for(let l=0;l<a;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new wa(this.field,s)}multiplyScalar(a){if(a===0)return new wa(this.field,new Int32Array([0]));if(a===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let o=0;o<s;o++)l[o]=this.field.multiply(this.coefficients[o],a);return new wa(this.field,l)}multiplyByMonomial(a,s){if(a<0)throw new E;if(s===0)return new wa(this.field,new Int32Array([0]));let l=this.coefficients.length,o=new Int32Array(l+a);for(let u=0;u<l;u++)o[u]=this.field.multiply(this.coefficients[u],s);return new wa(this.field,o)}toString(){let a=new ne;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(a.append(" - "),l=-l):a.length()>0&&a.append(" + "),(s===0||l!==1)&&a.append(l),s!==0&&(s===1?a.append("x"):(a.append("x^"),a.append(s))))}return a.toString()}}class Ss{add(a,s){return(a+s)%this.modulus}subtract(a,s){return(this.modulus+a-s)%this.modulus}exp(a){return this.expTable[a]}log(a){if(a===0)throw new E;return this.logTable[a]}inverse(a){if(a===0)throw new Ke;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,s){return a===0||s===0?0:this.expTable[(this.logTable[a]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class nl extends Ss{constructor(a,s){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let l=1;for(let o=0;o<a;o++)this.expTable[o]=l,l=l*s%a;for(let o=0;o<a-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new wa(this,new Int32Array([0])),this.one=new wa(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,s){if(a<0)throw new E;if(s===0)return this.zero;let l=new Int32Array(a+1);return l[0]=s,new wa(this,l)}}nl.PDF417_GF=new nl(ft.NUMBER_OF_CODEWORDS,3);class ll{constructor(){this.field=nl.PDF417_GF}decode(a,s,l){let o=new wa(this.field,a),u=new Int32Array(s),x=!1;for(let fe=s;fe>0;fe--){let ge=o.evaluateAt(this.field.exp(fe));u[s-fe]=ge,ge!==0&&(x=!0)}if(!x)return 0;let p=this.field.getOne();if(l!=null)for(const fe of l){let ge=this.field.exp(a.length-1-fe),je=new wa(this.field,new Int32Array([this.field.subtract(0,ge),1]));p=p.multiply(je)}let v=new wa(this.field,u),A=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),v,s),T=A[0],H=A[1],X=this.findErrorLocations(T),ae=this.findErrorMagnitudes(H,T,X);for(let fe=0;fe<X.length;fe++){let ge=a.length-1-this.field.log(X[fe]);if(ge<0)throw M.getChecksumInstance();a[ge]=this.field.subtract(a[ge],ae[fe])}return X.length}runEuclideanAlgorithm(a,s,l){if(a.getDegree()<s.getDegree()){let X=a;a=s,s=X}let o=a,u=s,x=this.field.getZero(),p=this.field.getOne();for(;u.getDegree()>=Math.round(l/2);){let X=o,ae=x;if(o=u,x=p,o.isZero())throw M.getChecksumInstance();u=X;let fe=this.field.getZero(),ge=o.getCoefficient(o.getDegree()),je=this.field.inverse(ge);for(;u.getDegree()>=o.getDegree()&&!u.isZero();){let _e=u.getDegree()-o.getDegree(),Ge=this.field.multiply(u.getCoefficient(u.getDegree()),je);fe=fe.add(this.field.buildMonomial(_e,Ge)),u=u.subtract(o.multiplyByMonomial(_e,Ge))}p=fe.multiply(x).subtract(ae).negative()}let v=p.getCoefficient(0);if(v===0)throw M.getChecksumInstance();let A=this.field.inverse(v),T=p.multiply(A),H=u.multiply(A);return[T,H]}findErrorLocations(a){let s=a.getDegree(),l=new Int32Array(s),o=0;for(let u=1;u<this.field.getSize()&&o<s;u++)a.evaluateAt(u)===0&&(l[o]=this.field.inverse(u),o++);if(o!==s)throw M.getChecksumInstance();return l}findErrorMagnitudes(a,s,l){let o=s.getDegree(),u=new Int32Array(o);for(let A=1;A<=o;A++)u[o-A]=this.field.multiply(A,s.getCoefficient(A));let x=new wa(this.field,u),p=l.length,v=new Int32Array(p);for(let A=0;A<p;A++){let T=this.field.inverse(l[A]),H=this.field.subtract(0,a.evaluateAt(T)),X=this.field.inverse(x.evaluateAt(T));v[A]=this.field.multiply(H,X)}return v}}class As{constructor(a,s,l,o,u){a instanceof As?this.constructor_2(a):this.constructor_1(a,s,l,o,u)}constructor_1(a,s,l,o,u){const x=s==null||l==null,p=o==null||u==null;if(x&&p)throw new z;x?(s=new Pe(0,o.getY()),l=new Pe(0,u.getY())):p&&(o=new Pe(a.getWidth()-1,s.getY()),u=new Pe(a.getWidth()-1,l.getY())),this.image=a,this.topLeft=s,this.bottomLeft=l,this.topRight=o,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(o.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),o.getY())),this.maxY=Math.trunc(Math.max(l.getY(),u.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,s){return a==null?s:s==null?a:new As(a.image,a.topLeft,a.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(a,s,l){let o=this.topLeft,u=this.bottomLeft,x=this.topRight,p=this.bottomRight;if(a>0){let v=l?this.topLeft:this.topRight,A=Math.trunc(v.getY()-a);A<0&&(A=0);let T=new Pe(v.getX(),A);l?o=T:x=T}if(s>0){let v=l?this.bottomLeft:this.bottomRight,A=Math.trunc(v.getY()+s);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let T=new Pe(v.getX(),A);l?u=T:p=T}return new As(this.image,o,u,x,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Gl{constructor(a,s,l,o){this.columnCount=a,this.errorCorrectionLevel=o,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Es{constructor(){this.buffer=""}static form(a,s){let l=-1;function o(x,p,v,A,T,H){if(x==="%%")return"%";if(s[++l]===void 0)return;x=A?parseInt(A.substr(1)):void 0;let X=T?parseInt(T.substr(1)):void 0,ae;switch(H){case"s":ae=s[l];break;case"c":ae=s[l][0];break;case"f":ae=parseFloat(s[l]).toFixed(x);break;case"p":ae=parseFloat(s[l]).toPrecision(x);break;case"e":ae=parseFloat(s[l]).toExponential(x);break;case"x":ae=parseInt(s[l]).toString(X||16);break;case"d":ae=parseFloat(parseInt(s[l],X||10).toPrecision(x)).toFixed(0);break}ae=typeof ae=="object"?JSON.stringify(ae):(+ae).toString(X);let fe=parseInt(v),ge=v&&v[0]+""=="0"?"0":" ";for(;ae.length<fe;)ae=p!==void 0?ae+ge:ge+ae;return ae}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(u,o)}format(a,...s){this.buffer+=Es.form(a,s)}toString(){return this.buffer}}class vn{constructor(a){this.boundingBox=new As(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let s=this.getCodeword(a);if(s!=null)return s;for(let l=1;l<vn.MAX_NEARBY_DISTANCE;l++){let o=this.imageRowToCodewordIndex(a)-l;if(o>=0&&(s=this.codewords[o],s!=null)||(o=this.imageRowToCodewordIndex(a)+l,o<this.codewords.length&&(s=this.codewords[o],s!=null)))return s}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,s){this.codewords[this.imageRowToCodewordIndex(a)]=s}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const a=new Es;let s=0;for(const l of this.codewords){if(l==null){a.format("%3d:    |   %n",s++);continue}a.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return a.toString()}}vn.MAX_NEARBY_DISTANCE=5;class Fa{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let s=this.values.get(a);s==null&&(s=0),s++,this.values.set(a,s)}getValue(){let a=-1,s=new Array;for(const[l,o]of this.values.entries()){const u={getKey:()=>l,getValue:()=>o};u.getValue()>a?(a=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===a&&s.push(u.getKey())}return ft.toIntArray(s)}getConfidence(a){return this.values.get(a)}}class _s extends vn{constructor(a,s){super(a),this._isLeft=s}setRowNumbers(){for(let a of this.getCodewords())a?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,a);let l=this.getBoundingBox(),o=this._isLeft?l.getTopLeft():l.getTopRight(),u=this._isLeft?l.getBottomLeft():l.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(o.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),v=-1,A=1,T=0;for(let H=x;H<p;H++){if(s[H]==null)continue;let X=s[H],ae=X.getRowNumber()-v;if(ae===0)T++;else if(ae===1)A=Math.max(A,T),T=1,v=X.getRowNumber();else if(ae<0||X.getRowNumber()>=a.getRowCount()||ae>H)s[H]=null;else{let fe;A>2?fe=(A-2)*ae:fe=ae;let ge=fe>=H;for(let je=1;je<=fe&&!ge;je++)ge=s[H-je]!=null;ge?s[H]=null:(v=X.getRowNumber(),T=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let s=new Int32Array(a.getRowCount());for(let l of this.getCodewords())if(l!=null){let o=l.getRowNumber();if(o>=s.length)continue;s[o]++}return s}adjustIncompleteIndicatorColumnRowNumbers(a){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),o=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),x=this.imageRowToCodewordIndex(Math.trunc(o.getY())),p=this.getCodewords(),v=-1;for(let A=u;A<x;A++){if(p[A]==null)continue;let T=p[A];T.setRowNumberAsRowIndicatorColumn();let H=T.getRowNumber()-v;H===0||(H===1?v=T.getRowNumber():T.getRowNumber()>=a.getRowCount()?p[A]=null:v=T.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),s=new Fa,l=new Fa,o=new Fa,u=new Fa;for(let p of a){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let v=p.getValue()%30,A=p.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:l.setValue(v*3+1);break;case 1:u.setValue(v/3),o.setValue(v%3);break;case 2:s.setValue(v+1);break}}if(s.getValue().length===0||l.getValue().length===0||o.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+o.getValue()[0]<ft.MIN_ROWS_IN_BARCODE||l.getValue()[0]+o.getValue()[0]>ft.MAX_ROWS_IN_BARCODE)return null;let x=new Gl(s.getValue()[0],l.getValue()[0],o.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(a,x),x}removeIncorrectCodewords(a,s){for(let l=0;l<a.length;l++){let o=a[l];if(a[l]==null)continue;let u=o.getValue()%30,x=o.getRowNumber();if(x>s.getRowCount()){a[l]=null;continue}switch(this._isLeft||(x+=2),x%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(a[l]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(a[l]=null);break;case 2:u+1!==s.getColumnCount()&&(a[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ts{constructor(a,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let a=ft.MAX_CODEWORDS_IN_BARCODE,s;do s=a,a=this.adjustRowNumbersAndGetCount();while(a>0&&a<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){a?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(a===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let o=0;o<l.length;o++)l[o]!=null&&(l[o].hasValidRowNumber()||this.adjustRowNumbers(s,o,l))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let a=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++)if(a[l]!=null&&s[l]!=null&&a[l].getRowNumber()===s[l].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let u=this.detectionResultColumns[o].getCodewords()[l];u!=null&&(u.setRowNumber(a[l].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let a=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let o=s[l].getRowNumber(),u=0;for(let x=this.barcodeColumnCount+1;x>0&&u<this.ADJUST_ROW_NUMBER_SKIP;x--){let p=this.detectionResultColumns[x].getCodewords()[l];p!=null&&(u=Ts.adjustRowNumberIfValid(o,u,p),p.hasValidRowNumber()||a++)}}return a}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let a=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let o=s[l].getRowNumber(),u=0;for(let x=1;x<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;x++){let p=this.detectionResultColumns[x].getCodewords()[l];p!=null&&(u=Ts.adjustRowNumberIfValid(o,u,p),p.hasValidRowNumber()||a++)}}return a}static adjustRowNumberIfValid(a,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(a)?(l.setRowNumber(a),s=0):++s),s}adjustRowNumbers(a,s,l){if(!this.detectionResultColumns[a-1])return;let o=l[s],u=this.detectionResultColumns[a-1].getCodewords(),x=u;this.detectionResultColumns[a+1]!=null&&(x=this.detectionResultColumns[a+1].getCodewords());let p=new Array(14);p[2]=u[s],p[3]=x[s],s>0&&(p[0]=l[s-1],p[4]=u[s-1],p[5]=x[s-1]),s>1&&(p[8]=l[s-2],p[10]=u[s-2],p[11]=x[s-2]),s<l.length-1&&(p[1]=l[s+1],p[6]=u[s+1],p[7]=x[s+1]),s<l.length-2&&(p[9]=l[s+2],p[12]=u[s+2],p[13]=x[s+2]);for(let v of p)if(Ts.adjustRowNumber(o,v))return}static adjustRowNumber(a,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===a.getBucket()?(a.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,s){this.detectionResultColumns[a]=s}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];a==null&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Es;for(let l=0;l<a.getCodewords().length;l++){s.format("CW %3d:",l);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[o].getCodewords()[l];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class ds{constructor(a,s,l,o){this.rowNumber=ds.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==ds.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}ds.BARCODE_ROW_UNKNOWN=-1;class ur{static initialize(){for(let a=0;a<ft.SYMBOL_TABLE.length;a++){let s=ft.SYMBOL_TABLE[a],l=s&1;for(let o=0;o<ft.BARS_IN_MODULE;o++){let u=0;for(;(s&1)===l;)u+=1,s>>=1;l=s&1,ur.RATIOS_TABLE[a]||(ur.RATIOS_TABLE[a]=new Array(ft.BARS_IN_MODULE)),ur.RATIOS_TABLE[a][ft.BARS_IN_MODULE-o-1]=Math.fround(u/ft.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let s=ur.getDecodedCodewordValue(ur.sampleBitCounts(a));return s!==-1?s:ur.getClosestDecodedValue(a)}static sampleBitCounts(a){let s=Ee.sum(a),l=new Int32Array(ft.BARS_IN_MODULE),o=0,u=0;for(let x=0;x<ft.MODULES_IN_CODEWORD;x++){let p=s/(2*ft.MODULES_IN_CODEWORD)+x*s/ft.MODULES_IN_CODEWORD;u+a[o]<=p&&(u+=a[o],o++),l[o]++}return l}static getDecodedCodewordValue(a){let s=ur.getBitValue(a);return ft.getCodeword(s)===-1?-1:s}static getBitValue(a){let s=0;for(let l=0;l<a.length;l++)for(let o=0;o<a[l];o++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(a){let s=Ee.sum(a),l=new Array(ft.BARS_IN_MODULE);if(s>1)for(let x=0;x<l.length;x++)l[x]=Math.fround(a[x]/s);let o=be.MAX_VALUE,u=-1;this.bSymbolTableReady||ur.initialize();for(let x=0;x<ur.RATIOS_TABLE.length;x++){let p=0,v=ur.RATIOS_TABLE[x];for(let A=0;A<ft.BARS_IN_MODULE;A++){let T=Math.fround(v[A]-l[A]);if(p+=Math.fround(T*T),p>=o)break}p<o&&(o=p,u=ft.SYMBOL_TABLE[x])}return u}}ur.bSymbolTableReady=!1,ur.RATIOS_TABLE=new Array(ft.SYMBOL_TABLE.length).map(U=>new Array(ft.BARS_IN_MODULE));class Yl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class Xl{static parseLong(a,s=void 0){return parseInt(a,s)}}class Nn extends b{}Nn.kind="NullPointerException";class $l{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,s,l){if(a==null)throw new Nn;if(s<0||s>a.length||l<0||s+l>a.length||s+l<0)throw new G;if(l===0)return;for(let o=0;o<l;o++)this.write(a[s+o])}flush(){}close(){}}class rc extends b{}class Vd extends $l{constructor(a=32){if(super(),this.count=0,a<0)throw new E("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let l=this.buf.length<<1;if(l-a<0&&(l=a),l<0){if(a<0)throw new rc;l=O.MAX_VALUE}this.buf=L.copyOfUint8Array(this.buf,l)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,s,l){if(s<0||s>a.length||l<0||s+l-a.length>0)throw new G;this.ensureCapacity(this.count+l),D.arraycopy(a,s,this.buf,this.count,l),this.count+=l}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return L.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}var Wt;(function(U){U[U.ALPHA=0]="ALPHA",U[U.LOWER=1]="LOWER",U[U.MIXED=2]="MIXED",U[U.PUNCT=3]="PUNCT",U[U.ALPHA_SHIFT=4]="ALPHA_SHIFT",U[U.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Wt||(Wt={}));function sc(){if(typeof window<"u")return window.BigInt||null;if(typeof od<"u")return od.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let jn;function Ms(U){if(typeof jn>"u"&&(jn=sc()),jn===null)throw new Error("BigInt is not supported!");return jn(U)}function qd(){let U=[];U[0]=Ms(1);let a=Ms(900);U[1]=a;for(let s=2;s<16;s++)U[s]=U[s-1]*a;return U}class De{static decode(a,s){let l=new ne(""),o=$.ISO8859_1;l.enableDecoding(o);let u=1,x=a[u++],p=new Yl;for(;u<a[0];){switch(x){case De.TEXT_COMPACTION_MODE_LATCH:u=De.textCompaction(a,u,l);break;case De.BYTE_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:u=De.byteCompaction(x,a,o,u,l);break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(a[u++]);break;case De.NUMERIC_COMPACTION_MODE_LATCH:u=De.numericCompaction(a,u,l);break;case De.ECI_CHARSET:$.getCharacterSetECIByValue(a[u++]);break;case De.ECI_GENERAL_PURPOSE:u+=2;break;case De.ECI_USER_DEFINED:u++;break;case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=De.decodeMacroBlock(a,u,p);break;case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:throw new q;default:u--,u=De.textCompaction(a,u,l);break}if(u<a.length)x=a[u++];else throw q.getFormatInstance()}if(l.length()===0)throw q.getFormatInstance();let v=new Ie(null,l.toString(),null,s);return v.setOther(p),v}static decodeMacroBlock(a,s,l){if(s+De.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw q.getFormatInstance();let o=new Int32Array(De.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<De.NUMBER_OF_SEQUENCE_CODEWORDS;p++,s++)o[p]=a[s];l.setSegmentIndex(O.parseInt(De.decodeBase900toBase10(o,De.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new ne;s=De.textCompaction(a,s,u),l.setFileId(u.toString());let x=-1;for(a[s]===De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(x=s+1);s<a[0];)switch(a[s]){case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,a[s]){case De.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new ne;s=De.textCompaction(a,s+1,p),l.setFileName(p.toString());break;case De.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new ne;s=De.textCompaction(a,s+1,v),l.setSender(v.toString());break;case De.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new ne;s=De.textCompaction(a,s+1,A),l.setAddressee(A.toString());break;case De.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let T=new ne;s=De.numericCompaction(a,s+1,T),l.setSegmentCount(O.parseInt(T.toString()));break;case De.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let H=new ne;s=De.numericCompaction(a,s+1,H),l.setTimestamp(Xl.parseLong(H.toString()));break;case De.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let X=new ne;s=De.numericCompaction(a,s+1,X),l.setChecksum(O.parseInt(X.toString()));break;case De.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ae=new ne;s=De.numericCompaction(a,s+1,ae),l.setFileSize(Xl.parseLong(ae.toString()));break;default:throw q.getFormatInstance()}break;case De.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(x!==-1){let p=s-x;l.isLastSegment()&&p--,l.setOptionalData(L.copyOfRange(a,x,x+p))}return s}static textCompaction(a,s,l){let o=new Int32Array((a[0]-s)*2),u=new Int32Array((a[0]-s)*2),x=0,p=!1;for(;s<a[0]&&!p;){let v=a[s++];if(v<De.TEXT_COMPACTION_MODE_LATCH)o[x]=v/30,o[x+1]=v%30,x+=2;else switch(v){case De.TEXT_COMPACTION_MODE_LATCH:o[x++]=De.TEXT_COMPACTION_MODE_LATCH;break;case De.BYTE_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.NUMERIC_COMPACTION_MODE_LATCH:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:s--,p=!0;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[x]=De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=a[s++],u[x]=v,x++;break}}return De.decodeTextCompaction(o,u,x,l),s}static decodeTextCompaction(a,s,l,o){let u=Wt.ALPHA,x=Wt.ALPHA,p=0;for(;p<l;){let v=a[p],A="";switch(u){case Wt.ALPHA:if(v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case De.LL:u=Wt.LOWER;break;case De.ML:u=Wt.MIXED;break;case De.PS:x=u,u=Wt.PUNCT_SHIFT;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(s[p]);break;case De.TEXT_COMPACTION_MODE_LATCH:u=Wt.ALPHA;break}break;case Wt.LOWER:if(v<26)A=String.fromCharCode(97+v);else switch(v){case 26:A=" ";break;case De.AS:x=u,u=Wt.ALPHA_SHIFT;break;case De.ML:u=Wt.MIXED;break;case De.PS:x=u,u=Wt.PUNCT_SHIFT;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(s[p]);break;case De.TEXT_COMPACTION_MODE_LATCH:u=Wt.ALPHA;break}break;case Wt.MIXED:if(v<De.PL)A=De.MIXED_CHARS[v];else switch(v){case De.PL:u=Wt.PUNCT;break;case 26:A=" ";break;case De.LL:u=Wt.LOWER;break;case De.AL:u=Wt.ALPHA;break;case De.PS:x=u,u=Wt.PUNCT_SHIFT;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(s[p]);break;case De.TEXT_COMPACTION_MODE_LATCH:u=Wt.ALPHA;break}break;case Wt.PUNCT:if(v<De.PAL)A=De.PUNCT_CHARS[v];else switch(v){case De.PAL:u=Wt.ALPHA;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(s[p]);break;case De.TEXT_COMPACTION_MODE_LATCH:u=Wt.ALPHA;break}break;case Wt.ALPHA_SHIFT:if(u=x,v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case De.TEXT_COMPACTION_MODE_LATCH:u=Wt.ALPHA;break}break;case Wt.PUNCT_SHIFT:if(u=x,v<De.PAL)A=De.PUNCT_CHARS[v];else switch(v){case De.PAL:u=Wt.ALPHA;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(s[p]);break;case De.TEXT_COMPACTION_MODE_LATCH:u=Wt.ALPHA;break}break}A!==""&&o.append(A),p++}}static byteCompaction(a,s,l,o,u){let x=new Vd,p=0,v=0,A=!1;switch(a){case De.BYTE_COMPACTION_MODE_LATCH:let T=new Int32Array(6),H=s[o++];for(;o<s[0]&&!A;)switch(T[p++]=H,v=900*v+H,H=s[o++],H){case De.TEXT_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH:case De.NUMERIC_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:o--,A=!0;break;default:if(p%5===0&&p>0){for(let X=0;X<6;++X)x.write(Number(Ms(v)>>Ms(8*(5-X))));v=0,p=0}break}o===s[0]&&H<De.TEXT_COMPACTION_MODE_LATCH&&(T[p++]=H);for(let X=0;X<p;X++)x.write(T[X]);break;case De.BYTE_COMPACTION_MODE_LATCH_6:for(;o<s[0]&&!A;){let X=s[o++];if(X<De.TEXT_COMPACTION_MODE_LATCH)p++,v=900*v+X;else switch(X){case De.TEXT_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH:case De.NUMERIC_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:o--,A=!0;break}if(p%5===0&&p>0){for(let ae=0;ae<6;++ae)x.write(Number(Ms(v)>>Ms(8*(5-ae))));v=0,p=0}}break}return u.append(he.decode(x.toByteArray(),l)),o}static numericCompaction(a,s,l){let o=0,u=!1,x=new Int32Array(De.MAX_NUMERIC_CODEWORDS);for(;s<a[0]&&!u;){let p=a[s++];if(s===a[0]&&(u=!0),p<De.TEXT_COMPACTION_MODE_LATCH)x[o]=p,o++;else switch(p){case De.TEXT_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(o%De.MAX_NUMERIC_CODEWORDS===0||p===De.NUMERIC_COMPACTION_MODE_LATCH||u)&&o>0&&(l.append(De.decodeBase900toBase10(x,o)),o=0)}return s}static decodeBase900toBase10(a,s){let l=Ms(0);for(let u=0;u<s;u++)l+=De.EXP900[s-u-1]*Ms(a[u]);let o=l.toString();if(o.charAt(0)!=="1")throw new q;return o.substring(1)}}De.TEXT_COMPACTION_MODE_LATCH=900,De.BYTE_COMPACTION_MODE_LATCH=901,De.NUMERIC_COMPACTION_MODE_LATCH=902,De.BYTE_COMPACTION_MODE_LATCH_6=924,De.ECI_USER_DEFINED=925,De.ECI_GENERAL_PURPOSE=926,De.ECI_CHARSET=927,De.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,De.MACRO_PDF417_TERMINATOR=922,De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,De.MAX_NUMERIC_CODEWORDS=15,De.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,De.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,De.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,De.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,De.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,De.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,De.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,De.PL=25,De.LL=27,De.AS=27,De.ML=28,De.AL=28,De.PS=29,De.PAL=29,De.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,De.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",De.EXP900=sc()?qd():[],De.NUMBER_OF_SEQUENCE_CODEWORDS=2;class kt{constructor(){}static decode(a,s,l,o,u,x,p){let v=new As(a,s,l,o,u),A=null,T=null,H;for(let fe=!0;;fe=!1){if(s!=null&&(A=kt.getRowIndicatorColumn(a,v,s,!0,x,p)),o!=null&&(T=kt.getRowIndicatorColumn(a,v,o,!1,x,p)),H=kt.merge(A,T),H==null)throw z.getNotFoundInstance();let ge=H.getBoundingBox();if(fe&&ge!=null&&(ge.getMinY()<v.getMinY()||ge.getMaxY()>v.getMaxY()))v=ge;else break}H.setBoundingBox(v);let X=H.getBarcodeColumnCount()+1;H.setDetectionResultColumn(0,A),H.setDetectionResultColumn(X,T);let ae=A!=null;for(let fe=1;fe<=X;fe++){let ge=ae?fe:X-fe;if(H.getDetectionResultColumn(ge)!==void 0)continue;let je;ge===0||ge===X?je=new _s(v,ge===0):je=new vn(v),H.setDetectionResultColumn(ge,je);let _e=-1,Ge=_e;for(let Xe=v.getMinY();Xe<=v.getMaxY();Xe++){if(_e=kt.getStartColumn(H,ge,Xe,ae),_e<0||_e>v.getMaxX()){if(Ge===-1)continue;_e=Ge}let qe=kt.detectCodeword(a,v.getMinX(),v.getMaxX(),ae,_e,Xe,x,p);qe!=null&&(je.setCodeword(Xe,qe),Ge=_e,x=Math.min(x,qe.getWidth()),p=Math.max(p,qe.getWidth()))}}return kt.createDecoderResult(H)}static merge(a,s){if(a==null&&s==null)return null;let l=kt.getBarcodeMetadata(a,s);if(l==null)return null;let o=As.merge(kt.adjustBoundingBox(a),kt.adjustBoundingBox(s));return new Ts(l,o)}static adjustBoundingBox(a){if(a==null)return null;let s=a.getRowHeights();if(s==null)return null;let l=kt.getMax(s),o=0;for(let p of s)if(o+=l-p,p>0)break;let u=a.getCodewords();for(let p=0;o>0&&u[p]==null;p++)o--;let x=0;for(let p=s.length-1;p>=0&&(x+=l-s[p],!(s[p]>0));p--);for(let p=u.length-1;x>0&&u[p]==null;p--)x--;return a.getBoundingBox().addMissingRows(o,x,a.isLeft())}static getMax(a){let s=-1;for(let l of a)s=Math.max(s,l);return s}static getBarcodeMetadata(a,s){let l;if(a==null||(l=a.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let o;return s==null||(o=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==o.getColumnCount()&&l.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&l.getRowCount()!==o.getRowCount()?null:l}static getRowIndicatorColumn(a,s,l,o,u,x){let p=new _s(s,o);for(let v=0;v<2;v++){let A=v===0?1:-1,T=Math.trunc(Math.trunc(l.getX()));for(let H=Math.trunc(Math.trunc(l.getY()));H<=s.getMaxY()&&H>=s.getMinY();H+=A){let X=kt.detectCodeword(a,0,a.getWidth(),o,T,H,u,x);X!=null&&(p.setCodeword(H,X),o?T=X.getStartX():T=X.getEndX())}}return p}static adjustCodewordCount(a,s){let l=s[0][1],o=l.getValue(),u=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-kt.getNumberOfECCodeWords(a.getBarcodeECLevel());if(o.length===0){if(u<1||u>ft.MAX_CODEWORDS_IN_BARCODE)throw z.getNotFoundInstance();l.setValue(u)}else o[0]!==u&&l.setValue(u)}static createDecoderResult(a){let s=kt.createBarcodeMatrix(a);kt.adjustCodewordCount(a,s);let l=new Array,o=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),u=[],x=new Array;for(let v=0;v<a.getBarcodeRowCount();v++)for(let A=0;A<a.getBarcodeColumnCount();A++){let T=s[v][A+1].getValue(),H=v*a.getBarcodeColumnCount()+A;T.length===0?l.push(H):T.length===1?o[H]=T[0]:(x.push(H),u.push(T))}let p=new Array(u.length);for(let v=0;v<p.length;v++)p[v]=u[v];return kt.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),o,ft.toIntArray(l),ft.toIntArray(x),p)}static createDecoderResultFromAmbiguousValues(a,s,l,o,u){let x=new Int32Array(o.length),p=100;for(;p-- >0;){for(let v=0;v<x.length;v++)s[o[v]]=u[v][x[v]];try{return kt.decodeCodewords(s,a,l)}catch(v){if(!(v instanceof M))throw v}if(x.length===0)throw M.getChecksumInstance();for(let v=0;v<x.length;v++)if(x[v]<u[v].length-1){x[v]++;break}else if(x[v]=0,v===x.length-1)throw M.getChecksumInstance()}throw M.getChecksumInstance()}static createBarcodeMatrix(a){let s=Array.from({length:a.getBarcodeRowCount()},()=>new Array(a.getBarcodeColumnCount()+2));for(let o=0;o<s.length;o++)for(let u=0;u<s[o].length;u++)s[o][u]=new Fa;let l=0;for(let o of a.getDetectionResultColumns()){if(o!=null){for(let u of o.getCodewords())if(u!=null){let x=u.getRowNumber();if(x>=0){if(x>=s.length)continue;s[x][l].setValue(u.getValue())}}}l++}return s}static isValidBarcodeColumn(a,s){return s>=0&&s<=a.getBarcodeColumnCount()+1}static getStartColumn(a,s,l,o){let u=o?1:-1,x=null;if(kt.isValidBarcodeColumn(a,s-u)&&(x=a.getDetectionResultColumn(s-u).getCodeword(l)),x!=null)return o?x.getEndX():x.getStartX();if(x=a.getDetectionResultColumn(s).getCodewordNearby(l),x!=null)return o?x.getStartX():x.getEndX();if(kt.isValidBarcodeColumn(a,s-u)&&(x=a.getDetectionResultColumn(s-u).getCodewordNearby(l)),x!=null)return o?x.getEndX():x.getStartX();let p=0;for(;kt.isValidBarcodeColumn(a,s-u);){s-=u;for(let v of a.getDetectionResultColumn(s).getCodewords())if(v!=null)return(o?v.getEndX():v.getStartX())+u*p*(v.getEndX()-v.getStartX());p++}return o?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,s,l,o,u,x,p,v){u=kt.adjustCodewordStartColumn(a,s,l,o,u,x);let A=kt.getModuleBitCount(a,s,l,o,u,x);if(A==null)return null;let T,H=Ee.sum(A);if(o)T=u+H;else{for(let fe=0;fe<A.length/2;fe++){let ge=A[fe];A[fe]=A[A.length-1-fe],A[A.length-1-fe]=ge}T=u,u=T-H}if(!kt.checkCodewordSkew(H,p,v))return null;let X=ur.getDecodedValue(A),ae=ft.getCodeword(X);return ae===-1?null:new ds(u,T,kt.getCodewordBucketNumber(X),ae)}static getModuleBitCount(a,s,l,o,u,x){let p=u,v=new Int32Array(8),A=0,T=o?1:-1,H=o;for(;(o?p<l:p>=s)&&A<v.length;)a.get(p,x)===H?(v[A]++,p+=T):(A++,H=!H);return A===v.length||p===(o?l:s)&&A===v.length-1?v:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,s,l,o,u,x){let p=u,v=o?-1:1;for(let A=0;A<2;A++){for(;(o?p>=s:p<l)&&o===a.get(p,x);){if(Math.abs(u-p)>kt.CODEWORD_SKEW_SIZE)return u;p+=v}v=-v,o=!o}return p}static checkCodewordSkew(a,s,l){return s-kt.CODEWORD_SKEW_SIZE<=a&&a<=l+kt.CODEWORD_SKEW_SIZE}static decodeCodewords(a,s,l){if(a.length===0)throw q.getFormatInstance();let o=1<<s+1,u=kt.correctErrors(a,l,o);kt.verifyCodewordCount(a,o);let x=De.decode(a,""+s);return x.setErrorsCorrected(u),x.setErasures(l.length),x}static correctErrors(a,s,l){if(s!=null&&s.length>l/2+kt.MAX_ERRORS||l<0||l>kt.MAX_EC_CODEWORDS)throw M.getChecksumInstance();return kt.errorCorrection.decode(a,l,s)}static verifyCodewordCount(a,s){if(a.length<4)throw q.getFormatInstance();let l=a[0];if(l>a.length)throw q.getFormatInstance();if(l===0)if(s<a.length)a[0]=a.length-s;else throw q.getFormatInstance()}static getBitCountForCodeword(a){let s=new Int32Array(8),l=0,o=s.length-1;for(;!((a&1)!==l&&(l=a&1,o--,o<0));)s[o]++,a>>=1;return s}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return kt.getCodewordBucketNumber(kt.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let s=new Es;for(let l=0;l<a.length;l++){s.format("Row %2d: ",l);for(let o=0;o<a[l].length;o++){let u=a[l][o];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}kt.CODEWORD_SKEW_SIZE=2,kt.MAX_ERRORS=3,kt.MAX_EC_CODEWORDS=512,kt.errorCorrection=new ll;class Za{decode(a,s=null){let l=Za.decode(a,s,!1);if(l==null||l.length===0||l[0]==null)throw z.getNotFoundInstance();return l[0]}decodeMultiple(a,s=null){try{return Za.decode(a,s,!0)}catch(l){throw l instanceof q||l instanceof M?z.getNotFoundInstance():l}}static decode(a,s,l){const o=new Array,u=vt.detectMultiple(a,s,l);for(const x of u.getPoints()){const p=kt.decode(u.getBits(),x[4],x[5],x[6],x[7],Za.getMinCodewordWidth(x),Za.getMaxCodewordWidth(x)),v=new ie(p.getText(),p.getRawBytes(),void 0,x,oe.PDF_417);v.putMetadata(te.ERROR_CORRECTION_LEVEL,p.getECLevel());const A=p.getOther();A!=null&&v.putMetadata(te.PDF417_EXTRA_METADATA,A),o.push(v)}return o.map(x=>x)}static getMaxWidth(a,s){return a==null||s==null?0:Math.trunc(Math.abs(a.getX()-s.getX()))}static getMinWidth(a,s){return a==null||s==null?O.MAX_VALUE:Math.trunc(Math.abs(a.getX()-s.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(Za.getMaxWidth(a[0],a[4]),Za.getMaxWidth(a[6],a[2])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN),Math.max(Za.getMaxWidth(a[1],a[5]),Za.getMaxWidth(a[7],a[3])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(Za.getMinWidth(a[0],a[4]),Za.getMinWidth(a[6],a[2])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN),Math.min(Za.getMinWidth(a[1],a[5]),Za.getMinWidth(a[7],a[3])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN)))}reset(){}}class il extends b{}il.kind="ReaderException";class nc{constructor(a,s){this.verbose=a===!0,s&&this.setHints(s)}decode(a,s){return s&&this.setHints(s),this.decodeInternal(a)}decodeWithState(a){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;const s=!h(a)&&a.get(F.TRY_HARDER)===!0,l=h(a)?null:a.get(F.POSSIBLE_FORMATS),o=new Array;if(!h(l)){const u=l.some(x=>x===oe.UPC_A||x===oe.UPC_E||x===oe.EAN_13||x===oe.EAN_8||x===oe.CODABAR||x===oe.CODE_39||x===oe.CODE_93||x===oe.CODE_128||x===oe.ITF||x===oe.RSS_14||x===oe.RSS_EXPANDED);u&&!s&&o.push(new js(a,this.verbose)),l.includes(oe.QR_CODE)&&o.push(new os),l.includes(oe.DATA_MATRIX)&&o.push(new Pr),l.includes(oe.AZTEC)&&o.push(new Mt),l.includes(oe.PDF_417)&&o.push(new Za),u&&s&&o.push(new js(a,this.verbose))}o.length===0&&(s||o.push(new js(a,this.verbose)),o.push(new os),o.push(new Pr),o.push(new Mt),o.push(new Za),s&&o.push(new js(a,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const a of this.readers)a.reset()}decodeInternal(a){if(this.readers===null)throw new il("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(a,this.hints)}catch(l){if(l instanceof il)continue}throw new z("No MultiFormat Readers were able to detect the code.")}}class Gd extends ye{constructor(a=null,s=500){const l=new nc;l.setHints(a),super(l,s)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class Yd extends ye{constructor(a=500){super(new Za,a)}}class Xd extends ye{constructor(a=500){super(new os,a)}}var ol;(function(U){U[U.ERROR_CORRECTION=0]="ERROR_CORRECTION",U[U.CHARACTER_SET=1]="CHARACTER_SET",U[U.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",U[U.MIN_SIZE=3]="MIN_SIZE",U[U.MAX_SIZE=4]="MAX_SIZE",U[U.MARGIN=5]="MARGIN",U[U.PDF417_COMPACT=6]="PDF417_COMPACT",U[U.PDF417_COMPACTION=7]="PDF417_COMPACTION",U[U.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",U[U.AZTEC_LAYERS=9]="AZTEC_LAYERS",U[U.QR_VERSION=10]="QR_VERSION"})(ol||(ol={}));var Oa=ol;class Fi{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new rt(a,Int32Array.from([1])))}buildGenerator(a){const s=this.cachedGenerators;if(a>=s.length){let l=s[s.length-1];const o=this.field;for(let u=s.length;u<=a;u++){const x=l.multiply(new rt(o,Int32Array.from([1,o.exp(u-1+o.getGeneratorBase())])));s.push(x),l=x}}return s[a]}encode(a,s){if(s===0)throw new E("No error correction bytes");const l=a.length-s;if(l<=0)throw new E("No data bytes provided");const o=this.buildGenerator(s),u=new Int32Array(l);D.arraycopy(a,0,u,0,l);let x=new rt(this.field,u);x=x.multiplyByMonomial(s,1);const v=x.divide(o)[1].getCoefficients(),A=s-v.length;for(let T=0;T<A;T++)a[l+T]=0;D.arraycopy(v,0,a,l+A,v.length)}}class ya{constructor(){}static applyMaskPenaltyRule1(a){return ya.applyMaskPenaltyRule1Internal(a,!0)+ya.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let s=0;const l=a.getArray(),o=a.getWidth(),u=a.getHeight();for(let x=0;x<u-1;x++){const p=l[x];for(let v=0;v<o-1;v++){const A=p[v];A===p[v+1]&&A===l[x+1][v]&&A===l[x+1][v+1]&&s++}}return ya.N2*s}static applyMaskPenaltyRule3(a){let s=0;const l=a.getArray(),o=a.getWidth(),u=a.getHeight();for(let x=0;x<u;x++)for(let p=0;p<o;p++){const v=l[x];p+6<o&&v[p]===1&&v[p+1]===0&&v[p+2]===1&&v[p+3]===1&&v[p+4]===1&&v[p+5]===0&&v[p+6]===1&&(ya.isWhiteHorizontal(v,p-4,p)||ya.isWhiteHorizontal(v,p+7,p+11))&&s++,x+6<u&&l[x][p]===1&&l[x+1][p]===0&&l[x+2][p]===1&&l[x+3][p]===1&&l[x+4][p]===1&&l[x+5][p]===0&&l[x+6][p]===1&&(ya.isWhiteVertical(l,p,x-4,x)||ya.isWhiteVertical(l,p,x+7,x+11))&&s++}return s*ya.N3}static isWhiteHorizontal(a,s,l){s=Math.max(s,0),l=Math.min(l,a.length);for(let o=s;o<l;o++)if(a[o]===1)return!1;return!0}static isWhiteVertical(a,s,l,o){l=Math.max(l,0),o=Math.min(o,a.length);for(let u=l;u<o;u++)if(a[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let s=0;const l=a.getArray(),o=a.getWidth(),u=a.getHeight();for(let v=0;v<u;v++){const A=l[v];for(let T=0;T<o;T++)A[T]===1&&s++}const x=a.getHeight()*a.getWidth();return Math.floor(Math.abs(s*2-x)*10/x)*ya.N4}static getDataMaskBit(a,s,l){let o,u;switch(a){case 0:o=l+s&1;break;case 1:o=l&1;break;case 2:o=s%3;break;case 3:o=(l+s)%3;break;case 4:o=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:u=l*s,o=(u&1)+u%3;break;case 6:u=l*s,o=(u&1)+u%3&1;break;case 7:u=l*s,o=u%3+(l+s&1)&1;break;default:throw new E("Invalid mask pattern: "+a)}return o===0}static applyMaskPenaltyRule1Internal(a,s){let l=0;const o=s?a.getHeight():a.getWidth(),u=s?a.getWidth():a.getHeight(),x=a.getArray();for(let p=0;p<o;p++){let v=0,A=-1;for(let T=0;T<u;T++){const H=s?x[p][T]:x[T][p];H===A?v++:(v>=5&&(l+=ya.N1+(v-5)),v=1,A=H)}v>=5&&(l+=ya.N1+(v-5))}return l}}ya.N1=3,ya.N2=3,ya.N3=40,ya.N4=10;class cl{constructor(a,s){this.width=a,this.height=s;const l=new Array(s);for(let o=0;o!==s;o++)l[o]=new Uint8Array(a);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(a,s){return this.bytes[s][a]}getArray(){return this.bytes}setNumber(a,s,l){this.bytes[s][a]=l}setBoolean(a,s,l){this.bytes[s][a]=l?1:0}clear(a){for(const s of this.bytes)L.fill(s,a)}equals(a){if(!(a instanceof cl))return!1;const s=a;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,o=this.height;l<o;++l){const u=this.bytes[l],x=s.bytes[l];for(let p=0,v=this.width;p<v;++p)if(u[p]!==x[p])return!1}return!0}toString(){const a=new ne;for(let s=0,l=this.height;s<l;++s){const o=this.bytes[s];for(let u=0,x=this.width;u<x;++u)switch(o[u]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ");break}a.append(`
`)}return a.toString()}}class Qs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const a=new ne;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<Qs.NUM_MASK_PATTERNS}}Qs.NUM_MASK_PATTERNS=8;class ea extends b{}ea.kind="WriterException";class gt{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,s,l,o,u){gt.clearMatrix(u),gt.embedBasicPatterns(l,u),gt.embedTypeInfo(s,o,u),gt.maybeEmbedVersionInfo(l,u),gt.embedDataBits(a,o,u)}static embedBasicPatterns(a,s){gt.embedPositionDetectionPatternsAndSeparators(s),gt.embedDarkDotAtLeftBottomCorner(s),gt.maybeEmbedPositionAdjustmentPatterns(a,s),gt.embedTimingPatterns(s)}static embedTypeInfo(a,s,l){const o=new P;gt.makeTypeInfoBits(a,s,o);for(let u=0,x=o.getSize();u<x;++u){const p=o.get(o.getSize()-1-u),v=gt.TYPE_INFO_COORDINATES[u],A=v[0],T=v[1];if(l.setBoolean(A,T,p),u<8){const H=l.getWidth()-u-1;l.setBoolean(H,8,p)}else{const X=l.getHeight()-7+(u-8);l.setBoolean(8,X,p)}}}static maybeEmbedVersionInfo(a,s){if(a.getVersionNumber()<7)return;const l=new P;gt.makeVersionInfoBits(a,l);let o=17;for(let u=0;u<6;++u)for(let x=0;x<3;++x){const p=l.get(o);o--,s.setBoolean(u,s.getHeight()-11+x,p),s.setBoolean(s.getHeight()-11+x,u,p)}}static embedDataBits(a,s,l){let o=0,u=-1,x=l.getWidth()-1,p=l.getHeight()-1;for(;x>0;){for(x===6&&(x-=1);p>=0&&p<l.getHeight();){for(let v=0;v<2;++v){const A=x-v;if(!gt.isEmpty(l.get(A,p)))continue;let T;o<a.getSize()?(T=a.get(o),++o):T=!1,s!==255&&ya.getDataMaskBit(s,A,p)&&(T=!T),l.setBoolean(A,p,T)}p+=u}u=-u,p+=u,x-=2}if(o!==a.getSize())throw new ea("Not all bits consumed: "+o+"/"+a.getSize())}static findMSBSet(a){return 32-O.numberOfLeadingZeros(a)}static calculateBCHCode(a,s){if(s===0)throw new E("0 polynomial");const l=gt.findMSBSet(s);for(a<<=l-1;gt.findMSBSet(a)>=l;)a^=s<<gt.findMSBSet(a)-l;return a}static makeTypeInfoBits(a,s,l){if(!Qs.isValidMaskPattern(s))throw new ea("Invalid mask pattern");const o=a.getBits()<<3|s;l.appendBits(o,5);const u=gt.calculateBCHCode(o,gt.TYPE_INFO_POLY);l.appendBits(u,10);const x=new P;if(x.appendBits(gt.TYPE_INFO_MASK_PATTERN,15),l.xor(x),l.getSize()!==15)throw new ea("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(a,s){s.appendBits(a.getVersionNumber(),6);const l=gt.calculateBCHCode(a.getVersionNumber(),gt.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new ea("should not happen but we got: "+s.getSize())}static isEmpty(a){return a===255}static embedTimingPatterns(a){for(let s=8;s<a.getWidth()-8;++s){const l=(s+1)%2;gt.isEmpty(a.get(s,6))&&a.setNumber(s,6,l),gt.isEmpty(a.get(6,s))&&a.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(a){if(a.get(8,a.getHeight()-8)===0)throw new ea;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,s,l){for(let o=0;o<8;++o){if(!gt.isEmpty(l.get(a+o,s)))throw new ea;l.setNumber(a+o,s,0)}}static embedVerticalSeparationPattern(a,s,l){for(let o=0;o<7;++o){if(!gt.isEmpty(l.get(a,s+o)))throw new ea;l.setNumber(a,s+o,0)}}static embedPositionAdjustmentPattern(a,s,l){for(let o=0;o<5;++o){const u=gt.POSITION_ADJUSTMENT_PATTERN[o];for(let x=0;x<5;++x)l.setNumber(a+x,s+o,u[x])}}static embedPositionDetectionPattern(a,s,l){for(let o=0;o<7;++o){const u=gt.POSITION_DETECTION_PATTERN[o];for(let x=0;x<7;++x)l.setNumber(a+x,s+o,u[x])}}static embedPositionDetectionPatternsAndSeparators(a){const s=gt.POSITION_DETECTION_PATTERN[0].length;gt.embedPositionDetectionPattern(0,0,a),gt.embedPositionDetectionPattern(a.getWidth()-s,0,a),gt.embedPositionDetectionPattern(0,a.getWidth()-s,a);const l=8;gt.embedHorizontalSeparationPattern(0,l-1,a),gt.embedHorizontalSeparationPattern(a.getWidth()-l,l-1,a),gt.embedHorizontalSeparationPattern(0,a.getWidth()-l,a);const o=7;gt.embedVerticalSeparationPattern(o,0,a),gt.embedVerticalSeparationPattern(a.getHeight()-o-1,0,a),gt.embedVerticalSeparationPattern(o,a.getHeight()-o,a)}static maybeEmbedPositionAdjustmentPatterns(a,s){if(a.getVersionNumber()<2)return;const l=a.getVersionNumber()-1,o=gt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let u=0,x=o.length;u!==x;u++){const p=o[u];if(p>=0)for(let v=0;v!==x;v++){const A=o[v];A>=0&&gt.isEmpty(s.get(A,p))&&gt.embedPositionAdjustmentPattern(A-2,p-2,s)}}}}gt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),gt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),gt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),gt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),gt.VERSION_INFO_POLY=7973,gt.TYPE_INFO_POLY=1335,gt.TYPE_INFO_MASK_PATTERN=21522;class $d{constructor(a,s){this.dataBytes=a,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ca{constructor(){}static calculateMaskPenalty(a){return ya.applyMaskPenaltyRule1(a)+ya.applyMaskPenaltyRule2(a)+ya.applyMaskPenaltyRule3(a)+ya.applyMaskPenaltyRule4(a)}static encode(a,s,l=null){let o=ca.DEFAULT_BYTE_MODE_ENCODING;const u=l!==null&&l.get(Oa.CHARACTER_SET)!==void 0;u&&(o=l.get(Oa.CHARACTER_SET).toString());const x=this.chooseMode(a,o),p=new P;if(x===dt.BYTE&&(u||ca.DEFAULT_BYTE_MODE_ENCODING!==o)){const Xe=$.getCharacterSetECIByName(o);Xe!==void 0&&this.appendECI(Xe,p)}this.appendModeInfo(x,p);const v=new P;this.appendBytes(a,x,v,o);let A;if(l!==null&&l.get(Oa.QR_VERSION)!==void 0){const Xe=Number.parseInt(l.get(Oa.QR_VERSION).toString(),10);A=ct.getVersionForNumber(Xe);const qe=this.calculateBitsNeeded(x,p,v,A);if(!this.willFit(qe,A,s))throw new ea("Data too big for requested version")}else A=this.recommendVersion(s,x,p,v);const T=new P;T.appendBitArray(p);const H=x===dt.BYTE?v.getSizeInBytes():a.length;this.appendLengthInfo(H,A,x,T),T.appendBitArray(v);const X=A.getECBlocksForLevel(s),ae=A.getTotalCodewords()-X.getTotalECCodewords();this.terminateBits(ae,T);const fe=this.interleaveWithECBytes(T,A.getTotalCodewords(),ae,X.getNumBlocks()),ge=new Qs;ge.setECLevel(s),ge.setMode(x),ge.setVersion(A);const je=A.getDimensionForVersion(),_e=new cl(je,je),Ge=this.chooseMaskPattern(fe,s,A,_e);return ge.setMaskPattern(Ge),gt.buildMatrix(fe,s,A,Ge,_e),ge.setMatrix(_e),ge}static recommendVersion(a,s,l,o){const u=this.calculateBitsNeeded(s,l,o,ct.getVersionForNumber(1)),x=this.chooseVersion(u,a),p=this.calculateBitsNeeded(s,l,o,x);return this.chooseVersion(p,a)}static calculateBitsNeeded(a,s,l,o){return s.getSize()+a.getCharacterCountBits(o)+l.getSize()}static getAlphanumericCode(a){return a<ca.ALPHANUMERIC_TABLE.length?ca.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,s=null){if($.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(a))return dt.KANJI;let l=!1,o=!1;for(let u=0,x=a.length;u<x;++u){const p=a.charAt(u);if(ca.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)o=!0;else return dt.BYTE}return o?dt.ALPHANUMERIC:l?dt.NUMERIC:dt.BYTE}static isOnlyDoubleByteKanji(a){let s;try{s=he.encode(a,$.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let o=0;o<l;o+=2){const u=s[o]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(a,s,l,o){let u=Number.MAX_SAFE_INTEGER,x=-1;for(let p=0;p<Qs.NUM_MASK_PATTERNS;p++){gt.buildMatrix(a,s,l,p,o);let v=this.calculateMaskPenalty(o);v<u&&(u=v,x=p)}return x}static chooseVersion(a,s){for(let l=1;l<=40;l++){const o=ct.getVersionForNumber(l);if(ca.willFit(a,o,s))return o}throw new ea("Data too big")}static willFit(a,s,l){const o=s.getTotalCodewords(),x=s.getECBlocksForLevel(l).getTotalECCodewords(),p=o-x,v=(a+7)/8;return p>=v}static terminateBits(a,s){const l=a*8;if(s.getSize()>l)throw new ea("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let x=0;x<4&&s.getSize()<l;++x)s.appendBit(!1);const o=s.getSize()&7;if(o>0)for(let x=o;x<8;x++)s.appendBit(!1);const u=a-s.getSizeInBytes();for(let x=0;x<u;++x)s.appendBits((x&1)===0?236:17,8);if(s.getSize()!==l)throw new ea("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,s,l,o,u,x){if(o>=l)throw new ea("Block ID too large");const p=a%l,v=l-p,A=Math.floor(a/l),T=A+1,H=Math.floor(s/l),X=H+1,ae=A-H,fe=T-X;if(ae!==fe)throw new ea("EC bytes mismatch");if(l!==v+p)throw new ea("RS blocks mismatch");if(a!==(H+ae)*v+(X+fe)*p)throw new ea("Total bytes mismatch");o<v?(u[0]=H,x[0]=ae):(u[0]=X,x[0]=fe)}static interleaveWithECBytes(a,s,l,o){if(a.getSizeInBytes()!==l)throw new ea("Number of bits and data bytes does not match");let u=0,x=0,p=0;const v=new Array;for(let T=0;T<o;++T){const H=new Int32Array(1),X=new Int32Array(1);ca.getNumDataBytesAndNumECBytesForBlockID(s,l,o,T,H,X);const ae=H[0],fe=new Uint8Array(ae);a.toBytes(8*u,fe,0,ae);const ge=ca.generateECBytes(fe,X[0]);v.push(new $d(fe,ge)),x=Math.max(x,ae),p=Math.max(p,ge.length),u+=H[0]}if(l!==u)throw new ea("Data bytes does not match offset");const A=new P;for(let T=0;T<x;++T)for(const H of v){const X=H.getDataBytes();T<X.length&&A.appendBits(X[T],8)}for(let T=0;T<p;++T)for(const H of v){const X=H.getErrorCorrectionBytes();T<X.length&&A.appendBits(X[T],8)}if(s!==A.getSizeInBytes())throw new ea("Interleaving error: "+s+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(a,s){const l=a.length,o=new Int32Array(l+s);for(let x=0;x<l;x++)o[x]=a[x]&255;new Fi(et.QR_CODE_FIELD_256).encode(o,s);const u=new Uint8Array(s);for(let x=0;x<s;x++)u[x]=o[l+x];return u}static appendModeInfo(a,s){s.appendBits(a.getBits(),4)}static appendLengthInfo(a,s,l,o){const u=l.getCharacterCountBits(s);if(a>=1<<u)throw new ea(a+" is bigger than "+((1<<u)-1));o.appendBits(a,u)}static appendBytes(a,s,l,o){switch(s){case dt.NUMERIC:ca.appendNumericBytes(a,l);break;case dt.ALPHANUMERIC:ca.appendAlphanumericBytes(a,l);break;case dt.BYTE:ca.append8BitBytes(a,l,o);break;case dt.KANJI:ca.appendKanjiBytes(a,l);break;default:throw new ea("Invalid mode: "+s)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){const s=ca.getDigit(a);return s>=0&&s<=9}static appendNumericBytes(a,s){const l=a.length;let o=0;for(;o<l;){const u=ca.getDigit(a.charAt(o));if(o+2<l){const x=ca.getDigit(a.charAt(o+1)),p=ca.getDigit(a.charAt(o+2));s.appendBits(u*100+x*10+p,10),o+=3}else if(o+1<l){const x=ca.getDigit(a.charAt(o+1));s.appendBits(u*10+x,7),o+=2}else s.appendBits(u,4),o++}}static appendAlphanumericBytes(a,s){const l=a.length;let o=0;for(;o<l;){const u=ca.getAlphanumericCode(a.charCodeAt(o));if(u===-1)throw new ea;if(o+1<l){const x=ca.getAlphanumericCode(a.charCodeAt(o+1));if(x===-1)throw new ea;s.appendBits(u*45+x,11),o+=2}else s.appendBits(u,6),o++}}static append8BitBytes(a,s,l){let o;try{o=he.encode(a,l)}catch(u){throw new ea(u)}for(let u=0,x=o.length;u!==x;u++){const p=o[u];s.appendBits(p,8)}}static appendKanjiBytes(a,s){let l;try{l=he.encode(a,$.SJIS)}catch(u){throw new ea(u)}const o=l.length;for(let u=0;u<o;u+=2){const x=l[u]&255,p=l[u+1]&255,v=x<<8&4294967295|p;let A=-1;if(v>=33088&&v<=40956?A=v-33088:v>=57408&&v<=60351&&(A=v-49472),A===-1)throw new ea("Invalid byte sequence");const T=(A>>8)*192+(A&255);s.appendBits(T,13)}}static appendECI(a,s){s.appendBits(dt.ECI.getBits(),4),s.appendBits(a.getValue(),8)}}ca.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ca.DEFAULT_BYTE_MODE_ENCODING=$.UTF8.getName();class Ws{write(a,s,l,o=null){if(a.length===0)throw new E("Found empty contents");if(s<0||l<0)throw new E("Requested dimensions are too small: "+s+"x"+l);let u=Qt.L,x=Ws.QUIET_ZONE_SIZE;o!==null&&(o.get(Oa.ERROR_CORRECTION)!==void 0&&(u=Qt.fromString(o.get(Oa.ERROR_CORRECTION).toString())),o.get(Oa.MARGIN)!==void 0&&(x=Number.parseInt(o.get(Oa.MARGIN).toString(),10)));const p=ca.encode(a,u,o);return this.renderResult(p,s,l,x)}writeToDom(a,s,l,o,u=null){typeof a=="string"&&(a=document.querySelector(a));const x=this.write(s,l,o,u);a&&a.appendChild(x)}renderResult(a,s,l,o){const u=a.getMatrix();if(u===null)throw new We;const x=u.getWidth(),p=u.getHeight(),v=x+o*2,A=p+o*2,T=Math.max(s,v),H=Math.max(l,A),X=Math.min(Math.floor(T/v),Math.floor(H/A)),ae=Math.floor((T-x*X)/2),fe=Math.floor((H-p*X)/2),ge=this.createSVGElement(T,H);for(let je=0,_e=fe;je<p;je++,_e+=X)for(let Ge=0,Xe=ae;Ge<x;Ge++,Xe+=X)if(u.get(Ge,je)===1){const qe=this.createSvgRectElement(Xe,_e,X,X);ge.appendChild(qe)}return ge}createSVGElement(a,s){const l=document.createElementNS(Ws.SVG_NS,"svg");return l.setAttributeNS(null,"height",a.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(a,s,l,o){const u=document.createElementNS(Ws.SVG_NS,"rect");return u.setAttributeNS(null,"x",a.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",l.toString()),u.setAttributeNS(null,"width",o.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Ws.QUIET_ZONE_SIZE=4,Ws.SVG_NS="http://www.w3.org/2000/svg";class kn{encode(a,s,l,o,u){if(a.length===0)throw new E("Found empty contents");if(s!==oe.QR_CODE)throw new E("Can only encode QR_CODE, but got "+s);if(l<0||o<0)throw new E(`Requested dimensions are too small: ${l}x${o}`);let x=Qt.L,p=kn.QUIET_ZONE_SIZE;u!==null&&(u.get(Oa.ERROR_CORRECTION)!==void 0&&(x=Qt.fromString(u.get(Oa.ERROR_CORRECTION).toString())),u.get(Oa.MARGIN)!==void 0&&(p=Number.parseInt(u.get(Oa.MARGIN).toString(),10)));const v=ca.encode(a,x,u);return kn.renderResult(v,l,o,p)}static renderResult(a,s,l,o){const u=a.getMatrix();if(u===null)throw new We;const x=u.getWidth(),p=u.getHeight(),v=x+o*2,A=p+o*2,T=Math.max(s,v),H=Math.max(l,A),X=Math.min(Math.floor(T/v),Math.floor(H/A)),ae=Math.floor((T-x*X)/2),fe=Math.floor((H-p*X)/2),ge=new J(T,H);for(let je=0,_e=fe;je<p;je++,_e+=X)for(let Ge=0,Xe=ae;Ge<x;Ge++,Xe+=X)u.get(Ge,je)===1&&ge.setRegion(Xe,_e,X,X);return ge}}kn.QUIET_ZONE_SIZE=4;class Zd{encode(a,s,l,o,u){let x;switch(s){case oe.QR_CODE:x=new kn;break;default:throw new E("No encoder available for format "+s)}return x.encode(a,s,l,o,u)}}class Wr extends se{constructor(a,s,l,o,u,x,p,v){if(super(x,p),this.yuvData=a,this.dataWidth=s,this.dataHeight=l,this.left=o,this.top=u,o+x>s||u+p>l)throw new E("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(x,p)}getRow(a,s){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const o=(a+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,o,s,0,l),s}getMatrix(){const a=this.getWidth(),s=this.getHeight();if(a===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=a*s,o=new Uint8ClampedArray(l);let u=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return D.arraycopy(this.yuvData,u,o,0,l),o;for(let x=0;x<s;x++){const p=x*a;D.arraycopy(this.yuvData,u,o,p,a),u+=this.dataWidth}return o}isCropSupported(){return!0}crop(a,s,l,o){return new Wr(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+s,l,o,!1)}renderThumbnail(){const a=this.getWidth()/Wr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Wr.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(a*s),o=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let x=0;x<s;x++){const p=x*a;for(let v=0;v<a;v++){const A=o[u+v*Wr.THUMBNAIL_SCALE_FACTOR]&255;l[p+v]=4278190080|A*65793}u+=this.dataWidth*Wr.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Wr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Wr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,s){const l=this.yuvData;for(let o=0,u=this.top*this.dataWidth+this.left;o<s;o++,u+=this.dataWidth){const x=u+a/2;for(let p=u,v=u+a-1;p<x;p++,v--){const A=l[p];l[p]=l[v],l[v]=A}}}invert(){return new le(this)}}Wr.THUMBNAIL_SCALE_FACTOR=2;class dl extends se{constructor(a,s,l,o,u,x,p){if(super(s,l),this.dataWidth=o,this.dataHeight=u,this.left=x,this.top=p,a.BYTES_PER_ELEMENT===4){const v=s*l,A=new Uint8ClampedArray(v);for(let T=0;T<v;T++){const H=a[T],X=H>>16&255,ae=H>>7&510,fe=H&255;A[T]=(X+ae+fe)/4&255}this.luminances=A}else this.luminances=a;if(o===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=l),x===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(a,s){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const o=(a+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,o,s,0,l),s}getMatrix(){const a=this.getWidth(),s=this.getHeight();if(a===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=a*s,o=new Uint8ClampedArray(l);let u=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return D.arraycopy(this.luminances,u,o,0,l),o;for(let x=0;x<s;x++){const p=x*a;D.arraycopy(this.luminances,u,o,p,a),u+=this.dataWidth}return o}isCropSupported(){return!0}crop(a,s,l,o){return new dl(this.luminances,l,o,this.dataWidth,this.dataHeight,this.left+a,this.top+s)}invert(){return new le(this)}}class Cn extends ${static forName(a){return this.getCharacterSetECIByName(a)}}class Ui{}Ui.ISO_8859_1=$.ISO8859_1;class Hi{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class Vi{static singletonList(a){return[a]}static min(a,s){return a.sort(s)[0]}}class lc{constructor(a){this.previous=a}getPrevious(){return this.previous}}class Ks extends lc{constructor(a,s,l){super(a),this.value=s,this.bitCount=l}appendTo(a,s){a.appendBits(this.value,this.bitCount)}add(a,s){return new Ks(this,a,s)}addBinaryShift(a,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ks(this,a,s)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+O.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class Zl extends Ks{constructor(a,s,l){super(a,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(a,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):l===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(a,s){return new Zl(this,a,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Sn(U,a,s){return new Zl(U,a,s)}function ul(U,a,s){return new Ks(U,a,s)}const Qd=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ds=0,hl=1,br=2,An=3,hr=4,Wd=new Ks(null,0,0),En=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ic(U){for(let a of U)L.fill(a,-1);return U[Ds][hr]=0,U[hl][hr]=0,U[hl][Ds]=28,U[An][hr]=0,U[br][hr]=0,U[br][Ds]=15,U}const qi=ic(L.createInt32Array(6,6));class Er{constructor(a,s,l,o){this.token=a,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,s){let l=this.bitCount,o=this.token;if(a!==this.mode){let x=En[this.mode][a];o=ul(o,x&65535,x>>16),l+=x>>16}let u=a===br?4:5;return o=ul(o,s,u),new Er(o,a,0,l+u)}shiftAndAppend(a,s){let l=this.token,o=this.mode===br?4:5;return l=ul(l,qi[this.mode][a],o),l=ul(l,s,5),new Er(l,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(a){let s=this.token,l=this.mode,o=this.bitCount;if(this.mode===hr||this.mode===br){let p=En[l][Ds];s=ul(s,p&65535,p>>16),o+=p>>16,l=Ds}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,x=new Er(s,l,this.binaryShiftByteCount+1,o+u);return x.binaryShiftByteCount===2078&&(x=x.endBinaryShift(a+1)),x}endBinaryShift(a){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Sn(s,a-this.binaryShiftByteCount,this.binaryShiftByteCount),new Er(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let s=this.bitCount+(En[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?s+=Er.calculateBinaryShiftCost(a)-Er.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(s+=10),s<=a.bitCount}toBitArray(a){let s=[];for(let o=this.endBinaryShift(a.length).token;o!==null;o=o.getPrevious())s.unshift(o);let l=new P;for(const o of s)o.appendTo(l,a);return l}toString(){return de.format("%s bits=%d bytes=%d",Qd[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:a.binaryShiftByteCount>0?10:0}}Er.INITIAL_STATE=new Er(Wd,Ds,0,0);function Gi(U){const a=de.getCharCode(" "),s=de.getCharCode("."),l=de.getCharCode(",");U[Ds][a]=1;const o=de.getCharCode("Z"),u=de.getCharCode("A");for(let X=u;X<=o;X++)U[Ds][X]=X-u+2;U[hl][a]=1;const x=de.getCharCode("z"),p=de.getCharCode("a");for(let X=p;X<=x;X++)U[hl][X]=X-p+2;U[br][a]=1;const v=de.getCharCode("9"),A=de.getCharCode("0");for(let X=A;X<=v;X++)U[br][X]=X-A+2;U[br][l]=12,U[br][s]=13;const T=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let X=0;X<T.length;X++)U[An][de.getCharCode(T[X])]=X;const H=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let X=0;X<H.length;X++)de.getCharCode(H[X])>0&&(U[hr][de.getCharCode(H[X])]=X);return U}const Ql=Gi(L.createInt32Array(5,256));class _n{constructor(a){this.text=a}encode(){const a=de.getCharCode(" "),s=de.getCharCode(`
`);let l=Vi.singletonList(Er.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let x,p=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case de.getCharCode("\r"):x=p===s?2:0;break;case de.getCharCode("."):x=p===a?3:0;break;case de.getCharCode(","):x=p===a?4:0;break;case de.getCharCode(":"):x=p===a?5:0;break;default:x=0}x>0?(l=_n.updateStateListForPair(l,u,x),u++):l=this.updateStateListForChar(l,u)}return Vi.min(l,(u,x)=>u.getBitCount()-x.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,s){const l=[];for(let o of a)this.updateStateForChar(o,s,l);return _n.simplifyStates(l)}updateStateForChar(a,s,l){let o=this.text[s]&255,u=Ql[a.getMode()][o]>0,x=null;for(let p=0;p<=hr;p++){let v=Ql[p][o];if(v>0){if(x==null&&(x=a.endBinaryShift(s)),!u||p===a.getMode()||p===br){const A=x.latchAndAppend(p,v);l.push(A)}if(!u&&qi[a.getMode()][p]>=0){const A=x.shiftAndAppend(p,v);l.push(A)}}}if(a.getBinaryShiftByteCount()>0||Ql[a.getMode()][o]===0){let p=a.addBinaryShiftChar(s);l.push(p)}}static updateStateListForPair(a,s,l){const o=[];for(let u of a)this.updateStateForPair(u,s,l,o);return this.simplifyStates(o)}static updateStateForPair(a,s,l,o){let u=a.endBinaryShift(s);if(o.push(u.latchAndAppend(hr,l)),a.getMode()!==hr&&o.push(u.shiftAndAppend(hr,l)),l===3||l===4){let x=u.latchAndAppend(br,16-l).latchAndAppend(br,1);o.push(x)}if(a.getBinaryShiftByteCount()>0){let x=a.addBinaryShiftChar(s).addBinaryShiftChar(s+1);o.push(x)}}static simplifyStates(a){let s=[];for(const l of a){let o=!0;for(const u of s){if(u.isBetterThanOrEqualTo(l)){o=!1;break}l.isBetterThanOrEqualTo(u)&&(s=s.filter(x=>x!==u))}o&&s.push(l)}return s}}class Lt{constructor(){}static encodeBytes(a){return Lt.encode(a,Lt.DEFAULT_EC_PERCENT,Lt.DEFAULT_AZTEC_LAYERS)}static encode(a,s,l){let o=new _n(a).encode(),u=O.truncDivision(o.getSize()*s,100)+11,x=o.getSize()+u,p,v,A,T,H;if(l!==Lt.DEFAULT_AZTEC_LAYERS){if(p=l<0,v=Math.abs(l),v>(p?Lt.MAX_NB_BITS_COMPACT:Lt.MAX_NB_BITS))throw new E(de.format("Illegal value %s for layers",l));A=Lt.totalBitsInLayer(v,p),T=Lt.WORD_SIZE[v];let qe=A-A%T;if(H=Lt.stuffBits(o,T),H.getSize()+u>qe)throw new E("Data to large for user specified layer");if(p&&H.getSize()>T*64)throw new E("Data to large for user specified layer")}else{T=0,H=null;for(let qe=0;;qe++){if(qe>Lt.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(p=qe<=3,v=p?qe+1:qe,A=Lt.totalBitsInLayer(v,p),x>A)continue;(H==null||T!==Lt.WORD_SIZE[v])&&(T=Lt.WORD_SIZE[v],H=Lt.stuffBits(o,T));let Nt=A-A%T;if(!(p&&H.getSize()>T*64)&&H.getSize()+u<=Nt)break}}let X=Lt.generateCheckWords(H,A,T),ae=H.getSize()/T,fe=Lt.generateModeMessage(p,v,ae),ge=(p?11:14)+v*4,je=new Int32Array(ge),_e;if(p){_e=ge;for(let qe=0;qe<je.length;qe++)je[qe]=qe}else{_e=ge+1+2*O.truncDivision(O.truncDivision(ge,2)-1,15);let qe=O.truncDivision(ge,2),Nt=O.truncDivision(_e,2);for(let wt=0;wt<qe;wt++){let lr=wt+O.truncDivision(wt,15);je[qe-wt-1]=Nt-lr-1,je[qe+wt]=Nt+lr+1}}let Ge=new J(_e);for(let qe=0,Nt=0;qe<v;qe++){let wt=(v-qe)*4+(p?9:12);for(let lr=0;lr<wt;lr++){let _r=lr*2;for(let fr=0;fr<2;fr++)X.get(Nt+_r+fr)&&Ge.set(je[qe*2+fr],je[qe*2+lr]),X.get(Nt+wt*2+_r+fr)&&Ge.set(je[qe*2+lr],je[ge-1-qe*2-fr]),X.get(Nt+wt*4+_r+fr)&&Ge.set(je[ge-1-qe*2-fr],je[ge-1-qe*2-lr]),X.get(Nt+wt*6+_r+fr)&&Ge.set(je[ge-1-qe*2-lr],je[qe*2+fr])}Nt+=wt*8}if(Lt.drawModeMessage(Ge,p,_e,fe),p)Lt.drawBullsEye(Ge,O.truncDivision(_e,2),5);else{Lt.drawBullsEye(Ge,O.truncDivision(_e,2),7);for(let qe=0,Nt=0;qe<O.truncDivision(ge,2)-1;qe+=15,Nt+=16)for(let wt=O.truncDivision(_e,2)&1;wt<_e;wt+=2)Ge.set(O.truncDivision(_e,2)-Nt,wt),Ge.set(O.truncDivision(_e,2)+Nt,wt),Ge.set(wt,O.truncDivision(_e,2)-Nt),Ge.set(wt,O.truncDivision(_e,2)+Nt)}let Xe=new Hi;return Xe.setCompact(p),Xe.setSize(_e),Xe.setLayers(v),Xe.setCodeWords(ae),Xe.setMatrix(Ge),Xe}static drawBullsEye(a,s,l){for(let o=0;o<l;o+=2)for(let u=s-o;u<=s+o;u++)a.set(u,s-o),a.set(u,s+o),a.set(s-o,u),a.set(s+o,u);a.set(s-l,s-l),a.set(s-l+1,s-l),a.set(s-l,s-l+1),a.set(s+l,s-l),a.set(s+l,s-l+1),a.set(s+l,s+l-1)}static generateModeMessage(a,s,l){let o=new P;return a?(o.appendBits(s-1,2),o.appendBits(l-1,6),o=Lt.generateCheckWords(o,28,4)):(o.appendBits(s-1,5),o.appendBits(l-1,11),o=Lt.generateCheckWords(o,40,4)),o}static drawModeMessage(a,s,l,o){let u=O.truncDivision(l,2);if(s)for(let x=0;x<7;x++){let p=u-3+x;o.get(x)&&a.set(p,u-5),o.get(x+7)&&a.set(u+5,p),o.get(20-x)&&a.set(p,u+5),o.get(27-x)&&a.set(u-5,p)}else for(let x=0;x<10;x++){let p=u-5+x+O.truncDivision(x,5);o.get(x)&&a.set(p,u-7),o.get(x+10)&&a.set(u+7,p),o.get(29-x)&&a.set(p,u+7),o.get(39-x)&&a.set(u-7,p)}}static generateCheckWords(a,s,l){let o=a.getSize()/l,u=new Fi(Lt.getGF(l)),x=O.truncDivision(s,l),p=Lt.bitsToWords(a,l,x);u.encode(p,x-o);let v=s%l,A=new P;A.appendBits(0,v);for(const T of Array.from(p))A.appendBits(T,l);return A}static bitsToWords(a,s,l){let o=new Int32Array(l),u,x;for(u=0,x=a.getSize()/s;u<x;u++){let p=0;for(let v=0;v<s;v++)p|=a.get(u*s+v)?1<<s-v-1:0;o[u]=p}return o}static getGF(a){switch(a){case 4:return et.AZTEC_PARAM;case 6:return et.AZTEC_DATA_6;case 8:return et.AZTEC_DATA_8;case 10:return et.AZTEC_DATA_10;case 12:return et.AZTEC_DATA_12;default:throw new E("Unsupported word size "+a)}}static stuffBits(a,s){let l=new P,o=a.getSize(),u=(1<<s)-2;for(let x=0;x<o;x+=s){let p=0;for(let v=0;v<s;v++)(x+v>=o||a.get(x+v))&&(p|=1<<s-1-v);(p&u)===u?(l.appendBits(p&u,s),x--):(p&u)===0?(l.appendBits(p|1,s),x--):l.appendBits(p,s)}return l}static totalBitsInLayer(a,s){return((s?88:112)+16*a)*a}}Lt.DEFAULT_EC_PERCENT=33,Lt.DEFAULT_AZTEC_LAYERS=0,Lt.MAX_NB_BITS=32,Lt.MAX_NB_BITS_COMPACT=4,Lt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Wl{encode(a,s,l,o){return this.encodeWithHints(a,s,l,o,null)}encodeWithHints(a,s,l,o,u){let x=Ui.ISO_8859_1,p=Lt.DEFAULT_EC_PERCENT,v=Lt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Oa.CHARACTER_SET)&&(x=Cn.forName(u.get(Oa.CHARACTER_SET).toString())),u.has(Oa.ERROR_CORRECTION)&&(p=O.parseInt(u.get(Oa.ERROR_CORRECTION).toString())),u.has(Oa.AZTEC_LAYERS)&&(v=O.parseInt(u.get(Oa.AZTEC_LAYERS).toString()))),Wl.encodeLayers(a,s,l,o,x,p,v)}static encodeLayers(a,s,l,o,u,x,p){if(s!==oe.AZTEC)throw new E("Can only encode AZTEC, but got "+s);let v=Lt.encode(de.getBytes(a,u),x,p);return Wl.renderResult(v,l,o)}static renderResult(a,s,l){let o=a.getMatrix();if(o==null)throw new We;let u=o.getWidth(),x=o.getHeight(),p=Math.max(s,u),v=Math.max(l,x),A=Math.min(p/u,v/x),T=(p-u*A)/2,H=(v-x*A)/2,X=new J(p,v);for(let ae=0,fe=H;ae<x;ae++,fe+=A)for(let ge=0,je=T;ge<u;ge++,je+=A)o.get(ge,ae)&&X.setRegion(je,fe,A,A);return X}}d.AbstractExpandedDecoder=rl,d.ArgumentException=S,d.ArithmeticException=Ke,d.AztecCode=Hi,d.AztecCodeReader=Mt,d.AztecCodeWriter=Wl,d.AztecDecoder=Je,d.AztecDetector=Zt,d.AztecDetectorResult=mt,d.AztecEncoder=Lt,d.AztecHighLevelEncoder=_n,d.AztecPoint=xt,d.BarcodeFormat=oe,d.Binarizer=I,d.BinaryBitmap=_,d.BitArray=P,d.BitMatrix=J,d.BitSource=dr,d.BrowserAztecCodeReader=lt,d.BrowserBarcodeReader=tc,d.BrowserCodeReader=ye,d.BrowserDatamatrixCodeReader=Ud,d.BrowserMultiFormatReader=Gd,d.BrowserPDF417Reader=Yd,d.BrowserQRCodeReader=Xd,d.BrowserQRCodeSvgWriter=Ws,d.CharacterSetECI=$,d.ChecksumException=M,d.Code128Reader=Qe,d.Code39Reader=Kt,d.DataMatrixDecodedBitStreamParser=ks,d.DataMatrixReader=Pr,d.DecodeHintType=F,d.DecoderResult=Ie,d.DefaultGridSampler=Ze,d.DetectorResult=Bt,d.EAN13Reader=Br,d.EncodeHintType=Oa,d.Exception=b,d.FormatException=q,d.GenericGF=et,d.GenericGFPoly=rt,d.GlobalHistogramBinarizer=V,d.GridSampler=ot,d.GridSamplerInstance=Et,d.HTMLCanvasElementLuminanceSource=K,d.HybridBinarizer=W,d.ITFReader=ht,d.IllegalArgumentException=E,d.IllegalStateException=We,d.InvertedLuminanceSource=le,d.LuminanceSource=se,d.MathUtils=Ee,d.MultiFormatOneDReader=js,d.MultiFormatReader=nc,d.MultiFormatWriter=Zd,d.NotFoundException=z,d.OneDReader=at,d.PDF417DecodedBitStreamParser=De,d.PDF417DecoderErrorCorrection=ll,d.PDF417Reader=Za,d.PDF417ResultMetadata=Yl,d.PerspectiveTransform=we,d.PlanarYUVLuminanceSource=Wr,d.QRCodeByteMatrix=cl,d.QRCodeDataMask=$a,d.QRCodeDecodedBitStreamParser=ga,d.QRCodeDecoderErrorCorrectionLevel=Qt,d.QRCodeDecoderFormatInformation=Xa,d.QRCodeEncoder=ca,d.QRCodeEncoderQRCode=Qs,d.QRCodeMaskUtil=ya,d.QRCodeMatrixUtil=gt,d.QRCodeMode=dt,d.QRCodeReader=os,d.QRCodeVersion=ct,d.QRCodeWriter=kn,d.RGBLuminanceSource=dl,d.RSS14Reader=Ht,d.RSSExpandedReader=He,d.ReaderException=il,d.ReedSolomonDecoder=Ye,d.ReedSolomonEncoder=Fi,d.ReedSolomonException=Ne,d.Result=ie,d.ResultMetadataType=te,d.ResultPoint=Pe,d.StringUtils=de,d.UnsupportedOperationException=ce,d.VideoInputDevice=xe,d.WhiteRectangleDetector=Be,d.WriterException=ea,d.ZXingArrays=L,d.ZXingCharset=Cn,d.ZXingInteger=O,d.ZXingStandardCharsets=Ui,d.ZXingStringBuilder=ne,d.ZXingStringEncoding=he,d.ZXingSystem=D,d.createAbstractExpandedDecoder=Li,Object.defineProperty(d,"__esModule",{value:!0})})}(Oo,Oo.exports)),Oo.exports}var ma=oj();const cj=Cd(ma),dj=Ky({__proto__:null,default:cj},[ma]);var op=function(){function n(c,d,h){if(this.formatMap=new Map([[nt.QR_CODE,ma.BarcodeFormat.QR_CODE],[nt.AZTEC,ma.BarcodeFormat.AZTEC],[nt.CODABAR,ma.BarcodeFormat.CODABAR],[nt.CODE_39,ma.BarcodeFormat.CODE_39],[nt.CODE_93,ma.BarcodeFormat.CODE_93],[nt.CODE_128,ma.BarcodeFormat.CODE_128],[nt.DATA_MATRIX,ma.BarcodeFormat.DATA_MATRIX],[nt.MAXICODE,ma.BarcodeFormat.MAXICODE],[nt.ITF,ma.BarcodeFormat.ITF],[nt.EAN_13,ma.BarcodeFormat.EAN_13],[nt.EAN_8,ma.BarcodeFormat.EAN_8],[nt.PDF_417,ma.BarcodeFormat.PDF_417],[nt.RSS_14,ma.BarcodeFormat.RSS_14],[nt.RSS_EXPANDED,ma.BarcodeFormat.RSS_EXPANDED],[nt.UPC_A,ma.BarcodeFormat.UPC_A],[nt.UPC_E,ma.BarcodeFormat.UPC_E],[nt.UPC_EAN_EXTENSION,ma.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!dj)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=d,this.logger=h;var g=this.createZXingFormats(c),m=new Map;m.set(ma.DecodeHintType.POSSIBLE_FORMATS,g),m.set(ma.DecodeHintType.TRY_HARDER,!1),this.hints=m}return n.prototype.decodeAsync=function(c){var d=this;return new Promise(function(h,g){try{h(d.decode(c))}catch(m){g(m)}})},n.prototype.decode=function(c){var d=new ma.MultiFormatReader(this.verbose,this.hints),h=new ma.HTMLCanvasElementLuminanceSource(c),g=new ma.BinaryBitmap(new ma.HybridBinarizer(h)),m=d.decode(g);return{text:m.text,format:_1.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var c=new Map;return this.formatMap.forEach(function(d,h,g){c.set(d,h)}),c},n.prototype.toHtml5QrcodeSupportedFormats=function(c){if(!this.reverseFormatMap.has(c))throw"reverseFormatMap doesn't have ".concat(c);return this.reverseFormatMap.get(c)},n.prototype.createZXingFormats=function(c){for(var d=[],h=0,g=c;h<g.length;h++){var m=g[h];this.formatMap.has(m)?d.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return d},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n}(),uj=function(n,c,d,h){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function j(S){try{b(h.next(S))}catch(E){w(E)}}function C(S){try{b(h.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(j,C)}b((h=h.apply(n,c||[])).next())})},hj=function(n,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,g,m,w;return w={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function j(b){return function(S){return C([b,S])}}function C(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(h=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(n,d)}catch(S){b=[6,S],g=0}finally{h=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},cp=function(){function n(c,d,h){if(this.formatMap=new Map([[nt.QR_CODE,"qr_code"],[nt.AZTEC,"aztec"],[nt.CODABAR,"codabar"],[nt.CODE_39,"code_39"],[nt.CODE_93,"code_93"],[nt.CODE_128,"code_128"],[nt.DATA_MATRIX,"data_matrix"],[nt.ITF,"itf"],[nt.EAN_13,"ean_13"],[nt.EAN_8,"ean_8"],[nt.PDF_417,"pdf417"],[nt.UPC_A,"upc_a"],[nt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=d,this.logger=h;var g=this.createBarcodeDetectorFormats(c);if(this.detector=new BarcodeDetector(g),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var c=new BarcodeDetector({formats:["qr_code"]});return typeof c<"u"},n.prototype.decodeAsync=function(c){return uj(this,void 0,void 0,function(){var d,h;return hj(this,function(g){switch(g.label){case 0:return[4,this.detector.detect(c)];case 1:if(d=g.sent(),!d||d.length===0)throw"No barcode or QR code detected.";return h=this.selectLargestBarcode(d),[2,{text:h.rawValue,format:_1.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(c){for(var d=null,h=0,g=0,m=c;g<m.length;g++){var w=m[g],j=w.boundingBox.width*w.boundingBox.height;j>h&&(h=j,d=w)}if(!d)throw"No largest barcode found";return d},n.prototype.createBarcodeDetectorFormats=function(c){for(var d=[],h=0,g=c;h<g.length;h++){var m=g[h];this.formatMap.has(m)?d.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:d}},n.prototype.toHtml5QrcodeSupportedFormats=function(c){if(!this.reverseFormatMap.has(c))throw"reverseFormatMap doesn't have ".concat(c);return this.reverseFormatMap.get(c)},n.prototype.createReverseFormatMap=function(){var c=new Map;return this.formatMap.forEach(function(d,h,g){c.set(d,h)}),c},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n}(),dp=function(n,c,d,h){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function j(S){try{b(h.next(S))}catch(E){w(E)}}function C(S){try{b(h.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(j,C)}b((h=h.apply(n,c||[])).next())})},up=function(n,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,g,m,w;return w={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function j(b){return function(S){return C([b,S])}}function C(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(h=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(n,d)}catch(S){b=[6,S],g=0}finally{h=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},fj=function(){function n(c,d,h,g){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=h,d&&cp.isSupported()?(this.primaryDecoder=new cp(c,h,g),this.secondaryDecoder=new op(c,h,g)):this.primaryDecoder=new op(c,h,g)}return n.prototype.decodeAsync=function(c){return dp(this,void 0,void 0,function(){var d;return up(this,function(h){switch(h.label){case 0:d=performance.now(),h.label=1;case 1:return h.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(c)];case 2:return[2,h.sent()];case 3:return this.possiblyLogPerformance(d),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(c){return dp(this,void 0,void 0,function(){var d,h;return up(this,function(g){switch(g.label){case 0:d=performance.now(),g.label=1;case 1:return g.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(c)];case 2:return[2,g.sent()];case 3:if(h=g.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(c)];throw h;case 4:return this.possiblyLogPerformance(d),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(c){if(this.verbose){var d=performance.now()-c;this.executionResults.push(d),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var c=0,d=0,h=this.executionResults;d<h.length;d++){var g=h[d];c+=g}var m=c/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n}(),Kh=function(){var n=function(c,d){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(h[m]=g[m])},n(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");n(c,d);function h(){this.constructor=c}c.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}(),jd=function(n,c,d,h){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function j(S){try{b(h.next(S))}catch(E){w(E)}}function C(S){try{b(h.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(j,C)}b((h=h.apply(n,c||[])).next())})},kd=function(n,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,g,m,w;return w={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function j(b){return function(S){return C([b,S])}}function C(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(h=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(n,d)}catch(S){b=[6,S],g=0}finally{h=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},R1=function(){function n(c,d){this.name=c,this.track=d}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(c){var d={};d[this.name]=c;var h={advanced:[d]};return this.track.applyConstraints(h)},n.prototype.value=function(){var c=this.track.getSettings();if(this.name in c){var d=c[this.name];return d}return null},n}(),xj=function(n){Kh(c,n);function c(d,h){return n.call(this,d,h)||this}return c.prototype.min=function(){return this.getCapabilities().min},c.prototype.max=function(){return this.getCapabilities().max},c.prototype.step=function(){return this.getCapabilities().step},c.prototype.apply=function(d){var h={};h[this.name]=d;var g={advanced:[h]};return this.track.applyConstraints(g)},c.prototype.getCapabilities=function(){this.failIfNotSupported();var d=this.track.getCapabilities(),h=d[this.name];return{min:h.min,max:h.max,step:h.step}},c.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},c}(R1),gj=function(n){Kh(c,n);function c(d){return n.call(this,"zoom",d)||this}return c}(xj),mj=function(n){Kh(c,n);function c(d){return n.call(this,"torch",d)||this}return c}(R1),pj=function(){function n(c){this.track=c}return n.prototype.zoomFeature=function(){return new gj(this.track)},n.prototype.torchFeature=function(){return new mj(this.track)},n}(),yj=function(){function n(c,d,h){this.isClosed=!1,this.parentElement=c,this.mediaStream=d,this.callbacks=h,this.surface=this.createVideoElement(this.parentElement.clientWidth),c.append(this.surface)}return n.prototype.createVideoElement=function(c){var d=document.createElement("video");return d.style.width="".concat(c,"px"),d.style.display="block",d.muted=!0,d.setAttribute("muted","true"),d.playsInline=!0,d},n.prototype.setupSurface=function(){var c=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var d=function(){var h=c.surface.clientWidth,g=c.surface.clientHeight;c.callbacks.onRenderSurfaceReady(h,g),c.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(c,d,h,g){return jd(this,void 0,void 0,function(){var m,w;return kd(this,function(j){switch(j.label){case 0:return m=new n(c,d,g),h.aspectRatio?(w={aspectRatio:h.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:j.sent(),j.label=2;case 2:return m.setupSurface(),[2,m]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(c){this.failIfClosed();var d=this,h=function(){setTimeout(c,200),d.surface.removeEventListener("playing",h)};this.surface.addEventListener("playing",h),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(c){return jd(this,void 0,void 0,function(){return kd(this,function(d){if("aspectRatio"in c)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(c)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var c=this;return new Promise(function(d,h){var g=c.mediaStream.getVideoTracks(),m=g.length,w=0;c.mediaStream.getVideoTracks().forEach(function(j){c.mediaStream.removeTrack(j),j.stop(),++w,w>=m&&(c.isClosed=!0,c.parentElement.removeChild(c.surface),d())})})},n.prototype.getCapabilities=function(){return new pj(this.getFirstTrackOrFail())},n}(),bj=function(){function n(c){this.mediaStream=c}return n.prototype.render=function(c,d,h){return jd(this,void 0,void 0,function(){return kd(this,function(g){return[2,yj.create(c,this.mediaStream,d,h)]})})},n.create=function(c){return jd(this,void 0,void 0,function(){var d,h;return kd(this,function(g){switch(g.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return d={audio:!1,video:c},[4,navigator.mediaDevices.getUserMedia(d)];case 1:return h=g.sent(),[2,new n(h)]}})})},n}(),hp=function(n,c,d,h){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function j(S){try{b(h.next(S))}catch(E){w(E)}}function C(S){try{b(h.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(j,C)}b((h=h.apply(n,c||[])).next())})},fp=function(n,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,g,m,w;return w={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function j(b){return function(S){return C([b,S])}}function C(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(h=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(n,d)}catch(S){b=[6,S],g=0}finally{h=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},wj=function(){function n(){}return n.failIfNotSupported=function(){return hp(this,void 0,void 0,function(){return fp(this,function(c){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(c){return hp(this,void 0,void 0,function(){return fp(this,function(d){return[2,bj.create(c)]})})},n}(),vj=function(n,c,d,h){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function j(S){try{b(h.next(S))}catch(E){w(E)}}function C(S){try{b(h.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(j,C)}b((h=h.apply(n,c||[])).next())})},Nj=function(n,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,g,m,w;return w={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function j(b){return function(S){return C([b,S])}}function C(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(h=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(n,d)}catch(S){b=[6,S],g=0}finally{h=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},jj=function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var c=MediaStreamTrack;return MediaStreamTrack&&c.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var c=Ci.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(c=Ci.insecureContextCameraQueryError()),Promise.reject(c)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var c=location.host.split(":")[0];return c==="127.0.0.1"||c==="localhost"},n.getCamerasFromMediaDevices=function(){return vj(this,void 0,void 0,function(){var c,d,h,g,m,w,j;return Nj(this,function(C){switch(C.label){case 0:return c=function(b){for(var S=b.getVideoTracks(),E=0,_=S;E<_.length;E++){var M=_[E];M.enabled=!1,M.stop(),b.removeTrack(M)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return d=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(h=C.sent(),g=[],m=0,w=h;m<w.length;m++)j=w[m],j.kind==="videoinput"&&g.push({id:j.deviceId,label:j.label});return c(d),[2,g]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(c,d){var h=function(m){for(var w=[],j=0,C=m;j<C.length;j++){var b=C[j];b.kind==="video"&&w.push({id:b.id,label:b.label})}c(w)},g=MediaStreamTrack;g.getSources(h)})},n}(),Ta;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(Ta||(Ta={}));var kj=function(){function n(){this.state=Ta.NOT_STARTED,this.onGoingTransactionNewState=Ta.UNKNOWN}return n.prototype.directTransition=function(c){this.failIfTransitionOngoing(),this.validateTransition(c),this.state=c},n.prototype.startTransition=function(c){return this.failIfTransitionOngoing(),this.validateTransition(c),this.onGoingTransactionNewState=c,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===Ta.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var c=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ta.UNKNOWN,this.directTransition(c)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ta.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ta.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ta.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(c){switch(this.state){case Ta.UNKNOWN:throw"Transition from unknown is not allowed";case Ta.NOT_STARTED:this.failIfNewStateIs(c,[Ta.PAUSED]);break;case Ta.SCANNING:break;case Ta.PAUSED:break}},n.prototype.failIfNewStateIs=function(c,d){for(var h=0,g=d;h<g.length;h++){var m=g[h];if(c===m)throw"Cannot transition from ".concat(this.state," to ").concat(c)}},n}(),Cj=function(){function n(c){this.stateManager=c}return n.prototype.startTransition=function(c){return this.stateManager.startTransition(c)},n.prototype.directTransition=function(c){this.stateManager.directTransition(c)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===Ta.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==Ta.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ta.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===Ta.PAUSED},n}(),Sj=function(){function n(){}return n.create=function(){return new Cj(new kj)},n}(),Aj=function(){var n=function(c,d){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(h[m]=g[m])},n(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");n(c,d);function h(){this.constructor=c}c.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}(),Yr=function(n){Aj(c,n);function c(){return n!==null&&n.apply(this,arguments)||this}return c.DEFAULT_WIDTH=300,c.DEFAULT_WIDTH_OFFSET=2,c.FILE_SCAN_MIN_HEIGHT=300,c.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,c.MIN_QR_BOX_SIZE=50,c.SHADED_LEFT=1,c.SHADED_RIGHT=2,c.SHADED_TOP=3,c.SHADED_BOTTOM=4,c.SHADED_REGION_ELEMENT_ID="qr-shaded-region",c.VERBOSE=!1,c.BORDER_SHADER_DEFAULT_COLOR="#ffffff",c.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",c}(fs),Ej=function(){function n(c,d){this.logger=d,this.fps=Yr.SCAN_DEFAULT_FPS,c?(c.fps&&(this.fps=c.fps),this.disableFlip=c.disableFlip===!0,this.qrbox=c.qrbox,this.aspectRatio=c.aspectRatio,this.videoConstraints=c.videoConstraints):this.disableFlip=Yr.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?D1.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Us(this.qrbox)},n.create=function(c,d){return new n(c,d)},n}(),xp=function(){function n(c,d){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(c))throw"HTML Element with id=".concat(c," not found");this.elementId=c,this.verbose=!1;var h;typeof d=="boolean"?this.verbose=d===!0:d&&(h=d,this.verbose=h.verbose===!0,h.experimentalFeatures),this.logger=new M1(this.verbose),this.qrcode=new fj(this.getSupportedFormats(d),this.getUseBarCodeDetectorIfSupported(h),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Sj.create()}return n.prototype.start=function(c,d,h,g){var m=this;if(!c)throw"cameraIdOrConfig is required";if(!h||typeof h!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;g?w=g:w=this.verbose?this.logger.log:function(){};var j=Ej.create(d,this.logger);this.clearElement();var C=!1;j.videoConstraints&&(j.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var b=C,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Yr.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var E=this,_=this.stateManagerProxy.startTransition(Ta.SCANNING);return new Promise(function(M,I){var D=b?j.videoConstraints:E.createVideoConstraints(c);if(!D){_.cancel(),I("videoConstraints should be defined");return}var G={};(!b||j.aspectRatio)&&(G.aspectRatio=j.aspectRatio);var R={onRenderSurfaceReady:function(L,O){E.setupUi(L,O,j),E.isScanning=!0,E.foreverScan(j,h,w)}};wj.failIfNotSupported().then(function(L){L.create(D).then(function(O){return O.render(m.element,G,R).then(function(P){E.renderedCamera=P,_.execute(),M(null)}).catch(function(P){_.cancel(),I(P)})}).catch(function(O){_.cancel(),I(Ci.errorGettingUserMedia(O))})}).catch(function(L){_.cancel(),I(Ci.cameraStreamingNotSupported())})})},n.prototype.pause=function(c){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ta.PAUSED),this.showPausedState(),(Us(c)||c!==!0)&&(c=!1),c&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var c=this,d=function(){c.stateManagerProxy.directTransition(Ta.SCANNING),c.hidePausedState()};if(!this.renderedCamera.isPaused()){d();return}this.renderedCamera.resume(function(){d()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var c=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var d=this.stateManagerProxy.startTransition(Ta.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var h=function(){if(c.element){var m=document.getElementById(Yr.SHADED_REGION_ELEMENT_ID);m&&c.element.removeChild(m)}},g=this;return this.renderedCamera.close().then(function(){return g.renderedCamera=null,g.element&&(g.element.removeChild(g.canvasElement),g.canvasElement=null),h(),g.qrRegion&&(g.qrRegion=null),g.context&&(g.context=null),d.execute(),g.hidePausedState(),g.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(c,d){return this.scanFileV2(c,d).then(function(h){return h.decodedText})},n.prototype.scanFileV2=function(c,d){var h=this;if(!c||!(c instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Us(d)&&(d=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(g,m){h.possiblyCloseLastScanImageFile(),h.clearElement(),h.lastScanImageFile=URL.createObjectURL(c);var w=new Image;w.onload=function(){var j=w.width,C=w.height,b=document.getElementById(h.elementId),S=b.clientWidth?b.clientWidth:Yr.DEFAULT_WIDTH,E=Math.max(b.clientHeight?b.clientHeight:C,Yr.FILE_SCAN_MIN_HEIGHT),_=h.computeCanvasDrawConfig(j,C,S,E);if(d){var M=h.createCanvasElement(S,E,"qr-canvas-visible");M.style.display="inline-block",b.appendChild(M);var I=M.getContext("2d");if(!I)throw"Unable to get 2d context from canvas";I.canvas.width=S,I.canvas.height=E,I.drawImage(w,0,0,j,C,_.x,_.y,_.width,_.height)}var D=Yr.FILE_SCAN_HIDDEN_CANVAS_PADDING,G=Math.max(w.width,_.width),R=Math.max(w.height,_.height),L=G+2*D,O=R+2*D,P=h.createCanvasElement(L,O);b.appendChild(P);var Q=P.getContext("2d");if(!Q)throw"Unable to get 2d context from canvas";Q.canvas.width=L,Q.canvas.height=O,Q.drawImage(w,0,0,j,C,D,D,G,R);try{h.qrcode.decodeRobustlyAsync(P).then(function(F){g(np.createFromQrcodeResult(F))}).catch(m)}catch(F){m("QR code parse error, error = ".concat(F))}},w.onerror=m,w.onabort=m,w.onstalled=m,w.onsuspend=m,w.src=URL.createObjectURL(c)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return jj.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(c){if(c){if(!D1.isMediaStreamConstraintsValid(c,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(c)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(c){var d=[nt.QR_CODE,nt.AZTEC,nt.CODABAR,nt.CODE_39,nt.CODE_93,nt.CODE_128,nt.DATA_MATRIX,nt.MAXICODE,nt.ITF,nt.EAN_13,nt.EAN_8,nt.PDF_417,nt.RSS_14,nt.RSS_EXPANDED,nt.UPC_A,nt.UPC_E,nt.UPC_EAN_EXTENSION];if(!c||typeof c=="boolean"||!c.formatsToSupport)return d;if(!Array.isArray(c.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(c.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var h=[],g=0,m=c.formatsToSupport;g<m.length;g++){var w=m[g];nj(w)?h.push(w):this.logger.warn("Invalid format: ".concat(w," passed in config, ignoring."))}if(h.length===0)throw"None of formatsToSupport match supported values.";return h},n.prototype.getUseBarCodeDetectorIfSupported=function(c){if(Us(c))return!0;if(!Us(c.useBarCodeDetectorIfSupported))return c.useBarCodeDetectorIfSupported!==!1;if(Us(c.experimentalFeatures))return!0;var d=c.experimentalFeatures;return Us(d.useBarCodeDetectorIfSupported)?!0:d.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(c,d,h){var g=this,m=h.qrbox;this.validateQrboxConfig(m);var w=this.toQrdimensions(c,d,m),j=function(b){if(b<Yr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Yr.MIN_QR_BOX_SIZE,"px.")},C=function(b){return b>c&&(g.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),b=c),b};j(w.width),j(w.height),w.width=C(w.width)},n.prototype.validateQrboxConfig=function(c){if(typeof c!="number"&&typeof c!="function"&&(c.width===void 0||c.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(c,d,h){if(typeof h=="number")return{width:h,height:h};if(typeof h=="function")try{return h(c,d)}catch(g){throw new Error("qrbox config was passed as a function but it failed with unknown error"+g)}return h},n.prototype.setupUi=function(c,d,h){h.isShadedBoxEnabled()&&this.validateQrboxSize(c,d,h);var g=Us(h.qrbox)?{width:c,height:d}:h.qrbox;this.validateQrboxConfig(g);var m=this.toQrdimensions(c,d,g);m.height>d&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=h.isShadedBoxEnabled()&&m.height<=d,j={x:0,y:0,width:c,height:d},C=w?this.getShadedRegionBounds(c,d,m):j,b=this.createCanvasElement(C.width,C.height),S={willReadFrequently:!0},E=b.getContext("2d",S);E.canvas.width=C.width,E.canvas.height=C.height,this.element.append(b),w&&this.possiblyInsertShadingElement(this.element,c,d,m),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=E,this.canvasElement=b},n.prototype.createScannerPausedUiElement=function(c){var d=document.createElement("div");d.innerText=Ci.scannerPaused(),d.style.display="none",d.style.position="absolute",d.style.top="0px",d.style.zIndex="1",d.style.background="rgba(9, 9, 9, 0.46)",d.style.color="#FFECEC",d.style.textAlign="center",d.style.width="100%",c.appendChild(d),this.scannerPausedUiElement=d},n.prototype.scanContext=function(c,d){var h=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(g){return c(g.text,np.createFromQrcodeResult(g)),h.possiblyUpdateShaders(!0),!0}).catch(function(g){h.possiblyUpdateShaders(!1);var m=Ci.codeParseError(g);return d(m,T1.createFrom(m)),!1})},n.prototype.foreverScan=function(c,d,h){var g=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),w=m.videoWidth/m.clientWidth,j=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*w,b=this.qrRegion.height*j,S=this.qrRegion.x*w,E=this.qrRegion.y*j;this.context.drawImage(m,S,E,C,b,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){g.foreverScanTimeout=setTimeout(function(){g.foreverScan(c,d,h)},g.getTimeoutFps(c.fps))};this.scanContext(d,h).then(function(M){!M&&c.disableFlip!==!0?(g.context.translate(g.context.canvas.width,0),g.context.scale(-1,1),g.scanContext(d,h).finally(function(){_()})):_()}).catch(function(M){g.logger.logError("Error happend while scanning context",M),_()})}},n.prototype.createVideoConstraints=function(c){if(typeof c=="string")return{deviceId:{exact:c}};if(typeof c=="object"){var d="facingMode",h="deviceId",g={user:!0,environment:!0},m="exact",w=function(I){if(I in g)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(I,"'")},j=Object.keys(c);if(j.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(j.length," keys");var C=Object.keys(c)[0];if(C!==d&&C!==h)throw"Only '".concat(d,"' and '").concat(h,"' ")+" are supported for 'cameraIdOrConfig'";if(C===d){var b=c.facingMode;if(typeof b=="string"){if(w(b))return{facingMode:b}}else if(typeof b=="object")if(m in b){if(w(b["".concat(m)]))return{facingMode:{exact:b["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var S=typeof b;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var E=c.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(m in E)return{deviceId:{exact:E["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var _=typeof E;throw"Invalid type of 'deviceId' = ".concat(_)}}}var M=typeof c;throw"Invalid type of 'cameraIdOrConfig' = ".concat(M)},n.prototype.computeCanvasDrawConfig=function(c,d,h,g){if(c<=h&&d<=g){var m=(h-c)/2,w=(g-d)/2;return{x:m,y:w,width:c,height:d}}else{var j=c,C=d;return c>h&&(d=h/c*d,c=h),d>g&&(c=g/d*c,d=g),this.logger.log("Image downsampled from "+"".concat(j,"X").concat(C)+" to ".concat(c,"X").concat(d,".")),this.computeCanvasDrawConfig(c,d,h,g)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var c=document.getElementById(this.elementId);c&&(c.innerHTML="")},n.prototype.possiblyUpdateShaders=function(c){this.qrMatch!==c&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(d){d.style.backgroundColor=c?Yr.BORDER_SHADER_MATCH_COLOR:Yr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=c)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(c,d,h){var g=c,m=d,w=document.createElement("canvas");return w.style.width="".concat(g,"px"),w.style.height="".concat(m,"px"),w.style.display="none",w.id=Us(h)?"qr-canvas":h,w},n.prototype.getShadedRegionBounds=function(c,d,h){if(h.width>c||h.height>d)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(c-h.width)/2,y:(d-h.height)/2,width:h.width,height:h.height}},n.prototype.possiblyInsertShadingElement=function(c,d,h,g){if(!(d-g.width<1||h-g.height<1)){var m=document.createElement("div");m.style.position="absolute";var w=(d-g.width)/2,j=(h-g.height)/2;if(m.style.borderLeft="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(j,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(j,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Yr.SHADED_REGION_ELEMENT_ID),d-g.width<11||h-g.height<11)this.hasBorderShaders=!1;else{var C=5,b=40;this.insertShaderBorders(m,b,C,-C,null,0,!0),this.insertShaderBorders(m,b,C,-C,null,0,!1),this.insertShaderBorders(m,b,C,null,-C,0,!0),this.insertShaderBorders(m,b,C,null,-C,0,!1),this.insertShaderBorders(m,C,b+C,-C,null,-C,!0),this.insertShaderBorders(m,C,b+C,null,-C,-C,!0),this.insertShaderBorders(m,C,b+C,-C,null,-C,!1),this.insertShaderBorders(m,C,b+C,null,-C,-C,!1),this.hasBorderShaders=!0}c.append(m)}},n.prototype.insertShaderBorders=function(c,d,h,g,m,w,j){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=Yr.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(d,"px"),C.style.height="".concat(h,"px"),g!==null&&(C.style.top="".concat(g,"px")),m!==null&&(C.style.bottom="".concat(m,"px")),j?C.style.left="".concat(w,"px"):C.style.right="".concat(w,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),c.appendChild(C)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(c){return 1e3/c},n}(),Jh="data:image/svg+xml;base64,",_j=Jh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Tj=Jh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",gp=Jh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Mj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",mp=function(){function n(){}return n.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},n}(),Dj=function(){function n(){this.data=mp.createDefault();var c=localStorage.getItem(n.LOCAL_STORAGE_KEY);c?this.data=JSON.parse(c):this.reset()}return n.prototype.hasCameraPermissions=function(){return this.data.hasPermission},n.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},n.prototype.setHasPermission=function(c){this.data.hasPermission=c,this.flush()},n.prototype.setLastUsedCameraId=function(c){this.data.lastUsedCameraId=c,this.flush()},n.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},n.prototype.reset=function(){this.data=mp.createDefault(),this.flush()},n.prototype.flush=function(){localStorage.setItem(n.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},n.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",n}(),Rj=function(){function n(){this.infoDiv=document.createElement("div")}return n.prototype.renderInto=function(c){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=lp.poweredBy();var d=document.createElement("a");d.innerText="ScanApp",d.href="https://scanapp.org",d.target="new",d.style.color="white",this.infoDiv.appendChild(d);var h=document.createElement("br"),g=document.createElement("br");this.infoDiv.appendChild(h),this.infoDiv.appendChild(g);var m=document.createElement("a");m.innerText=lp.reportIssues(),m.href="https://github.com/mebjas/html5-qrcode/issues",m.target="new",m.style.color="white",this.infoDiv.appendChild(m),c.appendChild(this.infoDiv)},n.prototype.show=function(){this.infoDiv.style.display="block"},n.prototype.hide=function(){this.infoDiv.style.display="none"},n}(),Ij=function(){function n(c,d){this.isShowingInfoIcon=!0,this.onTapIn=c,this.onTapOut=d,this.infoIcon=document.createElement("img")}return n.prototype.renderInto=function(c){var d=this;this.infoIcon.alt="Info icon",this.infoIcon.src=gp,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(h){return d.onHoverIn()},this.infoIcon.onmouseout=function(h){return d.onHoverOut()},this.infoIcon.onclick=function(h){return d.onClick()},c.appendChild(this.infoIcon)},n.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},n.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},n.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=Mj,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=gp,this.infoIcon.style.opacity="0.6")},n}(),Oj=function(){function n(){var c=this;this.infoDiv=new Rj,this.infoIcon=new Ij(function(){c.infoDiv.show()},function(){c.infoDiv.hide()})}return n.prototype.renderInto=function(c){this.infoDiv.renderInto(c),this.infoIcon.renderInto(c)},n}(),Bj=function(n,c,d,h){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function j(S){try{b(h.next(S))}catch(E){w(E)}}function C(S){try{b(h.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(j,C)}b((h=h.apply(n,c||[])).next())})},Lj=function(n,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,g,m,w;return w={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function j(b){return function(S){return C([b,S])}}function C(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(h=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(n,d)}catch(S){b=[6,S],g=0}finally{h=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},pp=function(){function n(){}return n.hasPermissions=function(){return Bj(this,void 0,void 0,function(){var c,d,h,g;return Lj(this,function(m){switch(m.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(c=m.sent(),d=0,h=c;d<h.length;d++)if(g=h[d],g.kind==="videoinput"&&g.label)return[2,!0];return[2,!1]}})})},n}(),Kn=function(){function n(c){this.supportedScanTypes=this.validateAndReturnScanTypes(c)}return n.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},n.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},n.prototype.isCameraScanRequired=function(){for(var c=0,d=this.supportedScanTypes;c<d.length;c++){var h=d[c];if(n.isCameraScanType(h))return!0}return!1},n.isCameraScanType=function(c){return c===Jn.SCAN_TYPE_CAMERA},n.isFileScanType=function(c){return c===Jn.SCAN_TYPE_FILE},n.prototype.validateAndReturnScanTypes=function(c){if(!c||c.length===0)return fs.DEFAULT_SUPPORTED_SCAN_TYPE;var d=fs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(c.length>d)throw"Max ".concat(d," values expected for ")+"supportedScanTypes";for(var h=0,g=c;h<g.length;h++){var m=g[h];if(!fs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(m))throw"Unsupported scan type ".concat(m)}return c},n}(),Zr=function(){function n(){}return n.ALL_ELEMENT_CLASS="html5-qrcode-element",n.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",n.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",n.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",n.TORCH_BUTTON_ID="html5-qrcode-button-torch",n.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",n.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",n.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",n.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",n.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",n.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",n}(),xn=function(){function n(){}return n.createElement=function(c,d){var h=document.createElement(c);return h.id=d,h.classList.add(Zr.ALL_ELEMENT_CLASS),c==="button"&&h.setAttribute("type","button"),h},n}(),I1=function(n,c,d,h){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function j(S){try{b(h.next(S))}catch(E){w(E)}}function C(S){try{b(h.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(j,C)}b((h=h.apply(n,c||[])).next())})},O1=function(n,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,g,m,w;return w={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function j(b){return function(S){return C([b,S])}}function C(b){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(h=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(n,d)}catch(S){b=[6,S],g=0}finally{h=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},yp=function(){function n(c,d,h){this.isTorchOn=!1,this.torchCapability=c,this.buttonController=d,this.onTorchActionFailureCallback=h}return n.prototype.isTorchEnabled=function(){return this.isTorchOn},n.prototype.flipState=function(){return I1(this,void 0,void 0,function(){var c,d;return O1(this,function(h){switch(h.label){case 0:this.buttonController.disable(),c=!this.isTorchOn,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.torchCapability.apply(c)];case 2:return h.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),c),[3,4];case 3:return d=h.sent(),this.propagateFailure(c,d),this.buttonController.enable(),[3,4];case 4:return[2]}})})},n.prototype.updateUiBasedOnLatestSettings=function(c,d){c===d?(this.buttonController.setText(d?sa.torchOffButton():sa.torchOnButton()),this.isTorchOn=d):this.propagateFailure(d),this.buttonController.enable()},n.prototype.propagateFailure=function(c,d){var h=c?sa.torchOnFailedMessage():sa.torchOffFailedMessage();d&&(h+="; Error = "+d),this.onTorchActionFailureCallback(h)},n.prototype.reset=function(){this.isTorchOn=!1},n}(),Pj=function(){function n(c,d){this.onTorchActionFailureCallback=d,this.torchButton=xn.createElement("button",Zr.TORCH_BUTTON_ID),this.torchController=new yp(c,this,d)}return n.prototype.render=function(c,d){var h=this;this.torchButton.innerText=sa.torchOnButton(),this.torchButton.style.display=d.display,this.torchButton.style.marginLeft=d.marginLeft;var g=this;this.torchButton.addEventListener("click",function(m){return I1(h,void 0,void 0,function(){return O1(this,function(w){switch(w.label){case 0:return[4,g.torchController.flipState()];case 1:return w.sent(),g.torchController.isTorchEnabled()?(g.torchButton.classList.remove(Zr.TORCH_BUTTON_CLASS_TORCH_OFF),g.torchButton.classList.add(Zr.TORCH_BUTTON_CLASS_TORCH_ON)):(g.torchButton.classList.remove(Zr.TORCH_BUTTON_CLASS_TORCH_ON),g.torchButton.classList.add(Zr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),c.appendChild(this.torchButton)},n.prototype.updateTorchCapability=function(c){this.torchController=new yp(c,this,this.onTorchActionFailureCallback)},n.prototype.getTorchButton=function(){return this.torchButton},n.prototype.hide=function(){this.torchButton.style.display="none"},n.prototype.show=function(){this.torchButton.style.display="inline-block"},n.prototype.disable=function(){this.torchButton.disabled=!0},n.prototype.enable=function(){this.torchButton.disabled=!1},n.prototype.setText=function(c){this.torchButton.innerText=c},n.prototype.reset=function(){this.torchButton.innerText=sa.torchOnButton(),this.torchController.reset()},n.create=function(c,d,h,g){var m=new n(d,g);return m.render(c,h),m},n}(),zj=function(){function n(c,d,h){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=d?"block":"none",c.appendChild(this.fileBasedScanRegion);var g=document.createElement("label");g.setAttribute("for",this.getFileScanInputId()),g.style.display="inline-block",this.fileBasedScanRegion.appendChild(g),this.fileSelectionButton=xn.createElement("button",Zr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(j){g.click()}),g.append(this.fileSelectionButton),this.fileScanInput=xn.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",g.appendChild(this.fileScanInput);var m=this;this.fileScanInput.addEventListener("change",function(j){if(!(j==null||j.target==null)){var C=j.target;if(!(C.files&&C.files.length===0)){var b=C.files,S=b[0],E=S.name;m.setImageNameToButton(E),h(S)}}});var w=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(w),this.fileBasedScanRegion.addEventListener("dragenter",function(j){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),j.stopPropagation(),j.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(j){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder(),j.stopPropagation(),j.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(j){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),j.stopPropagation(),j.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(j){j.stopPropagation(),j.preventDefault(),m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder();var C=j.dataTransfer;if(C){var b=C.files;if(!b||b.length===0)return;for(var S=!1,E=0;E<b.length;++E){var _=b.item(E);if(_){var M=/image.*/;if(_.type.match(M)){S=!0;var I=_.name;m.setImageNameToButton(I),h(_),w.innerText=sa.dragAndDropMessage();break}}}S||(w.innerText=sa.dragAndDropMessageOnlyImages())}})}return n.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},n.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},n.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},n.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},n.prototype.createFileBasedScanRegion=function(){var c=document.createElement("div");return c.style.textAlign="center",c.style.margin="auto",c.style.width="80%",c.style.maxWidth="600px",c.style.border=this.fileBasedScanRegionDefaultBorder(),c.style.padding="10px",c.style.marginBottom="10px",c},n.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},n.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},n.prototype.createDragAndDropMessage=function(){var c=document.createElement("div");return c.innerText=sa.dragAndDropMessage(),c.style.fontWeight="400",c},n.prototype.setImageNameToButton=function(c){var d=20;if(c.length>d){var h=c.substring(0,8),g=c.length,m=c.substring(g-8,g);c="".concat(h,"....").concat(m)}var w=sa.fileSelectionChooseAnother()+" - "+c;this.fileSelectionButton.innerText=w},n.prototype.setInitialValueToButton=function(){var c=sa.fileSelectionChooseImage()+" - "+sa.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=c},n.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},n.create=function(c,d,h){var g=new n(c,d,h);return g},n}(),Fj=function(){function n(c){this.selectElement=xn.createElement("select",Zr.CAMERA_SELECTION_SELECT_ID),this.cameras=c,this.options=[]}return n.prototype.render=function(c){var d=document.createElement("span");d.style.marginRight="10px";var h=this.cameras.length;if(h===0)throw new Error("No cameras found");if(h===1)d.style.display="none";else{var g=sa.selectCamera();d.innerText="".concat(g," (").concat(this.cameras.length,")  ")}for(var m=1,w=0,j=this.cameras;w<j.length;w++){var C=j[w],b=C.id,S=C.label==null?b:C.label;(!S||S==="")&&(S=[sa.anonymousCameraPrefix(),m++].join(" "));var E=document.createElement("option");E.value=b,E.innerText=S,this.options.push(E),this.selectElement.appendChild(E)}d.appendChild(this.selectElement),c.appendChild(d)},n.prototype.disable=function(){this.selectElement.disabled=!0},n.prototype.isDisabled=function(){return this.selectElement.disabled===!0},n.prototype.enable=function(){this.selectElement.disabled=!1},n.prototype.getValue=function(){return this.selectElement.value},n.prototype.hasValue=function(c){for(var d=0,h=this.options;d<h.length;d++){var g=h[d];if(g.value===c)return!0}return!1},n.prototype.setValue=function(c){if(!this.hasValue(c))throw new Error("".concat(c," is not present in the camera list."));this.selectElement.value=c},n.prototype.hasSingleItem=function(){return this.cameras.length===1},n.prototype.numCameras=function(){return this.cameras.length},n.create=function(c,d){var h=new n(d);return h.render(c),h},n}(),Uj=function(){function n(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=xn.createElement("input",Zr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return n.prototype.render=function(c,d){this.zoomElementContainer.style.display=d?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",c.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var h=sa.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(h),this.rangeText.style.marginRight="10px";var g=this;this.rangeInput.addEventListener("input",function(){return g.onValueChange()}),this.rangeInput.addEventListener("change",function(){return g.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},n.prototype.onValueChange=function(){var c=sa.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(c),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},n.prototype.setValues=function(c,d,h,g){this.rangeInput.min=c.toString(),this.rangeInput.max=d.toString(),this.rangeInput.step=g.toString(),this.rangeInput.value=h.toString(),this.onValueChange()},n.prototype.show=function(){this.zoomElementContainer.style.display="block"},n.prototype.hide=function(){this.zoomElementContainer.style.display="none"},n.prototype.setOnCameraZoomValueChangeCallback=function(c){this.onChangeCallback=c},n.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},n.create=function(c,d){var h=new n;return h.render(c,d),h},n}(),Xr;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Xr||(Xr={}));function Hj(n){return{fps:n.fps,qrbox:n.qrbox,aspectRatio:n.aspectRatio,disableFlip:n.disableFlip,videoConstraints:n.videoConstraints}}function Vj(n,c){return{formatsToSupport:n.formatsToSupport,useBarCodeDetectorIfSupported:n.useBarCodeDetectorIfSupported,experimentalFeatures:n.experimentalFeatures,verbose:c}}var qj=function(){function n(c,d,h){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=c,this.config=this.createConfig(d),this.verbose=h===!0,!document.getElementById(c))throw"HTML Element with id=".concat(c," not found");this.scanTypeSelector=new Kn(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new M1(this.verbose),this.persistedDataManager=new Dj,d.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return n.prototype.render=function(c,d){var h=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(m,w){if(c)c(m,w);else{if(h.lastMatchFound===m)return;h.lastMatchFound=m,h.setHeaderMessage(sa.lastMatch(m),Xr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(m,w){d&&d(m,w)};var g=document.getElementById(this.elementId);if(!g)throw"HTML Element with id=".concat(this.elementId," not found");g.innerHTML="",this.createBasicLayout(g),this.html5Qrcode=new xp(this.getScanRegionId(),Vj(this.config,this.verbose))},n.prototype.pause=function(c){(Us(c)||c!==!0)&&(c=!1),this.getHtml5QrcodeOrFail().pause(c)},n.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},n.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},n.prototype.clear=function(){var c=this,d=function(){var h=document.getElementById(c.elementId);h&&(h.innerHTML="",c.resetBasicLayout(h))};return this.html5Qrcode?new Promise(function(h,g){if(!c.html5Qrcode){h();return}c.html5Qrcode.isScanning?c.html5Qrcode.stop().then(function(m){if(!c.html5Qrcode){h();return}c.html5Qrcode.clear(),d(),h()}).catch(function(m){c.verbose&&c.logger.logError("Unable to stop qrcode scanner",m),g(m)}):(c.html5Qrcode.clear(),d(),h())}):Promise.resolve()},n.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},n.prototype.applyVideoConstraints=function(c){return this.getHtml5QrcodeOrFail().applyVideoConstraints(c)},n.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},n.prototype.createConfig=function(c){return c?(c.fps||(c.fps=fs.SCAN_DEFAULT_FPS),c.rememberLastUsedCamera!==!fs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(c.rememberLastUsedCamera=fs.DEFAULT_REMEMBER_LAST_CAMERA_USED),c.supportedScanTypes||(c.supportedScanTypes=fs.DEFAULT_SUPPORTED_SCAN_TYPE),c):{fps:fs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:fs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:fs.DEFAULT_SUPPORTED_SCAN_TYPE}},n.prototype.createBasicLayout=function(c){c.style.position="relative",c.style.padding="0px",c.style.border="1px solid silver",this.createHeader(c);var d=document.createElement("div"),h=this.getScanRegionId();d.id=h,d.style.width="100%",d.style.minHeight="100px",d.style.textAlign="center",c.appendChild(d),Kn.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var g=document.createElement("div"),m=this.getDashboardId();g.id=m,g.style.width="100%",c.appendChild(g),this.setupInitialDashboard(g)},n.prototype.resetBasicLayout=function(c){c.style.border="none"},n.prototype.setupInitialDashboard=function(c){this.createSection(c),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},n.prototype.createHeader=function(c){var d=document.createElement("div");d.style.textAlign="left",d.style.margin="0px",c.appendChild(d);var h=new Oj;h.renderInto(d);var g=document.createElement("div");g.id=this.getHeaderMessageContainerId(),g.style.display="none",g.style.textAlign="center",g.style.fontSize="14px",g.style.padding="2px 10px",g.style.margin="4px",g.style.borderTop="1px solid #f6f6f6",d.appendChild(g)},n.prototype.createSection=function(c){var d=document.createElement("div");d.id=this.getDashboardSectionId(),d.style.width="100%",d.style.padding="10px 0px 10px 0px",d.style.textAlign="left",c.appendChild(d)},n.prototype.createCameraListUi=function(c,d,h){var g=this;g.showHideScanTypeSwapLink(!1),g.setHeaderMessage(sa.cameraPermissionRequesting());var m=function(){h||g.createPermissionButton(c,d)};xp.getCameras().then(function(w){g.persistedDataManager.setHasPermission(!0),g.showHideScanTypeSwapLink(!0),g.resetHeaderMessage(),w&&w.length>0?(c.removeChild(d),g.renderCameraSelection(w)):(g.setHeaderMessage(sa.noCameraFound(),Xr.STATUS_WARNING),m())}).catch(function(w){g.persistedDataManager.setHasPermission(!1),h?h.disabled=!1:m(),g.setHeaderMessage(w,Xr.STATUS_WARNING),g.showHideScanTypeSwapLink(!0)})},n.prototype.createPermissionButton=function(c,d){var h=this,g=xn.createElement("button",this.getCameraPermissionButtonId());g.innerText=sa.cameraPermissionTitle(),g.addEventListener("click",function(){g.disabled=!0,h.createCameraListUi(c,d,g)}),d.appendChild(g)},n.prototype.createPermissionsUi=function(c,d){var h=this;if(Kn.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){pp.hasPermissions().then(function(g){g?h.createCameraListUi(c,d):(h.persistedDataManager.setHasPermission(!1),h.createPermissionButton(c,d))}).catch(function(g){h.persistedDataManager.setHasPermission(!1),h.createPermissionButton(c,d)});return}this.createPermissionButton(c,d)},n.prototype.createSectionControlPanel=function(){var c=document.getElementById(this.getDashboardSectionId()),d=document.createElement("div");c.appendChild(d);var h=document.createElement("div");h.id=this.getDashboardSectionCameraScanRegionId(),h.style.display=Kn.isCameraScanType(this.currentScanType)?"block":"none",d.appendChild(h);var g=document.createElement("div");g.style.textAlign="center",h.appendChild(g),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(h,g),this.renderFileScanUi(d)},n.prototype.renderFileScanUi=function(c){var d=Kn.isFileScanType(this.currentScanType),h=this,g=function(m){if(!h.html5Qrcode)throw"html5Qrcode not defined";Kn.isFileScanType(h.currentScanType)&&(h.setHeaderMessage(sa.loadingImage()),h.html5Qrcode.scanFileV2(m,!0).then(function(w){h.resetHeaderMessage(),h.qrCodeSuccessCallback(w.decodedText,w)}).catch(function(w){h.setHeaderMessage(w,Xr.STATUS_WARNING),h.qrCodeErrorCallback(w,T1.createFrom(w))}))};this.fileSelectionUi=zj.create(c,d,g)},n.prototype.renderCameraSelection=function(c){var d=this,h=this,g=document.getElementById(this.getDashboardSectionCameraScanRegionId());g.style.textAlign="center";var m=Uj.create(g,!1),w=function(D){var G=D.zoomFeature();if(G.isSupported()){m.setOnCameraZoomValueChangeCallback(function(L){G.apply(L)});var R=1;d.config.defaultZoomValueIfSupported&&(R=d.config.defaultZoomValueIfSupported),R=lj(R,G.min(),G.max()),m.setValues(G.min(),G.max(),R,G.step()),m.show()}},j=Fj.create(g,c),C=document.createElement("span"),b=xn.createElement("button",Zr.CAMERA_START_BUTTON_ID);b.innerText=sa.scanButtonStartScanningText(),C.appendChild(b);var S=xn.createElement("button",Zr.CAMERA_STOP_BUTTON_ID);S.innerText=sa.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,C.appendChild(S);var E,_=function(D){if(!D.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(D.torchFeature()):E=Pj.create(C,D.torchFeature(),{display:"none",marginLeft:"5px"},function(G){h.setHeaderMessage(G,Xr.STATUS_WARNING)}),E.show()};g.appendChild(C);var M=function(D){D||(b.style.display="none"),b.innerText=sa.scanButtonStartScanningText(),b.style.opacity="1",b.disabled=!1,D&&(b.style.display="inline-block")};if(b.addEventListener("click",function(D){b.innerText=sa.scanButtonScanningStarting(),j.disable(),b.disabled=!0,b.style.opacity="0.5",d.scanTypeSelector.hasMoreThanOneScanType()&&h.showHideScanTypeSwapLink(!1),h.resetHeaderMessage();var G=j.getValue();h.persistedDataManager.setLastUsedCameraId(G),h.html5Qrcode.start(G,Hj(h.config),h.qrCodeSuccessCallback,h.qrCodeErrorCallback).then(function(R){S.disabled=!1,S.style.display="inline-block",M(!1);var L=h.html5Qrcode.getRunningTrackCameraCapabilities();d.config.showTorchButtonIfSupported===!0&&_(L),d.config.showZoomSliderIfSupported===!0&&w(L)}).catch(function(R){h.showHideScanTypeSwapLink(!0),j.enable(),M(!0),h.setHeaderMessage(R,Xr.STATUS_WARNING)})}),j.hasSingleItem()&&b.click(),S.addEventListener("click",function(D){if(!h.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,h.html5Qrcode.stop().then(function(G){d.scanTypeSelector.hasMoreThanOneScanType()&&h.showHideScanTypeSwapLink(!0),j.enable(),b.disabled=!1,S.style.display="none",b.style.display="inline-block",E&&(E.reset(),E.hide()),m.removeOnCameraZoomValueChangeCallback(),m.hide(),h.insertCameraScanImageToScanRegion()}).catch(function(G){S.disabled=!1,h.setHeaderMessage(G,Xr.STATUS_WARNING)})}),h.persistedDataManager.getLastUsedCameraId()){var I=h.persistedDataManager.getLastUsedCameraId();j.hasValue(I)?(j.setValue(I),b.click()):h.persistedDataManager.resetLastUsedCameraId()}},n.prototype.createSectionSwap=function(){var c=this,d=sa.textIfCameraScanSelected(),h=sa.textIfFileScanSelected(),g=document.getElementById(this.getDashboardSectionId()),m=document.createElement("div");m.style.textAlign="center";var w=xn.createElement("span",this.getDashboardSectionSwapLinkId());w.style.textDecoration="underline",w.style.cursor="pointer",w.innerText=Kn.isCameraScanType(this.currentScanType)?d:h,w.addEventListener("click",function(){if(!c.sectionSwapAllowed){c.verbose&&c.logger.logError("Section swap called when not allowed");return}c.resetHeaderMessage(),c.fileSelectionUi.resetValue(),c.sectionSwapAllowed=!1,Kn.isCameraScanType(c.currentScanType)?(c.clearScanRegion(),c.getCameraScanRegion().style.display="none",c.fileSelectionUi.show(),w.innerText=h,c.currentScanType=Jn.SCAN_TYPE_FILE,c.insertFileScanImageToScanRegion()):(c.clearScanRegion(),c.getCameraScanRegion().style.display="block",c.fileSelectionUi.hide(),w.innerText=d,c.currentScanType=Jn.SCAN_TYPE_CAMERA,c.insertCameraScanImageToScanRegion(),c.startCameraScanIfPermissionExistsOnSwap()),c.sectionSwapAllowed=!0}),m.appendChild(w),g.appendChild(m)},n.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var c=this,d=this;if(this.persistedDataManager.hasCameraPermissions()){pp.hasPermissions().then(function(h){if(h){var g=document.getElementById(d.getCameraPermissionButtonId());if(!g)throw c.logger.logError("Permission button not found, fail;"),"Permission button not found";g.click()}else d.persistedDataManager.setHasPermission(!1)}).catch(function(h){d.persistedDataManager.setHasPermission(!1)});return}},n.prototype.resetHeaderMessage=function(){var c=document.getElementById(this.getHeaderMessageContainerId());c.style.display="none"},n.prototype.setHeaderMessage=function(c,d){d||(d=Xr.STATUS_DEFAULT);var h=this.getHeaderMessageDiv();switch(h.innerText=c,h.style.display="block",d){case Xr.STATUS_SUCCESS:h.style.background="rgba(106, 175, 80, 0.26)",h.style.color="#477735";break;case Xr.STATUS_WARNING:h.style.background="rgba(203, 36, 49, 0.14)",h.style.color="#cb2431";break;case Xr.STATUS_DEFAULT:default:h.style.background="rgba(0, 0, 0, 0)",h.style.color="rgb(17, 17, 17)";break}},n.prototype.showHideScanTypeSwapLink=function(c){this.scanTypeSelector.hasMoreThanOneScanType()&&(c!==!0&&(c=!1),this.sectionSwapAllowed=c,this.getDashboardSectionSwapLink().style.display=c?"inline-block":"none")},n.prototype.insertCameraScanImageToScanRegion=function(){var c=this,d=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){d.innerHTML="<br>",d.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(h){d.innerHTML="<br>",d.appendChild(c.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=_j,this.cameraScanImage.alt=sa.cameraScanAltText()},n.prototype.insertFileScanImageToScanRegion=function(){var c=this,d=document.getElementById(this.getScanRegionId());if(this.fileScanImage){d.innerHTML="<br>",d.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(h){d.innerHTML="<br>",d.appendChild(c.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Tj,this.fileScanImage.alt=sa.fileScanAltText()},n.prototype.clearScanRegion=function(){var c=document.getElementById(this.getScanRegionId());c.innerHTML=""},n.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},n.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},n.prototype.getDashboardSectionSwapLinkId=function(){return Zr.SCAN_TYPE_CHANGE_ANCHOR_ID},n.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},n.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},n.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},n.prototype.getCameraPermissionButtonId=function(){return Zr.CAMERA_PERMISSION_BUTTON_ID},n.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},n.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},n.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},n}();function B1(){const{bill_id:n}=ys(),[c,d]=N.useState(!1),[h,g]=N.useState(null),[m,w]=N.useState(!1),[j,C]=N.useState(null),[b,S]=N.useState([]),[E,_]=N.useState(!1),[M,I]=N.useState(""),[D,G]=N.useState(null),[R,L]=N.useState(""),O=N.useRef(null),P=Gt(),{auth:Q}=N.useContext(Ma),F=async()=>{try{if(!n)return;const W=await me.get(`/user-bills/users/${Q.user.id}/bills`);if(W.data.success&&Array.isArray(W.data.data)){const se=W.data.data.find(le=>le.id===n);se?C(se):(re.error("You are not assigned to this bill"),P("/my-bills"))}}catch(W){console.error("Error fetching bill details:",W),re.error("Error loading bill information")}},q=async()=>{try{const W=await me.get(`/user-apartments/users/${Q.user.id}/apartments`);return W.data.success&&Array.isArray(W.data.data)?(S(W.data.data),W.data.data):[]}catch(W){return console.error("Error fetching user apartments:",W),re.error("Error loading your assigned apartments"),[]}},Y=async(W,se)=>{try{if(console.log("Checking access for house ID:",W),!W)return{access:!1,reason:"Invalid house ID"};const le=await me.get(`/houses/${W}`);if(!le.data.success||!le.data.data)return{access:!1,reason:"House not found in the system"};const K=le.data.data;let xe=null;if(K.apartment_id)try{const oe=await me.get(`/apartments/${K.apartment_id}`);oe.data.success&&(xe=oe.data.data)}catch(oe){console.error("Error fetching apartment:",oe)}let Le=null;if(K.floor_id)try{const oe=await me.get(`/floors/${K.floor_id}`);oe.data.success&&(Le=oe.data.data)}catch(oe){console.error("Error fetching floor:",oe)}const ye={...K,apartment:xe,floor:Le};if(G(ye),!se.some(oe=>oe.id===K.apartment_id))return{access:!1,reason:`You are not assigned to "${xe?.name||"this apartment"}"`};let Re=!1;try{const oe=await me.get(`/bill-assignments/house-details?house_id=${W}&apartment_id=${K.apartment_id}`);oe.data.success&&(Re=(Array.isArray(oe.data.data)?oe.data.data:oe.data.data?.bills||[]).some(te=>te.bill_id===n||te.id===n))}catch(oe){console.error("Error checking bill assignments:",oe);try{const Ve=await me.get(`/user-bills/users/${Q.user.id}/bills`);Ve.data.success&&Array.isArray(Ve.data.data)&&Ve.data.data.find(Ie=>Ie.id===n)&&(Re=!0)}catch(Ve){console.error("Alternative check failed:",Ve)}}return Re?j?.billtype?.toLowerCase()!=="measurable"?{access:!1,reason:`"${j?.bill_name||"Selected bill"}" is not a measurable bill`}:{access:!0,houseData:ye,apartmentId:K.apartment_id,floorId:K.floor_id,houseId:K.id}:{access:!1,reason:`This house does not have "${j?.bill_name||"the selected bill"}" assigned`}}catch(le){if(console.error("Error checking house access:",le),le.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const K=le.response?.status;return K===401?{access:!1,reason:"Session expired. Please login again."}:K===403?{access:!1,reason:"Access denied to this resource."}:K===404?{access:!1,reason:"House not found."}:K===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},$=async()=>{if(!R.trim()){re.error("Please enter a house ID");return}try{w(!0),O.current&&O.current.clear().catch(K=>{console.log("Scanner clear error:",K)}),d(!1);const W=R.trim();g({houseId:W,source:"manual"});const se=await q(),le=await Y(W,se);le.access?(_(!0),re.success(`Access granted! House ${D?.house_id||W} has ${j?.bill_name} bill.`)):(_(!1),I(le.reason||"Access denied"),re.error(le.reason||"Access denied"))}catch(W){console.error("Error processing manual input:",W),re.error(W.message||"Invalid house ID. Please enter a valid house ID.")}finally{w(!1)}},ce=W=>{L(W.target.value)},he=W=>{W.key==="Enter"&&$()},de=()=>{d(!0),g(null),_(!1),I(""),G(null),L(""),setTimeout(()=>{try{O.current&&O.current.clear().catch(W=>{console.log("Scanner clear error:",W)}),O.current=new qj("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1},!1),O.current.render(W=>{ne(W)},W=>{console.log("QR Scan error:",W)})}catch(W){console.error("Scanner initialization error:",W),re.error("Failed to initialize scanner. Please refresh and try again.")}},100)},ne=async W=>{try{w(!0),O.current&&await O.current.clear(),d(!1),L(""),console.log("Scanned house ID:",W);const se=W.trim();g({houseId:se,source:"qr"});const le=await q(),K=await Y(se,le);K.access?(_(!0),re.success(`Access granted! House ${D?.house_id||se} has ${j?.bill_name} bill.`)):(_(!1),I(K.reason||"Access denied"),re.error(K.reason||"Access denied"))}catch(se){console.error("Error processing QR code:",se),re.error(se.message||"Invalid QR code. Please scan a valid house QR code."),d(!1)}finally{w(!1)}},J=()=>{O.current&&O.current.clear().catch(W=>{console.log("Scanner clear error on reset:",W)}),d(!1),g(null),_(!1),I(""),G(null),L("")},z=()=>{P("/my-bills")},V=()=>{if(!D||!h){re.error("House data not available");return}P(`/calculate-measurable-bill/${n}`,{state:{scannedData:h,billData:j,actualBillId:n,houseData:D,houseId:D.id,source:h.source}})};return N.useEffect(()=>()=>{O.current&&O.current.clear().catch(W=>{console.log("Scanner clear error on unmount:",W)})},[]),N.useEffect(()=>{Q?.user?.id&&n&&(F(),q())},[Q?.user?.id,n]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(ua,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[c&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",children:[e.jsx($t,{size:16}),e.jsx("span",{children:"Cancel"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 dark:text-gray-100 text-gray-700"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsx("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:"Position QR code within frame"})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Point your camera at a house QR code to scan"}),e.jsxs("p",{className:"text-xs mt-1",children:["Scanning for: ",j?.bill_name]}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),m&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(At,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Fetching house details and checking access..."})]}),h&&!m&&!c&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Details"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Information fetched from system"})]}),e.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(Po,{size:16}),e.jsx("span",{children:"Scan Another"})]})]}),E?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(Rl,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Access Granted "}),e.jsxs("p",{className:"text-green-700 dark:text-green-400",children:["You can calculate ",j?.bill_name," for this house"]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:V,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(qt,{size:16}),"Calculate Bill"]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(vr,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:M}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsxs("p",{children:["Requirements to calculate ",j?.bill_name,":"]}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House must be in your assigned apartment"}),e.jsxs("li",{children:['House must have "',j?.bill_name,'" assigned']}),e.jsx("li",{children:"House must exist in the system"})]})]})]})]})})]}),!h&&!c&&!m&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsxs("div",{className:"max-w-md mx-auto mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter House ID:"}),e.jsx("input",{type:"text",className:"w-full mt-2 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:R,onChange:ce,onKeyPress:he,placeholder:"e.g., H001-458-982"}),e.jsx("div",{children:e.jsxs("button",{onClick:$,className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 w-full",children:[e.jsx(qt,{size:16}),"Check Access"]})})]}),e.jsx("div",{className:"max-w-md mx-auto mb-2",children:e.jsx("label",{className:"font-bold text-2xl text-gray-700 dark:text-gray-100",children:"Or"})}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(Zh,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Scan House QR Code"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Scan a house QR code to check if it has ",e.jsx("strong",{children:j?.bill_name})," assigned"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"QR codes contain only House ID. System will fetch all details automatically."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:de,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Bv,{size:20}),"Start Scanning"]}),e.jsx("button",{onClick:z,className:"w-full px-6 py-3 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Back to My Bills"})]})]})]})]})})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function Gj(){const{bill_id:n}=ys(),c=Gt(),d=Ys(),{auth:h}=N.useContext(Ma),g=d.state?.scannedData||null,m=d.state?.billData||null,w=d.state?.houseData||null,j=d.state?.actualBillId||n,C=d.state?.source||"qr";console.log(" CalculateMeasurableBill Data:",{bill_id:n,actualBillId:j,source:C,scannedData:g,houseDetails:w,billData:m});const[b,S]=N.useState(!1),[E,_]=N.useState(null),[M,I]=N.useState([]),[D,G]=N.useState([]),[R,L]=N.useState(null),[O,P]=N.useState(null),[Q,F]=N.useState(""),[q,Y]=N.useState({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:"",current_reading:"",used_units:"",total_amount:""}),[$,ce]=N.useState(null),[he,de]=N.useState([]),[ne,J]=N.useState(!1),[z,V]=N.useState(!1),W=na.useRef(q.month),se=na.useRef(q.year),le=Ne=>["January","February","March","April","May","June","July","August","September","October","November","December"][Ne-1]||"";N.useEffect(()=>{if(!n||!j){re.error("Bill ID is missing"),c("/my-bills");return}if(!g||!w||!m){re.error("House data is incomplete. Please go back and try again."),c(`/measurable-bills/${n}`);return}console.log(" Data validated:",{bill_id:n,actualBillId:j,source:C,scannedData:g,houseDetails:w,billData:m})},[n,j,g,w,m,c]);const K=async()=>{try{console.log("Loading bill ranges for bill_id:",j);const Ne=await me.get(`/billranges/bills/${j}`);console.log("Bill ranges API response FULL:",Ne);let We=[];if(Array.isArray(Ne.data))We=Ne.data;else if(Ne.data.data&&Array.isArray(Ne.data.data))We=Ne.data.data;else if(Ne.data.success&&Ne.data.data)Array.isArray(Ne.data.data)?We=Ne.data.data:typeof Ne.data.data=="object"&&(We=Object.values(Ne.data.data));else if(typeof Ne.data=="object"){for(const Ye in Ne.data)if(Array.isArray(Ne.data[Ye])){We=Ne.data[Ye];break}}if(console.log("Extracted rangesData:",We),We.length>0){const Ye=We.sort((Me,Je)=>parseFloat(Me.fromRange||Me.from_range||Me.from||0)-parseFloat(Je.fromRange||Je.from_range||Je.from||0));I(Ye),Ye.length>0&&L(Ye[0])}else I([]),re.warning("No bill ranges data available in response")}catch(Ne){console.error("Error loading bill ranges:",Ne),re.error("Failed to load bill ranges."),I([])}},xe=async()=>{try{const Ne=le(q.month),We=q.month;console.log(" Loading prices for:",{monthNumber:We,monthName:Ne,year:q.year,bill_id:j}),G([]),P(null);let Ye=null,Me=null;try{Ye=await me.get("/billprice",{params:{bill_id:j,month:Ne,year:q.year}})}catch(be){Me=be;try{Ye=await me.get("/billprice",{params:{bill_id:j,month:We,year:q.year}})}catch(Pe){Me=Pe;try{Ye=await me.get(`/billprice/${j}/${Ne}/${q.year}`)}catch(Bt){Me=Bt;try{Ye=await me.get(`/billprice/${j}/${We}/${q.year}`)}catch(mt){Me=mt;try{Ye=await me.get("/api/billprice",{params:{bill_id:j,month:Ne,year:q.year}})}catch(Be){throw Me=Be,new Error("All API attempts failed")}}}}}let Je=[];if(Ye.data?.success)Array.isArray(Ye.data.data)?Je=Ye.data.data:Ye.data.data&&typeof Ye.data.data=="object"?Je=Object.values(Ye.data.data):Je=[];else if(Array.isArray(Ye.data))Je=Ye.data;else if(Ye.data?.data&&Array.isArray(Ye.data.data))Je=Ye.data.data;else if(Ye.data&&typeof Ye.data=="object"){for(const be in Ye.data)if(Array.isArray(Ye.data[be])){Je=Ye.data[be];break}}console.log(" Processed bill prices:",Je);const Ee=Je.filter(be=>{const Pe=be.month,Bt=be.year,mt=Pe===Ne||Pe===We.toString(),Be=Bt===q.year||Bt===q.year.toString();return mt&&Be});console.log("Filtered prices for current month/year:",Ee),Ee.length>0?(G(Ee),R&&Le(Ee)):Je.length>0?(G(Je),R&&Le(Je),re.success(`Loaded ${Je.length} price(s) for ${Ne}`)):(G([]),re.info(`No prices found for ${Ne} ${q.year}. Please set prices first.`))}catch(Ne){console.error("Error loading bill prices:",Ne),G([]),P(null),re.error(`Failed to load prices for ${le(q.month)}. Check console.`)}},Le=(Ne=D)=>{if(!R||!Ne||Ne.length===0){P(null);return}const We=Ne.find(Ye=>{const Me=Ye.billrange_id||Ye.range_id||Ye.id,Je=R.id||R._id;return Me&&Me.toString()===Je.toString()});P(We||null)},ye=async()=>{let Ne=null;if(Ne=g?.houseId||g?.hse,!Ne||!j){console.log("Missing houseId or bill_id"),Y(We=>({...We,previous_reading:"0"}));return}try{J(!0),console.log(" Loading previous reading for:",{houseId:Ne,bill_id:j,source:C});const We=await me.get("/generate-measurable-bills/previous-reading",{params:{house_id:Ne,bill_id:j}});if(console.log(" API Response:",We.data),We.data.success){const Ye=We.data.data?.current_reading||0;Y(Me=>({...Me,previous_reading:Ye.toString()})),console.log(` Previous reading set to: ${Ye}`)}}catch(We){console.error(" Error loading previous reading:",We),We.response?.status===404?(console.log("No previous reading found (404). Starting from 0."),Y(Ye=>({...Ye,previous_reading:"0"}))):(re.error("Could not load previous reading"),Y(Ye=>({...Ye,previous_reading:"0"})))}finally{J(!1)}},ie=async(Ne,We)=>{const Ye={...q,[Ne]:parseInt(We)};Y(Ye);const Me=Ne==="month"&&We!==W.current,Je=Ne==="year"&&We!==se.current;(Me||Je)&&(Ne==="month"&&(W.current=We),Ne==="year"&&(se.current=We),G([]),P(null),ce(null),de([]),Y(Ee=>({...Ee,[Ne]:parseInt(We),total_amount:"",used_units:""})),xe(),ye())},Re=Ne=>{const{name:We,value:Ye}=Ne.target;if(We==="month"||We==="year"){ie(We,Ye);return}const Me={...q,[We]:Ye};if(Y(Me),We==="current_reading"){const Je=parseFloat(Ye)||0,Ee=parseFloat(q.previous_reading)||0,be=Je-Ee;if(be>=0)if(Me.used_units=be.toString(),Me.total_amount="",be>0&&M.length>0&&D.length>0){const{totalAmount:Pe,details:Bt}=oe(be);Me.total_amount=Pe.toFixed(2),Ve(be,Pe,Bt)}else ce(null),de([]);else re.error("Current reading cannot be less than previous reading")}Y(Me)},oe=Ne=>{if(console.log("=== SEQUENTIAL CALCULATION ==="),console.log("Used units:",Ne),!M.length||!D.length)return console.log("Missing ranges or prices"),{totalAmount:0,details:[]};const We=[...M].sort((Ee,be)=>parseFloat(Ee.fromRange||Ee.from_range||Ee.from||0)-parseFloat(be.fromRange||be.from_range||be.from||0));let Ye=parseFloat(Ne),Me=0;const Je=[];for(let Ee=0;Ee<We.length&&Ye>0;Ee++){const be=We[Ee],Pe=D.find(Ze=>{const Et=Ze.billrange_id||Ze.range_id||Ze.id,xt=be.id||be._id;return Et&&Et.toString()===xt.toString()});if(!Pe){console.warn(`No price found for range ${be.id}`);continue}const Bt=parseFloat(be.fromRange||be.from_range||be.from||0),mt=be.toRange?parseFloat(be.toRange||be.to_range||be.to):1/0,Be=parseFloat(Pe.unitprice||Pe.uniprice||0),ot=parseFloat(Pe.fixedamount||0);let we=0;if(mt===1/0)we=Ye,Ye=0;else{const Ze=mt-Bt+1;Ee===0?Ne<=Ze?we=Ne:we=Ze:we=Math.min(Ze,Ye),Ye-=we}if(we>0){const Ze=we*Be+ot;Me+=Ze,Je.push({range:`${Bt} - ${mt===1/0?"":mt}`,units:we,unitPrice:Be,fixedAmount:ot,rangeAmount:Ze,calculation:`${we}  ${Be} + ${ot} = ${Ze.toFixed(2)}`})}}return console.log("=== FINAL CALCULATION ==="),console.log("Total amount:",Me.toFixed(2)),{totalAmount:Me,details:Je}},Ve=(Ne,We,Ye)=>{ce({used_units:Ne,total_amount:We,calculated_at:new Date().toISOString()}),de(Ye)},te=async()=>{if(!$){re.error("Please calculate the bill first");return}const Ne=g?.houseId||g?.hse,We=w?.apartment_id,Ye=w?.floor_id;if(console.log(" DEBUG - Extracted IDs:",{houseId:Ne,apartmentId:We,floorId:Ye,source:C,scannedData:g,houseDetails:w}),!Ne||!We||!Ye){re.error("House information is missing. Please go back and try again."),console.error(" Missing data:",{houseId:Ne,apartmentId:We,floorId:Ye,source:C,scannedData:g,houseDetails:w});return}try{V(!0);const Me={house_id:Ne,apartment_id:We,floor_id:Ye,bill_id:j,year:parseInt(q.year),month:le(parseInt(q.month)),previous_reading:parseFloat(q.previous_reading)||0,current_reading:parseFloat(q.current_reading)||0,used_units:parseFloat(q.used_units)||$.used_units,totalAmount:parseFloat(q.total_amount)||$.total_amount,due_date:Q||null,source:C};console.log(" Generating bill with payload:",Me);const Je=await me.post("/generate-measurable-bills/from-calculation",Me);console.log("API Response:",Je.data),Je.data.success?(re.success("Bill generated successfully!"),Y({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:q.current_reading,current_reading:"",used_units:"",total_amount:""}),ce(null),de([]),setTimeout(()=>{c(`/house-bill-meter/${n}`)},2e3)):re.error(Je.data.message||"Failed to generate bill")}catch(Me){console.error("Error generating bill:",Me);let Je="Failed to generate bill";Me.response?.data?.message?Je=Me.response.data.message:Me.message&&(Je=Me.message),re.error(Je)}finally{V(!1)}},Ie=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],$e=new Date().getFullYear(),rt=[$e-1,$e,$e+1];N.useEffect(()=>{if(q.used_units&&parseFloat(q.used_units)>0&&M.length>0&&D.length>0){const Ne=parseFloat(q.used_units),{totalAmount:We,details:Ye}=oe(Ne);Y(Me=>({...Me,total_amount:We.toFixed(2)})),Ve(Ne,We,Ye)}},[M,D]),N.useEffect(()=>{R&&D.length>0&&Le()},[R,D]),N.useEffect(()=>{K(),ye(),W.current=q.month,se.current=q.year},[j,g]),N.useEffect(()=>{j&&q.month&&q.year&&M.length>0&&xe()},[j,q.month,q.year,M.length]);const Ke=le(q.month);return{houseId:w?.house_id||g?.houseId,apartment:w?.apartment?.name||"N/A",floor:w?.floor?.floor_id||"N/A",houseDatabaseId:w?.id},e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[e.jsx(ua,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(ka,{}),e.jsx("main",{className:"flex-1 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("button",{onClick:()=>c(`/house-bill-meter/${n}`),className:"mb-2 md:mb-3 flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Scanner"]}),e.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:["Calculate Bill: ",m?.bill_name||"Measurable Bill"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:C==="qr"?"QR Scanned House":"Manually Entered House"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${C==="qr"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:C==="qr"?" QR Scan":" Manual Entry"}),e.jsxs("button",{onClick:()=>{K(),xe(),ye(),re.info("Refreshing data...")},className:"px-3 py-2 md:px-4 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 md:p-6",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Month"}),e.jsx("select",{name:"month",value:q.month,onChange:Re,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:!0,children:Ie.map(Ne=>e.jsx("option",{value:Ne.value,children:Ne.label},Ne.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Year"}),e.jsx("select",{name:"year",value:q.year,onChange:Re,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:!0,children:rt.map(Ne=>e.jsx("option",{value:Ne,children:Ne},Ne))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:Q,onChange:Ne=>F(Ne.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Previous Reading (units)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"previous_reading",value:q.previous_reading,onChange:Re,placeholder:"Previous reading",min:"0",step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:!0,readOnly:!0}),ne&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-b-2 border-blue-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Auto-loaded from last bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Current Reading (units)"}),e.jsx("input",{type:"number",name:"current_reading",value:q.current_reading,onChange:Re,placeholder:"Enter current reading",min:q.previous_reading,step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Enter meter reading for ",Ke," ",q.year]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Used Units (auto-calculated)"}),e.jsx("input",{type:"number",name:"used_units",value:q.used_units,readOnly:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Current reading - Previous reading"})]}),q.total_amount&&e.jsx("div",{className:"p-3 md:p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm md:text-base",children:"Total Amount:"}),e.jsxs("span",{className:"text-xl md:text-2xl font-bold text-green-600 dark:text-green-400",children:["Rs. ",parseFloat(q.total_amount).toFixed(2)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>c(`/measurable-bills/${n}`),className:"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Back to Scanner"]}),e.jsx("button",{type:"button",onClick:te,disabled:!$||z,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm md:text-base",children:z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generate Bill"]})})]})]})})})})]})})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function Yj(){const[n,c]=N.useState([]),[d,h]=N.useState(!0),[g,m]=N.useState(""),[w,j]=N.useState(!1),[C,b]=N.useState(!1),{auth:S}=N.useContext(Ma),E=Gt(),_=async()=>{try{h(!0);const L=await me.get(`/user-bills/users/${S.user.id}/bills`);L.data.success?c(L.data.data||[]):(re.error("Failed to load bills"),c([]))}catch(L){console.error("Error fetching bills:",L),re.error("Error loading your bills"),c([])}finally{h(!1)}};N.useEffect(()=>{S?.user?.id&&_()},[S?.user?.id]);const M=n.filter(L=>L.bill_name?.toLowerCase().includes(g.toLowerCase())||L.billtype?.toLowerCase().includes(g.toLowerCase())),I=L=>{try{return new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},D=L=>({measurable:{class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:e.jsx(pd,{size:12,className:"inline mr-1"})}})[L?.toLowerCase()]||{class:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:e.jsx(qt,{size:12,className:"inline mr-1"})},G={totalBills:n.length,measurableBills:n.filter(L=>L.billtype?.toLowerCase()==="measurable").length},R=L=>{E(`/house-bill-meter/${L}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(ua,{onCollapse:j})}),C&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>b(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${C?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(ua,{onCollapse:j})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${w?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Va,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all bills assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:G.totalBills})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Va,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all bills assigned to you"})]})]}),e.jsx("div",{className:"flex space-x-6 text-right",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:G.totalBills})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Or,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search bills by name, type, or description...",value:g,onChange:L=>m(L.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(At,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading bills..."})]}):M.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Va,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:g?"No matching bills found":"No bills assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:g?"Try adjusting your search terms":"You have not been assigned to any bills yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:M.map(L=>{const O=D(L.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Va,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:L.bill_name}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O.class}`,children:[O.icon,L.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[L.is_metered&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(pd,{size:12,className:"inline mr-1"}),"Metered Bill"]})}),e.jsx("div",{className:"ml-auto flex gap-6",children:e.jsx("button",{onClick:()=>R(L.id),className:"items-center gap-6 px-4 py-2 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(jm,{size:16})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",I(L.assigned_at)]})})]},L.id)})}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(L=>{const O=D(L.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Va,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:L.bill_name}),e.jsx("div",{className:"flex space-x-2 mt-2",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O.class}`,children:[O.icon,L.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[L.is_metered&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"px-3 py-1 text-sm bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(pd,{size:14,className:"inline mr-2"}),"Metered Bill"]})}),e.jsx("div",{className:"flex ml-auto gap-3",children:e.jsx("button",{onClick:()=>R(L.id),className:"items-center gap-3 px-4 py-1 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(jm,{size:18})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",I(L.assigned_at)]})})]},L.id)})})]})}),M.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(Or,{size:20})})})]})})]}),e.jsx(Yt,{position:"top-right",autoClose:3e3})]})}function Xj(){const[n,c]=N.useState(!1),[d,h]=N.useState(!1),[g,m]=N.useState("manual"),w=Gt(),{bill_id:j}=ys(),C=()=>{w("/my-bills")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(ua,{onCollapse:c})}),d&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>h(!1)}),e.jsx("div",{className:`
                lg:hidden fixed left-0 top-0 h-full z-50
                transform transition-transform duration-300 ease-in-out
                ${d?"translate-x-0":"-translate-x-full"}
            `,children:e.jsx(ua,{onCollapse:c})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:C,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Hs,{size:16})}),e.jsx(Va,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Bill Meter"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:C,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Hs,{size:16})}),e.jsx(Va,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsx("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 lg:mb-6 px-1 lg:px-0"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(B1,{})})]})})]}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function $j(){const[n,c]=N.useState([]),[d,h]=N.useState([]),[g,m]=N.useState(0),[w,j]=N.useState(0),[C,b]=N.useState(!1),[S,E]=N.useState({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),[_,M]=N.useState([]),[I,D]=N.useState([]),[G,R]=N.useState([]),[L,O]=N.useState(null),[P,Q]=N.useState(!1),[F,q]=N.useState(!1),[Y,$]=N.useState(!1),[ce,he]=N.useState(null),[de,ne]=N.useState(!1),[J,z]=N.useState(!1),[V,W]=N.useState(!1),[se,le]=N.useState(!1),[K,xe]=N.useState(0),[Le,ye]=N.useState(""),ie=["","January","February","March","April","May","June","July","August","September","October","November","December"],Re=new Date().getFullYear();Array.from({length:10},(we,Ze)=>(Re-5+Ze).toString());const oe=[{value:"Pending",label:"Pending Only",color:"bg-yellow-500"},{value:"Partial",label:"Partial Only",color:"bg-blue-500"},{value:"Pending,Partial",label:"Both Pending & Partial",color:"bg-gradient-to-r from-yellow-500 to-blue-500"}];N.useEffect(()=>{Ve()},[]);const Ve=async()=>{try{Q(!0);const we=await me.get("/apartments");we.data.success?M(we.data.data||[]):M([])}catch(we){console.error("Error loading apartments:",we),re.error("Failed to load apartments"),M([])}finally{Q(!1)}};N.useEffect(()=>{S.apartment_id?te(S.apartment_id):(D([]),R([]),E(we=>({...we,floor_id:"",house_id:""})))},[S.apartment_id]),N.useEffect(()=>{S.floor_id&&S.apartment_id?Ie(S.floor_id):(R([]),E(we=>({...we,house_id:""})))},[S.floor_id,S.apartment_id]);const te=async we=>{try{q(!0);const Ze=await me.get(`/floors?apartment_id=${we}`);Ze.data.success?D(Ze.data.data||[]):D([])}catch(Ze){console.error("Error loading floors:",Ze),re.error("Failed to load floors"),D([])}finally{q(!1)}},Ie=async we=>{try{$(!0);const Ze=await me.get(`/houses?floor_id=${we}&apartment_id=${S.apartment_id}`);Ze.data.success?R(Ze.data.data||[]):R([])}catch(Ze){console.error("Error loading houses:",Ze),re.error("Failed to load houses"),R([])}finally{$(!1)}};N.useEffect(()=>{if(S.house_id){const we=setTimeout(()=>{$e(S.house_id)},100);return()=>clearTimeout(we)}},[S.house_id,S.year,S.month,S.payment_status]);const $e=async we=>{if(!(!we||!S.apartment_id||!S.floor_id||!S.year))try{b(!0);const Ze=G.find(ht=>ht.id===we),Et=_.find(ht=>ht.id===S.apartment_id),xt=I.find(ht=>ht.id===S.floor_id);Ze&&Et&&xt&&O({houseNumber:Ze.house_id,apartmentName:Et.name,floorNumber:xt.floor_id,houseId:Ze.id});const Zt=S.payment_status.split(",");let Mt=[];for(const ht of Zt){const Pt=new URLSearchParams({house_id:we,apartment_id:S.apartment_id,floor_id:S.floor_id,year:S.year,payment_status:ht.trim()});S.month&&Pt.append("month",S.month);const ws=await me.get(`/bill-payments?${Pt}`);ws.data.success&&(Mt=[...Mt,...ws.data.data||[]])}c(Mt),rt(Mt);const lt=Mt.filter(ht=>ht.payment_status==="Pending").reduce((ht,Pt)=>ht+(parseFloat(Pt.pendingAmount)||0),0),at=Mt.filter(ht=>ht.payment_status==="Partial").reduce((ht,Pt)=>ht+(parseFloat(Pt.pendingAmount)||0),0);m(lt),j(at),xe(0),ye("");const Qe=Mt.filter(ht=>ht.payment_status==="Pending").length,Kt=Mt.filter(ht=>ht.payment_status==="Partial").length;if(Mt.length>0){let ht=`Found ${Qe} pending and ${Kt} partial bills for House ${Ze?.house_id}`;S.month?ht+=` (${S.month} ${S.year})`:ht+=` (Year: ${S.year})`,re.success(ht)}else re.info("No bills found for the selected criteria")}catch(Ze){console.error("Error loading bills:",Ze),re.error("Failed to load bills"),c([]),h([]),m(0),j(0)}finally{b(!1)}},rt=(we=n)=>{const Ze=S.payment_status.split(","),Et=we.filter(xt=>Ze.includes(xt.payment_status));h(Et)},Ke=we=>{E(Mt=>({...Mt,payment_status:we})),rt();const Ze=we.split(","),Et=n.filter(Mt=>Ze.includes(Mt.payment_status)),xt=Et.filter(Mt=>Mt.payment_status==="Pending").reduce((Mt,lt)=>Mt+(parseFloat(lt.pendingAmount)||0),0),Zt=Et.filter(Mt=>Mt.payment_status==="Partial").reduce((Mt,lt)=>Mt+(parseFloat(lt.pendingAmount)||0),0);m(xt),j(Zt)},et=(we,Ze)=>{E(Et=>{const xt={...Et,[we]:Ze};return we==="apartment_id"?(xt.floor_id="",xt.house_id=""):we==="floor_id"&&(xt.house_id=""),xt})},Ne=()=>{E({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),M([]),D([]),R([]),c([]),h([]),m(0),j(0),O(null),xe(0),ye(""),Ve()},We=we=>{he(we),ne(!0)},Ye=()=>{z(!0)},Me=()=>{const we=((g+w)*.5).toFixed(2);xe(we),ye(new Date().toISOString().split("T")[0]),W(!0)},Je=()=>{ne(!1),z(!1),W(!1),he(null)},Ee=we=>{const Ze=n.map(Zt=>Zt.id===we.id?we:Zt);c(Ze),rt(Ze);const Et=Ze.filter(Zt=>Zt.payment_status==="Pending").reduce((Zt,Mt)=>Zt+(parseFloat(Mt.pendingAmount)||0),0),xt=Ze.filter(Zt=>Zt.payment_status==="Partial").reduce((Zt,Mt)=>Zt+(parseFloat(Mt.pendingAmount)||0),0);m(Et),j(xt),Je(),we.payment_status==="Paid"&&re.success("Payment completed successfully!")},be=we=>{const Ze=typeof we=="string"?parseFloat(we):we;return isNaN(Ze)?"0.00":Ze.toFixed(2)},Pe=async()=>{try{b(!0);const we=d.map(Et=>me.patch(`/bill-payments/${Et.id}/status`,{payment_status:"Paid",paidAmount:parseFloat(Et.paidAmount)+parseFloat(Et.pendingAmount),pendingAmount:0,paid_at:new Date().toISOString()}));await Promise.all(we);const Ze=g+w;re.success(`Successfully paid ${d.length} bills totaling $${Ze.toFixed(2)}`),await $e(S.house_id),z(!1)}catch(we){console.error("Error processing total payment:",we),re.error("Failed to process total payment")}finally{b(!1)}},Bt=async()=>{try{b(!0);const we=g+w,Ze=parseFloat(K);if(Ze<=0){re.error("Payment amount must be greater than 0");return}if(Ze>we){re.error(`Payment amount cannot exceed total amount of $${be(we)}`);return}const xt=d.map(Zt=>{const lt=(parseFloat(Zt.pendingAmount)||0)/we,at=Ze*lt;return{...Zt,additionalPayment:at}}).map(Zt=>{const Mt=parseFloat(Zt.paidAmount)+Zt.additionalPayment,lt=parseFloat(Zt.pendingAmount)-Zt.additionalPayment;let at="Partial";return lt<=.01?at="Paid":Mt>0&&(at="Partial"),me.patch(`/bill-payments/${Zt.id}/status`,{payment_status:at,paidAmount:Mt,paid_at:Le||new Date().toISOString().split("T")[0]})});await Promise.all(xt),re.success(`Successfully paid $${be(Ze)} across ${d.length} bills`),await $e(S.house_id),W(!1)}catch(we){console.error("Error processing partial payment:",we),re.error("Failed to process partial payment")}finally{b(!1)}},mt=we=>{switch(we){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},Be=we=>{switch(we){case"Paid":return e.jsx(Nr,{size:16,className:"text-green-600"});case"Partial":return e.jsx(ns,{size:16,className:"text-blue-600"});case"Pending":return e.jsx(ns,{size:16,className:"text-yellow-600"});default:return null}},ot=g+w;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:le}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${se?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Va,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Settlement"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Filter and pay pending & partial bills"})]})]}),e.jsx("button",{onClick:Ne,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Filter Bills"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",value:S.year,onChange:we=>et("year",we.target.value),min:"2000",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month (Optional)"}),e.jsxs("select",{value:S.month,onChange:we=>et("month",we.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months / Last Due"}),ie.slice(1).map(we=>e.jsx("option",{value:we,children:we},we))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to see all bills for the year"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment *"}),e.jsxs("select",{value:S.apartment_id,onChange:we=>et("apartment_id",we.target.value),disabled:P,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Apartment"}),_.map(we=>e.jsx("option",{value:we.id,children:we.name},we.id))]}),P&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Floor *"}),e.jsxs("select",{value:S.floor_id,onChange:we=>et("floor_id",we.target.value),disabled:!S.apartment_id||F,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Floor"}),I.map(we=>e.jsxs("option",{value:we.id,children:["Floor ",we.floor_id]},we.id))]}),F&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading floors..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House *"}),e.jsxs("select",{value:S.house_id,onChange:we=>et("house_id",we.target.value),disabled:!S.floor_id||Y,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select House"}),G.map(we=>e.jsxs("option",{value:we.id,children:["House ",we.house_id]},we.id))]}),Y&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading houses..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:oe.map(we=>e.jsxs("button",{type:"button",onClick:()=>Ke(we.value),className:`px-3 py-1 text-sm rounded-lg border ${S.payment_status===we.value?"border-purple-600 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"} hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-1`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${we.color}`}),we.label]},we.value))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>S.house_id&&$e(S.house_id),disabled:!S.house_id||!S.year||!S.apartment_id||!S.floor_id,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(_h,{size:16}),"Load Bills"]})})]}),L&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(xa,{className:"mr-2 text-purple-600",size:24}),"Bills for House ",L.houseNumber]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[L.apartmentName,"  Floor ",L.floorNumber,S.month?`  ${S.month} ${S.year}`:`  Year: ${S.year}`]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing: ",S.payment_status==="Pending,Partial"?"Pending & Partial Bills":S.payment_status==="Pending"?"Pending Bills Only":"Partial Bills Only"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),e.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Pending Bills"})]}),e.jsxs("div",{className:"text-yellow-800 dark:text-yellow-300 font-bold text-2xl",children:["$",be(g)]}),e.jsxs("div",{className:"text-yellow-600 dark:text-yellow-400 text-sm",children:[n.filter(we=>we.payment_status==="Pending").length," bills"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Partial Bills"})]}),e.jsxs("div",{className:"text-blue-800 dark:text-blue-300 font-bold text-2xl",children:["$",be(w)]}),e.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-sm",children:[n.filter(we=>we.payment_status==="Partial").length," bills"]})]})]}),C?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Nr,{size:48,className:"mx-auto text-green-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Bills Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No bills found for the selected criteria."}),e.jsx("button",{onClick:()=>Ke("Pending,Partial"),className:"mt-4 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Show All Bills"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:Me,disabled:d.length===0||ot<=0,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx($r,{size:18}),"Pay Partial Amount"]}),e.jsxs("button",{onClick:Ye,disabled:d.length===0,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx($r,{size:18}),"Pay All in Full"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Month/Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Paid Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Pending Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(we=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 w-fit ${mt(we.payment_status)}`,children:[Be(we.payment_status),we.payment_status]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:we.bill_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded",children:we.billtype})}),e.jsxs("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:[we.month," ",we.year]}),e.jsxs("td",{className:"px-4 py-3 text-green-600 dark:text-green-400",children:["$",be(we.paidAmount)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",be(we.pendingAmount)]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>We(we),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300 p-2 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/30",title:"Update Payment",children:e.jsx($r,{size:18})})})})]},we.id))})]})})]})]})]})})]}),de&&e.jsx(E1,{payment:ce,onClose:Je,onUpdate:Ee}),J&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded-lg mr-3",children:e.jsx($r,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay All Bills in Full"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are about to fully pay all ",d.length," selected bills for House ",L?.houseNumber,"."]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[d.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pending Amount:"}),e.jsxs("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:["$",be(g)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Partial Amount:"}),e.jsxs("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:["$",be(w)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[L?.apartmentName," - House ",L?.houseNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:S.month?`${S.month} ${S.year}`:`Year: ${S.year}`})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:["$",be(ot)]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>z(!1),disabled:C,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Pe,disabled:C,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${be(ot)}`})]})]})})}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg mr-3",children:e.jsx($r,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay Partial Amount"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Enter the amount you want to pay across all ",d.length," bills for House ",L?.houseNumber,". The amount will be distributed proportionally among all bills."]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Bill Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[d.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount Due:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",be(ot)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[L?.apartmentName," - House ",L?.houseNumber]})]})]})]}),e.jsxs("form",{onSubmit:we=>{we.preventDefault(),Bt()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx($r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:ot,value:K,onChange:we=>xe(we.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 text-gray-600 dark:text-gray-400",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",be(ot)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["Remaining: $",be(ot-parseFloat(K||0))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Dl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:Le,onChange:we=>ye(we.target.value),className:"w-full pl-10 pr-4 py-3 border text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700",required:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-300 mb-2",children:"Payment Preview"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount to Pay:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",be(K)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining After Payment:"}),e.jsxs("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:["$",be(ot-parseFloat(K||0))]})]}),parseFloat(K||0)>0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 pt-2 border-t",children:["Amount will be distributed proportionally across ",d.length," bills"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>W(!1),disabled:C,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:C||!K||parseFloat(K)<=0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${be(K)}`})]})]})]})})}),e.jsx(Yt,{position:"top-center",autoClose:3e3})]})}function Zj(){const[n,c]=N.useState(""),[d,h]=N.useState(""),[g,m]=N.useState(!1),[w,j]=N.useState(""),C=Gt(),b=async S=>{S.preventDefault(),m(!0),j("");try{const E=await me.post("/houseowner-auth/login",{email:n,password:d});E.data.success&&(localStorage.setItem("houseOwnerToken",E.data.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(E.data.owner)),C("/houseowner/dashboard"))}catch(E){j(E.response?.data?.message||"Login failed")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-md w-full p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"House Owner Login"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Access your apartment management portal"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[w&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:w}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:n,onChange:S=>c(S.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:d,onChange:S=>h(S.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsx("div",{className:"text-right",children:e.jsx(Sl,{to:"/houseowner/forgot-password",className:"text-sm text-purple-600 hover:text-purple-800 dark:text-purple-400",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Logging in..."]}):"Login"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Don't have an account? Contact your apartment administrator."})})]})})}function el({onCollapse:n}){const[c,d]=N.useState(!0),[h,g]=N.useState(!1),[m,w]=N.useState(null),j=[{title:"Dashboard",icon:e.jsx(hN,{size:20}),path:"/houseowner/dashboard",exact:!0},{title:"My House",icon:e.jsx(xa,{size:20}),path:"/houseowner/houseowner-houseview",exact:!1},{title:"My Bills",icon:e.jsx(Va,{size:20}),path:"/houseowner/houseowner-billview",exact:!1},{title:"Complaints",icon:e.jsx(Va,{size:20}),path:"/houseowner/complaints",exact:!1},{title:"Profile",icon:e.jsx(Cr,{size:20}),path:"/houseowner/profile",exact:!1,subItems:[{title:"Personal Info",path:"/houseowner/profile/personal"},{title:"Documents",path:"/houseowner/profile/documents"},{title:"Change Password",path:"/houseowner/profile/change-password"}]}],C=_=>{w(m===_?null:_)},b=({item:_})=>{const M=_.exact?location.pathname===_.path:location.pathname.startsWith(_.path);return e.jsx("div",{className:"mb-1",children:_.subItems?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>C(_.title),className:`flex items-center justify-between w-full p-3 rounded-lg transition-colors ${M?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[_.icon,e.jsx("span",{className:"font-medium",children:_.title})]}),m===_.title?e.jsx(Ei,{size:16}):e.jsx(Si,{size:16})]}),m===_.title&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:_.subItems.map((I,D)=>e.jsx(yh,{to:I.path,className:({isActive:G})=>`block p-2 rounded-lg transition-colors ${G?"bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,onClick:()=>g(!1),children:e.jsx("span",{className:"text-sm",children:I.title})},D))})]}):e.jsxs(yh,{to:_.path,className:({isActive:I})=>`flex items-center gap-3 p-3 rounded-lg transition-colors ${I?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,onClick:()=>g(!1),children:[_.icon,e.jsx("span",{className:"font-medium",children:_.title})]})})},S=()=>e.jsx("button",{onClick:()=>g(!h),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white text-gray-800 dark:bg-gray-800  dark:text-gray-300 rounded-lg shadow-lg",children:h?e.jsx($t,{size:24}):e.jsx($h,{size:24})}),E=()=>e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6 border-b dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:e.jsx(xa,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"AptSync"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"House Owner Portal"})]})]})}),e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:j.map((_,M)=>e.jsx(b,{item:_},M))})})]});return e.jsxs(e.Fragment,{children:[e.jsx(S,{}),h&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>g(!1)}),e.jsx("aside",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-xl z-40 transform transition-transform duration-300 ${h?"translate-x-0":"-translate-x-full"}`,children:e.jsx(E,{})}),e.jsx("aside",{className:`hidden lg:flex flex-col w-64 bg-white dark:bg-gray-900 border-r dark:border-gray-800 transition-all duration-300 fixed left-0 top-0 h-full z-30 ${c?"translate-x-0":"-translate-x-full"}`,children:e.jsx(E,{})})]})}function tl(){const[n,c]=N.useState(!1),{auth:d,logout:h,resetActivityTimer:g}=N.useContext(Ma),m=Gt(),[w,j]=N.useState(!1);N.useEffect(()=>{const _=localStorage.getItem("theme"),M=window.matchMedia("(prefers-color-scheme: dark)").matches;_==="dark"||!_&&M?(c(!0),document.documentElement.classList.add("dark")):(c(!1),document.documentElement.classList.remove("dark"))},[]),N.useEffect(()=>{if(!d.accessToken)return;const _=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],M=()=>g();_.forEach(D=>window.addEventListener(D,M,{passive:!0}));const I=()=>{document.hidden||g()};return document.addEventListener("visibilitychange",I),()=>{_.forEach(D=>window.removeEventListener(D,M)),document.removeEventListener("visibilitychange",I)}},[d.accessToken,g]);const C=async()=>{try{await me.post("/auth/logout"),h(),re.success("Logged out successfully"),m("/")}catch(_){console.error("Logout error:",_),h(),re.success("Logged out successfully"),m("/")}finally{j(!1)}},b=()=>{j(!0)},S=()=>{j(!1)},E=()=>{const _=!n;c(_),_?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"px-4 sm:px-6",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx("button",{onClick:E,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:n?"Switch to light mode":"Switch to dark mode",children:n?e.jsx(Mh,{size:20}):e.jsx(Eh,{size:20})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:d?.user?.name?.charAt(0)?.toUpperCase()||"H"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 truncate max-w-[120px]",children:d?.user?.name||"House Owner"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[120px]",children:d?.user?.email||"user@example.com"})]})]}),e.jsx("div",{className:"md:hidden flex items-center",children:e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:d?.user?.name?.charAt(0)?.toUpperCase()||"H"})})}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:b,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Ah,{size:20})})})]})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm mx-4 relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out from the House Owner Portal?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:S,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:C,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function Qj(){const[n,c]=N.useState(!1),[d,h]=N.useState(!0),[g,m]=N.useState(""),[w,j]=N.useState({total:0,pending:0,resolved:0}),[C,b]=N.useState([]),[S,E]=N.useState([]),[_,M]=N.useState(!1),{auth:I}=N.useContext(Ma);N.useEffect(()=>{const F=()=>{M(window.innerWidth<1024)};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),N.useEffect(()=>{D()},[I.accessToken]);const D=async()=>{try{h(!0),m(""),await G(),await R(),E([{id:1,message:"Maintenance scheduled for tomorrow",time:"2 hours ago",type:"info"},{id:2,message:"New community notice posted",time:"1 day ago",type:"info"}])}catch(F){console.error("Failed to fetch dashboard data:",F),m("Failed to load dashboard data")}finally{h(!1)}},G=async()=>{try{if(I.accessToken){const F=await me.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${I.accessToken}`}});if(F.data.success)if(F.data.statistics)j({total:F.data.statistics.total||0,pending:F.data.statistics.pending||0,resolved:F.data.statistics.resolved||0});else{const q=F.data.data||[],Y=q.length,$=q.filter(he=>he.status==="Pending").length,ce=q.filter(he=>he.status==="Resolved"||he.status==="Closed").length;j({total:Y,pending:$,resolved:ce})}}}catch(F){console.error("Failed to fetch complaint stats:",F)}},R=async()=>{try{if(I.accessToken){const F=await me.get("/complaints/recent",{headers:{Authorization:`Bearer ${I.accessToken}`}});F.data.success&&b(F.data.data||[])}}catch(F){console.error("Failed to fetch recent complaints:",F)}},L=F=>{switch(F){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},O=F=>new Date(F).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),P=()=>{window.location.href="/complaints"},Q=()=>{window.location.href="/complaints"};return d?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(el,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?_?"ml-0":"ml-20":_?"ml-0":"ml-64"}`,children:[e.jsx(tl,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading Dashboard..."})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(el,{onCollapse:c}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${n?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(tl,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(xa,{size:_?32:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:`${_?"text-xl":"text-2xl"} font-bold text-gray-800 dark:text-white`,children:"House Owner Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",I.user?.name||"House Owner","!"]})]})]}),e.jsxs("button",{onClick:Q,className:"hidden md:flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"New Complaint"})]})]}),g&&e.jsx("div",{className:"mb-4 md:mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(vr,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:g}),e.jsx("button",{onClick:D,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Retry"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Total Complaints"}),e.jsx("div",{className:"p-2 md:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(qt,{size:_?18:24,className:"text-purple-600 dark:text-purple-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${_?"text-2xl":"text-3xl"} font-bold text-purple-600 dark:text-purple-400`,children:w.total}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"All time complaints"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Pending"}),e.jsx("div",{className:"p-2 md:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(ns,{size:_?18:24,className:"text-yellow-600 dark:text-yellow-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${_?"text-2xl":"text-3xl"} font-bold text-yellow-600 dark:text-yellow-400`,children:w.pending}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Awaiting resolution"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Resolved"}),e.jsx("div",{className:"p-2 md:p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Nr,{size:_?18:24,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${_?"text-2xl":"text-3xl"} font-bold text-green-600 dark:text-green-400`,children:w.resolved}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Issues fixed"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Notifications"}),e.jsx("div",{className:"p-2 md:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(md,{size:_?18:24,className:"text-blue-600 dark:text-blue-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${_?"text-2xl":"text-3xl"} font-bold text-purple-600 dark:text-purple-400`,children:S.length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Unread notifications"})]})]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("button",{onClick:Q,className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-purple-400 dark:hover:border-purple-500",children:[e.jsx(qa,{className:"mx-auto text-purple-600 dark:text-purple-400 mb-2",size:_?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"New Complaint"})]}),e.jsxs("button",{onClick:P,className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500",children:[e.jsx(qt,{className:"mx-auto text-blue-600 dark:text-blue-400 mb-2",size:_?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"View Complaints"})]}),e.jsxs("button",{onClick:()=>window.location.href="/profile",className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-green-400 dark:hover:border-green-500",children:[e.jsx(Cr,{className:"mx-auto text-green-600 dark:text-green-400 mb-2",size:_?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"Profile"})]}),e.jsxs("button",{onClick:()=>window.location.href="/settings",className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-orange-400 dark:hover:border-orange-500",children:[e.jsx(Dl,{className:"mx-auto text-orange-600 dark:text-orange-400 mb-2",size:_?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"Settings"})]})]})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200 mb-6 md:mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Complaints"}),e.jsxs("button",{onClick:P,className:"flex items-center text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:["View all ",e.jsx(Ai,{size:16,className:"ml-1"})]})]}),C.length>0?e.jsx("div",{className:"space-y-3",children:C.map(F=>e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:F.complaint_number}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${L(F.status)}`,children:F.status})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1 truncate",children:F.title}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Filed on ",O(F.created_at)]})]}),e.jsx(Ai,{className:"text-gray-400 ml-2 flex-shrink-0",size:16})]})},F.id))}):e.jsxs("div",{className:"text-center py-6 md:py-8",children:[e.jsx(qt,{size:_?36:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-3 md:mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No complaints yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1 mb-4",children:"Start by filing your first complaint"}),e.jsx("button",{onClick:Q,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"File Your First Complaint"})]})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200 mb-6 md:mb-8",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Complaints Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-purple-50 to-white dark:from-purple-900/20 dark:to-gray-800 border border-purple-100 dark:border-purple-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-purple-100 dark:bg-purple-900/40 rounded-full mb-3",children:e.jsx(qt,{size:24,className:"text-purple-600 dark:text-purple-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:w.total}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Complaints"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-yellow-50 to-white dark:from-yellow-900/20 dark:to-gray-800 border border-yellow-100 dark:border-yellow-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-yellow-100 dark:bg-yellow-900/40 rounded-full mb-3",children:e.jsx(ns,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:w.pending}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-white dark:from-green-900/20 dark:to-gray-800 border border-green-100 dark:border-green-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-green-100 dark:bg-green-900/40 rounded-full mb-3",children:e.jsx(Nr,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:w.resolved}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Resolved"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{onClick:Q,className:"inline-flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx(qa,{size:18}),"File New Complaint"]})})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Notifications"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View all"})]}),S.length>0?e.jsx("div",{className:"space-y-3",children:S.map(F=>e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`p-2 rounded-full mr-3 flex-shrink-0 ${F.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:F.type==="warning"?e.jsx(vr,{size:_?14:16,className:"text-yellow-600 dark:text-yellow-400"}):e.jsx(md,{size:_?14:16,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",children:F.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:F.time})]})]})},F.id))}):e.jsxs("div",{className:"text-center py-6 md:py-8",children:[e.jsx(md,{size:_?36:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-3 md:mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Notifications will appear here"})]})]}),_&&e.jsx("div",{className:"h-16"})]})})]})]})}function Wj(){const[n]=qo(),c=Gt(),[d,h]=N.useState(!0),[g,m]=N.useState(""),[w,j]=N.useState(""),[C,b]=N.useState(!1),[S,E]=N.useState(""),[_,M]=N.useState(""),[I,D]=N.useState(""),[G,R]=N.useState(""),[L,O]=N.useState("");N.useEffect(()=>{const Y=n.get("token"),$=n.get("id");Y&&$?(R(Y),D($),P(Y,$)):(j("Invalid verification link"),h(!1))},[]);const P=async(Y,$)=>{try{const ce=await me.post("/houseowner-auth/verify",{token:Y,id:$});ce.data.success&&(m(ce.data.message),ce.data.requires_password?b(!0):setTimeout(()=>{c("/login")},2e3))}catch(ce){j(ce.response?.data?.message||"Verification failed")}finally{h(!1)}},Q=async()=>{if(O(""),S.length<6){O("Password must be at least 6 characters");return}if(S!==_){O("Passwords do not match");return}const Y=/[A-Z]/.test(S),$=/[a-z]/.test(S),ce=/\d/.test(S),he=/[!@#$%^&*(),.?":{}|<>]/.test(S);if(!Y||!$||!ce||!he){O("Password must contain uppercase, lowercase, numbers, and special characters");return}try{h(!0);const de=await me.post("/houseowner-auth/setup-password",{token:G,id:I,password:S});de.data.success&&(m(de.data.message),b(!1),setTimeout(()=>{c("/login")},3e3))}catch(de){O(de.response?.data?.message||"Failed to set password")}finally{h(!1)}},F=Y=>{E(Y.target.value),L&&O("")},q=Y=>{M(Y.target.value),L&&O("")};return d&&!C?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying your email..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsx("div",{className:"max-w-md w-full p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:w?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:w}),e.jsx("button",{onClick:()=>c("/"),className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Homepage"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:C?"Set Your Password":"Email Verified Successfully!"}),g&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:g}),C?e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"password",placeholder:"Enter password",value:S,onChange:F,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"Must be at least 6 characters with uppercase, lowercase, numbers, and special characters"})]}),e.jsx("div",{children:e.jsx("input",{type:"password",placeholder:"Confirm password",value:_,onChange:q,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),L&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:L})}),e.jsx("button",{onClick:Q,disabled:d,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Setting Password..."]}):"Set Password"})]})}):e.jsx("button",{onClick:()=>c("/login"),className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Login"})]})})})}function Kj(){const[n,c]=N.useState({}),[d,h]=N.useState({}),[g,m]=N.useState([]),[w,j]=N.useState(null),[C,b]=N.useState(null),[S,E]=N.useState([]),[_,M]=N.useState(!0),[I,D]=N.useState(null),[G,R]=N.useState(!1),{auth:L}=N.useContext(Ma),O=async()=>{try{if(M(!0),D(null),L.accessToken){console.log("Fetching houses with all details...");const Y=await me.get("/houses/owner/me",{headers:{Authorization:`Bearer ${L.accessToken}`,"Content-Type":"application/json"}});if(console.log("API Response with details:",Y.data),Y.data.success){const $=Y.data.data||[];m($);const ce={},he={},de={};$.forEach(ne=>{ne.apartment_id&&(ce[ne.apartment_id]={id:ne.apartment_id,name:ne.apartment_name,address:ne.apartment_address,city:ne.apartment_city}),ne.floor_id&&(he[ne.floor_id]={id:ne.floor_id,floor_id:ne.floor_id,floor_number:ne.floor_number}),ne.housetype_id&&(de[ne.housetype_id]={id:ne.housetype_id,name:ne.house_type_name,sqrfeet:ne.house_type_sqrfeet,rooms:ne.house_type_rooms,bathrooms:ne.house_type_bathrooms})}),c(ce),h(he),E(Object.values(de)),$.length>0?j($[0]):j(null)}else D(Y.data.message||"Failed to fetch houses")}else D("No authentication token found. Please log in.")}catch(Y){console.error("Failed to fetch house data:",Y),Y.response?(console.error("Error response:",Y.response.data),console.error("Error status:",Y.response.status),Y.response.status===401?D("Session expired. Please log in again."):Y.response.status===403?D("Access denied. You are not authorized as a house owner."):Y.response.status===404?D("No houses found for your account."):D(Y.response.data?.message||"Failed to load house data")):Y.request?D("Network error. Please check your internet connection."):D("An unexpected error occurred.")}finally{M(!1)}};N.useEffect(()=>{O()},[L.accessToken]);const P=Y=>{if(!Y)return"N/A";const $=S.find(he=>he.id===Y);return $?$.name:g.find(he=>he.housetype_id===Y)?.house_type_name||"N/A"},Q=Y=>{if(!Y)return"N/A";const $=n[Y];return $?$.name:g.find(he=>he.apartment_id===Y)?.apartment_name||"N/A"},F=Y=>{if(!Y)return"N/A";const $=d[Y];return $&&$.floor_number?$.floor_number:g.find(he=>he.floor_id===Y)?.floor_number||"N/A"},q=Y=>{j(Y)};return _?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(el,{onCollapse:R}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${G?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(tl,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your house details..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(el,{onCollapse:R}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${G?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(tl,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6",children:[e.jsx(xa,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Houses"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your properties"})]})]}),I&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(vr,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:I})]})}),g.length>1&&e.jsxs("div",{className:"mb-4 md:mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-3",children:"Select a House"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((Y,$)=>e.jsxs("button",{onClick:()=>q(Y),className:`px-3 py-1.5 md:px-4 md:py-2 text-sm md:text-base rounded-lg transition-colors ${w?.id===Y.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",$+1,": ",Y.house_id]},Y.id))})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 md:mb-6 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"House Information"}),e.jsx("span",{className:`px-2 py-1 md:px-3 md:py-1 rounded-full text-xs md:text-sm font-medium ${w.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":w.status==="available"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:w.status?.charAt(0).toUpperCase()+w.status?.slice(1)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Number"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(xa,{className:"text-purple-600 dark:text-purple-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:w.house_id||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Type"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(nr,{className:"text-blue-600 dark:text-blue-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:w.house_type_name||P(w.housetype_id)})]})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Floor"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xh,{className:"text-green-600 dark:text-green-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white",children:w.floor_number||F(w.floor_id)})]})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Apartment Complex"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment Name"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white break-words",children:w.apartment_name||Q(w.apartment_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Address"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200 break-words",children:w.apartment_address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"City"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:w.apartment_city||"N/A"})]})]}),w.house_type_name&&e.jsxs("div",{className:"mt-6 md:mt-8 pt-4 md:pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"House Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Square Feet"}),e.jsxs("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:[w.house_type_sqrfeet||"N/A"," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:w.house_type_rooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Bathrooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:w.house_type_bathrooms||"N/A"})]})]})]})]})]}),g.length===0&&!I&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(xa,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function Jj(){const[n,c]=N.useState({}),[d,h]=N.useState({}),[g,m]=N.useState([]),[w,j]=N.useState(null),[C,b]=N.useState([]),[S,E]=N.useState([]),[_,M]=N.useState([]),[I,D]=N.useState(!0),[G,R]=N.useState(!1),[L,O]=N.useState(null),[P,Q]=N.useState(!1),[F,q]=N.useState({totalBills:0,totalPaid:0,totalPending:0,totalAmount:0}),[Y,$]=N.useState({status:"all",month:"all",year:new Date().getFullYear().toString()}),{auth:ce}=N.useContext(Ma),he=async()=>{try{if(D(!0),O(null),ce.accessToken){const ie=await me.get("/houses/owner/me",{headers:{Authorization:`Bearer ${ce.accessToken}`,"Content-Type":"application/json"}});if(ie.data.success){const Re=ie.data.data||[];m(Re);const oe={},Ve={},te={};Re.forEach(Ie=>{Ie.apartment_id&&(oe[Ie.apartment_id]={id:Ie.apartment_id,name:Ie.apartment_name,address:Ie.apartment_address,city:Ie.apartment_city}),Ie.floor_id&&(Ve[Ie.floor_id]={id:Ie.floor_id,floor_id:Ie.floor_id,floor_number:Ie.floor_number}),Ie.housetype_id&&(te[Ie.housetype_id]={id:Ie.housetype_id,name:Ie.house_type_name,sqrfeet:Ie.house_type_sqrfeet,rooms:Ie.house_type_rooms,bathrooms:Ie.house_type_bathrooms})}),c(oe),h(Ve),b(Object.values(te)),Re.length>0?(j(Re[0]),de()):j(null)}else O(ie.data.message||"Failed to fetch houses")}else O("No authentication token found. Please log in.")}catch(ie){console.error("Failed to fetch house data:",ie),ie.response?.status===401?O("Session expired. Please log in again."):ie.response?.status===403?O("Access denied. Please contact administrator."):ie.response?.status===404?O("No houses found for your account."):ie.request?O("Network error. Please check your internet connection."):O("An unexpected error occurred.")}finally{D(!1)}},de=async()=>{try{R(!0),O(null),console.log(" [Frontend] Fetching bill payments..."),console.log(" [Frontend] Auth token exists:",!!ce.accessToken);const ie={};Y.status!=="all"&&(ie.payment_status=Y.status),Y.month!=="all"&&(ie.month=Y.month),Y.year!=="all"&&(ie.year=Y.year),console.log(" [Frontend] Query params:",ie);const Re=await me.get("/bill-payments/house-owner/me",{headers:{Authorization:`Bearer ${ce.accessToken}`,"Content-Type":"application/json"},params:ie});if(console.log(" [Frontend] Response received:",Re.data),Re.data.success){const oe=Re.data.data||[];console.log(` [Frontend] Found ${oe.length} bills`),E(oe),M(oe),Re.data.summary&&q(Re.data.summary),oe.length===0&&console.log(" [Frontend] No bills found")}else console.error(" [Frontend] API error:",Re.data.message),O(Re.data.message||"Failed to fetch bills")}catch(ie){console.error(" [Frontend] Failed to fetch bill payments:",ie),ie.response?(console.error(" [Frontend] Error response:",{status:ie.response.status,data:ie.response.data,headers:ie.response.headers}),ie.response.status===401?O("Session expired. Please log in again."):ie.response.status===403?O("Access denied. Please contact administrator."):ie.response.status===404?(O("No bill payments found for your account."),E([]),M([])):ie.response.data?.message?O(ie.response.data.message):O(`Server error: ${ie.response.status}`)):ie.request?(console.error(" [Frontend] No response received:",ie.request),O("Network error. Please check your internet connection.")):(console.error(" [Frontend] Request setup error:",ie.message),O("An unexpected error occurred: "+ie.message))}finally{R(!1)}};N.useEffect(()=>{he()},[ce.accessToken]),N.useEffect(()=>{w&&de()},[w]),N.useEffect(()=>{if(!S.length){M([]);return}let ie=[...S];Y.status!=="all"&&(ie=ie.filter(Re=>Re.payment_status===Y.status)),Y.month!=="all"&&(ie=ie.filter(Re=>Re.month===Y.month)),Y.year!=="all"&&(ie=ie.filter(Re=>Re.year.toString()===Y.year)),M(ie)},[S,Y]);const ne=ie=>{j(ie),$({status:"all",month:"all",year:new Date().getFullYear().toString()})},J=(ie,Re)=>{$(oe=>({...oe,[ie]:Re}))},z=()=>{$({status:"all",month:"all",year:new Date().getFullYear().toString()})},V=ie=>{switch(ie){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100"}},W=ie=>{switch(ie){case"Paid":return e.jsx(Nr,{size:16,className:"text-green-600 dark:text-green-400"});case"Partial":return e.jsx($r,{size:16,className:"text-blue-600 dark:text-blue-400"});case"Pending":return e.jsx(ns,{size:16,className:"text-yellow-600 dark:text-yellow-400"});default:return e.jsx(ns,{size:16,className:"text-gray-600 dark:text-gray-400"})}},se=["January","February","March","April","May","June","July","August","September","October","November","December"],le=[...new Set(S.map(ie=>ie.year))].filter(Boolean).sort((ie,Re)=>Re-ie),xe=(()=>{const ie=_.length,Re=_.reduce((te,Ie)=>te+(Ie.totalAmount||0),0),oe=_.reduce((te,Ie)=>te+(Ie.paidAmount||0),0),Ve=_.reduce((te,Ie)=>te+(Ie.pendingAmount||0),0);return{totalBills:ie,totalAmount:Re,paidAmount:oe,pendingAmount:Ve}})(),Le=ie=>{if(ie.isMock){alert("Download feature will be available when real bill data is connected.");return}alert("Download functionality coming soon!")},ye=ie=>{if(ie.isMock){alert("Payment feature will be available when real bill data is connected.");return}alert("Payment functionality coming soon!")};return I?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(el,{onCollapse:Q}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${P?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(tl,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your information..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(el,{onCollapse:Q}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${P?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(tl,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Va,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Bills"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your bills"})]})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(oN,{size:18,className:"text-yellow-600 dark:text-yellow-400 mr-2 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:[e.jsx("span",{className:"font-semibold",children:"Demo Mode:"})," Using sample bill data"]})]})})]}),L&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(vr,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:L})]})}),g.length>1&&e.jsxs("div",{className:"lg:hidden mb-4 bg-white dark:bg-gray-800 rounded-lg shadow p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 dark:text-white mb-2",children:"Select House to View Bills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((ie,Re)=>e.jsxs("button",{onClick:()=>ne(ie),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${w?.id===ie.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",Re+1]},ie.id))})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Current House Details"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nr,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.apartment_name}),e.jsx(xa,{size:18,className:"text-gray-500 dark:text-gray-400 ml-2"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["House ",w.house_id,", Floor ",w.floor_number]})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mt-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(qt,{size:18,className:"text-blue-600 dark:text-blue-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-1",children:"API Endpoint Required"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:["To enable real bill viewing, your backend needs to provide an endpoint like:",e.jsxs("code",{className:"block bg-blue-100 dark:bg-blue-900/40 p-2 rounded mt-2 text-xs",children:["GET /api/house-owner/bills/me ",e.jsx("br",{}),"or ",e.jsx("br",{}),"GET /api/bills/house/",w.id,"/owner"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:xe.totalBills})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Va,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:["$",xe.totalAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx($r,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paid Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:["$",xe.paidAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Nr,{size:20,className:"text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:["$",xe.pendingAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(ns,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Bills"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Od,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[_.length," of ",S.length," bills"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Payment Status"}),e.jsxs("select",{value:Y.status,onChange:ie=>J("status",ie.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Month"}),e.jsxs("select",{value:Y.month,onChange:ie=>J("month",ie.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Months"}),se.map(ie=>e.jsx("option",{value:ie,children:ie},ie))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Year"}),e.jsxs("select",{value:Y.year,onChange:ie=>J("year",ie.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Years"}),le.map(ie=>e.jsx("option",{value:ie,children:ie},ie))]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:z,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:G?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Va,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:S.length===0?"No bills have been generated for this house yet.":"No bills match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:_.map((ie,Re)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[ie.bill_name,ie.isMock&&e.jsx("span",{className:"ml-2 text-xs bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 px-2 py-0.5 rounded-full",children:"Sample"})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Type: ",ie.billtype]}),ie.description&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:ie.description})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[ie.month," ",ie.year]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due: ",new Date(ie.due_date).toLocaleDateString()]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Total: $",ie.totalAmount?.toFixed(2)||"0.00"]}),e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",ie.paidAmount?.toFixed(2)||"0.00"]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",ie.pendingAmount?.toFixed(2)||"0.00"]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[W(ie.payment_status),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-semibold rounded-full ${V(ie.payment_status)}`,children:ie.payment_status})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Le(ie),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg transition-colors",title:"Download Bill",children:e.jsx(Ii,{size:18})}),ie.payment_status==="Pending"&&e.jsx("button",{onClick:()=>ye(ie),className:"p-2 text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors flex items-center",title:"Pay Now",children:e.jsx(El,{size:18})})]})})]},ie.id||Re))})]})})})]}),g.length===0&&!L&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(xa,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function ek(){const[n,c]=N.useState([]),[d,h]=N.useState([]),[g,m]=N.useState(!0),[w,j]=N.useState(!1),[C,b]=N.useState(!1),[S,E]=N.useState(null),[_,M]=N.useState([]),[I,D]=N.useState(null),[G,R]=N.useState({title:"",description:"",apartment_id:"",floor_id:"",house_id:""}),[L,O]=N.useState({}),[P,Q]=N.useState({status:"all"}),[F,q]=N.useState({total:0,pending:0,resolved:0}),{auth:Y}=N.useContext(Ma),[$,ce]=N.useState(!1),he=async()=>{try{const le=await me.get("/houses/owner/me",{headers:{Authorization:`Bearer ${Y.accessToken}`}});if(le.data.success&&le.data.data.length>0){const K=le.data.data;if(M(K),K.length>0){const xe=K[0];D(xe),R(Le=>({...Le,apartment_id:xe.apartment_id,floor_id:xe.floor_id,house_id:xe.id}))}}}catch(le){console.error("Failed to fetch houses:",le)}},de=async()=>{try{m(!0);const le=await me.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${Y.accessToken}`},params:P});le.data.success&&(c(le.data.data||[]),h(le.data.data||[]),q(le.data.statistics||{total:0,pending:0,resolved:0}))}catch(le){console.error("Failed to fetch complaints:",le)}finally{m(!1)}};N.useEffect(()=>{Y.accessToken&&(he(),de())},[Y.accessToken,P]),N.useEffect(()=>{if(!n.length){h([]);return}let le=[...n];P.status!=="all"&&(le=le.filter(K=>K.status===P.status)),h(le)},[n,P]);const ne=async le=>{le.preventDefault();const K={};if(G.title.trim()||(K.title="Title is required"),G.description.trim()||(K.description="Description is required"),G.house_id||(K.house="Please select a house"),Object.keys(K).length>0){O(K);return}try{(await me.post("/complaints",{title:G.title,description:G.description,apartment_id:G.apartment_id,floor_id:G.floor_id,house_id:G.house_id},{headers:{Authorization:`Bearer ${Y.accessToken}`,"Content-Type":"application/json"}})).data.success&&(j(!1),z(),de())}catch(xe){console.error("Failed to create complaint:",xe),alert(xe.response?.data?.message||"Failed to create complaint")}},J=async(le,K)=>{try{(await me.patch(`/complaints/${le}/status`,{status:K},{headers:{Authorization:`Bearer ${Y.accessToken}`}})).data.success&&(de(),alert(`Complaint marked as ${K}!`),b(!1))}catch(xe){console.error("Failed to update status:",xe),alert(xe.response?.data?.message||"Failed to update status")}},z=()=>{R({title:"",description:"",apartment_id:I?.apartment_id||"",floor_id:I?.floor_id||"",house_id:I?.id||""}),O({})},V=le=>{D(le),R(K=>({...K,apartment_id:le.apartment_id,floor_id:le.floor_id,house_id:le.id}))},W=le=>{switch(le){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},se=le=>{E(le),b(!0)};return g&&!n.length?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(el,{onCollapse:ce}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${$?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(tl,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(el,{onCollapse:ce}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${$?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(tl,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(vr,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Complaints"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Report and track maintenance issues"})]})]}),e.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"File New Complaint"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:F.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(qt,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:F.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(ns,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:F.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Nr,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Od,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[d.length," of ",n.length," complaints"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:e.jsx("div",{children:e.jsxs("select",{value:P.status,onChange:le=>Q(K=>({...K,status:le.target.value})),className:"w-full px-3 py-2 text-sm border text-gray-500 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vr,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:n.length===0?"You haven't filed any complaints yet.":"No complaints match your filter criteria."}),n.length===0&&e.jsx("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"File Your First Complaint"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(le=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:le.complaint_number}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-1",children:le.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:le.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[le.apartment_name,"  Floor ",le.floor_number,"  House ",le.house_number]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${W(le.status)}`,children:le.status})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:new Date(le.created_at).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(le.created_at).toLocaleTimeString()})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>se(le),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Details",children:e.jsx(qt,{size:16})}),le.status==="In Progress"&&e.jsx("button",{onClick:()=>J(le.id,"Resolved"),className:"p-2 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 transition-colors hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg",title:"Resolved",children:e.jsx(Rl,{size:16})}),le.status==="Pending"&&e.jsx("button",{onClick:()=>J(le.id,"In Progress"),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"Mark as In Progress",children:e.jsx(ns,{size:16})})]})})]},le.id))})]})})})]})})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:S?"Edit Complaint":"File New Complaint"}),e.jsx("button",{onClick:()=>{j(!1),E(null),z()},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""})]}),_.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xa,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You don't have any houses assigned to file complaints for."})]}):e.jsxs("form",{onSubmit:ne,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select House *"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:_.map(le=>e.jsx("button",{type:"button",onClick:()=>V(le),className:`p-3 border rounded-lg text-left transition-all ${I?.id===le.id?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xa,{className:"text-gray-500 mr-2",size:16}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:["House ",le.house_id]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",le.floor_number,"  ",le.apartment_name]})]})]})},le.id))}),L.house&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:L.house})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Title *"}),e.jsx("input",{type:"text",value:G.title,onChange:le=>R(K=>({...K,title:le.target.value})),className:"w-full px-3 py-2 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Brief description of the issue"}),L.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:L.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Detailed Description *"}),e.jsx("textarea",{value:G.description,onChange:le=>R(K=>({...K,description:le.target.value})),rows:4,className:"w-full px-3 py-2 border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Please provide detailed information about the issue..."}),L.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:L.description})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{j(!1),E(null),z()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:S?"Update Complaint":"Submit Complaint"})]})]})]})})}),C&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Complaint Details"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:S.complaint_number}),e.jsx("span",{className:`ml-3 px-2 py-1 text-xs font-semibold rounded-full ${W(S.status)}`,children:S.status})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mt-2",children:S.title})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Location Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(nr,{className:"text-gray-400 mr-2",size:16}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:S.apartment_name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(xa,{className:"text-gray-400 mr-2",size:16}),e.jsxs("span",{className:"text-gray-900 dark:text-white",children:["Floor ",S.floor_number,"  House ",S.house_number]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Dates"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Filed: ",new Date(S.created_at).toLocaleString()]}),S.assigned_at&&e.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Assigned: ",new Date(S.assigned_at).toLocaleString()]}),S.resolved_at&&e.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Resolved: ",new Date(S.resolved_at).toLocaleString()]})]})})]})]}),S.assigned_to_name&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Assigned Technician"}),e.jsxs("div",{className:"flex items-center bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[e.jsx(Vs,{className:"text-blue-600 dark:text-blue-400 mr-3",size:18}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:S.assigned_to_name}),S.assignment_notes&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Note: ",S.assignment_notes]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Description"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap",children:S.description})})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Update Status"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.status==="Resolved"&&e.jsx("button",{onClick:()=>J(S.id,"Closed"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"Confirm Resolution & Close"}),S.status==="Pending"&&e.jsx("button",{onClick:()=>J(S.id,"In Progress"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Mark as In Progress"}),S.status==="In Progress"&&e.jsx("button",{onClick:()=>J(S.id,"Resolved"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Mark as Confirmed"}),S.status==="Closed"&&e.jsx("button",{onClick:()=>J(S.id,"Pending"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm",children:"Reopen Complaint"}),S.status==="Resolved"&&e.jsx("button",{onClick:()=>J(S.id,"In Progress"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Issue Not Resolved"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Close"})})]})})})]})}function tk(){const[n,c]=N.useState(!1),[d,h]=N.useState([]),[g,m]=N.useState([]),[w,j]=N.useState(!0),[C,b]=N.useState(!1),[S,E]=N.useState(null),[_,M]=N.useState([]),[I,D]=N.useState(null),[G,R]=N.useState(""),[L,O]=N.useState(""),[P,Q]=N.useState({status:"all",apartment_id:"all",assigned:"all"}),[F,q]=N.useState({total:0,pending:0,in_progress:0,resolved:0}),{auth:Y}=N.useContext(Ma),[$,ce]=N.useState(["General","Water","Electricity","Gas"]),[he,de]=N.useState(""),[ne,J]=N.useState(!1),[z,V]=N.useState([]),[W,se]=N.useState({}),le=async()=>{try{J(!0);const te=await me.get("/apartments");if(te.data.success){V(te.data.data||[]);const Ie={};te.data.data.forEach($e=>{Ie[$e.id]=$e.name}),se(Ie)}}catch(te){console.error("Error loading apartments:",te),toast.error("Failed to load apartments")}finally{J(!1)}};N.useEffect(()=>{le()},[]);const K=async()=>{try{j(!0);const te=await me.get("/complaints",{headers:{Authorization:`Bearer ${Y.accessToken}`},params:P});if(te.data.success){const Ie=te.data.data||[];if(h(Ie),m(Ie),Le(Ie),Ie.length>0){const $e=[...new Set(Ie.map(rt=>rt.category).filter(rt=>rt&&rt.trim()!=="").sort())];$e.includes("General")||$e.unshift("General"),ce($e)}}}catch(te){console.error("Failed to fetch complaints:",te)}finally{j(!1)}},xe=async(te="")=>{try{const Ie={};te&&(Ie.category=te);const $e=await me.get("/complaints/technicians/category",{headers:{Authorization:`Bearer ${Y.accessToken}`},params:Ie});if($e.data.success){const rt=$e.data.data.map(Ke=>({...Ke,name:Ke.name||`${Ke.firstname||""} ${Ke.lastname||""}`.trim()}));M(rt)}}catch(Ie){console.error("Failed to fetch technicians:",Ie)}};N.useEffect(()=>{Y.accessToken&&(K(),xe())},[Y.accessToken,P]),N.useEffect(()=>{if(!d.length){m([]);return}let te=[...d];if(L){const Ie=L.toLowerCase();te=te.filter($e=>$e.complaint_number.toLowerCase().includes(Ie)||$e.title.toLowerCase().includes(Ie)||$e.houseowner_name&&$e.houseowner_name.toLowerCase().includes(Ie)||$e.apartment_name&&$e.apartment_name.toLowerCase().includes(Ie))}P.status!=="all"&&(te=te.filter(Ie=>Ie.status===P.status)),P.apartment_id!=="all"&&(te=te.filter(Ie=>Ie.apartment_id===P.apartment_id)),P.assigned!=="all"&&(P.assigned==="assigned"?te=te.filter(Ie=>Ie.assigned_to):P.assigned==="unassigned"&&(te=te.filter(Ie=>!Ie.assigned_to))),m(te)},[d,L,P]);const Le=te=>{const Ie=te.length,$e=te.filter(et=>et.status==="Pending").length,rt=te.filter(et=>et.status==="In Progress").length,Ke=te.filter(et=>et.status==="Resolved"||et.status==="Closed").length;q({total:Ie,pending:$e,in_progress:rt,resolved:Ke})},ye=te=>{switch(te){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};N.useEffect(()=>{if(d.length>0){const te=[...new Set(d.map(Ie=>Ie.category).filter(Ie=>Ie&&Ie.trim()!=="").sort())];te.length>0&&!te.includes("General")&&te.unshift("General"),te.length>0&&ce(te)}},[d]);const ie=te=>{E(te),D(null),R("");const Ie=te.category||"General";de(Ie),xe(Ie),b(!0)},Re=async()=>{if(!I){alert("Please select a technician");return}try{(await me.patch(`/complaints/${S.id}/assign`,{technician_id:I.id,assignment_note:G},{headers:{Authorization:`Bearer ${Y.accessToken}`}})).data.success&&(b(!1),K(),alert("Complaint assigned successfully!"))}catch(te){console.error("Failed to assign complaint:",te),alert(te.response?.data?.message||"Failed to assign complaint")}},oe=async(te,Ie)=>{try{(await me.patch(`/complaints/${te}/status`,{status:Ie},{headers:{Authorization:`Bearer ${Y.accessToken}`}})).data.success&&(K(),alert("Status updated successfully!"))}catch($e){console.error("Failed to update status:",$e),alert($e.response?.data?.message||"Failed to update status")}},Ve=te=>{switch((te||"").toLowerCase()){case"water":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"electricity":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"gas":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"general":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return w?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(ua,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ka,{}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(vr,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"All Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage and assign complaints to technicians"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:F.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(qt,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:F.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(ns,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:F.in_progress})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(u1,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:F.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Nr,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter & Search Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Od,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g.length," of ",d.length," complaints"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Or,{className:"absolute left-3 top-1/3 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:L,onChange:te=>O(te.target.value),placeholder:"Search by complaint number, title, or house owner...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-500"})]}),e.jsx("div",{children:e.jsxs("select",{value:P.status,onChange:te=>Q(Ie=>({...Ie,status:te.target.value})),className:"w-full px-3 py-2 text-sm border text-gray-500 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsxs("select",{value:P.apartment_id,onChange:te=>Q(Ie=>({...Ie,apartment_id:te.target.value})),className:"w-full px-3 py-2 text-sm border text-gray-500 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Apartments"}),z.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Assignment Status"}),e.jsxs("select",{value:P.assigned,onChange:te=>Q(Ie=>({...Ie,assigned:te.target.value})),className:"w-full px-3 py-2 text-sm text-gray-500 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Complaints"}),e.jsx("option",{value:"assigned",children:"Assigned Only"}),e.jsx("option",{value:"unassigned",children:"Unassigned Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Category"}),e.jsxs("select",{value:P.category||"all",onChange:te=>Q(Ie=>({...Ie,category:te.target.value})),className:"w-full px-3 py-2 text-sm text-gray-500 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Categories"}),$.map(te=>e.jsx("option",{value:te,children:te},te))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{O(""),Q({status:"all",apartment_id:"all",assigned:"all"})},className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:g.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vr,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:d.length===0?"No complaints have been filed yet.":"No complaints match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Assigned To"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:g.map(te=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:te.complaint_number}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-1",children:te.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:te.description}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ve(te.category)}`,children:te.category||"General"})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["By: ",te.houseowner_name||"Unknown"]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:te.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",te.floor_number,"  House ",te.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ye(te.status)}`,children:te.status})}),e.jsx("td",{className:"px-4 py-4",children:te.assigned_to_name?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cr,{size:14,className:"text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:te.assigned_to_name})]}):e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"Not assigned"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ie(te),className:"p-2 text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-colors hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg",title:"Assign to Technician",children:e.jsx(qa,{size:16})}),te.status==="In Progress"&&e.jsx("button",{onClick:()=>oe(te.id,"Resolved"),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"Mark as Resolved",children:e.jsx(ns,{size:16})}),te.status==="Resolved"&&e.jsx("button",{onClick:()=>oe(te.id,"Closed"),className:"p-2 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 transition-colors hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg",title:"Mark as Closed",children:e.jsx(Rl,{size:16})})]})})]},te.id))})]})})})]}),C&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assign Complaint"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:[S.complaint_number,": ",S.title]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:["Location: ",S.apartment_name,", Floor ",S.floor_number,", House ",S.house_number]}),e.jsxs("p",{children:["Submitted by: ",S.houseowner_name]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("span",{className:"mr-2",children:"Category:"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ve(S.category||"General")}`,children:S.category||"General"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Category"}),e.jsxs("select",{value:he,onChange:te=>{de(te.target.value),xe(te.target.value),D(null)},className:"w-full px-3 py-2 border text-gray-500 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"General",children:"General"}),e.jsx("option",{value:"Water",children:"Water"}),e.jsx("option",{value:"Electricity",children:"Electricity"}),e.jsx("option",{value:"Gas",children:"Gas"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Technician *"}),_.length===0?e.jsxs("div",{className:"text-center py-4 border border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx(Cr,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["No technicians available for ",he]}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Add technicians in the Users section first"})]}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:_.map(te=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${I?.id===te.id?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,onClick:()=>D(te),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:te.name||`${te.firstname} ${te.lastname}`}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[te.role_name||te.role,te.specialization?`  ${te.specialization}`:""]}),te.mobile&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[" ",te.mobile]})]}),I?.id===te.id&&e.jsx(Rl,{className:"text-purple-600 dark:text-purple-400",size:20})]})},te.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assignment Note (Optional)"}),e.jsx("textarea",{value:G,onChange:te=>R(te.target.value),rows:3,className:"w-full px-3 py-2 border text-gray-500 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Add any specific instructions or notes for the technician..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:Re,disabled:!I,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Assign Complaint"})]})]})})})]})]})]})}function ak(){const[n,c]=N.useState([]),[d,h]=N.useState(!0),[g,m]=N.useState(""),[w,j]=N.useState(!1),[C,b]=N.useState(!1),[S,E]=N.useState({status:"all"}),[_,M]=N.useState({total:0,pending:0,in_progress:0,resolved:0}),{auth:I}=N.useContext(Ma),D=Gt(),G=async()=>{try{h(!0);const F=await me.get("/complaints/my-complaints/technician",{headers:{Authorization:`Bearer ${I.accessToken}`},params:S});F.data.success?(c(F.data.data||[]),F.data.statistics&&M(F.data.statistics)):(console.error("Failed to load complaints:",F.data.message),c([]))}catch(F){console.error("Error fetching complaints:",F),c([])}finally{h(!1)}};N.useEffect(()=>{I?.accessToken&&G()},[I?.accessToken,S]);const R=n.filter(F=>F.complaint_number?.toLowerCase().includes(g.toLowerCase())||F.title?.toLowerCase().includes(g.toLowerCase())||F.description?.toLowerCase().includes(g.toLowerCase())||F.houseowner_name?.toLowerCase().includes(g.toLowerCase())),L=F=>{try{return new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},O=F=>{switch(F){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},P=F=>{switch(F?.toLowerCase()){case"electrical":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"plumbing":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"carpentry":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"painting":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"cleaning":return"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300";case"security":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},Q=F=>{D(`/complaints/${F}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(ua,{onCollapse:j})}),C&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>b(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${C?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(ua,{onCollapse:j})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${w?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ka,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(vr,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Complaints assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:_.total})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(vr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all complaints assigned to you"})]})]}),e.jsxs("div",{className:"flex space-x-6 text-right",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:_.total})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:_.in_progress})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:_.pending})]})]})]}),e.jsxs("div",{className:"lg:hidden grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:_.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(vr,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:_.in_progress})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(u1,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Or,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search complaints by number, title, or house owner...",value:g,onChange:F=>m(F.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{children:e.jsxs("select",{value:S.status,onChange:F=>E(q=>({...q,status:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"})]})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):R.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vr,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:g?"No matching complaints found":"No complaints assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:g?"Try adjusting your search terms":"You have not been assigned to any complaints yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:R.map(F=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(vr,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base",children:F.complaint_number}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1 truncate",children:F.title}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O(F.status)}`,children:F.status}),F.category&&e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${P(F.category)}`,children:F.category})]})]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(_i,{size:14,className:"mr-2"}),e.jsxs("span",{children:[F.apartment_name||"Unknown","  Floor ",F.floor_number,"  House ",F.house_number]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(Cr,{size:14,className:"mr-2"}),e.jsxs("span",{children:["House Owner: ",F.houseowner_name||"Unknown"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:F.description})}),e.jsxs("div",{className:"flex justify-between items-center border-t border-gray-200 dark:border-gray-600 pt-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created: ",L(F.created_at)]}),F.assigned_at&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",L(F.assigned_at)]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>Q(F.id),className:"px-3 py-1 bg-purple-600 text-white text-xs rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:["View",e.jsx(Ai,{size:12,className:"ml-1"})]})})]})]},F.id))}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:R.map(F=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:F.complaint_number}),e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white mt-1",children:F.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:F.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["House Owner: ",F.houseowner_name||"Unknown"]}),F.category&&e.jsx("span",{className:`mt-2 inline-block px-2 py-1 text-xs font-medium rounded-full ${P(F.category)}`,children:F.category})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:F.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",F.floor_number,"  House ",F.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O(F.status)}`,children:F.status})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:L(F.created_at)}),F.assigned_at&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",L(F.assigned_at)]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>Q(F.id),className:"px-3 py-1 bg-purple-600 text-white text-xs rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:["View Details",e.jsx(Ai,{size:12,className:"ml-1"})]})})})]},F.id))})]})})]})}),R.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(Or,{size:20})})})]})})]})]})}function rk(){return e.jsx(j2,{children:e.jsx(cv,{children:e.jsxs(Jb,{children:[e.jsx(St,{path:"/",element:e.jsx(D2,{})}),e.jsx(St,{path:"/login",element:e.jsx(D4,{})}),e.jsx(St,{path:"/register",element:e.jsx(R4,{})}),e.jsx(St,{path:"/verify",element:e.jsx(I4,{})}),e.jsx(St,{path:"/sidebar",element:e.jsx(wN,{})}),e.jsx(St,{path:"/navbar",element:e.jsx(ka,{})}),e.jsx(St,{path:"/admindashboard",element:e.jsx(O4,{})}),e.jsx(St,{path:"/apartmentview",element:e.jsx(F4,{})}),e.jsx(St,{path:"/userview",element:e.jsx($4,{})}),e.jsx(St,{path:"/floors/:id",element:e.jsx(K4,{})}),e.jsx(St,{path:"/houses/:apartment_id/:floor_id",element:e.jsx(L3,{})}),e.jsx(St,{path:"/housetype/:apartment_id",element:e.jsx(w1,{})}),e.jsx(St,{path:"/viewhouse/:apartment_id/:floor_id/:id",element:e.jsx(s3,{})}),e.jsx(St,{path:"/bills/:apartment_id",element:e.jsx(j1,{})}),e.jsx(St,{path:"/reset-password",element:e.jsx(z3,{})}),e.jsx(St,{path:"/forgot-password",element:e.jsx(P3,{})}),e.jsx(St,{path:"/complete-registration",element:e.jsx(F3,{})}),e.jsx(St,{path:"/manage-bills",element:e.jsx(U3,{})}),e.jsx(St,{path:"/bills-and-calculations",element:e.jsx(Y3,{})}),e.jsx(St,{path:"/billranges/:bill_id",element:e.jsx(Z3,{})}),e.jsx(St,{path:"/billprice/:bill_id/:billrange_id",element:e.jsx(K3,{})}),e.jsx(St,{path:"/employee-dashboard",element:e.jsx(J3,{})}),e.jsx(St,{path:"/role",element:e.jsx(b1,{})}),e.jsx(St,{path:"/profile-page",element:e.jsx(ej,{})}),e.jsx(St,{path:"/my-apartments",element:e.jsx(tj,{})}),e.jsx(St,{path:"/shared-value-bill-prices/:bill_id",element:e.jsx(rj,{})}),e.jsx(St,{path:"/bill-payments",element:e.jsx(sj,{})}),e.jsx(St,{path:"/measurable-bills",element:e.jsx(B1,{})}),e.jsx(St,{path:"/calculate-measurable-bill/:bill_id",element:e.jsx(Gj,{})}),e.jsx(St,{path:"/my-bills",element:e.jsx(Yj,{})}),e.jsx(St,{path:"/house-bill-meter/:bill_id",element:e.jsx(Xj,{})}),e.jsx(St,{path:"/bill-payment-settle",element:e.jsx($j,{})}),e.jsx(St,{path:"/houseowner/login",element:e.jsx(Zj,{})}),e.jsx(St,{path:"/houseowner/verify",element:e.jsx(Wj,{})}),e.jsx(St,{path:"/houseowner/dashboard",element:e.jsx(Qj,{})}),e.jsx(St,{path:"/houseowner/houseowner-houseview",element:e.jsx(Kj,{})}),e.jsx(St,{path:"/houseowner/houseowner-billview",element:e.jsx(Jj,{})}),e.jsx(St,{path:"/houseowner/complaints",element:e.jsx(ek,{})}),e.jsx(St,{path:"/view-complaints",element:e.jsx(tk,{})}),e.jsx(St,{path:"/my-complaints",element:e.jsx(ak,{})})]})})})}function sk(){const[n,c]=N.useState(null);return e.jsx(Ma.Provider,{value:{auth:n,setAuth:c},children:e.jsx(rk,{})})}cb.createRoot(document.getElementById("root")).render(e.jsx(sk,{}));export{h3 as _,od as c,Cd as g};
